!function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=4)}([function(e,n,t){window.crl8=window.crl8||{},t(1);var r=t(2).default;window.crl8.metrics=window.crl8.metrics||new r,crl8.EventBus.addEventListener("initializeCuralatePixel",function(e){var n=e.pixelId,r=!!e.useDebug&&e.useDebug;window.crl8.pixel=window.crl8.pixel||{},window.crl8.pixel.q=window.crl8.pixel.q||[];var i=[["init",n,r]].concat(window.crl8.pixel.q);window.crl8.pixel=t(3).default(i)})},function(module,exports){!function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(n){return e[n]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s="./index.ts")}({"./index.ts":/*!******************!*\
  !*** ./index.ts ***!
  \******************/
/*! no exports provided */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var promise_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! promise/polyfill */ "./node_modules/promise/polyfill.js");\n/* harmony import */ var promise_polyfill__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(promise_polyfill__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var whatwg_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! whatwg-fetch */ "./node_modules/whatwg-fetch/fetch.js");\n/* harmony import */ var _bootloader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bootloader */ "./src/bootloader.ts");\n// Polyfills\n\n\n\n// init main bootloader code\n\n\n\n//# sourceURL=webpack:///./index.ts?')},"./node_modules/asap/browser-asap.js":/*!*******************************************!*\
  !*** ./node_modules/asap/browser-asap.js ***!
  \*******************************************/
/*! no static exports found */
function(module,exports,__webpack_require__){"use strict";eval('\n\n// rawAsap provides everything we need except exception management.\nvar rawAsap = __webpack_require__(/*! ./raw */ "./node_modules/asap/browser-raw.js");\n// RawTasks are recycled to reduce GC churn.\nvar freeTasks = [];\n// We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n    if (pendingErrors.length) {\n        throw pendingErrors.shift();\n    }\n}\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawAsap(rawTask);\n}\n\n// We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\nfunction RawTask() {\n    this.task = null;\n}\n\n// The sole purpose of wrapping the task is to catch the exception and recycle\n// the task object after its single use.\nRawTask.prototype.call = function () {\n    try {\n        this.task.call();\n    } catch (error) {\n        if (asap.onerror) {\n            // This hook exists purely for testing purposes.\n            // Its name will be periodically randomized to break any code that\n            // depends on its existence.\n            asap.onerror(error);\n        } else {\n            // In a web browser, exceptions are not fatal. However, to avoid\n            // slowing down the queue of pending tasks, we rethrow the error in a\n            // lower priority turn.\n            pendingErrors.push(error);\n            requestErrorThrow();\n        }\n    } finally {\n        this.task = null;\n        freeTasks[freeTasks.length] = this;\n    }\n};\n\n\n//# sourceURL=webpack:///./node_modules/asap/browser-asap.js?')},"./node_modules/asap/browser-raw.js":/*!******************************************!*\
  !*** ./node_modules/asap/browser-raw.js ***!
  \******************************************/
/*! no static exports found */
function(module,exports,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function(global) {\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser\'s own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don\'t\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== "undefined" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === "function") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser\'s renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on("uncaughtException")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between "1" and "-1".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode("");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page\'s first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don\'t need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we\'re flushing, there\'s no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))\n\n//# sourceURL=webpack:///./node_modules/asap/browser-raw.js?')},"./node_modules/deepmerge/dist/umd.js":/*!********************************************!*\
  !*** ./node_modules/deepmerge/dist/umd.js ***!
  \********************************************/
/*! no static exports found */
function(module,exports,__webpack_require__){eval("(function (global, factory) {\n\t true ? module.exports = factory() :\n\tundefined;\n}(this, (function () { 'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nreturn deepmerge_1;\n\n})));\n\n\n//# sourceURL=webpack:///./node_modules/deepmerge/dist/umd.js?")},"./node_modules/promise/lib/core.js":/*!******************************************!*\
  !*** ./node_modules/promise/lib/core.js ***!
  \******************************************/
/*! no static exports found */
function(module,exports,__webpack_require__){"use strict";eval("\n\nvar asap = __webpack_require__(/*! asap/raw */ \"./node_modules/asap/browser-raw.js\");\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('not a function');\n  }\n  this._45 = 0;\n  this._81 = 0;\n  this._65 = null;\n  this._54 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._10 = null;\nPromise._97 = null;\nPromise._61 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n};\nfunction handle(self, deferred) {\n  while (self._81 === 3) {\n    self = self._65;\n  }\n  if (Promise._10) {\n    Promise._10(self);\n  }\n  if (self._81 === 0) {\n    if (self._45 === 0) {\n      self._45 = 1;\n      self._54 = deferred;\n      return;\n    }\n    if (self._45 === 1) {\n      self._45 = 2;\n      self._54 = [self._54, deferred];\n      return;\n    }\n    self._54.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._81 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._81 === 1) {\n        resolve(deferred.promise, self._65);\n      } else {\n        reject(deferred.promise, self._65);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._65);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._81 = 3;\n      self._65 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._81 = 1;\n  self._65 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._81 = 2;\n  self._65 = newValue;\n  if (Promise._97) {\n    Promise._97(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._45 === 1) {\n    handle(self, self._54);\n    self._54 = null;\n  }\n  if (self._45 === 2) {\n    for (var i = 0; i < self._54.length; i++) {\n      handle(self, self._54[i]);\n    }\n    self._54 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  })\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/promise/lib/core.js?")},"./node_modules/promise/lib/es6-extensions.js":/*!****************************************************!*\
  !*** ./node_modules/promise/lib/es6-extensions.js ***!
  \****************************************************/
/*! no static exports found */
function(module,exports,__webpack_require__){"use strict";eval("\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = __webpack_require__(/*! ./core.js */ \"./node_modules/promise/lib/core.js\");\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._61);\n  p._81 = 1;\n  p._65 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._81 === 3) {\n            val = val._65;\n          }\n          if (val._81 === 1) return res(i, val._65);\n          if (val._81 === 2) reject(val._65);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n\n//# sourceURL=webpack:///./node_modules/promise/lib/es6-extensions.js?")},"./node_modules/promise/polyfill-done.js":/*!***********************************************!*\
  !*** ./node_modules/promise/polyfill-done.js ***!
  \***********************************************/
/*! no static exports found */
function(module,exports){eval("// should work in any browser without browserify\n\nif (typeof Promise.prototype.done !== 'function') {\n  Promise.prototype.done = function (onFulfilled, onRejected) {\n    var self = arguments.length ? this.then.apply(this, arguments) : this\n    self.then(null, function (err) {\n      setTimeout(function () {\n        throw err\n      }, 0)\n    })\n  }\n}\n\n//# sourceURL=webpack:///./node_modules/promise/polyfill-done.js?")},"./node_modules/promise/polyfill.js":/*!******************************************!*\
  !*** ./node_modules/promise/polyfill.js ***!
  \******************************************/
/*! no static exports found */
function(module,exports,__webpack_require__){eval('// not "use strict" so we can declare global "Promise"\n\nvar asap = __webpack_require__(/*! asap */ "./node_modules/asap/browser-asap.js");\n\nif (typeof Promise === \'undefined\') {\n  Promise = __webpack_require__(/*! ./lib/core.js */ "./node_modules/promise/lib/core.js")\n  __webpack_require__(/*! ./lib/es6-extensions.js */ "./node_modules/promise/lib/es6-extensions.js")\n}\n\n__webpack_require__(/*! ./polyfill-done.js */ "./node_modules/promise/polyfill-done.js");\n\n\n//# sourceURL=webpack:///./node_modules/promise/polyfill.js?')},"./node_modules/webpack/buildin/global.js":/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
function(module,exports){eval('var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function("return this")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === "object") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it\'s\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack:///(webpack)/buildin/global.js?')},"./node_modules/whatwg-fetch/fetch.js":/*!********************************************!*\
  !*** ./node_modules/whatwg-fetch/fetch.js ***!
  \********************************************/
/*! exports provided: Headers, Request, Response, DOMException, fetch */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Headers\", function() { return Headers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Request\", function() { return Request; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Response\", function() { return Response; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DOMException\", function() { return DOMException; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fetch\", function() { return fetch; });\nvar support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nfunction Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nfunction Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nfunction Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nvar DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nfunction fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n\n\n//# sourceURL=webpack:///./node_modules/whatwg-fetch/fetch.js?")},"./src/bootloader.ts":/*!***************************!*\
  !*** ./src/bootloader.ts ***!
  \***************************/
/*! no exports provided */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! deepmerge */ "./node_modules/deepmerge/dist/umd.js");\n/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(deepmerge__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @constants/containerAttributes */ "./src/constants/containerAttributes.ts");\n/* harmony import */ var _constants_endpoints__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @constants/endpoints */ "./src/constants/endpoints.ts");\n/* harmony import */ var _constants_eventBusEvents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @constants/eventBusEvents */ "./src/constants/eventBusEvents.ts");\n/* harmony import */ var _constants_params__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @constants/params */ "./src/constants/params.ts");\n/* harmony import */ var _curalateGlobals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @curalateGlobals */ "./src/curalate.globals.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @errors */ "./src/errors.ts");\n/* harmony import */ var _eventBus__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @eventBus */ "./src/eventBus.ts");\n/* harmony import */ var _experienceMutationObserver__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @experienceMutationObserver */ "./src/experienceMutationObserver.ts");\n/* harmony import */ var _utils_bootloaderUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @utils/bootloaderUtils */ "./src/utils/bootloaderUtils.ts");\n/* harmony import */ var _utils_mergeUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @utils/mergeUtils */ "./src/utils/mergeUtils.ts");\n/* harmony import */ var _utils_lazyLoadUtils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @utils/lazyLoadUtils */ "./src/utils/lazyLoadUtils.ts");\n/* harmony import */ var _utils_permalinkUtils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @utils/permalinkUtils */ "./src/utils/permalinkUtils.ts");\n/* harmony import */ var _siteInfo__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @siteInfo */ "./src/siteInfo.ts");\nfunction _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // eslint-disable-next-line no-use-before-define\n\nvar queryParams = processQueryParams(_curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].location.search);\nvar experienceOptionsByContainerId = {};\nvar experienceOptionsByExperienceName = {};\nvar experienceConstructorPromises = {};\nvar experiencesByContainerId = {};\nvar lazyLoadExperienceObserver; // Default container ID to experience name mapper. This may be overridden by firing\n// the registerContainerMapper event and passing a new mapping function with the event.\n\nvar containerMapper = function containerMapper(containerId) {\n  return Promise.resolve(containerId);\n};\n/*\n  ============= Private Functions =============\n*/\n\n\nfunction getBasePath(experienceName) {\n  var version = queryParams.versionMap[experienceName] || \'latest\';\n  var siteName = Object(_siteInfo__WEBPACK_IMPORTED_MODULE_13__["getSiteName"])();\n  var cdnOverride = _curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8 && _curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8[siteName] && _curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8[siteName].bootloader && _curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8[siteName].bootloader && _curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8[siteName].bootloader.cdnPath;\n  var CDN_PATH = queryParams.shouldSkipCDN ? _constants_endpoints__WEBPACK_IMPORTED_MODULE_2__["default"].SITES_S3 : cdnOverride || _constants_endpoints__WEBPACK_IMPORTED_MODULE_2__["default"].SITES_CDN;\n  return "".concat(CDN_PATH + siteName, "/experiences/").concat(experienceName, "/").concat(version, "/");\n}\n\nfunction getAssetsPath(experienceName) {\n  return "".concat(getBasePath(experienceName), "assets/");\n}\n\nfunction getScriptPath(experienceName) {\n  return getBasePath(experienceName) + (_curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8.debug ? \'experience.js\' : \'experience.min.js\');\n}\n\nfunction getPermalink(containerId) {\n  var siteName = Object(_siteInfo__WEBPACK_IMPORTED_MODULE_13__["getSiteName"])();\n  return queryParams.permalinkMap[siteName] && queryParams.permalinkMap[siteName][containerId] || {};\n}\n\nfunction getExperienceConstructor(experienceName) {\n  if (experienceConstructorPromises[experienceName]) {\n    return experienceConstructorPromises[experienceName];\n  }\n\n  experienceConstructorPromises[experienceName] = _utils_bootloaderUtils__WEBPACK_IMPORTED_MODULE_9__["default"].fetchScript(getScriptPath(experienceName)).then(function () {\n    return experienceConstructorPromises[experienceName];\n  });\n  return experienceConstructorPromises[experienceName];\n}\n\nfunction createExperienceInstance(containerId, elem) {\n  var optionsToCreateExperience = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var siteName = Object(_siteInfo__WEBPACK_IMPORTED_MODULE_13__["getSiteName"])();\n  var containerSelector = optionsToCreateExperience.containerSelector,\n      _optionsToCreateExper = optionsToCreateExperience.isMutationObserverInit,\n      isMutationObserverInit = _optionsToCreateExper === void 0 ? false : _optionsToCreateExper,\n      _optionsToCreateExper2 = optionsToCreateExperience.optionsOverrides,\n      optionsOverrides = _optionsToCreateExper2 === void 0 ? {} : _optionsToCreateExper2;\n\n  if (!siteName) {\n    Object(_errors__WEBPACK_IMPORTED_MODULE_6__["throwError"])("Site name has not been set. Experience ".concat(containerId, " cannot be created until the site name has been set."));\n  }\n\n  if (!containerId) {\n    return Promise.reject({\n      message: Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])(\'Cannot initialize experience with undefined containerId.\')\n    });\n  }\n\n  if (experiencesByContainerId[containerId]) {\n    /*\n      isMutationObserverInit is true when the source of experience\n      initialization is the experience mutation observer callback\n       Error thrown when initialization source is either:\n        - not from the mutation observer callback\n        - from the mutation observer callback and in debug mode\n      \n      Initialization attempts coming from lazy loaded experiences set up by the mutation observer\n      callback will not have the isMutationObserverInit set to true and will throw an error because\n      the intersection observer will have no knowledge of the isMutationObserverInit flag\n    */\n    if (!isMutationObserverInit || isMutationObserverInit && _curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8 && _curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8.debug) {\n      return Promise.reject({\n        containerSelector: containerSelector,\n        message: Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("Cannot initialize experience for container ".concat(containerSelector, ". It already has been initialized."))\n      });\n    }\n\n    return Promise.resolve();\n  } // This will only happen if we\'re passed a containerId and can\'t find the element on the page.\n\n\n  if (!elem) {\n    return Promise.reject({\n      containerSelector: containerSelector,\n      message: Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("Cannot initialize experience for container ".concat(containerSelector, ". The element cannot be found on the page."))\n    });\n  }\n\n  var experienceNameForContainerPromise = queryParams.experienceMap[containerId] ? Promise.resolve(queryParams.experienceMap[containerId]) : containerMapper(containerId);\n  var newExperience = {\n    containerId: containerId,\n    elem: elem,\n    destroyed: false,\n    // in case we destroy the experience before we finish creating it\n    experienceName: null,\n    // populated once we know the name of the experience to load for this container\n    experienceNamePromise: experienceNameForContainerPromise,\n    instance: null,\n    // populated once the instance is created\n    instancePromise: null // populated below\n\n  };\n  experiencesByContainerId[containerId] = newExperience;\n  newExperience.instancePromise = experienceNameForContainerPromise.then(function (experienceName) {\n    newExperience.experienceName = experienceName;\n    return getExperienceConstructor(experienceName).then(function (ExperienceConstructor) {\n      // This experience may have been destroyed before it finished fetching the constructor.\n      if (newExperience.destroyed) {\n        return Promise.reject();\n      } // This will be true if the experience script does not fire experienceConstructorReady with a valid constructor.\n\n\n      if (typeof ExperienceConstructor !== \'function\') {\n        return Promise.reject({\n          containerId: containerId,\n          experienceName: experienceName,\n          message: "Curalate: Could not load experience ".concat(experienceName, " for container ").concat(containerId, ".")\n        });\n      } // Deep Merge all of the options sources into one options object.\n\n\n      var options = deepmerge__WEBPACK_IMPORTED_MODULE_0___default.a.all([experienceOptionsByExperienceName[experienceName] || {}, experienceOptionsByContainerId[containerId] || {}, optionsOverrides || {}, {\n        assetPath: getAssetsPath(experienceName)\n      } || {}, queryParams.optionsOverridesMap[containerId] || {}, {\n        permalink: getPermalink(containerId)\n      } || {}], {\n        arrayMerge: _utils_mergeUtils__WEBPACK_IMPORTED_MODULE_10__["default"]\n      }); // The magic moment when the experience is actually created.\n\n      newExperience.instance = new ExperienceConstructor(elem, options); // dispatch event with new Experience so that pages with auto-initialized Experiences can know when they are ready\n\n      _curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8.EventBus.dispatchEvent(_constants_eventBusEvents__WEBPACK_IMPORTED_MODULE_3__["default"].EXPERIENCE_READY, newExperience);\n      return Promise.resolve(newExperience.instance);\n    }).catch(function (error) {\n      return Promise.reject({\n        containerSelector: containerSelector,\n        experienceName: experienceName,\n        message: "Curalate: Could not load experience ".concat(experienceName, " for container ").concat(containerId, ". ").concat(error),\n        error: error\n      });\n    });\n  });\n  return newExperience.instancePromise;\n}\n\nfunction createExperienceWithOptionsInstance(containerId, elem, containerSelector, optionsOverrides) {\n  return createExperienceInstance(containerId, elem, {\n    containerSelector: containerSelector,\n    optionsOverrides: optionsOverrides\n  });\n}\n\nfunction handleLazyLoadExperienceIntersection(entry, observer) {\n  if (entry.isIntersecting) {\n    var _containerId = entry.target.getAttribute(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].CONTAINER_ID) || entry.target.getAttribute(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].DATA_CONTAINER_ID);\n\n    createExperienceInstance(_containerId, entry.target);\n    observer.unobserve(entry.target);\n  }\n}\n/*\n  isDataContainer param is used to determine checking for the data- vs non-data-\n  attribute to enforce matching attribute types on experience containers\n*/\n\n\nfunction isAutoInitExperience(containerInfo) {\n  var elem = containerInfo.elem,\n      isDataContainer = containerInfo.isDataContainer;\n  var autoInitAttribute = isDataContainer ? _constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].DATA_AUTO_INIT : _constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].AUTO_INIT;\n  return !(elem.getAttribute(autoInitAttribute) === \'false\');\n}\n/*\n  isDataContainer param is used to determine checking for the data- vs non-data-\n  attribute to enforce matching attribute types on experience containers \n*/\n\n\nfunction isLazyLoadExperience(containerInfo) {\n  var elem = containerInfo.elem,\n      isDataContainer = containerInfo.isDataContainer;\n  var lazyLoadAttribute = isDataContainer ? _constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].DATA_LAZY_LOAD : _constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].LAZY_LOAD;\n  return elem.getAttribute(lazyLoadAttribute) === \'true\';\n}\n\nfunction handleExperienceInitialization(elem, isMutationObserverInit) {\n  var containerId = elem.getAttribute(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].CONTAINER_ID);\n  var dataContainerId = elem.getAttribute(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].DATA_CONTAINER_ID);\n\n  if (containerId && isAutoInitExperience({\n    elem: elem,\n    isDataContainer: false\n  })) {\n    if (isLazyLoadExperience({\n      elem: elem,\n      isDataContainer: false\n    }) && lazyLoadExperienceObserver) {\n      lazyLoadExperienceObserver.observe(elem);\n    } else {\n      return createExperienceInstance(containerId, elem, {\n        isMutationObserverInit: isMutationObserverInit\n      });\n    }\n  }\n\n  if (dataContainerId && isAutoInitExperience({\n    elem: elem,\n    isDataContainer: true\n  })) {\n    if (isLazyLoadExperience({\n      elem: elem,\n      isDataContainer: true\n    }) && lazyLoadExperienceObserver) {\n      lazyLoadExperienceObserver.observe(elem);\n    } else {\n      return createExperienceInstance(dataContainerId, elem, {\n        isMutationObserverInit: isMutationObserverInit\n      });\n    }\n  }\n\n  return Promise.resolve(null);\n}\n\nfunction getAllExperienceContainers() {\n  var containerSelectors = "[".concat(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].CONTAINER_ID, "],[").concat(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].DATA_CONTAINER_ID, "]");\n  return document.querySelectorAll(containerSelectors);\n}\n\nfunction autoInitExperiences() {\n  lazyLoadExperienceObserver = Object(_utils_lazyLoadUtils__WEBPACK_IMPORTED_MODULE_11__["createIntersectionObserver"])({\n    callback: handleLazyLoadExperienceIntersection\n  });\n  var containers = getAllExperienceContainers();\n  Array.prototype.forEach.call(containers, function (container) {\n    return handleExperienceInitialization(container, false);\n  });\n  Object(_experienceMutationObserver__WEBPACK_IMPORTED_MODULE_8__["initializeExperienceMutationObserver"])(handleExperienceInitialization);\n}\n\nfunction processQueryParams(queryString) {\n  var queryParamsMap = _utils_bootloaderUtils__WEBPACK_IMPORTED_MODULE_9__["default"].getQueryParamsMap(queryString);\n  _curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8.debug = !!queryParamsMap[_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].DEBUG];\n  /*\n    If the encoded query param for crl8-permalink-map is not valid\n    log the error and default it to an empty string\n  */\n\n  var decodedParams;\n  var permalinkParams = queryParamsMap[_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].PERMALINK_MAP];\n\n  if (permalinkParams) {\n    // Check if permalinkParams are base-64 encoded correctly\n    try {\n      decodedParams = JSON.parse(atob(decodeURIComponent(permalinkParams)));\n    } catch (base64DecodeError) {\n      var siteName = Object(_siteInfo__WEBPACK_IMPORTED_MODULE_13__["getSiteName"])(); // Check if permalinkParams contains the required site-name\n\n      if (permalinkParams.indexOf(siteName) !== -1) {\n        try {\n          decodedParams = JSON.parse(decodeURIComponent(permalinkParams));\n        } catch (uriDecodeOrJsonParseError) {\n          Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("Incorrect unencoded value ".concat(permalinkParams, " for ").concat(_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].PERMALINK_MAP, ". Error: ").concat(uriDecodeOrJsonParseError.message));\n        }\n      } else {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("".concat(siteName, " not found in permalinks for ").concat(_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].PERMALINK_MAP, ". Error: ").concat(base64DecodeError.message));\n      }\n    }\n  }\n\n  return {\n    allParams: queryParamsMap,\n    experienceMap: queryParamsMap[_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].EXPERIENCE_MAP] ? JSON.parse(queryParamsMap[_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].EXPERIENCE_MAP]) : {},\n    versionMap: queryParamsMap[_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].VERSION_MAP] ? JSON.parse(queryParamsMap[_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].VERSION_MAP]) : {},\n    optionsOverridesMap: queryParamsMap[_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].OPTION_OVERRIDES_MAP] ? JSON.parse(queryParamsMap[_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].OPTION_OVERRIDES_MAP]) : {},\n    permalinkMap: decodedParams || {},\n    shouldSkipCDN: queryParamsMap[_constants_params__WEBPACK_IMPORTED_MODULE_4__["default"].SKIP_CDN] === \'true\'\n  };\n}\n\nfunction destroyExperience(experience) {\n  // Mark as destroyed. This will only be used for experiences who\'s constructor has not\n  // finished fetching. When it finishes, it will see that it\'s been destroyed and abort.\n  experience.destroyed = true; // remove experience reference from map\n\n  delete experiencesByContainerId[experience.containerId]; // if instance exists, call the Experience\'s destroy() method that it provides\n  // @returns Promise\n\n  if (experience.instance) {\n    return experience.instance.destroy();\n  }\n\n  return Promise.resolve();\n}\n\nfunction updateExperience(experience, options) {\n  // if instance exists, call the Experience\'s updateOptions() method that it provides\n  if (experience.instance) {\n    return experience.instance.updateOptions(options);\n  }\n\n  return Promise.resolve();\n}\n\nfunction openModal(experience, itemId, options) {\n  // if instance exists, call the Experience\'s openModal() method that it provides\n  if (experience.instance) {\n    return experience.instance.openModal(itemId, options);\n  }\n\n  return Promise.resolve();\n}\n\nfunction closeModal(experience) {\n  // if instance exists, call the Experience\'s closeModal() method that it provides\n  if (experience.instance) {\n    return experience.instance.closeModal();\n  }\n\n  return Promise.resolve();\n}\n\nfunction openUploader(experience) {\n  // if instance exists, call the Experience\'s openUploader() method that it provides\n  if (experience.instance) {\n    return experience.instance.openUploader();\n  }\n\n  return Promise.resolve();\n}\n\nfunction closeUploader(experience) {\n  // if instance exists, call the Experience\'s closeUploader() method that it provides\n  if (experience.instance) {\n    return experience.instance.closeUploader();\n  }\n\n  return Promise.resolve();\n} // Used to wrap any function that takes a container selector (containerId | elem ) and returns\n// a promise. This function will validate the container selector and reject immediately if it\n// is an invalid container selector. Otherwise, it will call the wrapped function with both the\n// containerId, elem, and pass through the other args.\n\n\nfunction wrapContainerSelectorToPromiseFn(fn) {\n  var _this = this;\n\n  return function (containerSelector) {\n    var containerId = null;\n    var elem = null;\n\n    if (typeof containerSelector === \'string\') {\n      containerId = containerSelector;\n      elem = document.querySelector("[".concat(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].CONTAINER_ID, "=\\"").concat(containerId, "\\"]")) || document.querySelector("[".concat(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].DATA_CONTAINER_ID, "=\\"").concat(containerId, "\\"]"));\n    } else if (containerSelector instanceof Element) {\n      elem = containerSelector;\n      containerId = elem.getAttribute(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].CONTAINER_ID) || elem.getAttribute(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].DATA_CONTAINER_ID);\n\n      if (!containerId) {\n        return Promise.reject({\n          containerSelector: containerSelector,\n          message: Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("Cannot find the ".concat(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].DATA_CONTAINER_ID, ", ").concat(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_1__["default"].CONTAINER_ID, " or ").concat(elem))\n        });\n      }\n    } else {\n      Object(_errors__WEBPACK_IMPORTED_MODULE_6__["throwError"])(\'Experience selectors must be either a container ID or an element\');\n    }\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return fn.apply(_this, [containerId, elem].concat(containerSelector, args));\n  };\n}\n/*\n  return type includes `null` because `experience.instancePromise` is initialized as `null` but\n  immediately set as `Promise<IExperienceInstance>` or a `Promise.reject` if there is an error\n*/\n\n\nfunction getExperienceInstance(containerId, elem, containerSelector) {\n  var experience = experiencesByContainerId[containerId];\n  return experience ? experience.instancePromise : Promise.reject({\n    containerSelector: containerSelector,\n    message: "Curalate: No experience found for ".concat(containerSelector)\n  });\n}\n\nfunction getAllExperienceInstances() {\n  return Promise.all(Object.keys(experiencesByContainerId).map(function (containerId) {\n    return experiencesByContainerId[containerId].instancePromise || Promise.reject();\n  }));\n}\n\nfunction destroyExperienceInstance(containerId, elem, containerSelector) {\n  var experienceToDestroy = experiencesByContainerId[containerId];\n  if (lazyLoadExperienceObserver) lazyLoadExperienceObserver.unobserve(elem);\n\n  if (experienceToDestroy) {\n    return destroyExperience(experienceToDestroy);\n  }\n\n  return Promise.reject({\n    containerSelector: containerSelector,\n    message: Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("Could not find an experience to destroy for ".concat(containerSelector))\n  });\n}\n\nfunction destroyAllExperienceInstances() {\n  Object(_experienceMutationObserver__WEBPACK_IMPORTED_MODULE_8__["disconnectExperienceMutationObserver"])();\n  if (lazyLoadExperienceObserver) lazyLoadExperienceObserver.disconnect();\n  return Promise.all(Object.keys(experiencesByContainerId).map(function (containerId) {\n    return destroyExperience(experiencesByContainerId[containerId]);\n  }));\n}\n\nfunction updateExperienceInstance(containerId, elem, containerSelector, options) {\n  var experienceToUpdate = experiencesByContainerId[containerId];\n\n  if (experienceToUpdate) {\n    updateExperience(experienceToUpdate, options);\n    return Promise.resolve();\n  }\n\n  return Promise.reject({\n    containerSelector: containerSelector,\n    message: Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("Could not find an experience to update for ".concat(containerSelector))\n  });\n}\n\nfunction openModalInExperienceInstance(containerId, elem, containerSelector, itemId, options) {\n  var experience = experiencesByContainerId[containerId];\n\n  if (experience) {\n    openModal(experience, itemId, options);\n    return Promise.resolve();\n  }\n\n  return Promise.reject({\n    containerSelector: containerSelector,\n    message: Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("Could not find an experience to open a modal in for ".concat(containerSelector))\n  });\n}\n\nfunction closeModalInExperienceInstance(containerId, elem, containerSelector) {\n  var experience = experiencesByContainerId[containerId];\n\n  if (experience) {\n    closeModal(experience);\n    return Promise.resolve();\n  }\n\n  return Promise.reject({\n    containerSelector: containerSelector,\n    message: Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("Could not find an experience to close a modal in for ".concat(containerSelector))\n  });\n}\n\nfunction openUploaderInExperienceInstance(containerId, elem, containerSelector) {\n  var experience = experiencesByContainerId[containerId];\n\n  if (experience) {\n    openUploader(experience);\n    return Promise.resolve();\n  }\n\n  return Promise.reject({\n    containerSelector: containerSelector,\n    message: Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("Could not find an experience to open an uploader in for ".concat(containerSelector))\n  });\n}\n\nfunction closeUploaderInExperienceInstance(containerId, elem, containerSelector) {\n  var experience = experiencesByContainerId[containerId];\n\n  if (experience) {\n    closeUploader(experience);\n    return Promise.resolve();\n  }\n\n  return Promise.reject({\n    containerSelector: containerSelector,\n    message: Object(_errors__WEBPACK_IMPORTED_MODULE_6__["logError"])("Could not find an experience to close an uploader in for \'".concat(containerSelector))\n  });\n}\n\nfunction updatePermalinkQueryParamsForExperienceInstance(containerId, elem, containerSelector, permalinkType, permalinkValue, permalinkOptions) {\n  var siteName = Object(_siteInfo__WEBPACK_IMPORTED_MODULE_13__["getSiteName"])();\n  Object(_utils_permalinkUtils__WEBPACK_IMPORTED_MODULE_12__["updatePermalinkQueryParamsMap"])({\n    containerId: containerId,\n    siteName: siteName,\n    permalinkOptions: permalinkOptions,\n    permalinkType: permalinkType,\n    permalinkValue: permalinkValue,\n    queryParams: queryParams\n  });\n}\n/*\n  ============= Event Listeners =============\n*/\n// This event must be fired with a { name: \'site-name\' } object in order to kick off the experiences.\n\n\n_eventBus__WEBPACK_IMPORTED_MODULE_7__["default"].addEventListener(_constants_eventBusEvents__WEBPACK_IMPORTED_MODULE_3__["default"].SITE_READY, function (siteDetails) {\n  if (_typeof(siteDetails) !== \'object\') {\n    Object(_errors__WEBPACK_IMPORTED_MODULE_6__["throwError"])("`siteReady` event triggered without a `name` property in: ".concat(siteDetails));\n  }\n\n  if (typeof siteDetails.name !== \'string\') {\n    Object(_errors__WEBPACK_IMPORTED_MODULE_6__["throwError"])("`siteReady` event triggered without a `name` property in: ".concat(JSON.stringify(siteDetails)));\n  }\n\n  Object(_siteInfo__WEBPACK_IMPORTED_MODULE_13__["setSiteName"])(siteDetails.name);\n  /*\n      Since we have no control over how/when the bootloader is loaded, we need to ensure the document is ready before executing.\n    */\n\n  if (document.readyState === \'uninitialized\' || document.readyState === \'loading\') {\n    document.addEventListener(\'DOMContentLoaded\', autoInitExperiences);\n  } else {\n    autoInitExperiences();\n  }\n});\n_eventBus__WEBPACK_IMPORTED_MODULE_7__["default"].addEventListener(_constants_eventBusEvents__WEBPACK_IMPORTED_MODULE_3__["default"].EXPERIENCE_CONSTRUCTOR_READY, function (experienceInfo) {\n  /*\n    Since loading the constructor may be sync or async depending on if the experience script is bundled or\n    fetched, we wrap all experience constructors in a promise and treat all constructor retrieving as asynchronous.\n  */\n  experienceConstructorPromises[experienceInfo.name] = Promise.resolve(experienceInfo.Experience);\n});\n_eventBus__WEBPACK_IMPORTED_MODULE_7__["default"].addEventListener(_constants_eventBusEvents__WEBPACK_IMPORTED_MODULE_3__["default"].REGISTER_EXPERIENCE_OPTIONS, function (experienceOptions) {\n  var containerId = experienceOptions.containerId,\n      experienceName = experienceOptions.experienceName,\n      options = experienceOptions.options;\n\n  if (containerId) {\n    experienceOptionsByContainerId[containerId] = deepmerge__WEBPACK_IMPORTED_MODULE_0___default()(experienceOptionsByContainerId[containerId] || {}, options || {}, {\n      arrayMerge: _utils_mergeUtils__WEBPACK_IMPORTED_MODULE_10__["default"]\n    });\n  }\n\n  if (experienceName) {\n    experienceOptionsByExperienceName[experienceName] = deepmerge__WEBPACK_IMPORTED_MODULE_0___default()(experienceOptionsByExperienceName[experienceName] || {}, options || {}, {\n      arrayMerge: _utils_mergeUtils__WEBPACK_IMPORTED_MODULE_10__["default"]\n    });\n  }\n});\n_eventBus__WEBPACK_IMPORTED_MODULE_7__["default"].addEventListener(_constants_eventBusEvents__WEBPACK_IMPORTED_MODULE_3__["default"].REGISTER_CONTAINER_MAPPER, function (mapperFn) {\n  containerMapper = mapperFn;\n});\n/*\n  ============= Public API =============\n*/\n\n_curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8 = _utils_bootloaderUtils__WEBPACK_IMPORTED_MODULE_9__["default"].assign(_curalateGlobals__WEBPACK_IMPORTED_MODULE_5__["windowRef"].crl8, {\n  ErrorLogger: _errors__WEBPACK_IMPORTED_MODULE_6__["ErrorLogger"],\n  EventBus: _eventBus__WEBPACK_IMPORTED_MODULE_7__["default"],\n\n  /*\n    These are the functions that are exposed to the user, so they are named accordingly.\n    To the user, an "Experience" refers to an experience instance in a container. This is\n    not to be confused with what the rest of this file calls an "experience", which is an\n    object containing containerId, elem, instance, instancePromise, etc.\n  */\n\n  /*\n    Create an experience.\n    @param {string} containerId - The container ID of the experience to create.\n    @param {element} elem - The element to construct the experience on.\n    @param {object} optionsOverrides - Options hash to pass to the experience.\n    @returns {Promise[ExperienceInstance]}\n  */\n  createExperience: wrapContainerSelectorToPromiseFn(createExperienceWithOptionsInstance),\n\n  /*\n    Get a specific experiences on a page.\n    @param {string|element} containerSelector - Either the container ID or the element to get.\n    @returns {Promise[ExperienceInstance]}\n  */\n  getExperience: wrapContainerSelectorToPromiseFn(getExperienceInstance),\n\n  /*\n    Get all experiences on a page.\n    @returns {Promise[Array[ExperienceInstance]]}\n  */\n  getAllExperiences: getAllExperienceInstances,\n\n  /*\n    Destroys specified experience\n    @param {string|element} containerSelector - Either the container ID or the element to destroy the experience for.\n    @returns {Promise[Array[ExperienceInstance]]} - Promise that resolves when the experience is deleted.\n  */\n  destroyExperience: wrapContainerSelectorToPromiseFn(destroyExperienceInstance),\n\n  /*\n    Destroys all experiences on the page\n    @returns {Promise[Array[ExperienceInstance]]} - Promise that resolves when the experiences are deleted.\n  */\n  destroyAllExperiences: destroyAllExperienceInstances,\n\n  /*\n    Update a specific experience on a page.\n    @param {string|element} containerSelector - Either the container ID or the element to update.\n    @param {object} options - Options to pass to the experience.\n  */\n  updateExperience: wrapContainerSelectorToPromiseFn(updateExperienceInstance),\n\n  /*\n    Open modal of a specific experience on a page.\n    @param {string|element} containerSelector - Either the container ID or the element to open modal in.\n    @param {string} itemId  - ItemId of modal to open to pass to the experience.\n    @param {object} options - Options to pass.\n  */\n  openModal: wrapContainerSelectorToPromiseFn(openModalInExperienceInstance),\n\n  /*\n    Close modal of a specific experience on a page.\n    @param {string|element} containerSelector - Either the container ID or the element to close modal in.\n  */\n  closeModal: wrapContainerSelectorToPromiseFn(closeModalInExperienceInstance),\n\n  /*\n    Open uploader of a specific experience on a page.\n    @param {string|element} containerSelector - Either the container ID or the element to open uploader in.\n  */\n  openUploader: wrapContainerSelectorToPromiseFn(openUploaderInExperienceInstance),\n\n  /*\n    Close uploader of a specific experience on a page.\n    @param {string|element} containerSelector - Either the container ID or the element to close uploader in.\n  */\n  closeUploader: wrapContainerSelectorToPromiseFn(closeUploaderInExperienceInstance),\n\n  /*\n    Update the query params of a specific experience on a page.\n    @param {string|element} containerSelector - Either the container ID or the element to get.\n  */\n  updatePermalinkQueryParams: wrapContainerSelectorToPromiseFn(updatePermalinkQueryParamsForExperienceInstance)\n});\n\n//# sourceURL=webpack:///./src/bootloader.ts?')},"./src/constants/containerAttributes.ts":/*!**********************************************!*\
  !*** ./src/constants/containerAttributes.ts ***!
  \**********************************************/
/*! exports provided: default */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\nvar containerAttributes = {\n  AUTO_INIT: 'crl8-auto-init',\n  CONTAINER_ID: 'crl8-container-id',\n  DATA_AUTO_INIT: 'data-crl8-auto-init',\n  DATA_CONTAINER_ID: 'data-crl8-container-id',\n  DATA_LAZY_LOAD: 'data-crl8-lazy-load-experience',\n  LAZY_LOAD: 'crl8-lazy-load-experience'\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (containerAttributes);\n\n//# sourceURL=webpack:///./src/constants/containerAttributes.ts?")},"./src/constants/endpoints.ts":/*!************************************!*\
  !*** ./src/constants/endpoints.ts ***!
  \************************************/
/*! exports provided: default */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\nvar endpoints = {\n  ERROR_LOG: 'https://edge.curalate.com/v1/error-logging/log',\n  SITES_CDN: 'https://edge.curalate.com/sites/',\n  SITES_S3: 'https://s3.amazonaws.com/curalate-experiences/sites/'\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (endpoints);\n\n//# sourceURL=webpack:///./src/constants/endpoints.ts?")},"./src/constants/eventBusEvents.ts":/*!*****************************************!*\
  !*** ./src/constants/eventBusEvents.ts ***!
  \*****************************************/
/*! exports provided: default */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\nvar EventBusEvents;\n\n(function (EventBusEvents) {\n  EventBusEvents["EXPERIENCE_CONSTRUCTOR_READY"] = "experienceConstructorReady";\n  EventBusEvents["EXPERIENCE_READY"] = "experienceReady";\n  EventBusEvents["REGISTER_CONTAINER_MAPPER"] = "registerContainerMapper";\n  EventBusEvents["REGISTER_EXPERIENCE_OPTIONS"] = "registerExperienceOptions";\n  EventBusEvents["SITE_READY"] = "siteReady";\n})(EventBusEvents || (EventBusEvents = {}));\n\n/* harmony default export */ __webpack_exports__["default"] = (EventBusEvents);\n\n//# sourceURL=webpack:///./src/constants/eventBusEvents.ts?')},"./src/constants/params.ts":/*!*********************************!*\
  !*** ./src/constants/params.ts ***!
  \*********************************/
/*! exports provided: default */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\nvar Params;\n\n(function (Params) {\n  Params["DEBUG"] = "crl8-debug";\n  Params["EXPERIENCE_MAP"] = "crl8-experience-map";\n  Params["OPTION_OVERRIDES_MAP"] = "crl8-options-map";\n  Params["PERMALINK_MAP"] = "crl8-permalink-map";\n  Params["SKIP_CDN"] = "crl8-skip-cdn";\n  Params["VERSION_MAP"] = "crl8-version-map";\n})(Params || (Params = {}));\n\n/* harmony default export */ __webpack_exports__["default"] = (Params);\n\n//# sourceURL=webpack:///./src/constants/params.ts?')},"./src/curalate.globals.ts":/*!*********************************!*\
  !*** ./src/curalate.globals.ts ***!
  \*********************************/
/*! exports provided: windowRef, default */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "windowRef", function() { return windowRef; });\nvar windowRef = window;\n/* harmony default export */ __webpack_exports__["default"] = (windowRef);\n\n//# sourceURL=webpack:///./src/curalate.globals.ts?')},"./src/errors.ts":/*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
/*! exports provided: ErrorLogger, logError, throwError */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ErrorLogger", function() { return ErrorLogger; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "logError", function() { return logError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throwError", function() { return throwError; });\n/* harmony import */ var _constants_endpoints__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @constants/endpoints */ "./src/constants/endpoints.ts");\n/* harmony import */ var _curalateGlobals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @curalateGlobals */ "./src/curalate.globals.ts");\n/* harmony import */ var _siteInfo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @siteInfo */ "./src/siteInfo.ts");\n\n\n\nvar ErrorLogger = {\n  log: function log(errorObj) {\n    if (_curalateGlobals__WEBPACK_IMPORTED_MODULE_1__["windowRef"].crl8 && _curalateGlobals__WEBPACK_IMPORTED_MODULE_1__["windowRef"].crl8.debug === false && "production" === \'production\') {\n      var loggingEndpoint = _constants_endpoints__WEBPACK_IMPORTED_MODULE_0__["default"].ERROR_LOG;\n      var siteName = Object(_siteInfo__WEBPACK_IMPORTED_MODULE_2__["getSiteName"])();\n\n      if (siteName) {\n        loggingEndpoint = _curalateGlobals__WEBPACK_IMPORTED_MODULE_1__["windowRef"].crl8 && _curalateGlobals__WEBPACK_IMPORTED_MODULE_1__["windowRef"].crl8[siteName] && _curalateGlobals__WEBPACK_IMPORTED_MODULE_1__["windowRef"].crl8[siteName].bootloader && _curalateGlobals__WEBPACK_IMPORTED_MODULE_1__["windowRef"].crl8[siteName].bootloader && _curalateGlobals__WEBPACK_IMPORTED_MODULE_1__["windowRef"].crl8[siteName].bootloader.loggerPath || _constants_endpoints__WEBPACK_IMPORTED_MODULE_0__["default"].ERROR_LOG;\n      }\n\n      var formattedErrorUrl = "".concat(loggingEndpoint, "?errortype=").concat(errorObj.errorType, "&error=").concat(encodeURIComponent(errorObj.error));\n      fetch(formattedErrorUrl, {\n        method: \'POST\'\n      });\n    } else {\n      console.log("Curalate: ERROR - ".concat(errorObj.error));\n    }\n\n    return "Curalate: ERROR - ".concat(errorObj.error);\n  }\n};\nvar logError = function logError(msg) {\n  return ErrorLogger.log({\n    errorType: \'bootloader\',\n    error: msg\n  });\n};\nfunction throwError(msg) {\n  throw new Error(logError(msg));\n}\n\n//# sourceURL=webpack:///./src/errors.ts?')},"./src/eventBus.ts":/*!*************************!*\
  !*** ./src/eventBus.ts ***!
  \*************************/
/*! exports provided: default */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\nvar eventListeners = {};\nvar EventBus = {\n  addEventListener: function addEventListener(type, callback) {\n    eventListeners[type] = eventListeners[type] || [];\n    eventListeners[type].push(callback);\n  },\n  removeEventListener: function removeEventListener(type, callback) {\n    for (var i = 0; i < eventListeners[type].length; ++i) {\n      if (eventListeners[type][i] === callback) {\n        eventListeners[type].splice(i, 1);\n        break;\n      }\n    }\n  },\n  dispatchEvent: function dispatchEvent(type, data) {\n    var listeners = eventListeners[type];\n\n    if (listeners) {\n      listeners.forEach(function (fn) {\n        fn.call(null, data);\n      });\n    }\n  }\n};\n/* harmony default export */ __webpack_exports__["default"] = (EventBus);\n\n//# sourceURL=webpack:///./src/eventBus.ts?')},"./src/experienceMutationObserver.ts":/*!*******************************************!*\
  !*** ./src/experienceMutationObserver.ts ***!
  \*******************************************/
/*! exports provided: initializeExperienceMutationObserver, disconnectExperienceMutationObserver */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initializeExperienceMutationObserver", function() { return initializeExperienceMutationObserver; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "disconnectExperienceMutationObserver", function() { return disconnectExperienceMutationObserver; });\n/* harmony import */ var _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @curalateGlobals */ "./src/curalate.globals.ts");\n/* harmony import */ var _siteInfo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @siteInfo */ "./src/siteInfo.ts");\n/* harmony import */ var _utils_createMutationObserver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @utils/createMutationObserver */ "./src/utils/createMutationObserver.ts");\n/* harmony import */ var _utils_getContainerId__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @utils/getContainerId */ "./src/utils/getContainerId.ts");\n\n\n\n\nvar experienceMutationObserver;\nvar experienceMutationObserverTimeout;\nvar handleExperienceInitializationCallback;\nvar EXPERIENCE_MUTATION_OBSERVER_TIMEOUT = 15000;\nvar observerConfig = {\n  childList: true,\n  subtree: true\n};\n\nfunction checkAddedNode(node) {\n  if (node.nodeType === Node.ELEMENT_NODE && node.getAttribute) {\n    var containerId = Object(_utils_getContainerId__WEBPACK_IMPORTED_MODULE_3__["default"])(node);\n\n    if (containerId && handleExperienceInitializationCallback) {\n      /*\n        Passing isMutationObserverInit param as true to indicate experience\n        initialization triggered by the mutation observer\n      */\n      handleExperienceInitializationCallback(node, true);\n    } else if (node.hasChildNodes()) {\n      Array.prototype.forEach.call(node.childNodes, checkAddedNode);\n    }\n  }\n}\n\nfunction handleExperienceContainerMutations(mutations) {\n  mutations.forEach(function (mutation) {\n    if (mutation.type === \'childList\' && mutation.addedNodes) {\n      Array.prototype.forEach.call(mutation.addedNodes, checkAddedNode);\n    }\n  });\n}\n\nfunction initializeExperienceMutationObserver(initializeExperienceCallback) {\n  var siteName = Object(_siteInfo__WEBPACK_IMPORTED_MODULE_1__["getSiteName"])();\n  var isMutationObserverDisabled = _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__["windowRef"].crl8 && _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__["windowRef"].crl8[siteName] && _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__["windowRef"].crl8[siteName].bootloader && _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__["windowRef"].crl8[siteName].bootloader.isMutationObserverEnabled === false;\n  handleExperienceInitializationCallback = initializeExperienceCallback;\n\n  if (!isMutationObserverDisabled) {\n    experienceMutationObserver = Object(_utils_createMutationObserver__WEBPACK_IMPORTED_MODULE_2__["default"])(handleExperienceContainerMutations);\n\n    if (experienceMutationObserver) {\n      experienceMutationObserver.observe(document.body, observerConfig);\n      experienceMutationObserverTimeout = _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__["windowRef"].setTimeout(function () {\n        if (experienceMutationObserver) {\n          experienceMutationObserver.disconnect();\n        }\n      }, EXPERIENCE_MUTATION_OBSERVER_TIMEOUT);\n    }\n  }\n}\nfunction disconnectExperienceMutationObserver() {\n  if (experienceMutationObserver) {\n    experienceMutationObserver.disconnect();\n  }\n\n  _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__["windowRef"].clearTimeout(experienceMutationObserverTimeout);\n}\n\n//# sourceURL=webpack:///./src/experienceMutationObserver.ts?')},"./src/siteInfo.ts":/*!*************************!*\
  !*** ./src/siteInfo.ts ***!
  \*************************/
/*! exports provided: setSiteName, getSiteName */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setSiteName\", function() { return setSiteName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSiteName\", function() { return getSiteName; });\nvar siteInfo = {\n  name: ''\n};\n/*\n  The site script should fire crl8.EventBus.dispatchEvent('siteReady', { name: 'site-name' });\n  The siteReady listener attached in bootloader.ts will then use this setSiteName function\n*/\n\nfunction setSiteName(name) {\n  siteInfo.name = name;\n}\nfunction getSiteName() {\n  return siteInfo.name;\n}\n\n//# sourceURL=webpack:///./src/siteInfo.ts?")},"./src/utils/bootloaderUtils.ts":/*!**************************************!*\
  !*** ./src/utils/bootloaderUtils.ts ***!
  \**************************************/
/*! exports provided: default */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar utils = {\n  assign: function assign() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var result = {};\n\n    var _loop = function _loop(i) {\n      if (_typeof(args[i]) === 'object') {\n        Object.keys(args[i]).forEach(function (key) {\n          if (Object.prototype.hasOwnProperty.call(args[i], key)) {\n            result[key] = args[i][key];\n          }\n        });\n      }\n    };\n\n    for (var i = 0; i < args.length; ++i) {\n      _loop(i);\n    }\n\n    return result;\n  },\n  find: function find(collection, predicate) {\n    if (collection instanceof Array) {\n      for (var i = 0; i < collection.length; ++i) {\n        if (predicate(collection[i])) {\n          return collection[i];\n        }\n      }\n    } else if (_typeof(collection) === 'object') {\n      for (var _key2 in collection) {\n        if (predicate(collection[_key2])) {\n          return collection[_key2];\n        }\n      }\n    }\n\n    return undefined;\n  },\n  getQueryParamsMap: function getQueryParamsMap(search) {\n    return search.substring(1).split('&').reduce(function (queryParams, param) {\n      var paramParts = param.split('=');\n\n      if (paramParts[0] && paramParts[1]) {\n        queryParams[paramParts[0]] = decodeURIComponent(paramParts[1]);\n      }\n\n      return queryParams;\n    }, {});\n  },\n  fetchScript: function fetchScript(url) {\n    return new Promise(function (resolve, reject) {\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.async = true;\n      script.src = url;\n      script.onload = resolve;\n      script.onerror = reject;\n      document.getElementsByTagName('body')[0].appendChild(script);\n    });\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (utils);\n\n//# sourceURL=webpack:///./src/utils/bootloaderUtils.ts?")},"./src/utils/createMutationObserver.ts":/*!*********************************************!*\
  !*** ./src/utils/createMutationObserver.ts ***!
  \*********************************************/
/*! exports provided: default */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return createMutationObserver; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @errors */ "./src/errors.ts");\n\nfunction createMutationObserver(callback) {\n  try {\n    if (!callback) return null;\n    return new MutationObserver(callback);\n  } catch (error) {\n    Object(_errors__WEBPACK_IMPORTED_MODULE_0__["logError"])("Curalate: Could not create experience container mutation observer. ".concat(error));\n    return null;\n  }\n}\n\n//# sourceURL=webpack:///./src/utils/createMutationObserver.ts?')},"./src/utils/getContainerId.ts":/*!*************************************!*\
  !*** ./src/utils/getContainerId.ts ***!
  \*************************************/
/*! exports provided: default */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getContainerId; });\n/* harmony import */ var _constants_containerAttributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @constants/containerAttributes */ "./src/constants/containerAttributes.ts");\n\nfunction getContainerId(elem) {\n  return elem.getAttribute(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_0__["default"].CONTAINER_ID) || elem.getAttribute(_constants_containerAttributes__WEBPACK_IMPORTED_MODULE_0__["default"].DATA_CONTAINER_ID);\n}\n\n//# sourceURL=webpack:///./src/utils/getContainerId.ts?')},"./src/utils/lazyLoadUtils.ts":/*!************************************!*\
  !*** ./src/utils/lazyLoadUtils.ts ***!
  \************************************/
/*! exports provided: isIntersectionObserverSupported, createIntersectionObserver */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isIntersectionObserverSupported", function() { return isIntersectionObserverSupported; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createIntersectionObserver", function() { return createIntersectionObserver; });\n/* harmony import */ var _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @curalateGlobals */ "./src/curalate.globals.ts");\n\nfunction isIntersectionObserverSupported() {\n  return \'IntersectionObserver\' in _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__["windowRef"] && \'IntersectionObserverEntry\' in _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__["windowRef"] && \'intersectionRatio\' in _curalateGlobals__WEBPACK_IMPORTED_MODULE_0__["windowRef"].IntersectionObserverEntry.prototype;\n}\nfunction createIntersectionObserver(_ref) {\n  var callback = _ref.callback,\n      _ref$options = _ref.options,\n      options = _ref$options === void 0 ? {\n    root: null,\n    rootMargin: \'50px\',\n    threshold: 0\n  } : _ref$options;\n  if (!(options && callback)) return null;\n\n  if (isIntersectionObserverSupported()) {\n    return new IntersectionObserver(function (entries, observer) {\n      entries.forEach(function (entry) {\n        callback(entry, observer);\n      });\n    }, options);\n  }\n\n  return null;\n}\n\n//# sourceURL=webpack:///./src/utils/lazyLoadUtils.ts?')},"./src/utils/mergeUtils.ts":/*!*********************************!*\
  !*** ./src/utils/mergeUtils.ts ***!
  \*********************************/
/*! exports provided: default */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return overwriteMerge; });\n/*\n  deep merge localization strings\n  Overwrite existing array values rather than concatenating them\n  https://github.com/TehShrike/deepmerge#arraymerge-example-overwrite-target-array\n*/\nfunction overwriteMerge(destinationArray, sourceArray, options) {\n  return sourceArray;\n}\n\n//# sourceURL=webpack:///./src/utils/mergeUtils.ts?')},"./src/utils/permalinkUtils.ts":/*!*************************************!*\
  !*** ./src/utils/permalinkUtils.ts ***!
  \*************************************/
/*! exports provided: hasCrl8PermalinkMapValues, updatePermalinkQueryParams, updatePermalinkQueryParamsMap */
function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasCrl8PermalinkMapValues", function() { return hasCrl8PermalinkMapValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updatePermalinkQueryParams", function() { return updatePermalinkQueryParams; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updatePermalinkQueryParamsMap", function() { return updatePermalinkQueryParamsMap; });\n/* harmony import */ var _constants_params__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @constants/params */ "./src/constants/params.ts");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\n\n\n/*\n    search the permalinkParams object with the current siteNames and containerId\n    returns true if any site and containerId has permalink values\n  */\nfunction hasCrl8PermalinkMapValues(permalinkParams) {\n  return Object.keys(permalinkParams).some(function (siteName) {\n    return Object.keys(permalinkParams[siteName]).some(function (containerId) {\n      var experience = permalinkParams[siteName][containerId];\n      return Object.keys(experience).length > 0;\n    });\n  });\n}\nfunction updatePermalinkQueryParams(_ref) {\n  var allParams = _ref.allParams,\n      permalinkOptions = _ref.permalinkOptions,\n      permalinkType = _ref.permalinkType,\n      permalinkValue = _ref.permalinkValue;\n  var _window$location = window.location,\n      hash = _window$location.hash,\n      origin = _window$location.origin,\n      pathname = _window$location.pathname;\n  var queryParamsMap = Object.keys(allParams).map(function (param) {\n    var paramValue = allParams[param];\n\n    if (param === _constants_params__WEBPACK_IMPORTED_MODULE_0__["default"].PERMALINK_MAP) {\n      paramValue = btoa(JSON.stringify(allParams[param]));\n    } else if (_typeof(allParams[param]) === \'object\') {\n      paramValue = JSON.stringify(allParams[param]);\n    }\n\n    return "".concat(param, "=").concat(encodeURIComponent(paramValue));\n  });\n  var searchQuery = queryParamsMap.length ? "?".concat(queryParamsMap.join(\'&\')) : \'\';\n  var formattedUrl = origin + pathname + searchQuery + hash; // maintain client window history details while updating the url\n\n  if (permalinkOptions && permalinkOptions.pushHistoryState) {\n    window.history.pushState(_objectSpread({\n      permalinkType: permalinkType,\n      permalinkValue: permalinkValue\n    }, permalinkOptions), document.title || \'\', formattedUrl);\n  } else {\n    window.history.replaceState(window.history.state, document.title || \'\', formattedUrl);\n  }\n}\nfunction updatePermalinkQueryParamsMap(_ref2) {\n  var containerId = _ref2.containerId,\n      siteName = _ref2.siteName,\n      permalinkOptions = _ref2.permalinkOptions,\n      permalinkType = _ref2.permalinkType,\n      permalinkValue = _ref2.permalinkValue,\n      _ref2$queryParams = _ref2.queryParams,\n      _ref2$queryParams$all = _ref2$queryParams.allParams,\n      allParams = _ref2$queryParams$all === void 0 ? {} : _ref2$queryParams$all,\n      _ref2$queryParams$per = _ref2$queryParams.permalinkMap,\n      permalinkMap = _ref2$queryParams$per === void 0 ? {} : _ref2$queryParams$per;\n\n  if (siteName && containerId) {\n    if (permalinkType && permalinkValue && Object.keys(permalinkValue).length > 0) {\n      permalinkMap[siteName] = permalinkMap[siteName] || {};\n      permalinkMap[siteName][containerId] = permalinkMap[siteName][containerId] || {};\n      permalinkMap[siteName][containerId][permalinkType] = permalinkValue;\n      allParams[_constants_params__WEBPACK_IMPORTED_MODULE_0__["default"].PERMALINK_MAP] = permalinkMap;\n    } else {\n      var permalinkOnSelectedContainer = permalinkMap[siteName] && permalinkMap[siteName][containerId]; // If there are no params on the given permalink type, delete the "type" key\n\n      if (permalinkOnSelectedContainer && permalinkOnSelectedContainer[permalinkType]) {\n        delete permalinkOnSelectedContainer[permalinkType];\n        /*\n          If there are multiple experiences or sites on the same page\n          check to see if other experiences or sites have a permalink\n        */\n\n        if (!hasCrl8PermalinkMapValues(permalinkMap)) {\n          delete allParams[_constants_params__WEBPACK_IMPORTED_MODULE_0__["default"].PERMALINK_MAP];\n        }\n      }\n    }\n  }\n\n  updatePermalinkQueryParams({\n    allParams: allParams,\n    permalinkOptions: permalinkOptions,\n    permalinkType: permalinkType,\n    permalinkValue: permalinkValue\n  });\n}\n\n//# sourceURL=webpack:///./src/utils/permalinkUtils.ts?')}})},function(e,n,t){!function(n,t){e.exports=t()}(0,function(){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=16)}([function(e,n,t){"use strict";function r(e){return e instanceof Object&&!(e instanceof Array||e instanceof Function)}function i(e){if(!r(e))throw new Error(e+" must be a plain object.");return Object.keys(e).length<=0}function o(e){return JSON.parse(JSON.stringify(e))}function a(e,n){var t=o(e);for(var i in n){var s=r(e[i])&&r(n[i]);t[i]=s?a(e[i]||{},n[i]):o(n[i])}return t}function s(e){return e.replace?e.replace(/\|/g,""):e}function c(){return Date.now()}function l(e,n){return-1!==e.indexOf(n)}n.b=i,n.a=a,n.d=s,n.c=c,n.e=l},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.debug=!!n,this.loggingEndpoint=t.loggingEndpoint||"https://edge.curalate.com/v1/error-logging/log",this.siteName=t.siteName||""}return i(e,[{key:"setDebug",value:function(e){this.debug=!!e}},{key:"setSiteName",value:function(e){this.siteName=e}},{key:"logDebug",value:function(e,n){this.debug&&(n?console.debug("[crl8 debug]",e,n):console.debug("[crl8 debug]",e))}},{key:"logError",value:function(e,n){var t="[crl8]",r="universalAnalytics",i=window.screen.height+"x"+window.screen.width,o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||"",a=this.siteName?"[sn:"+this.siteName+"]":"",s=this.loggingEndpoint+"?errortype="+r+"&error="+encodeURIComponent(e+" "+a)+"&width="+o+"&dimensions="+i;if(fetch(s,{method:"POST",mode:"no-cors"}),n)throw new Error(t+" "+e);console.error(t+" "+e)}}]),e}();n.a=o},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r={CAROUSEL_NAVIGATION_POSITION_PARAMETER:'[ec:01030001] Carousel navigation must include "position" parameter and the value must be -1 or 1.',CURALENS_CLICK_ITEM_ID_PARAMETER:'[ec:01030002] Curalens clicks must include "itemId" parameter.',INFINITE_SCROLL_POSITION_PARAMETER:'[ec:01030003] Infinite scroll load must include "position" parameter.',INVALID_EVENT_NAME:"[ec:01030004] Invalid eventName specified. Must be a string. Metrics data will not be recorded.",INVALID_TRACKER_FUNCTION:"[ec:01020001] Invalid tracker function specified. Metrics data will not be recorded.",ITEM_CLICK_PARAMETERS:'[ec:01030005] Item clicks must include "itemId" and "position" parameters.',ITEM_HOVER_PARAMETERS:'[ec:01030006] Item hovers must include "itemId" and "position" parameters.',ITEM_IMPRESSION_PARAMETERS:'[ec:01030007] Item impressions must define "itemId", "elapsedTime" and "position" parameters.',LOAD_MORE_CLICK_POSITION_PARAMETER:'[ec:01030008] Load more clicks must include "position" parameter.',METRICS_ALREADY_INITIALIZED_FOR_EXPERIENCE:"[ec:01000001] Metrics have already been initialized for experience",NO_TRACKER_FOR_EXPERIENCE:"[ec:01020002] No tracker exists for experienceId:",PAGE_NO_CONTENT_IMPRESSION_PRODUCT_ID:'[ec:01030009] Page no-content impressions must define a "productId" parameter.',PRODUCT_ADD_TO_CART_PARAMETERS:'[ec:01030010] Product add-to-cart must define "productId" and "position" parameters.',PRODUCT_CLICK_PARAMETERS:'[ec:01030011] Product clicks must define "productId", "productStyleId" and "position" parameters.',PRODUCT_HOVER_PARAMETERS:'[ec:01030012] Product hovers must define "productId", "productStyleId", "elapsedTime", and "position" parameters.',PRODUCT_IMPRESSION_PARAMETERS:'[ec:01030013] Product impressions must define "productId", "productStyleId", "elapsedTime", and "position" parameters.',STRING_VALUE_FOR_METRICS_ID:"[ec:01010002] You must provide a string value for metricsId.",STRING_VALUE_FOR_PIXEL_NAME:"[ec:01010003] You must provide a string value for pixelName.",TRACKING_EVENT_DISPLAYTYPE:"[ec:01030014] Tracking event must define a displayType field in order to be recorded.",TRACKING_EVENT_REQUEST_ID:"[ec:01030015] Tracking event must define a requestId field in order to be recorded.",TRACKING_EVENT_TIMESTAMP:"[ec:01030016] Tracking event must define a timestamp field in order to be recorded.",TRACKING_EVENT_TYPE:"[ec:01030017] Tracking event must define a type field in order to be recorded.",UNKNOWN_EVENT_TYPE:"[ec:01030018] Unknown event type. Cannot be validated.",VALID_URL_FOR_BASEURL:"[ec:01010001] You must provide a valid url for baseUrl.",VIEWABLE_IMPRESSION_ELAPSED_TIME:'[ec:01030018] Viewable impressions must define an "elapsedTime" parameter.'}},function(e,n,t){"use strict";t.d(n,"b",function(){return r}),t.d(n,"a",function(){return i});var r={GA4_GTAG:"gtag",GA4_GTM:"dataLayer",GA:"ga",LEGACY_GAQ:"_gaq",LEGACY_GAT:"_gat"},i={IMPRESSION:"impression",INTERACTION:"interaction"}},function(e,n,t){var r,i;!function(o){var a=!1;if(r=o,void 0!==(i="function"==typeof r?r.call(n,t,n,e):r)&&(e.exports=i),a=!0,e.exports=o(),a=!0,!a){var s=window.Cookies,c=window.Cookies=o();c.noConflict=function(){return window.Cookies=s,c}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var r in t)n[r]=t[r]}return n}function n(t){function r(n,i,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if(o=e({path:"/"},r.defaults,o),"number"==typeof o.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}o.expires=o.expires?o.expires.toUTCString():"";try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(e){}i=t.write?t.write(i,n):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),n=n.replace(/[\(\)]/g,escape);var c="";for(var l in o)o[l]&&(c+="; "+l,!0!==o[l]&&(c+="="+o[l]));return document.cookie=n+"="+i+c}n||(a={});for(var u=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,_=0;_<u.length;_++){var d=u[_].split("="),f=d.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var m=d[0].replace(p,decodeURIComponent);if(f=t.read?t.read(f,m):t(f,m)||f.replace(p,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(n===m){a=f;break}n||(a[m]=f)}catch(e){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(n,t){r(n,"",e(t,{expires:-1}))},r.withConverter=n,r}return n(function(){})})},function(e,n){function t(e,n){var t=n||0,i=r;return[i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]]].join("")}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=t},function(e,n){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)0==(3&n)&&(e=4294967296*Math.random()),i[n]=e>>>((3&n)<<3)&255;return i}}},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=t(2),o=t(20),a=t(1),s=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),c=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.trackers={},n.loggingEndpoint=n.loggingEndpoint||"https://edge.curalate.com/v1/error-logging/log",this.loggingEndpoint=n.loggingEndpoint,this.logger=new a.a(!1,{loggingEndpoint:n.loggingEndpoint})}return s(e,[{key:"_getTracker",value:function(e){var n=this.trackers[e];return n||void this.logger.logError(i.a.NO_TRACKER_FOR_EXPERIENCE+" "+e)}},{key:"init",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.siteName&&this.logger.setSiteName(n.siteName),this.trackers[e]){var t=i.a.METRICS_ALREADY_INITIALIZED_FOR_EXPERIENCE+" "+e+".";return this.logger.logError(t,!0)}n.loggingEndpoint=n.loggingEndpoint||this.loggingEndpoint;var r=new o.a(e,n);return this.trackers[e]=r,r}},{key:"destroy",value:function(e){var n=this,t=this._getTracker(e);return t?t.submitEventBatch().then(function(){t.stopBatchTimer(),delete n.trackers[e]}):Promise.resolve()}},{key:"recordEvent",value:function(e){var n=e.dynamicLandingPageDetailViewId,t=e.eventData,r=void 0===t?{}:t,o=e.eventName,a=e.experienceId,s=this._getTracker(a);if(s){n&&"string"==typeof n&&s.setDynamicLandingPageDetailViewId(n);var c=void 0;return"string"!=typeof o?this.logger.logError(i.a.INVALID_EVENT_NAME):(c="record"+(o.charAt(0).toUpperCase()+o.slice(1)),"function"!=typeof s[c]?this.logger.logError(i.a.INVALID_TRACKER_FUNCTION):s[c](r))}}},{key:"flushEvents",value:function(e){var n=this._getTracker(e);return n?n.submitEventBatch():Promise.resolve()}},{key:"startBatchTimer",value:function(e){var n=this._getTracker(e);if(n)return n.startBatchTimer()}},{key:"stopBatchTimer",value:function(e){var n=this._getTracker(e);if(n)return n.stopBatchTimer()}}]),e}();n.default=c},function(e,n,t){"use strict";var r={eventKeys:{carouselNavigation:"cn",curalensClick:"clc",experienceDisabled:"ed",infiniteScrollLoad:"isl",itemClick:"ic",itemHover:"ih",itemImpression:"ivi",loadMoreClick:"lmc",pageImpression:"pi",pageImpressionNoContent:"pinc",pageViewableImpression:"pvi",productAddToCart:"pratc",productClick:"prc",productHover:"prh",productImpression:"prvi"},optionalFields:{contentUnderThreshold:"cut",displayType:"dt",elapsedTime:"et",itemId:"iid",metricsContainer:"c",metricsModule:"m",parentProductId:"ppid",position:"pos",productId:"pid",productStyleId:"psid",x1:"x1",x2:"x2",y1:"y1",y2:"y2"},timing:{batchSizeThreshold:15,batchTimeThreshold:1e4}};n.a=r},function(e,n,t){"use strict";function r(e){var n=e.clientApiToken,r=e.containerId,o=e.dynamicLandingPageDetailViewId,a=e.experienceId,s=e.fpcuid,c=e.metricsId,l=e.rid,u=[];return o&&u.push("id="+o),r&&u.push("cid="+r),0===c.indexOf("datasource.")&&n&&u.push("clientApiToken="+n),a&&u.push("xp="+a),l&&u.push("rid="+l),s&&u.push("fpcuid="+s),encodeURIComponent(t.i(i.d)(document.referrer))&&u.push("ref="+encodeURIComponent(t.i(i.d)(document.referrer))),u.join("&")}var i=t(0);n.a=r},function(e,n,t){"use strict";function r(e,n){var r="t:"+t.i(i.d)(e.type)+"|ts:"+t.i(i.d)(e.timestamp),o=Object.keys(n).reduce(function(r,o){return void 0!==e[o]?r+"|"+n[o]+":"+t.i(i.d)(e[o]):r},r);return encodeURIComponent(o)}var i=t(0);n.a=r},function(e,n,t){"use strict";function r(e){var n=t.i(a.a)(document.domain);o.a.set("crl8.fpcuid",e,{expires:365,domain:n,path:""})}var i=t(4),o=t.n(i),a=t(12);n.a=r},function(e,n,t){"use strict";function r(e){var n=e.split(".");return-1!==["co","com"].indexOf(n[n.length-2])?n.slice(-3).join("."):n.slice(-2).join(".")}n.a=r},function(e,n,t){"use strict";function r(e){return"keepalive"in new window.Request("")?fetch(e,{keepalive:!0,mode:"no-cors"}):new Promise(function(n,t){var r=new window.Image(1,1);r.onload=function(){n()},r.onerror=function(){t()},r.src=e})}n.a=r},function(e,n,t){"use strict";function r(e,n){return e.baseUrl&&"string"==typeof e.baseUrl?e.metricsId&&"string"==typeof e.metricsId?e.pixelName&&"string"==typeof e.pixelName?void 0:n.logError(i.a.STRING_VALUE_FOR_PIXEL_NAME,!0):n.logError(i.a.STRING_VALUE_FOR_METRICS_ID,!0):n.logError(i.a.VALID_URL_FOR_BASEURL,!0)}var i=t(2);n.a=r},function(e,n,t){"use strict";function r(e){if(!e.requestId||"string"!=typeof e.requestId)throw new Error(o.a.TRACKING_EVENT_REQUEST_ID);if(!e.type||"string"!=typeof e.type)throw new Error(o.a.TRACKING_EVENT_TYPE);if(!e.timestamp||"number"!=typeof e.timestamp)throw new Error(o.a.TRACKING_EVENT_TIMESTAMP);if(!e.displayType||"string"!=typeof e.displayType)throw new Error(o.a.TRACKING_EVENT_DISPLAYTYPE)}function i(e,n,t){try{r(e)}catch(e){return t.logError(e.message),!1}switch(e.type){case n.eventKeys.pageImpression:return!0;case n.eventKeys.pageImpressionNoContent:return!!e.productId||(t.logError(o.a.PAGE_NO_CONTENT_IMPRESSION_PRODUCT_ID),!1);case n.eventKeys.pageViewableImpression:return!!e.elapsedTime||(t.logError(o.a.VIEWABLE_IMPRESSION_ELAPSED_TIME),!1);case n.eventKeys.itemImpression:return!!(e.itemId&&e.elapsedTime&&e.position)||(t.logError(o.a.ITEM_IMPRESSION_PARAMETERS),!1);case n.eventKeys.itemHover:return!(!e.itemId||!e.position)||(t.logError(o.a.ITEM_HOVER_PARAMETERS),!1);case n.eventKeys.itemClick:return!(!e.itemId||!e.position)||(t.logError(o.a.ITEM_CLICK_PARAMETERS),!1);case n.eventKeys.productImpression:return!!(e.productId&&e.productStyleId&&e.position&&e.elapsedTime)||(t.logError(o.a.PRODUCT_IMPRESSION_PARAMETERS),!1);case n.eventKeys.productHover:return!!(e.productId&&e.productStyleId&&e.position&&e.elapsedTime)||(t.logError(o.a.PRODUCT_HOVER_PARAMETERS),!1);case n.eventKeys.productClick:return!!(e.productId&&e.productStyleId&&e.position)||(t.logError(o.a.PRODUCT_CLICK_PARAMETERS),!1);case n.eventKeys.productAddToCart:return!(!e.productId||!e.position)||(t.logError(o.a.PRODUCT_ADD_TO_CART_PARAMETERS),!1);case n.eventKeys.curalensClick:return!!e.itemId||(t.logError(o.a.CURALENS_CLICK_ITEM_ID_PARAMETER),!1);case n.eventKeys.carouselNavigation:return-1===e.position||1===e.position||(t.logError(o.a.CAROUSEL_NAVIGATION_POSITION_PARAMETER),!1);case n.eventKeys.infiniteScrollLoad:return!!e.position||(t.logError(o.a.INFINITE_SCROLL_POSITION_PARAMETER),!1);case n.eventKeys.loadMoreClick:return!!e.position||(t.logError(o.a.LOAD_MORE_CLICK_POSITION_PARAMETER),!1);case n.eventKeys.experienceDisabled:return!0;default:return t.logError(o.a.UNKNOWN_EVENT_TYPE),!1}}var o=t(2);n.a=i},function(e,n,t){e.exports=t(7)},function(e,n,t){"use strict";function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o=t(1),a=t(3),s=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),c=function(){function e(n,t){var s;i(this,e),this.eventQueue=[],this.initialized=!1,this.hasProcessedEvent=!1,this.hasRecordedEvent=!1,this.config={customEventName:n.integrations.adobeAnalytics.customEventName||"crl8_gallery",displayType:n.displayType,eVars:n.integrations.adobeAnalytics.eVars,eventKeys:n.eventKeys,experienceId:n.experienceId,interactionLevel:n.integrations.adobeAnalytics.interactionLevel||a.a.IMPRESSION,loggingEndpoint:n.loggingEndpoint,rid:n.rid,useStandalone:n.integrations.adobeAnalytics.useStandalone},this.logger=new o.a(t,{loggingEndpoint:this.config.loggingEndpoint,siteName:n.siteName}),this.supportedEvents=(s={},r(s,this.config.eventKeys.pageImpression,!0),r(s,this.config.eventKeys.itemHover,!0),r(s,this.config.eventKeys.itemClick,!0),r(s,this.config.eventKeys.productClick,!0),s),this.checkForAdobeAnalytics(0)}return s(e,[{key:"checkForAdobeAnalytics",value:function(e){if(this.logger.logDebug("Checking for Adobe Analytics..."),window.s&&this.config.useStandalone)this.initialized=!0;else if(window._satellite&&!this.config.useStandalone)this.initialized=!0;else if(e>60)!window.s||window._satellite||this.config.useStandalone?!window.s&&window._satellite&&this.config.useStandalone?this.logger.logDebug('\n          Adobe Analytics configuration is incompatible. Initialization failed.\n          Standalone tracking is enabled, however the standalone Adobe "window.s" object is not present and "window._satellite" is present.\n        '):this.logger.logDebug("Adobe Analytics not detected. Initialization failed."):this.logger.logDebug('\n          Adobe Analytics configuration is incompatible. Initialization failed.\n          The standalone Adobe "window.s" object is present, but standalone tracking is not enabled and "window._satellite" is not present.\n        ');else{var n=e+1;setTimeout(this.checkForAdobeAnalytics.bind(this,n),500)}}},{key:"submitEventBatch",value:function(e){var n=this;if(!this.hasProcessedEvent&&!this.hasRecordedEvent){var t=e.filter(function(e){return!!n.supportedEvents[e.type]});if(!this.initialized)return void(this.eventQueue=this.eventQueue.concat(t));this.eventQueue.length&&(this.eventQueue.forEach(function(e){n.processEvent(e)}),this.eventQueue=[]),t.length&&t.forEach(function(e){n.processEvent(e)})}}},{key:"processEvent",value:function(e){var n=this.config,t=n.eventKeys,r=n.interactionLevel;if(!this.hasRecordedEvent&&!this.hasProcessedEvent){var i=e.type===t.pageImpression,o=e.type===t.itemHover||e.type===t.itemClick||e.type===t.productClick;if(!this.hasProcessedEvent&&r===a.a.IMPRESSION&&(i||o))return this.formEventLabel(),void(this.hasProcessedEvent=!0);!this.hasProcessedEvent&&r===a.a.INTERACTION&&o&&(this.formEventLabel(),this.hasProcessedEvent=!0)}}},{key:"formEventLabel",value:function(){var e=this.config,n=e.displayType,t=e.rid,r=e.useStandalone,i="";n&&t&&(i="v1:rid="+t+"&dt="+n),this.hasRecordedEvent||(r?this.sendToStandaloneAdobeAnalytics(i):this.sendToAdobeAnalytics(i,0))}},{key:"sendToAdobeAnalytics",value:function(e,n){if(window.crl8.metrics.trackers&&window.crl8.metrics.trackers[this.config.experienceId]){var t=window.crl8.metrics.trackers[this.config.experienceId].adobeAnalytics||{};t.requestId=e,"function"==typeof window._satellite.track?(window._satellite.track(this.config.customEventName,{requestId:t.requestId}),this.hasRecordedEvent=!0):this.logger.logDebug('Adobe Analytics failed because the "window._satellite.track" function is not present.')}else if(n>60)this.logger.logDebug("Failed to send eventLabel to Adobe Analytics. Tracking failed.");else{var r=n+1;setTimeout(this.sendToAdobeAnalytics.bind(this,e,r),500)}}},{key:"sendToStandaloneAdobeAnalytics",value:function(e){if("function"==typeof window.s.tl){var n=this.config.eVars,t=window.s.linkTrackVars;window.s[n]=e,window.s.linkTrackVars=n,window.s.tl(!0,"o",e),window.s.linkTrackVars=t,this.hasRecordedEvent=!0}else this.logger.logDebug('Adobe Analytics failed because the "window.s.tl" function is not present.')}}]),e}();n.a=c},function(e,n,t){"use strict";function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o=t(1),a=t(3),s=t(0),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(n,t){var a;i(this,e),this.eventQueue=[],this.initialized=!1,this.useLegacy=!1,this.useGa4Gtag=!1,this.ga4ThroughGtm=!1,this.useGa4Gtm=!1,this.metricsId=n.metricsId,this.config={actions:{pageImpression:"reel.impression",itemHover:"item.hover",itemClick:"item.click",productClick:"item.shop",productAddToCart:"item.cart"},category:"curalate.fanreel."+n.metricsId,displayType:n.displayType,enhancedEcommerce:{isEnabled:!(n.integrations.ga.enhancedEcommerce&&!1===n.integrations.ga.enhancedEcommerce.isEnabled)},eventKeys:n.eventKeys,loggingEndpoint:n.loggingEndpoint,rid:n.rid,ga4EventParam:"bvsc_event_data",ga4EventParam2:"bvsc_event_data_2"},this.supportedEvents=(a={},r(a,this.config.eventKeys.pageImpression,!0),r(a,this.config.eventKeys.itemHover,!0),r(a,this.config.eventKeys.itemClick,!0),r(a,this.config.eventKeys.productClick,!0),r(a,this.config.eventKeys.productAddToCart,!0),a),this.logger=new o.a(t,{loggingEndpoint:this.config.loggingEndpoint,siteName:n.siteName}),this.checkForGa(0)}return l(e,[{key:"checkForGa",value:function(e){var n=a.b.GA4_GTAG,t=a.b.GA4_GTM,r=a.b.GA,i=a.b.LEGACY_GAQ;if(this.ga4ThroughGtm=this.checkForGTM(),this.logger.logDebug("Checking for GA..."),"function"==typeof gtag?this.gaObject=n:this.ga4ThroughGtm?this.gaObject=t:window.GoogleAnalyticsObject?this.gaObject=window.GoogleAnalyticsObject:window[r]?this.gaObject=r:window[i]&&(this.gaObject=i),this.gaObject)this.initialized=!0,this.useLegacy=this.gaObject===i,this.useGa4Gtag=this.gaObject===n,this.useGa4Gtm=this.gaObject===t;else if(e>60)this.logger.logDebug("GA not detected. Initialization failed.");else{var o=e+1;setTimeout(this.checkForGa.bind(this,o),500)}}},{key:"submitEventBatch",value:function(e){var n=this,t=e.filter(function(e){return!!n.supportedEvents[e.type]});if(!this.initialized)return void(this.eventQueue=this.eventQueue.concat(t));this.eventQueue.length&&(this.eventQueue.forEach(function(e){n.processEvent(e)}),this.eventQueue=[]),t.length&&t.forEach(function(e){n.processEvent(e)})}},{key:"processEvent",value:function(e){var n=this,t=this.config,r=t.actions,i=t.displayType,o=t.eventKeys,a=t.rid,s=[];switch(e.type){case o.pageImpression:s.push({action:r.pageImpression,params:"v1:rid="+a+"&dt="+i,data:{type:e.type,displayType:i,rid:a}});break;case o.itemHover:s.push({action:r.itemHover,params:"v1:iid="+e.itemId,data:{type:e.type,itemId:e.itemId}});break;case o.itemClick:s.push({action:r.itemClick,params:"v1:iid="+e.itemId,data:{type:e.type,itemId:e.itemId}}),s.push({action:r.itemHover,params:"v1:iid="+e.itemId,data:{type:e.type,itemId:e.itemId}});break;case o.productClick:s.push({action:r.productClick,params:"v1:iid="+e.itemId+"&prid="+e.productId,data:{type:e.type,itemId:e.itemId,productId:e.productId}}),s.push({action:r.itemClick,params:"v1:iid="+e.itemId,data:{type:e.type,itemId:e.itemId}}),s.push({action:r.itemHover,params:"v1:iid="+e.itemId,data:{type:e.type,itemId:e.itemId}});break;case o.productAddToCart:s.push({action:r.productAddToCart,params:"v1:iid="+e.itemId+"&prid="+e.productId,data:{type:e.type,itemId:e.itemId,productId:e.productId}}),s.push({action:r.productClick,params:"v1:iid="+e.itemId+"&prid="+e.productId,data:{type:e.type,itemId:e.itemId,productId:e.productId}}),s.push({action:r.itemClick,params:"v1:iid="+e.itemId,data:{type:e.type,itemId:e.itemId}}),s.push({action:r.itemHover,params:"v1:iid="+e.itemId,data:{type:e.type,itemId:e.itemId}});break;default:return}s.forEach(function(e){n.useLegacy?n.sendToLegacyGa(e):n.useGa4Gtag?n.sendViaGtag(e):n.useGa4Gtm?n.sendViaGtm(e):n.sendToGa(e)})}},{key:"sendViaGtag",value:function(e){if("function"==typeof window[this.gaObject]){var n,i=this.generateEventParams(e);window[this.gaObject]("event","bvsc."+e.action,(n={},r(n,this.config.ga4EventParam,i),r(n,this.config.ga4EventParam2,t.i(s.e)(e.params,"&prid=")?"&prid="+e.data.productId:""),r(n,"event_action",e.action),r(n,"event_label",e.params),r(n,"event_category",this.config.category),n))}}},{key:"sendViaGtm",value:function(e){if("object"===c(window[this.gaObject])&&"function"==typeof window[this.gaObject].push){var n,i=this.generateEventParams(e);window[this.gaObject].push((n={event:"bvsc."+e.action},r(n,this.config.ga4EventParam,i),r(n,this.config.ga4EventParam2,t.i(s.e)(e.params,"&prid=")?"&prid="+e.data.productId:""),r(n,"event_action",e.action),r(n,"event_label",e.params),r(n,"event_category",this.config.category),n))}}},{key:"generateEventParams",value:function(e){if(t.i(s.e)(e.params,"&prid=")){var n=e.params.split("&prid=");return this.metricsId+"|"+n[0]}return this.metricsId+"|"+e.params}},{key:"checkForGTM",value:function(){var e=Array.from(document.getElementsByTagName("script"));return!!e&&e.some(function(e){return e.src.includes("gtm.js")})}},{key:"sendToGa",value:function(e){var n=window[this.gaObject].getAll&&"function"==typeof window[this.gaObject].getAll?window[this.gaObject].getAll():null;if(n&&n.length){this.config.enhancedEcommerce.isEnabled&&e.action===this.config.actions.productClick&&this.sendEnhancedEcommerceProductClick(n,e.data);var t=n[0].get("name")?n[0].get("name")+".send":"send";window[this.gaObject](t,"event",this.config.category,e.action,e.params,{nonInteraction:e.action===this.config.actions.pageImpression})}}},{key:"sendToLegacyGa",value:function(e){var n=a.b.LEGACY_GAQ,t=a.b.LEGACY_GAT;if(window[t]&&"function"==typeof window[t]._getTrackers&&"function"==typeof window[n].push){var r=window[t]._getTrackers(),i=r&&r.length?r[0]._getName()+".":"";window[n].push([i+"_trackEvent",this.config.category,e.action,e.params])}}},{key:"sendEnhancedEcommerceProductClick",value:function(e,n){var t=e&&e.length&&e.find(function(e){return e.plugins_&&e.plugins_.get("ec")});if(t&&n.productId){var r=t.get("name");window[this.gaObject](r+".ec:addProduct",{id:n.productId}),window[this.gaObject](r+".ec:setAction","click",{list:"Curalate"}),window[this.gaObject](r+".send",{hitType:"event",eventCategory:this.config.category,eventAction:"click",eventLabel:"Curalate - Product Click"})}}}]),e}();n.a=u},,function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=t(4),o=t.n(i),a=t(21),s=t.n(a),c=t(8),l=t(1),u=t(0),p=t(9),_=t(14),d=t(15),f=t(11),m=t(10),h=t(13),b=t(18),y=t(17),g=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},v=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),E=function(){function e(n){var i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.eventQueue=[],this.logger=new l.a(!1,{loggingEndpoint:a.loggingEndpoint,siteName:a.siteName});var p=t.i(u.a)(c.a,a),d=void 0;if(p.disableFirstPartyCookie)d="";else{var m=o.a.get("crl8.fpcuid");m?d=m:(d=s()(),t.i(f.a)(d))}this.config=g({experienceId:n,fpcuid:d,rid:s()()},p),(window.crl8&&crl8.debug||p.debug)&&(this.debug=!0,this.logger.setDebug(!0)),t.i(_.a)(this.config,this.logger),this.registerIntegrations(),window.addEventListener("beforeunload",function(){i.submitEventBatch()}),this.logger.logDebug("analytics initialized for "+n),this.startBatchTimer()}return v(e,[{key:"registerIntegrations",value:function(){var e=this.config.integrations;e&&!t.i(u.b)(e)&&(e.ga&&e.ga.isEnabled&&(this.ga=new b.a(this.config,this.debug)),e.adobeAnalytics&&e.adobeAnalytics.isEnabled&&(this.adobeAnalytics=new y.a(this.config,this.debug)))}},{key:"setDynamicLandingPageDetailViewId",value:function(e){this.config.dynamicLandingPageDetailViewId=e}},{key:"startBatchTimer",value:function(){var e=this;this.batchTimerId||(this.batchTimerId=window.setInterval(function(){e.logger.logDebug("batch timer reached, flushing queue..."),e.submitEventBatch()},this.config.timing.batchTimeThreshold))}},{key:"stopBatchTimer",value:function(){this.batchTimerId&&(window.clearInterval(this.batchTimerId),this.batchTimerId=null)}},{key:"resetBatchTimer",value:function(){this.batchTimerId&&(this.stopBatchTimer(),this.startBatchTimer())}},{key:"enqueueEvent",value:function(e){this.eventQueue.push(e),this.eventQueue.length>=this.config.timing.batchSizeThreshold&&this.submitEventBatch()}},{key:"submitEventBatch",value:function(){var e=this;return 0===this.eventQueue.length?Promise.resolve():(this.ga&&this.ga.submitEventBatch(this.eventQueue),this.adobeAnalytics&&this.adobeAnalytics.submitEventBatch(this.eventQueue),new Promise(function(n,r){var i=e.config,o=i.baseUrl,a=i.metricsId,c=i.optionalFields,l=i.pixelName,u=i.validateEvents,_="https:"===document.location.protocol?"https:":"http:",d=t.i(p.a)(e.config),f=e.debug||u?"&crl8-validate=true":"",b=e.eventQueue.reduce(function(e,n){return e+"&e="+t.i(m.a)(n,c)},""),y=""+d+b+f+"&cache=_"+s()(),g=""+_+o+"/"+a+"/"+l+"?"+y;t.i(h.a)(g).then(function(){e.logger.logDebug('crl8 pixel with metricsId "'+a+'" fired successfully: '+y),n()}).catch(function(){e.logger.logDebug('crl8 pixel with metricsId "'+a+'" failed to fire: '+y),r()}),e.eventQueue=[],e.resetBatchTimer()}))}},{key:"recordPageImpression",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.pageImpression,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering page impression",n),this.submitEventBatch())}},{key:"recordPageImpressionNoContent",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.pageImpressionNoContent,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering page no-content impression",n),this.submitEventBatch())}},{key:"recordPageViewableImpression",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.pageViewableImpression,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering page viewable impression",n))}},{key:"recordItemImpression",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.itemImpression,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering item impression",n))}},{key:"recordItemHover",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.itemHover,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering item hover",n))}},{key:"recordItemClick",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.itemClick,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering item click",n),this.submitEventBatch())}},{key:"recordProductImpression",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.productImpression,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering product impression",n))}},{key:"recordProductHover",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.productHover,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering product hover",n))}},{key:"recordProductClick",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.productClick,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering product click",n),this.submitEventBatch())}},{key:"recordProductAddToCart",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.productAddToCart,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering product add-to-cart",n),this.submitEventBatch())}},{key:"recordCuralensClick",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.curalensClick,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering curalens click",n),this.submitEventBatch())}},{key:"recordCarouselNavigation",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.carouselNavigation,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering carousel navigation",n),this.submitEventBatch())}},{key:"recordInfiniteScrollLoad",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.infiniteScrollLoad,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering infinite scroll load",n),this.submitEventBatch())}},{key:"recordLoadMoreClick",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.loadMoreClick,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering load more click",n),this.submitEventBatch())}},{key:"recordExperienceDisabled",value:function(e){var n=g({},e,{displayType:this.config.displayType,requestId:this.config.rid,type:this.config.eventKeys.experienceDisabled,timestamp:t.i(u.c)()});t.i(d.a)(n,this.config,this.logger)&&(this.enqueueEvent(n),this.logger.logDebug("registering experience disabled event",n),this.submitEventBatch())}}]),e}();n.a=E},function(e,n,t){var r=t(22),i=t(23),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,n,t){function r(e,n,t){var r=n&&t||0,u=n||[];e=e||{};var p=e.node||i,_=void 0!==e.clockseq?e.clockseq:o;if(null==p||null==_){var d=a();null==p&&(p=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==_&&(_=o=16383&(d[6]<<8|d[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:l+1,h=f-c+(m-l)/1e4;if(h<0&&void 0===e.clockseq&&(_=_+1&16383),(h<0||f>c)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=m,o=_,f+=122192928e5;var b=(1e4*(268435455&f)+m)%4294967296;u[r++]=b>>>24&255,u[r++]=b>>>16&255,u[r++]=b>>>8&255,u[r++]=255&b;var y=f/4294967296*1e4&268435455;u[r++]=y>>>8&255,u[r++]=255&y,u[r++]=y>>>24&15|16,u[r++]=y>>>16&255,u[r++]=_>>>8|128,u[r++]=255&_;for(var g=0;g<6;++g)u[r+g]=p[g];return n||s(u)}var i,o,a=t(6),s=t(5),c=0,l=0;e.exports=r},function(e,n,t){function r(e,n,t){var r=n&&t||0;"string"==typeof e&&(n="binary"===e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var s=0;s<16;++s)n[r+s]=a[s];return n||o(a)}var i=t(6),o=t(5);e.exports=r}])})},function(e,n,t){!function(n,t){e.exports=t()}(0,function(){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=19)}({19:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={},i=null,o=["checkout","addtocart","removefromcart","viewproduct","pageview"],a=[],s=[],c={},l={},u={pixelId:"a",transactionId:"b",userId:"c",cartValue:"d",taxValue:"e",shippingValue:"f",shippingCity:"g",shippingState:"h",shippingCountry:"i",currency:"j",numProducts:"k",productId:"l",productName:"m",quantity:"n",price:"o",displayPrice:"p",sku:"q",category:"r",eventType:"s",firstPartyCuid:"t",referrer:"u",title:"v",location:"w",path:"x"},p=!1,_=function(e){return e.replace?e.replace(/\|/g,""):e},d=function(e){var n=function(e){for(var n=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(var i=t[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return""}(e),t=n||function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})}(),r=new Date;r.setTime(r.getTime()+31536e6);var i,o=r.toGMTString(),a=document.domain.split(".");return i=-1!==["co","com"].indexOf(a[a.length-2])?"."+a.slice(-3).join("."):"."+a.slice(-2).join("."),document.cookie=e+"="+t+";expires="+o+";domain="+i+";path=/",t}("crl8.fpcuid"),f=document.referrer,m=function(e,n){return e.hasOwnProperty("productId")&&e.hasOwnProperty("productName")?-1===o.indexOf(n.toLowerCase())?void console.error("crl8: Invalid event type. Event type must be one of "+o.join(", ")):(e.eventType=n.toLowerCase(),void("checkout"===e.eventType?s.push(e):a.push(e))):void console.error("crl8: Product info is missing. Product id and product name must be included for product:",e)},h=function(){return s.length>0},b=function(e){var n,t=[];if(e){for(Object.keys(c).forEach(function(e){t.push(u[e]+"="+encodeURIComponent(c[e]))}),t.push(u.numProducts+"="+(s.length+a.length)),n=0;n<s.length;n++)Object.keys(s[n]).forEach(function(e){t.push(u[e]+n+"="+encodeURIComponent(s[n][e]))});E("Preparing to send "+s.length+" product(s) as part of checkout.",s)}else t.push(u.numProducts+"="+a.length);var r=e?s.length:0;for(n=0;n<a.length;n++)Object.keys(a[n]).forEach(function(e){t.push(u[e]+(n+r)+"="+encodeURIComponent(a[n][e]))});return a.length>0&&E("Preparing to send "+a.length+" product(s).",a),Object.keys(l).forEach(function(e){t.push(u[e]+"="+encodeURIComponent(_(l[e])))}),t.push(u.firstPartyCuid+"="+d),t.push(u.referrer+"="+encodeURIComponent(_(f))),t.join("&")},y=function(e){var n=new Image(1,1),t="https:"===document.location.protocol?"https:":"http:",r=b(e);n.setAttribute("alt",""),n.setAttribute("aria-hidden","true"),n.onload=function(){E("Curalate pixel ID "+i+" fired successfully.")},n.onerror=function(){E("Curalate pixel "+i+" failed to fire.")},n.src=t+"//edge.curalate.com/api/v1/pixel/"+i+"/pixel.png?"+r},g=function(e){e&&(s=[],c={}),a=[],l={}},v=function(e){for(;e.length>0;){var n=e.shift(),t=n[0],i=Array.prototype.slice.call(n).slice(1);"function"==typeof r[t]?r[t].call(window,i):console.error("crl8: Invalid function specified: "+t)}},E=function(e,n){var t=!!document.documentMode;p&&(n&&t?console.log("[crl8 debug] "+e,JSON.stringify(n)):n?console.log("[crl8 debug] "+e,n):console.log("[crl8 debug] "+e))};r.init=function(e){i=e[0],p=!!e[1]&&e[1],E("Debug mode enabled.")},r.pageView=function(e){var n=e[0]?e[0]:{location:window.location.href};return Object.keys(l).length>0?void console.error("crl8: Only 1 pageview can be recorded at a time. Call send before adding a second pageview."):n.hasOwnProperty("location")||n.hasOwnProperty("path")?(l=n,void E("Viewed page:",n)):void console.error("crl8: must define either a location or path for Pageview events. Please add one of location or path.")},r.addToCart=function(e){var n=e[0];m(n,"addtocart"),E("Added product to cart:",n)},r.removeFromCart=function(e){var n=e[0];m(n,"removefromcart"),E("Removed product from cart:",n)},r.viewProduct=function(e){var n=e[0];m(n,"viewproduct"),E("Viewed product:",n)},r.addProduct=function(e){var n=e[0];m(n,"checkout"),E("Added product for checkout:",n)},r.addTransactionInfo=function(e){var n=e[0];return Object.keys(c).length>0?void console.error("crl8: Only 1 transaction can be added at a time. Call send before adding a second transaction."):n.hasOwnProperty("transactionId")?(c=n,void E("Added transaction info for checkout:",n)):void console.error("crl8: Transaction id must be included in info for transaction:",n)},r.send=function(e){if(!i)return void console.error("crl8: Curalate pixel must be initialized with a pixel id before data can be sent.");if(e.length>0){var n=e[0].toLowerCase(),t=e[1];o.indexOf(n.toLowerCase())>=0?("addtocart"===n?r.addToCart([t]):"viewproduct"===n?r.viewProduct([t]):"removefromcart"===n?r.removeFromCart([t]):"pageview"===n&&r.pageView([t]),y(!1),g(!1)):console.error("crl8: Unsupported event type passed in to 'send'.")}else{if(0===s.length&&0===a.length)return void console.error("crl8: 0 products have been added. At least 1 product must be added to send data.");if(Object.keys(c).length>0){if(!c.hasOwnProperty("transactionId"))return void console.error("crl8: Transaction id must be specified before checkout data can be sent.");if(!h())return void console.error("crl8: 0 checkout products have been added. At least 1 product must be added to send checkout data.")}else if(h()&&0===Object.keys(c).length)return void console.error("crl8: Transaction info must be added with addTransactionInfo before checkout data can be sent.");y(!0),g(!0)}},n.default=function(e){return!e instanceof Array&&console.error("[crl8]: Pixel must be initialized with an array"),v(e),function(){e=[],e.push(arguments),v(e)}}}})})},function(e,n,t){t(0)}]);
if (window.crl8.EventBus) {
window.crl8.EventBus.dispatchEvent('registerExperienceOptions', {
    containerId: 'product',
    options: {"api":{"sourceId":"VnRnxUAFgQTacyDg"},"metrics":{"displayType":"Pdp","metricsId":"uklDGtQG"},"reportMedia":{"reelId":"uklDGtQG"}}
});
window.crl8.EventBus.dispatchEvent('registerExperienceOptions', {
    containerId: 'campaign',
    options: {"api":{"sourceId":"wzUbjWclYIHIfleQ"},"metrics":{"displayType":"Campaign","metricsId":"xb4JYt5i"},"reportMedia":{"reelId":"xb4JYt5i"}}
});
window.crl8.EventBus.dispatchEvent('registerContainerMapper', function(containerId) {
    var experienceName = containerId;
    switch(containerId) {
        case 'product':
            experienceName = 'custom-carousel-1523315816639';
            break;
        case 'campaign':
            experienceName = 'custom-carousel-1523315816639';
            break;
    }
    return Promise.resolve(experienceName);
});
window.crl8.EventBus.dispatchEvent('initializeCuralatePixel', { pixelId: 117025, useDebug: false, cookieConsent: false });
window.crl8.EventBus.dispatchEvent('siteReady', { name: 'bose-rcuh8v' });
}