function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function a(b){return typeof b}:function a(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return!!Array.isArray(a)&&(g(a,c[b],c),!0)}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&ka(d,c)}function j(a,b){return function c(){return a.apply(b,arguments)}}function k(a,b){return _typeof(a)===na?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function a(c,d){return c[b]>d[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<la.length;){if(c=la[g],(e=c?c+f:b)in a)return e;g++}return d}function v(){return ta++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b=a.options.inputClass;return new(b||(wa?M:xa?P:va?R:L))(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&za&&d-e==0,g=b&(Ba|Ca)&&d-e==0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=qa(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=pa(j.x)>pa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==za&&f.eventType!==Ba||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ca&&(i>ya||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=pa(l.x)>pa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:oa(a.pointers[c].clientX),clientY:oa(a.pointers[c].clientY)},c++;return{timeStamp:qa(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:oa(a[0].clientX),y:oa(a[0].clientY)};for(var c=0,d=0,e=0;e<b;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:oa(c/b),y:oa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Da:pa(a)>=pa(b)?a<0?Ea:Fa:b<0?Ga:Ha}function H(a,b,c){c||(c=La);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=La);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ma)+I(a[1],a[0],Ma)}function K(a,b){return H(b[0],b[1],Ma)/H(a[0],a[1],Ma)}function L(){this.evEl=Oa,this.evWin=Pa,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Sa,this.evWin=Ta,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=Va,this.evWin=Wa,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ba|Ca)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=Ya,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(za|Aa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===za)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ba|Ca)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&za?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ba|Ca)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function a(){var b=d.indexOf(c);b>-1&&d.splice(b,1)};setTimeout(e,Za)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(f<=$a&&g<=$a)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,db))return db;var b=p(a,eb),c=p(a,fb);return b&&c?db:b||c?b?eb:fb:p(a,cb)?cb:bb}function X(a){this.options=ka({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=ib,this.simultaneous={},this.requireFail=[]}function Y(a){return a&nb?"cancel":a&lb?"end":a&kb?"move":a&jb?"start":""}function Z(a){return a==Ha?"down":a==Ga?"up":a==Ea?"left":a==Fa?"right":""}function $(a,b){var c=b.manager;return c?c.get(a):a}function _(){X.apply(this,arguments)}function aa(){_.apply(this,arguments),this.pX=null,this.pY=null}function ba(){_.apply(this,arguments)}function ca(){X.apply(this,arguments),this._timer=null,this._input=null}function da(){_.apply(this,arguments)}function ea(){_.apply(this,arguments)}function fa(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ga(a,b){return b=b||{},b.recognizers=l(b.recognizers,ga.defaults.preset),new ha(a,b)}function ha(a,b){this.options=ka({},ga.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ia(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ia(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ja(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ka,la=["","webkit","Moz","MS","ms","o"],ma=b.createElement("div"),na="function",oa=Math.round,pa=Math.abs,qa=Date.now;ka="function"!=typeof Object.assign?function a(b){if(b===d||null===b)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(b),e=1;e<arguments.length;e++){var f=arguments[e];if(f!==d&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c}:Object.assign;var ra=h(function a(b,c,e){for(var f=Object.keys(c),g=0;g<f.length;)(!e||e&&b[f[g]]===d)&&(b[f[g]]=c[f[g]]),g++;return b},"extend","Use `assign`."),sa=h(function a(b,c){return ra(b,c,!0)},"merge","Use `assign`."),ta=1,ua=/mobile|tablet|ip(ad|hone|od)|android/i,va="ontouchstart"in a,wa=u(a,"PointerEvent")!==d,xa=va&&ua.test(navigator.userAgent),ya=25,za=1,Aa=2,Ba=4,Ca=8,Da=1,Ea=2,Fa=4,Ga=8,Ha=16,Ia=Ea|Fa,Ja=Ga|Ha,Ka=Ia|Ja,La=["x","y"],Ma=["clientX","clientY"];x.prototype={handler:function a(){},init:function a(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function a(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Na={mousedown:za,mousemove:Aa,mouseup:Ba},Oa="mousedown",Pa="mousemove mouseup";i(L,x,{handler:function a(b){var c=Na[b.type];c&za&&0===b.button&&(this.pressed=!0),c&Aa&&1!==b.which&&(c=Ba),this.pressed&&(c&Ba&&(this.pressed=!1),this.callback(this.manager,c,{pointers:[b],changedPointers:[b],pointerType:"mouse",srcEvent:b}))}});var Qa={pointerdown:za,pointermove:Aa,pointerup:Ba,pointercancel:Ca,pointerout:Ca},Ra={2:"touch",3:"pen",4:"mouse",5:"kinect"},Sa="pointerdown",Ta="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Sa="MSPointerDown",Ta="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function a(b){var c=this.store,d=!1,e=b.type.toLowerCase().replace("ms",""),f=Qa[e],g=Ra[b.pointerType]||b.pointerType,h="touch"==g,i=r(c,b.pointerId,"pointerId");f&za&&(0===b.button||h)?i<0&&(c.push(b),i=c.length-1):f&(Ba|Ca)&&(d=!0),i<0||(c[i]=b,this.callback(this.manager,f,{pointers:c,changedPointers:[b],pointerType:g,srcEvent:b}),d&&c.splice(i,1))}});var Ua={touchstart:za,touchmove:Aa,touchend:Ba,touchcancel:Ca},Va="touchstart",Wa="touchstart touchmove touchend touchcancel";i(N,x,{handler:function a(b){var c=Ua[b.type];if(c===za&&(this.started=!0),this.started){var d=O.call(this,b,c);c&(Ba|Ca)&&d[0].length-d[1].length==0&&(this.started=!1),this.callback(this.manager,c,{pointers:d[0],changedPointers:d[1],pointerType:"touch",srcEvent:b})}}});var Xa={touchstart:za,touchmove:Aa,touchend:Ba,touchcancel:Ca},Ya="touchstart touchmove touchend touchcancel";i(P,x,{handler:function a(b){var c=Xa[b.type],d=Q.call(this,b,c);d&&this.callback(this.manager,c,{pointers:d[0],changedPointers:d[1],pointerType:"touch",srcEvent:b})}});var Za=2500,$a=25;i(R,x,{handler:function a(b,c,d){var e="touch"==d.pointerType,f="mouse"==d.pointerType;if(!(f&&d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents)){if(e)S.call(this,c,d);else if(f&&U.call(this,d))return;this.callback(b,c,d)}},destroy:function a(){this.touch.destroy(),this.mouse.destroy()}});var _a=u(ma.style,"touchAction"),ab=_a!==d,bb="auto",cb="manipulation",db="none",eb="pan-x",fb="pan-y",gb=function hb(){if(!ab)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=!c||a.CSS.supports("touch-action",d)}),b}();V.prototype={set:function a(b){"compute"==b&&(b=this.compute()),ab&&this.manager.element.style&&gb[b]&&(this.manager.element.style[_a]=b),this.actions=b.toLowerCase().trim()},update:function a(){this.set(this.manager.options.touchAction)},compute:function a(){var b=[];return g(this.manager.recognizers,function(a){k(a.options.enable,[a])&&(b=b.concat(a.getTouchAction()))}),W(b.join(" "))},preventDefaults:function a(b){var c=b.srcEvent,d=b.offsetDirection;if(this.manager.session.prevented)return void c.preventDefault();var e=this.actions,f=p(e,db)&&!gb[db],g=p(e,fb)&&!gb[fb],h=p(e,eb)&&!gb[eb];if(f){var i=1===b.pointers.length,j=b.distance<2,k=b.deltaTime<250;if(i&&j&&k)return}return h&&g?void 0:f||g&&d&Ia||h&&d&Ja?this.preventSrc(c):void 0},preventSrc:function a(b){this.manager.session.prevented=!0,b.preventDefault()}};var ib=1,jb=2,kb=4,lb=8,mb=lb,nb=16;X.prototype={defaults:{},set:function a(b){return ka(this.options,b),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function a(b){if(f(b,"recognizeWith",this))return this;var c=this.simultaneous;return b=$(b,this),c[b.id]||(c[b.id]=b,b.recognizeWith(this)),this},dropRecognizeWith:function a(b){return f(b,"dropRecognizeWith",this)?this:(b=$(b,this),delete this.simultaneous[b.id],this)},requireFailure:function a(b){if(f(b,"requireFailure",this))return this;var c=this.requireFail;return b=$(b,this),-1===r(c,b)&&(c.push(b),b.requireFailure(this)),this},dropRequireFailure:function a(b){if(f(b,"dropRequireFailure",this))return this;b=$(b,this);var c=r(this.requireFail,b);return c>-1&&this.requireFail.splice(c,1),this},hasRequireFailures:function a(){return this.requireFail.length>0},canRecognizeWith:function a(b){return!!this.simultaneous[b.id]},emit:function a(b){function a(a){c.manager.emit(a,b)}var c=this,d=this.state;d<lb&&a(c.options.event+Y(d)),a(c.options.event),b.additionalEvent&&a(b.additionalEvent),d>=lb&&a(c.options.event+Y(d))},tryEmit:function a(b){if(this.canEmit())return this.emit(b);this.state=32},canEmit:function a(){for(var b=0;b<this.requireFail.length;){if(!(this.requireFail[b].state&(32|ib)))return!1;b++}return!0},recognize:function a(b){var c=ka({},b);if(!k(this.options.enable,[this,c]))return this.reset(),void(this.state=32);this.state&(mb|nb|32)&&(this.state=ib),this.state=this.process(c),this.state&(jb|kb|lb|nb)&&this.tryEmit(c)},process:function a(b){},getTouchAction:function a(){},reset:function a(){}},i(_,X,{defaults:{pointers:1},attrTest:function a(b){var c=this.options.pointers;return 0===c||b.pointers.length===c},process:function a(b){var c=this.state,d=b.eventType,e=c&(jb|kb),f=this.attrTest(b);return e&&(d&Ca||!f)?c|nb:e||f?d&Ba?c|lb:c&jb?c|kb:jb:32}}),i(aa,_,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ka},getTouchAction:function a(){var b=this.options.direction,c=[];return b&Ia&&c.push(fb),b&Ja&&c.push(eb),c},directionTest:function a(b){var c=this.options,d=!0,e=b.distance,f=b.direction,g=b.deltaX,h=b.deltaY;return f&c.direction||(c.direction&Ia?(f=0===g?Da:g<0?Ea:Fa,d=g!=this.pX,e=Math.abs(b.deltaX)):(f=0===h?Da:h<0?Ga:Ha,d=h!=this.pY,e=Math.abs(b.deltaY))),b.direction=f,d&&e>c.threshold&&f&c.direction},attrTest:function a(b){return _.prototype.attrTest.call(this,b)&&(this.state&jb||!(this.state&jb)&&this.directionTest(b))},emit:function a(b){this.pX=b.deltaX,this.pY=b.deltaY;var c=Z(b.direction);c&&(b.additionalEvent=this.options.event+c),this._super.emit.call(this,b)}}),i(ba,_,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function a(){return[db]},attrTest:function a(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.scale-1)>this.options.threshold||this.state&jb)},emit:function a(b){if(1!==b.scale){var c=b.scale<1?"in":"out";b.additionalEvent=this.options.event+c}this._super.emit.call(this,b)}}),i(ca,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function a(){return[bb]},process:function a(b){var c=this.options,d=b.pointers.length===c.pointers,f=b.distance<c.threshold,g=b.deltaTime>c.time;if(this._input=b,!f||!d||b.eventType&(Ba|Ca)&&!g)this.reset();else if(b.eventType&za)this.reset(),this._timer=e(function(){this.state=mb,this.tryEmit()},c.time,this);else if(b.eventType&Ba)return mb;return 32},reset:function a(){clearTimeout(this._timer)},emit:function a(b){this.state===mb&&(b&&b.eventType&Ba?this.manager.emit(this.options.event+"up",b):(this._input.timeStamp=qa(),this.manager.emit(this.options.event,this._input)))}}),i(da,_,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function a(){return[db]},attrTest:function a(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.rotation)>this.options.threshold||this.state&jb)}}),i(ea,_,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ia|Ja,pointers:1},getTouchAction:function a(){return aa.prototype.getTouchAction.call(this)},attrTest:function a(b){var c,d=this.options.direction;return d&(Ia|Ja)?c=b.overallVelocity:d&Ia?c=b.overallVelocityX:d&Ja&&(c=b.overallVelocityY),this._super.attrTest.call(this,b)&&d&b.offsetDirection&&b.distance>this.options.threshold&&b.maxPointers==this.options.pointers&&pa(c)>this.options.velocity&&b.eventType&Ba},emit:function a(b){var c=Z(b.offsetDirection);c&&this.manager.emit(this.options.event+c,b),this.manager.emit(this.options.event,b)}}),i(fa,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function a(){return[cb]},process:function a(b){var c=this.options,d=b.pointers.length===c.pointers,f=b.distance<c.threshold,g=b.deltaTime<c.time;if(this.reset(),b.eventType&za&&0===this.count)return this.failTimeout();if(f&&g&&d){if(b.eventType!=Ba)return this.failTimeout();var h=!this.pTime||b.timeStamp-this.pTime<c.interval,i=!this.pCenter||H(this.pCenter,b.center)<c.posThreshold;this.pTime=b.timeStamp,this.pCenter=b.center,i&&h?this.count+=1:this.count=1,this._input=b;if(0===this.count%c.taps)return this.hasRequireFailures()?(this._timer=e(function(){this.state=mb,this.tryEmit()},c.interval,this),jb):mb}return 32},failTimeout:function a(){return this._timer=e(function(){this.state=32},this.options.interval,this),32},reset:function a(){clearTimeout(this._timer)},emit:function a(){this.state==mb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ga.VERSION="2.0.8",ga.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[da,{enable:!1}],[ba,{enable:!1},["rotate"]],[ea,{direction:Ia}],[aa,{direction:Ia},["swipe"]],[fa],[fa,{event:"doubletap",taps:2},["tap"]],[ca]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ha.prototype={set:function a(b){return ka(this.options,b),b.touchAction&&this.touchAction.update(),b.inputTarget&&(this.input.destroy(),this.input.target=b.inputTarget,this.input.init()),this},stop:function a(b){this.session.stopped=b?2:1},recognize:function a(b){var c=this.session;if(!c.stopped){this.touchAction.preventDefaults(b);var d,e=this.recognizers,f=c.curRecognizer;(!f||f&&f.state&mb)&&(f=c.curRecognizer=null);for(var g=0;g<e.length;)d=e[g],2===c.stopped||f&&d!=f&&!d.canRecognizeWith(f)?d.reset():d.recognize(b),!f&&d.state&(jb|kb|lb)&&(f=c.curRecognizer=d),g++}},get:function a(b){if(b instanceof X)return b;for(var c=this.recognizers,d=0;d<c.length;d++)if(c[d].options.event==b)return c[d];return null},add:function a(b){if(f(b,"add",this))return this;var c=this.get(b.options.event);return c&&this.remove(c),this.recognizers.push(b),b.manager=this,this.touchAction.update(),b},remove:function a(b){if(f(b,"remove",this))return this;if(b=this.get(b)){var c=this.recognizers,d=r(c,b);-1!==d&&(c.splice(d,1),this.touchAction.update())}return this},on:function a(b,c){if(b!==d&&c!==d){var e=this.handlers;return g(q(b),function(a){e[a]=e[a]||[],e[a].push(c)}),this}},off:function a(b,c){if(b!==d){var e=this.handlers;return g(q(b),function(a){c?e[a]&&e[a].splice(r(e[a],c),1):delete e[a]}),this}},emit:function a(b,c){this.options.domEvents&&ja(b,c);var d=this.handlers[b]&&this.handlers[b].slice();if(d&&d.length){c.type=b,c.preventDefault=function(){c.srcEvent.preventDefault()};for(var e=0;e<d.length;)d[e](c),e++}},destroy:function a(){this.element&&ia(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ka(ga,{INPUT_START:za,INPUT_MOVE:Aa,INPUT_END:Ba,INPUT_CANCEL:Ca,STATE_POSSIBLE:ib,STATE_BEGAN:jb,STATE_CHANGED:kb,STATE_ENDED:lb,STATE_RECOGNIZED:mb,STATE_CANCELLED:nb,STATE_FAILED:32,DIRECTION_NONE:Da,DIRECTION_LEFT:Ea,DIRECTION_RIGHT:Fa,DIRECTION_UP:Ga,DIRECTION_DOWN:Ha,DIRECTION_HORIZONTAL:Ia,DIRECTION_VERTICAL:Ja,DIRECTION_ALL:Ka,Manager:ha,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:X,AttrRecognizer:_,Tap:fa,Pan:aa,Swipe:ea,Pinch:ba,Rotate:da,Press:ca,on:m,off:n,each:g,merge:sa,extend:ra,assign:ka,inherit:i,bindFn:j,prefixed:u}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=ga,"function"==typeof define&&define.amd?define(function(){return ga}):"undefined"!=typeof module&&module.exports?module.exports=ga:a.Hammer=ga}(window,document),function(a){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],a):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?a(require("jquery"),require("hammerjs")):a($jq,Hammer)}(function(a,b){function c(c,d){var e=a(c);e.data("hammer")||e.data("hammer",new b(e[0],d))}a.fn.hammer=function(a){return this.each(function(){c(this,a)})},b.Manager.prototype.emit=function(b){return function(c,d){b.call(this,c,d),a(this.element).trigger({type:c,gesture:d})}}(b.Manager.prototype.emit)}),function(a,b){"use strict";var c;if("object"==("undefined"==typeof exports?"undefined":_typeof(exports))){try{c=require("moment")}catch(a){}module.exports=b(c)}else"function"==typeof define&&define.amd?define(function(a){try{c=a("moment")}catch(a){}return b(c)}):a.Pikaday=b(a.moment)}(this,function(a){"use strict";var b="function"==typeof a,c=!!window.addEventListener,d=window.document,e=window.setTimeout,f=function a(b,d,e,f){c?b.addEventListener(d,e,!!f):b.attachEvent("on"+d,e)},g=function a(b,d,e,f){c?b.removeEventListener(d,e,!!f):b.detachEvent("on"+d,e)},h=function a(b,c,e){var f;d.createEvent?(f=d.createEvent("HTMLEvents"),f.initEvent(c,!0,!1),f=t(f,e),b.dispatchEvent(f)):d.createEventObject&&(f=d.createEventObject(),f=t(f,e),b.fireEvent("on"+c,f))},i=function a(b){return b.trim?b.trim():b.replace(/^\s+|\s+$/g,"")},j=function a(b,c){return-1!==(" "+b.className+" ").indexOf(" "+c+" ")},k=function a(b,c){j(b,c)||(b.className=""===b.className?c:b.className+" "+c)},l=function a(b,c){b.className=i((" "+b.className+" ").replace(" "+c+" "," "))},m=function a(b){return/Array/.test(Object.prototype.toString.call(b))},n=function a(b){return/Date/.test(Object.prototype.toString.call(b))&&!isNaN(b.getTime())},o=function a(b){var c=b.getDay();return 0===c||6===c},p=function a(b){return b%4==0&&b%100!=0||b%400==0},q=function a(b,c){return[31,p(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},r=function a(b){n(b)&&b.setHours(0,0,0,0)},s=function a(b,c){return b.getTime()===c.getTime()},t=function a(b,c,d){var e,f;for(e in c)f=void 0!==b[e],f&&"object"==_typeof(c[e])&&null!==c[e]&&void 0===c[e].nodeName?n(c[e])?d&&(b[e]=new Date(c[e].getTime())):m(c[e])?d&&(b[e]=c[e].slice(0)):b[e]=a({},c[e],d):(d||!f)&&(b[e]=c[e]);return b},u=function a(b){return b.month<0&&(b.year-=Math.ceil(Math.abs(b.month)/12),b.month+=12),b.month>11&&(b.year+=Math.floor(Math.abs(b.month)/12),b.month-=12),b},v={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},w=function a(b,c,d){for(c+=b.firstDay;c>=7;)c-=7;return d?b.i18n.weekdaysShort[c]:b.i18n.weekdays[c]},x=function a(b){var c=[],d="false";if(b.isEmpty){if(!b.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';c.push("is-outside-current-month")}return b.isDisabled&&c.push("is-disabled"),b.isToday&&c.push("is-today"),b.isSelected&&(c.push("is-selected"),d="true"),b.isInRange&&c.push("is-inrange"),b.isStartRange&&c.push("is-startrange"),b.isEndRange&&c.push("is-endrange"),'<td data-day="'+b.day+'" class="'+c.join(" ")+'" aria-selected="'+d+'"><button class="pika-button pika-day" type="button" data-pika-year="'+b.year+'" data-pika-month="'+b.month+'" data-pika-day="'+b.day+'">'+b.day+"</button></td>"},y=function a(b,c,d){var e=new Date(d,0,1);return'<td class="pika-week">'+Math.ceil(((new Date(d,c,b)-e)/864e5+e.getDay()+1)/7)+"</td>"},z=function a(b,c){return"<tr>"+(c?b.reverse():b).join("")+"</tr>"},A=function a(b){return"<tbody>"+b.join("")+"</tbody>"},B=function a(b){var c,d=[];for(b.showWeekNumber&&d.push("<th></th>"),c=0;7>c;c++)d.push('<th scope="col"><abbr title="'+w(b,c)+'">'+w(b,c,!0)+"</abbr></th>");return"<thead><tr>"+(b.isRTL?d.reverse():d).join("")+"</tr></thead>"},C=function a(b,c,d,e,f,g){var h,i,j,k,l,n=b._o,o=d===n.minYear,p=d===n.maxYear,q='<div id="'+g+'" class="pika-title" role="heading" aria-live="assertive">',r=!0,s=!0;for(j=[],h=0;12>h;h++)j.push('<option value="'+(d===f?h-c:12+h-c)+'"'+(h===e?' selected="selected"':"")+(o&&h<n.minMonth||p&&h>n.maxMonth?'disabled="disabled"':"")+">"+n.i18n.months[h]+"</option>");for(k='<div class="pika-label">'+n.i18n.months[e]+'<select class="pika-select pika-select-month" tabindex="-1">'+j.join("")+"</select></div>",m(n.yearRange)?(h=n.yearRange[0],i=n.yearRange[1]+1):(h=d-n.yearRange,i=1+d+n.yearRange),j=[];i>h&&h<=n.maxYear;h++)h<n.minYear||j.push('<option value="'+h+'"'+(h===d?' selected="selected"':"")+">"+h+"</option>");return l='<div class="pika-label">'+d+n.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+j.join("")+"</select></div>",q+=n.showMonthAfterYear?l+k:k+l,!o||0!==e&&n.minMonth<e||(r=!1),!p||11!==e&&n.maxMonth>e||(s=!1),0===c&&(q+='<button class="pika-prev'+(r?"":" is-disabled")+'" type="button">'+n.i18n.previousMonth+"</button>"),c===b._o.numberOfMonths-1&&(q+='<button class="pika-next'+(s?"":" is-disabled")+'" type="button">'+n.i18n.nextMonth+"</button>"),q+="</div>"},D=function a(b,c,d){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+d+'">'+B(b)+A(c)+"</table>"},E=function g(h){var i=this,k=i.config(h);i._onMouseDown=function(a){if(i._v){a=a||window.event;var b=a.target||a.srcElement;if(b)if(j(b,"is-disabled")||(!j(b,"pika-button")||j(b,"is-empty")||j(b.parentNode,"is-disabled")?j(b,"pika-prev")?i.prevMonth():j(b,"pika-next")&&i.nextMonth():(i.setDate(new Date(b.getAttribute("data-pika-year"),b.getAttribute("data-pika-month"),b.getAttribute("data-pika-day"))),k.bound&&e(function(){i.hide(),k.field&&k.field.blur()},100))),j(b,"pika-select"))i._c=!0;else{if(!a.preventDefault)return a.returnValue=!1,!1;a.preventDefault()}}},i._onChange=function(a){a=a||window.event;var b=a.target||a.srcElement;b&&(j(b,"pika-select-month")?i.gotoMonth(b.value):j(b,"pika-select-year")&&i.gotoYear(b.value))},i._onKeyChange=function(a){if(a=a||window.event,i.isVisible())switch(a.keyCode){case 13:case 27:k.field.blur();break;case 37:a.preventDefault(),i.adjustDate("subtract",1);break;case 38:i.adjustDate("subtract",7);break;case 39:i.adjustDate("add",1);break;case 40:i.adjustDate("add",7)}},i._onInputChange=function(c){var d;c.firedBy!==i&&(b?(d=a(k.field.value,k.format,k.formatStrict),d=d&&d.isValid()?d.toDate():null):d=new Date(Date.parse(k.field.value)),n(d)&&i.setDate(d),i._v||i.show())},i._onInputFocus=function(){i.show()},i._onInputClick=function(){i.show()},i._onInputBlur=function(){var a=d.activeElement;do{if(j(a,"pika-single"))return}while(a=a.parentNode);i._c||(i._b=e(function(){i.hide()},50)),i._c=!1},i._onClick=function(a){a=a||window.event;var b=a.target||a.srcElement,d=b;if(b){!c&&j(b,"pika-select")&&(b.onchange||(b.setAttribute("onchange","return;"),f(b,"change",i._onChange)));do{if(j(d,"pika-single")||d===k.trigger)return}while(d=d.parentNode);i._v&&b!==k.trigger&&d!==k.trigger&&i.hide()}},i.el=d.createElement("div"),i.el.className="pika-single"+(k.isRTL?" is-rtl":"")+(k.theme?" "+k.theme:""),f(i.el,"mousedown",i._onMouseDown,!0),f(i.el,"touchend",i._onMouseDown,!0),f(i.el,"change",i._onChange),f(d,"keydown",i._onKeyChange),k.field&&(k.container?k.container.appendChild(i.el):k.bound?d.body.appendChild(i.el):k.field.parentNode.insertBefore(i.el,k.field.nextSibling),f(k.field,"change",i._onInputChange),k.defaultDate||(k.defaultDate=b&&k.field.value?a(k.field.value,k.format).toDate():new Date(Date.parse(k.field.value)),k.setDefaultDate=!0));var l=k.defaultDate;n(l)?k.setDefaultDate?i.setDate(l,!0):i.gotoDate(l):i.gotoDate(new Date),k.bound?(this.hide(),i.el.className+=" is-bound",f(k.trigger,"click",i._onInputClick),f(k.trigger,"focus",i._onInputFocus),f(k.trigger,"blur",i._onInputBlur)):this.show()};return E.prototype={config:function a(b){this._o||(this._o=t({},v,!0));var c=t(this._o,b,!0);c.isRTL=!!c.isRTL,c.field=c.field&&c.field.nodeName?c.field:null,c.theme="string"==typeof c.theme&&c.theme?c.theme:null,c.bound=!!(void 0!==c.bound?c.field&&c.bound:c.field),c.trigger=c.trigger&&c.trigger.nodeName?c.trigger:c.field,c.disableWeekends=!!c.disableWeekends,c.disableDayFn="function"==typeof c.disableDayFn?c.disableDayFn:null;var d=parseInt(c.numberOfMonths,10)||1;if(c.numberOfMonths=d>4?4:d,n(c.minDate)||(c.minDate=!1),n(c.maxDate)||(c.maxDate=!1),c.minDate&&c.maxDate&&c.maxDate<c.minDate&&(c.maxDate=c.minDate=!1),c.minDate&&this.setMinDate(c.minDate),c.maxDate&&this.setMaxDate(c.maxDate),m(c.yearRange)){var e=(new Date).getFullYear()-10;c.yearRange[0]=parseInt(c.yearRange[0],10)||e,c.yearRange[1]=parseInt(c.yearRange[1],10)||e}else c.yearRange=Math.abs(parseInt(c.yearRange,10))||v.yearRange,c.yearRange>100&&(c.yearRange=100);return c},toString:function c(d){return n(this._d)?b?a(this._d).format(d||this._o.format):this._d.toDateString():""},getMoment:function c(){return b?a(this._d):null},setMoment:function c(d,e){b&&a.isMoment(d)&&this.setDate(d.toDate(),e)},getDate:function a(){return n(this._d)?new Date(this._d.getTime()):new Date},setDate:function a(b,c){if(!b)return this._d=null,this._o.field&&(this._o.field.value="",h(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof b&&(b=new Date(Date.parse(b))),n(b)){var d=this._o.minDate,e=this._o.maxDate;n(d)&&d>b?b=d:n(e)&&b>e&&(b=e),this._d=new Date(b.getTime()),r(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=""+this,h(this._o.field,"change",{firedBy:this})),c||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function a(b){var c=!0;if(n(b)){if(this.calendars){var d=new Date(this.calendars[0].year,this.calendars[0].month,1),e=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),f=b.getTime();e.setMonth(e.getMonth()+1),e.setDate(e.getDate()-1),c=f<d.getTime()||e.getTime()<f}c&&(this.calendars=[{month:b.getMonth(),year:b.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function c(d,e){var f,g=this.getDate(),h=24*parseInt(e)*60*60*1e3;"add"===d?f=new Date(g.valueOf()+h):"subtract"===d&&(f=new Date(g.valueOf()-h)),b&&("add"===d?f=a(g).add(e,"days").toDate():"subtract"===d&&(f=a(g).subtract(e,"days").toDate())),this.setDate(f)},adjustCalendars:function a(){this.calendars[0]=u(this.calendars[0]);for(var b=1;b<this._o.numberOfMonths;b++)this.calendars[b]=u({month:this.calendars[0].month+b,year:this.calendars[0].year});this.draw()},
gotoToday:function a(){this.gotoDate(new Date)},gotoMonth:function a(b){isNaN(b)||(this.calendars[0].month=parseInt(b,10),this.adjustCalendars())},nextMonth:function a(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function a(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function a(b){isNaN(b)||(this.calendars[0].year=parseInt(b,10),this.adjustCalendars())},setMinDate:function a(b){b instanceof Date?(r(b),this._o.minDate=b,this._o.minYear=b.getFullYear(),this._o.minMonth=b.getMonth()):(this._o.minDate=v.minDate,this._o.minYear=v.minYear,this._o.minMonth=v.minMonth,this._o.startRange=v.startRange),this.draw()},setMaxDate:function a(b){b instanceof Date?(r(b),this._o.maxDate=b,this._o.maxYear=b.getFullYear(),this._o.maxMonth=b.getMonth()):(this._o.maxDate=v.maxDate,this._o.maxYear=v.maxYear,this._o.maxMonth=v.maxMonth,this._o.endRange=v.endRange),this.draw()},setStartRange:function a(b){this._o.startRange=b},setEndRange:function a(b){this._o.endRange=b},draw:function a(b){if(this._v||b){var c,d=this._o,f=d.minYear,g=d.maxYear,h=d.minMonth,i=d.maxMonth,j="";this._y>f||(this._y=f,!isNaN(h)&&this._m<h&&(this._m=h)),this._y<g||(this._y=g,!isNaN(i)&&this._m>i&&(this._m=i)),c="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var k=0;k<d.numberOfMonths;k++)j+='<div class="pika-lendar">'+C(this,k,this.calendars[k].year,this.calendars[k].month,this.calendars[0].year,c)+this.render(this.calendars[k].year,this.calendars[k].month,c)+"</div>";this.el.innerHTML=j,d.bound&&"hidden"!==d.field.type&&e(function(){d.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),d.bound&&d.field.setAttribute("aria-label","Use the arrow keys to pick a date")}},adjustPosition:function a(){var b,c,e,f,g,h,i,j,k,l;if(!this._o.container){if(this.el.style.position="absolute",b=this._o.trigger,c=b,e=this.el.offsetWidth,f=this.el.offsetHeight,g=window.innerWidth||d.documentElement.clientWidth,h=window.innerHeight||d.documentElement.clientHeight,i=window.pageYOffset||d.body.scrollTop||d.documentElement.scrollTop,"function"==typeof b.getBoundingClientRect)l=b.getBoundingClientRect(),j=l.left+window.pageXOffset,k=l.bottom+window.pageYOffset;else for(j=c.offsetLeft,k=c.offsetTop+c.offsetHeight;c=c.offsetParent;)j+=c.offsetLeft,k+=c.offsetTop;(this._o.reposition&&j+e>g||this._o.position.indexOf("right")>-1&&j-e+b.offsetWidth>0)&&(j=j-e+b.offsetWidth),(this._o.reposition&&k+f>h+i||this._o.position.indexOf("top")>-1&&k-f-b.offsetHeight>0)&&(k=k-f-b.offsetHeight),this.el.style.left=j+"px",this.el.style.top=k+"px"}},render:function a(b,c,d){var e=this._o,f=new Date,g=q(b,c),h=new Date(b,c,1).getDay(),i=[],j=[];r(f),e.firstDay>0&&0>(h-=e.firstDay)&&(h+=7);for(var k=0===c?11:c-1,l=11===c?0:c+1,m=0===c?b-1:b,p=11===c?b+1:b,t=q(m,k),u=g+h,v=u;v>7;)v-=7;u+=7-v;for(var w=0,A=0;u>w;w++){var B=new Date(b,c,w-h+1),C=!!n(this._d)&&s(B,this._d),E=s(B,f),F=h>w||w>=g+h,G=w-h+1,H=c,I=b,J=e.startRange&&s(e.startRange,B),K=e.endRange&&s(e.endRange,B),L=e.startRange&&e.endRange&&e.startRange<B&&B<e.endRange,M=e.minDate&&B<e.minDate||e.maxDate&&B>e.maxDate||e.disableWeekends&&o(B)||e.disableDayFn&&e.disableDayFn(B);F&&(h>w?(G=t+G,H=k,I=m):(G-=g,H=l,I=p));var N={day:G,month:H,year:I,isSelected:C,isToday:E,isDisabled:M,isEmpty:F,isStartRange:J,isEndRange:K,isInRange:L,showDaysInNextAndPreviousMonths:e.showDaysInNextAndPreviousMonths};j.push(x(N)),7==++A&&(e.showWeekNumber&&j.unshift(y(w-h,c,b)),i.push(z(j,e.isRTL)),j=[],A=0)}return D(e,i,d)},isVisible:function a(){return this._v},show:function a(){this.isVisible()||(l(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(f(d,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function a(){var b=this._v;!1!==b&&(this._o.bound&&g(d,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",k(this.el,"is-hidden"),this._v=!1,void 0!==b&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function a(){this.hide(),g(this.el,"mousedown",this._onMouseDown,!0),g(this.el,"touchend",this._onMouseDown,!0),g(this.el,"change",this._onChange),this._o.field&&(g(this._o.field,"change",this._onInputChange),this._o.bound&&(g(this._o.trigger,"click",this._onInputClick),g(this._o.trigger,"focus",this._onInputFocus),g(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},E}),function(){$jq.fn.extend({enter:function a(b){return this.on("keydown",function(a){"Enter"===a.key&&(b.call(this),a.preventDefault())}),this},space:function a(b){return this.on("keydown",function(a){" "!==a.key&&"Spacebar"!==a.key||(b.call(this),a.preventDefault())}),this},enterSpace:function a(b){return this.on("keydown",function(a){"Enter"!==a.key&&" "!==a.key&&"Spacebar"!==a.key||(b.call(this),a.preventDefault())}),this},escape:function a(b){return this.on("keydown",function(a){"Escape"!==a.key&&"Esc"!==a.key||(b.call(this),a.preventDefault())}),this}})}();var Bose=Bose||{};Bose.Popup=function(){function a(){$jq(document).on("click",B.popupLink,d)}function b(a){if(0===a.indexOf("/"))return!0;var b=$jq(".bose-navBar__logo").attr("href");return 0===a.indexOf(b)}function c(a){var c=a;return b(a)&&-1===a.indexOf(".overlays")&&a.indexOf(".html")>-1&&(c=a.replace(".html",".overlays.html")),c}function d(){var a=$jq(this),b=$jq(B.buyLink),c=$jq(B.zoomContainer),d={};a.hasClass("bose-buttonLink--buy")&&(d.isBuyButton=!0),a.hasClass("bose-popupLink--fullWidth")&&(d.wrapCss="bose-popupInner--fullWidth"),a.hasClass("bose-popupLink--productDrawer")&&(a.hasClass("bose-popupLink--fullWidth")?d.wrapCss="bose-popupInner--fullWidth bose-popupInner--productDrawer":d.wrapCss="bose-popupInner--productDrawer",d.addExtraLogicProductDrawer=!0),d.onClose=function(){Bose.ButtonLink.removeProgressBar(a),Bose.ButtonLink.removeProgressBar(b),c.remove()},e(a.attr("data-popup-link"),d,void 0,function(){Bose.ButtonLink.removeProgressBar(a)})}function e(a,b,d,e){var g=c(a),h=b&&b.urlParameters?b.urlParameters:{},i=!(!b||!b.addExtraLogicProductDrawer)&&b.addExtraLogicProductDrawer;Bose.IconLoader.showIconLoaderPageOverlay(),$jq.ajax({type:"GET",url:g,data:h,success:function c(e){var g=$jq(e);Bose.IconLoader.removeIconLoaderPageOverlay(),i&&g.find(".bose-productDrawer").addClass("-inOverlay"),f(g,b),A(a),"function"==typeof d&&d()},error:function a(){Bose.IconLoader.removeIconLoaderPageOverlay(),"function"==typeof e&&e()}})}function f(a,b){var c=F++,d=a;E[c]=$jq.extend(D,b),E[c].cloneContent&&(d=d.clone(!0,!0));var e=h(d,c);if(void 0!==Bose.DataCapture&&Bose.DataCapture.isOpen()&&Bose.DataCapture.disable(),i(e,b),x(),b.isBuyButton){var f=e.find(B.ecommerce2ImageSlider);e.find(B.productPagePromotion).addClass("bose-promotion__onProductPage--hide"),e.find(B.overlayPromotion).addClass("bose-promotion__onOverlay--show"),e.find(B.container).addClass("bose-popup__container--ecommercePopup"),$jq(B.ecommercePopup).addClass("bose-popup__container--ecommerceBuyPopup"),$jq(B.inner).addClass("bose-popupBuyInner"),$jq(B.close).hide(),e.find(B.inner).removeClass("bose-popupInner--storeSelector js-storeSelector-popup"),e.find(B.eCommercectaArea).addClass("bose-ecommerceArea__ctaArea--onOverlay"),e.find(B.sliderNav).addClass("bose-sliderNavOnOverlay"),e.find(B.boseCta).addClass("bose-cta--onOverlay"),f.length?(Bose.productImageSlider2.init(),Bose.EcommerceArea2.init()):Bose.productImageSlider.init(),g(),Bose.PaypalBanner.init(),Bose.SocialMedia.init(),Bose.OnlineResellers.init(),Bose.ProductATP.init(),e.find(B.resellerButton).click(function(){Bose.WhereToBuy.loadResellers($jq(this))}),e.find(B.loadResellersFromHatch).click(function(){Bose.WhereToBuy.loadResellers($jq(this),"iceleads")})}else $jq(B.buyClose+","+B.buyCloseText+","+B.buyCloseMargin).hide();return q(),c}function g(){var a=$jq(B.productRatings).data("ratingsurl"),b=$jq(B.seeReview);b.length?b.attr("href",a):$jq(B.productRatingsContainer).attr("href",a)}function h(a,b){var c=E[b],d=$jq("<div/>",{class:"bose-popup",attr:{role:"dialog"},data:{"popup-id":b}}),e=$jq("<div/>",{class:"bose-popup__container"}),f=$jq("<div/>",{class:"bose-popupInner "+c.wrapCss}),g=$jq("<button/>",{class:"bose-popupClose",on:{click:m}}),h=$jq("<div/>",{class:"bose-popupBuyClose",on:{click:n}}),i=$jq("<div/>",{class:"bose-popupBuyCloseText",on:{click:n},attr:{tabIndex:0,id:"backButton",role:"button"}}),j=$jq("<div/>",{class:"bose-popupBuyCloseMargin"}),k={closeLabel:Bose.Translation.getSiteTranslation("Close")};return d.append(e),e.append(f),f.append("<a href='#' class='bose-popup__hiddenField' id='buyBtnHiddenDiv' role='button'></a>"),f.append(h),f.append(i),f.append(j),g.append(nano('<span class="bose-screenReaderText">{closeLabel}</span>',k)),void 0!==Bose.Translation&&i.html(Bose.Translation.getSiteTranslation("Back").toUpperCase()),c.showClose&&f.append(g),f.append(a),d.attr("aria-describedby",c.describedBy||"dialog"),d.attr("aria-labelledby",c.labelledBy||""),d}function i(a,b){var c=Gridle.isActive("small")?750:1e3,d=b.isBuyButton,e=b.isStoreSelector;$jq("body").append(a),d?a.css({left:1.4*screen.width,opacity:1}).animate({left:"0"},c,"linear",function(){Bose.Utils.initElements(a),$jq(window).trigger("resize"),$jq(document).trigger("shown.popup"),l(),$jq(document).on("keyup",j)}):a.animate({opacity:1},c,function(){e||Bose.Utils.initElements(a),$jq(window).trigger("resize"),$jq(document).trigger("shown.popup").escape(k),$jq(B.buyCloseText).remove(),$jq(B.close).enter(k).focus()})}function j(a){var b=$jq(".bose-popupBuyCloseText").closest(B.popup);27===a.keyCode&&p(b),13===a.keyCode&&document.activeElement.classList.contains("bose-popupBuyCloseText")&&p(b)}function k(){$jq(B.close).length>0&&$jq(B.close).trigger("click")}function l(){var a=$jq(".bose-popupBuyInner").find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible"),b=a.first(),c=a.last();b.focus(),c.on("keydown",function(a){9!==a.which||a.shiftKey||(a.preventDefault(),b.focus())}),b.on("keydown",function(a){9===a.which&&a.shiftKey&&(a.preventDefault(),c.focus())})}function m(){o($jq(this).closest(B.popup))}function n(){var a=$jq(this).closest(B.popup),b=window.location.href.split("#")[0];window.history.replaceState({},document.title,b),p(a)}function o(a){var b=t(a);void 0!==b&&(void 0!==Bose.DataCapture&&Bose.DataCapture.enable(),E[w(b)].onClose(),y(),b.stop().animate({opacity:0},750,function(){$jq(this).remove()}))}function p(a){var b=t(a),c=1e3;Gridle.isActive("small")&&(c=750),void 0!==b&&(void 0!==Bose.DataCapture&&Bose.DataCapture.enable(),E[w(b)].onClose(),y(),b.css({left:"0px"}).animate({opacity:1,left:screen.width},c,function(){$jq(this).remove()}))}function q(){$jq(B.ecommercePopup).hammer().off("swiperight"),(Gridle.isActive("small")||Gridle.isActive("medium"))&&$jq(B.ecommercePopup).hammer().on("swiperight",r)}function r(a){var b=$jq(this).closest(B.popup);$jq(a.gesture.target).hasClass("bose-zoom")||p(b)}function s(){$jq(B.popup).each(function(){o($jq(this))})}function t(a){var b;if("number"!=typeof a){if(a instanceof $jq){if(a.hasClass(C.popup))return a;if(b=a.closest(B.popup),b.length)return b}}else if(b=$jq(B.popup).filter(function(){return $jq(this).data("popup-id")===a}),b.length)return b}function u(a){t(a).find(B.container).prepend(Bose.IconLoader.getTemplate())}function v(a){t(a).find(Bose.IconLoader.selectors.overlay).remove()}function w(a){return a.data("popup-id")}function x(){$jq("html").addClass(C.popupHTML)}function y(){$jq(B.container).length<2&&$jq("html").removeClass(C.popupHTML)}function z(){return $jq(B.popup).length}function A(a){var b;a.match("^/content/")||(b=a.toLowerCase().indexOf("/buy/")>=0?a.split("/buy")[0]+".html":a.split("/_jcr_content")[0]+".html",$jq(B.ratingsContainer).attr("href",b+"#ProductTabs_tab999"))}var B={popup:".bose-popup",container:".bose-popup__container",inner:".bose-popupInner",popupLink:".bose-popupLink",close:".bose-popupClose",buyClose:".bose-popupBuyClose",buyCloseText:".bose-popupBuyCloseText",buyCloseMargin:".bose-popupBuyCloseMargin",ratingsContainer:".js-bose-productRatings__container",eCommercectaArea:".bose-ecommerceArea__ctaArea",productPagePromotion:".bose-promotion__onProductPage",overlayPromotion:".bose-promotion__onOverlay",resellerButton:".js-cta__resellerOverlayButton",loadResellersFromHatch:".js-cta__resellerOverlayButton_activeHatch",sliderNav:".slider-nav",boseCta:".bose-cta",ecommercePopup:".bose-popup__container--ecommercePopup",storeSelectorPopup:".js-storeSelector-popup",buyLink:".bose-buttonLink--inProgress",zoomContainer:".zoomContainer",ecommerce2ImageSlider:".bose-productImageSlider2",productRatings:".bose-productRatings",seeReview:".bose-seeReviews",productRatingsContainer:".bose-productRatings__container"},C={popup:"bose-popup",popupHTML:"bose-popupHTML",buyButton:"bose-popup__container--ecommercePopup"},D={wrapCss:"",onClose:function a(){},showClose:!0,cloneContent:!0},E={},F=0;return{init:a,display:f,displayAjax:e,getPopup:t,close:o,closeBuy:p,closeAll:s,closeBuyOverlayOnSwipe:r,isOpen:z,showLoadingIcon:u,hideLoadingIcon:v,_selectors:B}}(),appear=function(){"use strict";function a(){var a=window.scrollY||window.pageYOffset;null!=c&&(e.velocity=a-c,e.delta=e.velocity>=0?e.velocity:-1*e.velocity),c=a,d&&clearTimeout(d),d=setTimeout(function(){c=null},30)}function b(a,b){var c=a.getBoundingClientRect();return c.top+c.height>=0&&c.left+c.width>=0&&c.bottom-c.height<=(window.innerHeight||document.documentElement.clientHeight)+b&&c.right-c.width<=(window.innerWidth||document.documentElement.clientWidth)+b}var c=null,d=0,e={};return addEventListener("scroll",a,!1),function(a){return function(a){function c(a,b){return function(){var c=this,d=arguments;clearTimeout(l),l=setTimeout(function(){a.apply(c,d)},b)}}function d(){e.delta<t.delta.speed&&(m||(m=!0,i(),setTimeout(function(){m=!1},t.delta.timeout))),c(function(){i()},t.debounce)()}function f(){i(),addEventListener("scroll",d,!1),addEventListener("resize",d,!1)}function g(){p=[],l&&clearTimeout(l),h()}function h(){removeEventListener("scroll",d,!1),removeEventListener("resize",d,!1)}function i(){n||(p.forEach(function(a,c){a&&b(a,t.bounds)?q[c]&&(q[c]=!1,r++,t.appear&&t.appear(a),t.disappear||t.reappear||(p[c]=null)):(!1===q[c]&&(t.disappear&&t.disappear(a),s++,t.reappear||(p[c]=null)),q[c]=!0)}),t.reappear||t.appear&&(!t.appear||r!==k)||t.disappear&&(!t.disappear||s!==k)||(n=!0,h(),t.done&&t.done()))}function j(){if(!o){o=!0,t.init&&t.init();var a;if(a="function"==typeof t.elements?t.elements():t.elements){k=a.length;for(var b=0;b<k;b+=1)p.push(a[b]),q.push(!0);f()}}}var k,l,m,n,o=!1,p=[],q=[],r=0,s=0,t={};return function(a){a=a||{},t={init:a.init,elements:a.elements,appear:a.appear,disappear:a.disappear,done:a.done,reappear:a.reappear,bounds:a.bounds||0,debounce:a.debounce||50,delta:{speed:a.deltaSpeed||50,timeout:a.deltaTimeout||500}},addEventListener("DOMContentLoaded",j,!1);var b=!1;Function("/*@cc_on return document.documentMode===10@*/")()&&(b=!0);var c="complete"===document.readyState||"loaded"===document.readyState;return b?c&&j():(c||"interactive"===document.readyState)&&j(),{trigger:function a(){i()},pause:function a(){h()},resume:function a(){f()},destroy:function a(){g()}}}}()(a)}}();var Bose=Bose||{};Bose.ErrorHandler=Bose.ErrorHandler||{},Bose.ErrorHandler=function(){function a(){$jq(document).off("ajaxComplete ajaxError online offline").on("ajaxComplete",b).on("ajaxError",c).on("online offline",g)}function b(a,b,c){var f=e(b)?"xhrError":"xhrSuccess",g="xhrError"===f?d(b):b.responseText,h="POST"===c.method||"PUT"===c.method||"DELETE"===c.method;"xhrSuccess"===f&&h&&$jq.event.trigger({type:"errorInFields",message:"Error(s) in post data :"+g,time:new Date})}function c(a,b,c){var e="timeout"===b.statusText?"xhrTimeout":"xhrHTTPError",f="xhrTimeout"===e?"Request timed out":d(b),g="Oops! Something went wrong.",j="",k="";null!==c.targetSpace&&(i(c.targetSpace),Bose.IconLoader.removeIconLoaderPageOverlay(),$jq(c.targetSpace).attr("data-error-message")&&(g=$jq(c.targetSpace).attr("data-error-message")),500===b.status&&(j="Click here to retry.",$jq(c.targetSpace).attr("data-error-retry-message")&&(j=$jq(c.targetSpace).attr("data-error-retry-message"))),"body"===c.targetSpace&&(k="bose-errorMessage--page",Bose.Utils.toggleBodyScrolling(!1)),h({message:g,eventMessage:f,retryMessage:j,targetSelector:c.targetSpace,classes:k}))}function d(a){return f(a)+" - "+a.statusText}function e(a){var b=f(a);return!(b>=200&&(b<300||304===b))}function f(a){return a.status||0}function g(a){var b=navigator.onLine?"online":"offline";$jq.event.trigger({type:"Browser"+b,message:"Browser is "+b.toUpperCase(),time:new Date,event:a})}function h(a){var b=j({message:a.message,retryMessage:a.retryMessage,eventMessage:a.eventMessage,classes:a.classes,template:m}),c=$jq(a.targetSelector).find(".bose-errorMessage");c.length>0&&c.remove(),$jq(a.targetSelector).addClass(l.messageWrapper),$jq(a.targetSelector).append(b)}function i(a){a?($jq(a+" "+k.messageWrapper).removeClass(l.messageWrapper),$jq(a+" "+k.message).remove()):($jq(k.messageWrapper).removeClass(l.messageWrapper),$jq(k.message).remove()),Bose.Utils.toggleBodyScrolling(!0)}function j(a){var b=nano(a.template,a),c=$jq(b),d=a.message;return void 0!==d&&0!==d.length||c.find(".bose-errorMessage__text").remove(),c}var k={message:".bose-errorMessage",messageWrapper:".bose-errorMessage--wrapper"},l={messageWrapper:"bose-errorMessage--wrapper"},m='<div class="bose-errorMessage {classes}" role="alert"><i class="bose-errorMessage__icon"></i><span class="bose-errorMessage__text">{message}</span> &nbsp;<a class="bose-errorMessage__retry-text" role="button" title="Click here to retry">{retryMessage}</a></div>';return{selectors:k,classes:l,init:a,showError:h,hideError:i}}();var Bose=Bose||{};Bose.ajax=Bose.ajax||{},Bose.ajax=function(){function a(){}function b(a){var b=e.headers||{},c=f.headers||{};b.csrfToken=a,e.headers=b,c.csrfToken=a,f.headers=c}function c(a){return $jq.extend({},e,a)}function d(a,b,d){var e=c(a);return $jq.support.cors=!0,$jq.ajax(e).done(function(a){b&&"function"==typeof b&&b(a)}).fail(function(a){f=this,401===a.status&&gigya.accounts.getAccountInfo({callback:function a(b){0===b.errorCode&&(Bose.UserData.init(b),$jq.ajax(f))}})}).always(function(){d&&"function"==typeof d&&d()}),0}var e={async:!0,cache:!1,contentType:"application/json",crossDomain:!0,loaderText:"",data:{},type:"GET",showLoading:!0,targetSpace:null,url:"",xhrFields:{withCredentials:!0}},f={};return{init:a,fetch:d,setCSRFToken:b}}(),$jq(window).load(function(){$jq(document).trigger("window.load");var a=document.createElement("style");switch(Bose.DataLayer.Data.Page.country){case"jp":a.appendChild(document.createTextNode("            @font-face {                font-family: BoseText;font-weight: 300;                src: url('/etc/designs/bose/base2016/design/fonts/japanese-hv.ttf') format('truetype');            }            "));break;case"ar":a.appendChild(document.createTextNode("            @font-face {                font-family: BoseText;font-weight: 300;                src: url('/etc/designs/bose/base2016/design/fonts/arabic-hv.ttf') format('truetype');            }            "));break;case"cn":case"sg":document.body.classList.add("font_china");break;case"hk":case"tw":a.appendChild(document.createTextNode("            @font-face {                font-family: BoseText;font-weight: 300;                src: url('/etc/designs/bose/base2016/design/fonts/TraditionalChina-hv.ttf') format('truetype');                     url('/etc/designs/bose/base2016/design/fonts/TraditionalChina-ubl.ttf') format('truetype');            }            ")),document.body.classList.add("font_china");break;case"kr":a.appendChild(document.createTextNode("            @font-face {                font-family: BoseText;                src: url('/etc/designs/bose/base2016/design/fonts/Korean-ksx.ttf') format('truetype');            }            "))}if(($jq(".bose-header2016__container").hasClass("bose-proNavBar")||$jq(".header-container").data("channel").includes("website_pro"))&&a.appendChild(document.createTextNode("      @font-face {          font-family: BoseText;font-weight: 200;          src: url('/etc/designs/bose/base2016/design/fonts/Montserrat-Light.ttf') format('truetype');      }      @font-face {         font-family: BoseText;font-weight: 300;         src: url('/etc/designs/bose/base2016/design/fonts/Montserrat-Medium.ttf') format('truetype');      }      @font-face {         font-family: BoseText;font-weight: 400;         src: url('/etc/designs/bose/base2016/design/fonts/Montserrat-Regular.ttf') format('truetype');        }      @font-face {         font-family: BoseText;font-weight: 700;         src: url('/etc/designs/bose/base2016/design/fonts/Montserrat-Bold.ttf') format('truetype');      }      ")),document.head.appendChild(a),$jq(".bose-categoryPage").length){var b=/^.{8}[^\/]*\/([^\/]*)/,c=Bose.DataLayer.Data.Page.path.split(b.exec(Bose.DataLayer.Data.Page.path)[1]+"/")[1].split("/"),d={"@context":"https://schema.org/","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:""}]},e=Bose.DataLayer.Data.Page.path.split(b.exec(Bose.DataLayer.Data.Page.path)[1]+"/")[0]+b.exec(Bose.DataLayer.Data.Page.path)[1];c.forEach(function(a,b){if(0!=b){e=e+"/"+a;var c=e.replace(".html","")+".html",f={"@type":"ListItem",position:b+1,name:a.includes(".html")?a.replace(".html",""):a,item:c};d.itemListElement.push(f)}});var f=document.createElement("script");f.setAttribute("type","application/ld+json"),f.innerHTML=JSON.stringify(d),$jq(".bose-categoryPage").append(f)}$jq('a[target="_blank"]').not('[href*="bose"]').length>0&&$jq('a[target="_blank"]').not('[href*="bose"]').attr("rel","noopener noreferrer")});var Bose=Bose||{};Bose.WebStorage=Bose.WebStorage||{},Bose.WebStorage=function(){"use strict";function a(a,b,c){switch(c||f.storageType){case"sessionStorage":Modernizr.sessionstorage?sessionStorage.setItem(a,b):e(c);break;case"localStorage":Modernizr.localstorage?localStorage.setItem(a,b):e(c)}}function b(a,b){var c="";switch(b||f.storageType){case"sessionStorage":Modernizr.sessionstorage&&(c=sessionStorage.getItem(a));break;case"localStorage":Modernizr.localstorage&&(c=localStorage.getItem(a))}return c}function c(a,b){if(void 0===a)d(b);else switch(b||f.storageType){case"sessionStorage":Modernizr.sessionstorage&&sessionStorage.removeItem(a);break;case"localStorage":Modernizr.localstorage&&localStorage.removeItem(a)}}function d(a){switch(a||f.storageType){case"sessionStorage":Modernizr.sessionstorage&&sessionStorage.clear();break;case"localStorage":Modernizr.localstorage&&localStorage.clear()}}function e(a){Bose.DTM.track(a+"NotSupportedOnBrowser")}var f={storageType:"localStorage"};return{storeData:a,getData:b,clearData:c,_defaults:f}}();var Bose=Bose||{};Bose.DTM=function(){"use strict";function a(){b()}function b(){var a,b,c=Bose.WebStorage.getData("analyticsBuffer","sessionStorage"),d=Bose.DataLayer.Data.Order||{},e=[];if(c){if(a=JSON.parse(c),b=void 0===a.eventData.variantCode?null:a.eventData.variantCode.toString(),Bose.DataLayer.setWebStorageVariable("event",a.event),!$jq.isEmptyObject(d))for(var f=0;f<d.details.length;f++)if(d.details[f].variantCode===b){e.push(d.details[f]);break}Bose.DataLayer.setVariable("Order","deltaDetails",e),$jq(document).trigger("cartItemAdded");for(var g in a.eventData)a.eventData.hasOwnProperty(g)&&Bose.DataLayer.setWebStorageVariable(g,a.eventData[g]);a.trackRule&&ia(a.event),Bose.WebStorage.clearData("analyticsBuffer","sessionStorage"),Bose.WebStorage.clearData("deltaDetails","sessionStorage")}}function c(a,b){switch(b.closest("form").data(ra.event)){case"contactus_contactusdetails":d();break;default:e(b.closest(".bose-cta"))}}function d(){var a=$jq(".messageTopic option:selected");ha("contact_us_submitted",{messageTopicValue:a.val(),messageTopicText:a.text()},!0)}function e(a){if(a.length){var b=a.data("orderable");if(void 0!==b&&b){ga("cart_add",{categoryCode:a.data("categoryCode"),variantCode:a.data("variantCode"),variantSku:a.data("variantSku")})}}}function f(){ia("storelocator_location_search")}function g(){ia("storelocator_store_click")}function h(){ia("variant_changed")}function i(){ia("resellerOverlayOpened")}function j(a,b){Bose.DataLayer.setProductVariable("resellerName",b),ia("resellerLinkClicked")}function k(a,b){Bose.DataLayer.setProductVariable("resellerName",b),ia("resellerDirectLinkClicked")}function l(){ia("crossSellView")}function m(){ia("crossSellAdd")}function n(){ia("B2BAssetDownload")}function o(){ia("B2BOrderUploadTemplateDownload")}function p(){ia("myAccountSignInEntry")}function q(){ia("myAccountSignInSucceeded")}function r(){ia("B2BLogInSucceeded")}function s(){Bose.DataLayer.setPageVariable("B2BCheckoutSuccess","checkout|success"),ia("B2BCheckoutSucceeded")}function t(){ia("myAccountSignOut")}function u(){ia("myAccountPasswordResetEntry")}function v(){ia("myAccountRegistrationEntry")}function w(){ia("myAccountSuccessfulPasswordReset")}function x(){ia("myAccountSuccessfulAccountCreation")}function y(){ia("myAccountOrderHistoryTotalOrders")}function z(){ia("myAccountDefaultPageTrack")}function A(){ia("warrantyPage")}function B(){ia("findProductReferencesWithMissingPrices")}function C(){ia("issueCategoryChosen")}function D(){ia("myProductsQuickLinkClick")}function E(){ia("myProductsFormValidationError")}function F(){ia("myProductsFormSubmissionError")}function G(){ia("myProductsError")}function H(){ia("myProductsAddProductCTAInteraction")}function I(){ia("myProductsFindProductCTAInteraction")}function J(){ia("myProductsAddProductSuccess")}function K(){ia("myProductsSuccessfulSearchSubmit")}function L(){ia("myAccountDashboardProducts")}function M(){ia("myAccountCtaActions")}function N(){ia("findMySerialNumber")}function O(){ia("trackMyAccountEditProfileSuccess")}function P(){ia("viewTroubleShootingArticle")}function Q(){ia("tsArticleCustomerRanking")}function R(){ia("snOverlayError")}function S(){ia("productResultsSuccessfulSN")}function T(a,b){ia(b)}function U(a,b){Bose.DataLayer.setError(b),ia("form_validation_error")}function V(){ia("form_b2b_login_error")}function W(a,b){Bose.DataLayer.setVariable("Error","orderUploadError",b),ia("form_b2b_order_upload_error")}function X(a,b){Bose.DataLayer.setVariable("Error","B2BAddToCartError",b),ia("form_b2b_add_to_cart_error")}function Y(a,b){Bose.DataLayer.setPageVariable("B2BAddToCartSuccess",b),ia("form_b2b_add_to_cart_success")}function Z(a,b){Bose.DataLayer.setPageVariable("B2BRemoveFromCartSuccess",b),ia("form_b2b_remove_from_cart_success")}function $(a,b){Bose.DataLayer.setPageVariable("B2BDeleteCartSuccess",b),ia("form_b2b_delete_cart_success")}function _(a,b){Bose.DataLayer.setPageVariable("B2BChangeInCartQuantitySuccess",b),ia("form_b2b_change_in_cart_quantity_success")}function aa(){ia("form_b2b_checkout_error")}function ba(a,b){setTimeout(function(){Bose.DataLayer.setError(b),ia("form_b2b_servicerequest_error")},0)}function ca(a,b){Bose.DataLayer.setVariable("Error","serialLookupError",b),ia("form_b2b_seriallookup_error")}function da(a,b,c,d){var e=b?"articleYes":"articleNo",f=c?"Submitted":"",g=d?"Comment":"No";Bose.DataLayer.setArticleVariable("helpfulResult",g),ia(e+f)}function ea(a,b,c){Bose.DataLayer.Data.ProductRegistration={details:c,country:b},ia("productRegistration_register")}function fa(a,b){"step_productRegistrationConfirmation"===b&&ia("productRegistration_success")}function ga(a,b){b.newCart=!1,"cart_add"===a&&void 0===Cookies.get("HybrisCart")&&(b.newCart=!0),ha(a,b,!0)}function ha(a,b,c){var d=c||!1,e={event:a,eventData:b,trackRule:d};Bose.WebStorage.storeData("analyticsBuffer",JSON.stringify(e),"sessionStorage")}function ia(a){if("undefined"==typeof _satellite||void 0===a)return!1;var b=a;if(a instanceof $jq){if(void 0!==a.data(ra.skipEvent))return!1;b=a.data(ra.event)}return void 0!==b&&null!==b&&(_satellite.track(b),!0)}function ja(){if("undefined"==typeof _satellite)return"";var a=_satellite.getVisitorId();return a?a.getMarketingCloudVisitorID():""}function ka(){ia("cart_modalDisplayed")}function la(){ia("cart_payPalExpress_clicked")}function ma(){ia("checkout_klarna_customer_rejected")}function na(a,b){Bose.DataLayer.setSection("Order",b),ia("cart_remove")}function oa(a,b){Bose.DataLayer.setSection("Order",b),ia("cart_add")}function pa(){ia("trackSwitchAccount")}function qa(a,b,c,d){var e={trackName:b,totalDuration:c,currentDuration:d};Bose.DataLayer.setDrowsyPlayerVariable("DrowsyPlayer",e),ia("audio_track_change")}var ra={event:"dtmEvent",skipEvent:"dtmSkip"};return function sa(){$jq(document).on("forms.actualSubmit",c),$jq(document).on("product.trackVariantChanged",h),$jq(document).on("trackResellerOverlay",i),$jq(document).on("trackResellerLink",j),$jq(document).on("trackResellerDirectLink",k),$jq(document).on("trackCrossSellView",l),$jq(document).on("trackCrossSellAdd",m),$jq(document).on("trackB2BDownloadAssets",n),$jq(document).on("trackB2BDownloadOrderUploadTemplateClick",o),$jq(document).on("forms.trackFormLoaded",T),$jq(document).on("forms.validationError",U),$jq(document).on("forms.B2BCheckoutErrorTrack",aa),$jq(document).on("forms.B2BSerialLookupErrorTrack",ca),$jq(document).on("forms.B2BServiceRequestError",ba),$jq(document).on("forms.B2BloginErrorTrack",V),$jq(document).on("forms.B2BOrderUploadErrorTrack",W),$jq(document).on("forms.B2BAddToCartErrorTrack",X),$jq(document).on("forms.B2BAddToCartSuccessTrack",Y),$jq(document).on("forms.B2BRemoveFromCartSuccessTrack",Z),$jq(document).on("forms.B2BDeleteCartSuccessTrack",$),$jq(document).on("forms.B2BChangeInCartQuantitySuccessTrack",_),$jq(document).on("productRegistration.submitRegistration",ea),$jq(document).on("formFlowStepOpened",fa),$jq(document).on("storeLocator.location",f),$jq(document).on("storeLocator.storeClick",g),$jq(document).on("formYesNoClick",da),$jq(document).on("cart.modalDisplayed",ka),$jq(document).on("cart.productRemoved",na),$jq(document).on("cart.productAdded",oa),$jq(document).on("trackSignInView",p),$jq(document).on("trackSignInSuccess",q),$jq(document).on("trackB2BLoginSuccess",r),$jq(document).on("trackB2BCheckoutSuccess",s),$jq(document).on("trackSignOut",t),$jq(document).on("trackPasswordEntry",u),$jq(document).on("trackRegistrationEntry",v),$jq(document).on("trackSuccessfulPasswordReset",w),$jq(document).on("trackSuccessfulAccountCreation",x),$jq(document).on("trackOrderHistoryTotalOrders",y),$jq(document).on("trackUserStatus",z),$jq(document).on("trackTroubleShootingArticles",P),$jq(document).on("trackTroubleShootingArticleCustomerResponse",Q),$jq(document).on("trackWarrantyOfferPage",A),$jq(document).on("trackProductReferencesWithMissingPrices",B),$jq(document).on("trackProductIssueList",C),$jq(document).on("trackSerialNumber",R),$jq(document).on("trackProductIssue",S),$jq(document).on("trackFindMySerialNumber",N),$jq(document).on("trackQuickLinkClick",D),$jq(document).on("trackFormValidationError",E),$jq(document).on("trackFormSubmissionError",F),$jq(document).on("trackMyProductsError",G),$jq(document).on("trackAddProductCTAInteraction",H),$jq(document).on("trackFindProductCTAInteraction",I),$jq(document).on("trackAddProductSuccess",J),$jq(document).on("trackSuccessfulSearchSubmit",K),$jq(document).on("myAccountDashboardProducts",L),$jq(document).on("audioPlayer.TrackChange",qa),$jq(document).on("trackMyAccountCtaActions",M),$jq(document).on("trackSwitchAccount",pa),$jq(document).on("trackMyAccountEditProfileSuccess",O).on("trackPayPalExpress",la).on("trackKlarnaCustomerRejection",ma)}(),{init:a,track:ia,getVisitorID:ja}}();var Bose=Bose||{};Bose.VariantChangeListener=function(){function a(){$jq(document).on("variantChanged",b)}function b(a,b,e){
c($jq(a.target.activeElement).closest(d.container).find(d.variantElements),e)}function c(a,b){a.each(function(a,c){var d=$jq(c);Bose.Utils.stringArrayContains(d.data("variant-codes"),", ",b)?d.addClass(e.variantSelected):d.removeClass(e.variantSelected)})}var d={container:".js-variantChangeContainer",variantElements:".js-variantChangeListener__option"},e={variantSelected:"bose-variantChangeListener__option--selected"};return{init:a,_selectors:d,_classes:e}}();var Bose=Bose||{};Bose.BrightcovePlayer=function(){function a(){b(),"undefined"==typeof videojs&&(s=setInterval(b,100),w.push(s))}function b(){var a=$jq(".bose-pageNavigationTabs").data("hightlightcolor");"undefined"!=typeof videojs&&(d(),c(),e(),f(),$jq(document).on("window.load",p),w.forEach(clearInterval)),void 0!==a&&($jq(".vjs-play-progress").css("background-color",a),$jq(".vjs-big-play-button").css("background-color",a),$jq(".vjs-big-play-button").css("border","0"))}function c(){var a,b,c,d,e=Bose.Utils.getURLHashParam(v.videoId);e&&(a=Bose.Utils.getURLHashParam(v.autoPlayMode),Bose.Utils.scrollToAnchor(e,null,!0),b=$jq(t.videoPlayerContainer).find("video"),b.each(function(){c=$jq(this),d=c.attr("id"),videojs(d).ready(function(){String(c.data("videoId"))===e&&"yes"===a.toLowerCase()&&j(this,!0)}),n(c,!0)}))}function d(){if(Gridle.isActive("large")){$jq(t.player).each(function(){var a=$jq(this),b=a.find("video"),c=b.attr("id");void 0!==c&&videojs(c).ready(function(){var b=this;a.hasClass(u.backgroundPlayer)&&(k(b,!0),i(b,!0),setTimeout(function(){m(b)}))})})}}function e(){$jq(t.player).each(function(){var a=$jq(this),b=a.find("video"),c=b.attr("id");void 0!==c&&videojs(c).ready(function(){var c=this;if(a.hasClass(u.posterImgOnSmall))return void(Gridle.isActive("small")&&(b.attr("muted",""),i(c,!0),l(c,!1),a.find(".vjs-big-play-button").css("display","none"),a.find(".vjs-poster").css("display","block"),a.find(".vjs-tech").css("display","none"),a.find(".vjs-control-bar").css("display","none"),h(b,c)));a.hasClass(u.loopedPlayer)&&k(c,!0),a.hasClass(u.showPlayerControls)||(l(c,!1),a.find(".vjs-control-bar").first().css("display","none")),a.hasClass(u.scrollToViewPlayer)&&(i(c,!0),g(b,c)),Gridle.on("update",function(){a.hasClass(u.scrollToViewPlayer)&&(i(c,!0),g(b,c))}),n(b,!0)})})}function f(){var a,b,c=$jq(t.videoPlayerContainer),d=c.find(t.playlistItems);d.click(function(){b=$jq(this),a=b.closest(c).find(".vjs-big-play-button"),a.focus()})}function g(a,b){(Gridle.isActive("small")||Gridle.isActive("medium"))&&a.attr("muted",""),a.waypoint({handler:function a(c){"down"===c?(j(b,!0),m(b)):"up"===c&&(j(b,!1),o(b))},offset:"80%"}),a.waypoint({handler:function a(c){"down"===c?(j(b,!1),o(b)):"up"===c&&(j(b,!0),m(b))},offset:a.height()>$jq(window).height()?"-60%":"-20%"})}function h(a,b){var c;b.off(),c=b.getChild("posterImage"),c.off()}function i(a,b){a.muted(b)}function j(a,b){a.autoplay(b)}function k(a,b){a.loop(b)}function l(a,b){a.controls(b)}function m(a){a.play()}function n(a,b){a.attr("playsinline",b)}function o(a){a.pause()}function p(){var a=$jq(t.videoPlayerContainer).find("video");"en"!==Bose.DataLayer.Data.Page.language&&a.each(q)}function q(){var a=$jq(this);videojs(a.attr("id")).ready(r)}function r(){var a,b,c=this.playlist(),d=$jq("#"+this.id_).closest(t.videoPlayerContainer).find(t.playlistItems),e=Bose.DataLayer.Data.Page.language;c.forEach(function(c){void 0!==(a=c.customFields[e])&&d.each(function(d,e){b=$jq(e).find(t.playlistDescription),b.text()===c.description&&b.text(a)})})}var s,t={player:".bose-brightcovePlayer",videoPlayerContainer:".brightcove-container",playlistItems:".vjs-playlist-item",playlistDescription:".vjs-playlist-description"},u={loopedPlayer:"js-bose-brightcovePlayer--loopvideo",showPlayerControls:"js-bose-brightcovePlayer--showplayercontrols",backgroundPlayer:"bose-brightcovePlayer--background",scrollToViewPlayer:"js-bose-brightcovePlayer--scrollToView",posterImgOnSmall:"js-bose-brightcovePlayer--posterImgOnSmall"},v={videoId:"videoId",autoPlayMode:"autoPlay"},w=[];return{init:a,muteVideo:i,autoplayVideo:j,loopVideo:k,controlVideo:l,playVideo:m,addPlaysinline:n,pauseVideo:o,hashParams:v,_classes:u}}();var Bose=Bose||{};Bose.Story=function(){function a(){var a=$jq(g.dynamicStoryBlock);$jq(g.videoStoryBlock).each(function(){var a=$jq(this);"Media"===a.data("backgroundType")&&b(a),Gridle.isActive("large")||c(a)}),a.each(function(){d($jq(this))})}function b(a){var b=a.find("video");"undefined"!=typeof videojs&&videojs(b.attr("id")).ready(function(){Bose.BrightcovePlayer.muteVideo(this,!0),Bose.BrightcovePlayer.autoplayVideo(this,!0),Bose.BrightcovePlayer.loopVideo(this,!0),Bose.BrightcovePlayer.addPlaysinline(b,!0)})}function c(a){var b=a.find(".bose-brightcovePlayer--background .vjs-poster"),c=a.find(".bose-brightcovePlayer--background .video-js .vjs-tech"),d=a.data("videoFocal");b.addClass(d),c.addClass(d)}function d(a){e(a),$jq(document).on("alertBarOpen",function(b){e(a),b.preventDefault()}),$jq(document).on("alertBarClosed",function(b){e(a),b.preventDefault()}),Gridle.on("update",function(){e(a)})}function e(a){f(a,!1),a.children(g.dynamicStoryBlockLayer).each(function(){f($jq(this),!0)})}function f(a,b){var c=a.height(),d=a.data("initialHeight"),e=$jq(g.headerContainer),f=e.innerHeight();a.css("height",""),c=a.height(),d&&!Gridle.isActive("small")?a.css("height","calc("+d+" - "+f+"px)"):b||a.height(c-f),b&&a.css("min-height","calc("+d+" - "+f+"px)")}var g={dynamicStoryBlock:".js-storyBlock__dynamicHeight",dynamicStoryBlockLayer:".bose-storyBlock__layer.bose-storyBlock__backgroundContainer",headerContainer:".bose-headercontainer",videoStoryBlock:".js-storyBlock__video"};return{init:a}}();var Bose=Bose||{};Bose.ExpandableContentContainer=function(){function a(a){b=$jq(a),b.hasClass(d.expandableContentContainerOpen)&&(b.find(c.expandableTitle).eq(0).addClass(d.expandableTitleActive),b.find(c.expandableContent).eq(0).addClass(d.expandableContentActive),b.find(c.expandableIcon).eq(0).addClass(d.expandableIconActive))}var b,c={expandableTitle:".bose-expandableContent__title",expandableContent:".bose-expandableContent__content",expandableIcon:".bose-expandableContent__icon"},d={expandableContentContainerOpen:"bose-expandableContentContainer--open",expandableTitleActive:"bose-expandableContent__title--active",expandableContentActive:"bose-expandableContent__content--active",expandableIconActive:"bose-expandableContent__icon--active"};return{init:a}}();var Bose=Bose||{};Bose.IconLoader=function(){function a(a,b){var c=$jq(".bose-iconLoader"+Bose.Utils.sanitizeSelector(a)),d=c.find(".bose-iconLoader__text");void 0!==b&&b.length?(d.text(b),d.show()):d.hide(),c.show()}function b(a){$jq(".bose-iconLoader"+Bose.Utils.sanitizeSelector(a)).hide()}function c(a,b,c){var e,f;c?(e=d(a,!1),f=Bose.Utils.sanitizeSelector(c),$jq(f).addClass(g.overlayWrapper)):(e=d(a,!0),f="body"),b?setTimeout(function(){Bose.Utils.toggleBodyScrolling(!1),$jq(f).append(e)},5):(Bose.Utils.toggleBodyScrolling(!0),$jq(f).append(e))}function d(a,b,c){var d={msg:a,clazz:(c||"")+(b?" bose-iconLoaderOverlay--page":"")},e=nano('<div class="bose-iconLoaderOverlay js-iconLoaderOverlay {clazz}"><div class="bose-iconLoaderOverlay__background"></div><div class="bose-iconLoaderOverlay__iconContainer"><div class="bose-iconLoaderOverlay__icon bose-iconLoader bose-iconLoader--newBrand"></div><p class="bose-iconLoaderOverlay__text">{msg}</p><div></div>',d),f=$jq(e);return void 0!==a&&0!==a.length||f.find(".bose-iconLoaderOverlay__text").remove(),f}function e(a){var b,c;a?(b=Bose.Utils.sanitizeSelector(a),$jq(b).removeClass(g.overlayWrapper),c=Bose.Utils.sanitizeSelector(a)+" "+f.overlay,$jq(c).remove()):($jq(f.overlayWrapper).removeClass(g.overlayWrapper),$jq(f.overlay).remove()),Bose.Utils.toggleBodyScrolling(!0)}var f={overlay:".js-iconLoaderOverlay",overlayWrapper:".bose-iconLoaderOverlay--wrapper"},g={overlayWrapper:"bose-iconLoaderOverlay--wrapper"};return{selectors:f,getTemplate:d,show:a,hide:b,showIconLoaderPageOverlay:c,removeIconLoaderPageOverlay:e}}();var Bose=Bose||{};Bose.Tabs=function(){function a(){E=$jq(B.tabBar).outerHeight()+$jq(B.stickyMsg).outerHeight()||0,u=$jq(B.tabBar),v=$jq(B.tabListItem),w=$jq(B.tabSection),x=$jq(B.tabSectionImage),y=w.first(),z=$jq(B.footer),Bose.Utils.isAuthorMode()||(b(),c(),e(),g())}function b(){$jq(document).on("click",B.tabListLink,q).on("click",B.tabMenuLink,q).on("click",B.tabMenuContainer,o).on("keydown",B.tabMenuContainer,n).on("keydown",B.tabMenuLink,p).on("socialImages.initialized",e).on("window.load",d),$jq(window).on("resize",d),x.on("load",d)}function c(){x.addClass("lazypreload")}function d(){clearTimeout(A),A=setTimeout(function(){$jq.waypoints("refresh")},D)}function e(){f(),u.waypoint("sticky",{handler:h}),y.waypoint({handler:i,offset:E}),w.waypoint({handler:j,offset:E}),w.waypoint({handler:k,offset:function a(){return E-this.offsetHeight}}),z.waypoint({handler:m,offset:u.outerHeight()})}function f(){u.waypoint("unsticky"),u.waypoint("destroy"),y.waypoint("destroy"),w.waypoint("destroy"),z.waypoint("destroy")}function g(){var a=Bose.Utils.getURLHashParam(Bose.BrightcovePlayer.hashParams.videoId),b=Bose.Utils.getURLHashParam(Bose.BazaarVoice.hashParams.submit),c=0,d=window.location.hash;!d||a||b||(d.indexOf("ProductTabs_")>-1&&(c=E),Bose.Utils.scrollToAnchor(d,null,!0,c))}function h(){$jq(B.stickyMsg).slideToggle(500,function(){d()})}function i(a){var b=$jq("#PrimaryCta_tab");"down"===a?b.css("visibility","visible"):"up"===a&&b.css("visibility","hidden")}function j(a){"down"===a&&l($jq(this))}function k(a){"up"===a&&l($jq(this))}function l(a){var b=$jq(B.tabListItem+"#"+a.data("id"));v.removeClass(C.tabActive),b.addClass(C.tabActive)}function m(a){var b=z.offset().top||0;"down"===a?u.css({position:"absolute",top:b-u.outerHeight()}):"up"===a&&u.attr("style","")}function n(a){["Enter","Escape","Spacebar"," "].indexOf(a.key)>-1&&(o(),a.preventDefault())}function o(){var a=$jq(B.tabMenuContainer),b=$jq(B.tabMenu);F?(a.attr("aria-expanded","false"),b.removeClass("-show"),F=!1):(a.attr("aria-expanded","true"),b.addClass("-show"),b.find(B.tabMenuLink).first().focus(),F=!0)}function p(a){var b=$jq(B.tabMenuContainer),c=$jq(B.tabMenuLink).first().get(0),d=$jq(B.tabMenuLink).last().get(0),e=document.activeElement,f=$jq(this);["Enter","Escape","Spacebar"," "].indexOf(a.key)>-1&&(o(),"Enter"===a.key?f.click():(b.focus(),a.stopPropagation())),"ArrowDown"===a.key&&e!==d&&$jq(e).parent().next().find(B.tabMenuLink).focus(),"ArrowUp"===a.key&&e!==c&&$jq(e).parent().prev().find(B.tabMenuLink).focus(),["ArrowUp","ArrowDown","Spacebar"," "].indexOf(a.key)>-1&&a.preventDefault()}function q(){var a=$jq(this),b=a.data("anchorName")||"";t(b),r(b)}function r(a){var b,c,d,e;"EcommerceArea"===a?e=$jq(".js-cta__primary:visible"):(b=$jq(B.tabSection+'[data-id="'+a+'"]'),c=w.index(b),d=w.slice(c),d.each(function(){var a=$jq(this).find(":tabbable");if(a.length)return e=a.first(),!1})),$jq(document).one("keydown",function(a){e&&"Tab"===a.key&&(e.focus(),a.preventDefault())})}function s(){e(),g()}function t(a){var b=E-2;"EcommerceArea"!==a||$jq(B.tabBar).hasClass("-js-virtualTabBar")||(b=0),Bose.Utils.scrollToAnchor(a,null,!0,b)}var u,v,w,x,y,z,A,B={tabBar:".bose-tabBar",stickyMsg:".bose-tabBar__stickyMsg",tabMenuContainer:".bose-tabBarTabs__selectContainer",tabMenu:".bose-tabBarTabs__select__options",tabMenuLink:".bose-tabBarTabs__select__item",tabListItem:".bose-tabBarTabs__listItem",tabListLink:".bose-tabBarTabs__listItem a",tabSection:".bose-tabContent__content",tabSectionImage:".bose-tabContent__content img",footer:".bose-footer"},C={tabActive:"bose-tabBarTabs__listItem--active"},D=250,E=0,F=!1;return{init:a,resetWaypoints:s,scrollToAnchorWithStickyMsg:t,_DEBOUNCE_TIMEOUT:D,_selectors:B,_classes:C}}();var Bose=Bose||{};Bose.Tooltip=function(){function a(){$jq(".bose-tooltipButton").each(function(){b($jq(this))})}function b(a,b){a.qtip($jq.extend(!0,c(a),b))}function c(a){return{content:{text:a.next(".bose-tooltipContent"),title:a.data("title")},position:{my:"bottom right",at:"top center",target:a,viewport:$jq(window),adjust:{method:"shift none"}},style:{classes:"bose-tooltip"},show:{event:"click"},hide:{event:"click unfocus"}}}function d(a,b,c,d,e,f){var g=$jq(a),h=g.qtip("api"),i=f||"bose-tooltip--text";if(h&&void 0!==h)h.set("content.text",b);else{var j=g.attr("id");g.qtip({content:b,id:c&&0!==c.length?c:j,style:{classes:"bose-tooltip "+i},position:{my:"bottom left",at:"top left",adjust:{x:10}},show:{event:d},hide:{event:e}})}}function e(a){var b=$jq(a);if(!b.qtip("api"))return!1;b.qtip("destroy",!0)}function f(a){var b=$jq(a),c=b.qtip("api");if(!c)return!1;c.show()}function g(a){var b=$jq(a),c=b.qtip("api");if(!c)return!1;c.hide()}return{init:a,initTooltip:b,addTo:d,removeFrom:e,show:f,hide:g}}();var Bose=Bose||{};Bose.Button=function(){function a(){$jq(".bose-button[onclick]").each(function(){var a=$jq(this);void 0===a.data("onclick")&&(a.data("onclick",this.onclick),this.onclick=function(b){if(a.hasClass(h.loading)||a.hasClass(h.completed))return!1;a.hasClass(h.loadingAfterClick)&&a.trigger("setLoading"),a.data("onclick").call(this,b||window.event)},a.bind("setDefault",d),a.bind("setLoading",e),a.bind("setCompleted",f),a.bind("setError",g))}),$jq("."+h.printBtn).on("click",function(){window.print()})}function b(a){a.removeClass("bose-button--completed bose-button--error bose-button--loading")}function c(a,c){b(a),a.addClass(c)}function d(){b($jq(this))}function e(){c($jq(this),h.loading)}function f(){c($jq(this),h.completed)}function g(){c($jq(this),h.error)}var h={loading:"bose-button--loading",completed:"bose-button--completed",error:"bose-button--error",loadingAfterClick:"bose-button--setLoadingAfterClick",printBtn:"js-printBtn"};return{init:a,setLoading:e,setDefault:d}}();var Bose=Bose||{};Bose.Header=function(){function a(){G.$header=$jq(".bose-header2016"),G.$topNavExpandableItem=G.$header.find(E.topNavExpandableItem),G.$searchForm=G.$header.find(".bose-singleInputForm--searchTop2016"),G.$duplicateSearch=G.$header.find('.bose-serviceBar2016__search[data-open-button="true"]'),G.$searchContainer=G.$header.find(".bose-header2016__search"),G.$searchInput=G.$searchForm.find(".bose-singleInputForm__input"),G.$serviceBarIcons=G.$header.find("."+E.serviceBarIcon),G.$topNavContainer=G.$header.find("."+E.topNavContainer),G.$hamburger=G.$header.find(".bose-hamburger"),$jq(E.contactNavPro).on("click touchstart",b),$jq(E.languageLinkPro).each(function(){var a=$jq(this).attr("href");$jq(this).attr("href",a.replace("support.html","index.html"))}),$jq(E.headerLogoPro).each(function(){var a=$jq(this).attr("href");$jq(this).attr("href",a.replace("support.html","index.html"))}),$jq(E.footerLogoPro).each(function(){var a=$jq(this).attr("href");$jq(this).attr("href",a.replace("support.html","index.html"))}),e(),f(),Bose.AlertBar.init(),g(),h(),j(),n(),l(),"p=SOFTOPTIN;t=0"===$jq(E.cookieBar).data("privacy-initial")&&(y=Bose.DataLayer.Data.Page.referrerUrl,x=window.location.href.indexOf("cookie_policy"),""!==y&&-1===x&&$jq(E.cookieBar).find(".bose-infoBar2016__closeArea > a").click()),$jq("a").on("click",function(a){z=$jq(a.target).parent(E.languageCookiePopup).is(E.languageCookiePopup),B=$jq(a.target).is(E.cookieBar),A=$jq(a.target).parents(E.cookieBar).is(E.cookieBar),C=$jq(a.target).parents(E.alertInforBar).is(E.alertInforBar),D=$jq(a.target).parents(E.geoLocationButtonContainer).is(E.geoLocationButtonContainer),"block"===$jq(E.cookieBar).css("display")&&"p=SOFTOPTIN;t=0"===$jq(E.cookieBar).data("privacy-initial")&&(B||A||z||C||D||$jq(E.cookieBar).find(".bose-infoBar2016__closeArea > a").click())}),"false"===$jq(E.contactPro).val()&&$jq(E.contactNavPro).hide(),$jq(E.customPlus).on("click",t),$jq(E.expandableLinks).bind("mouseenter focusin mouseleave focusout",v)}function b(){$jq(E.contactNavPro).find(E.contactNavText).addClass("bose-navBar2016__textLabel--withBorder")}function c(a){I=a}function d(a){H=a}function e(){var a,b,c=$jq(".bose-infoBar2016--cookie"),d=Bose.CookieStore.getPrivacyProfileCookie();void 0!==d&&(a=d.split(";")[0],b=c.data("privacy-consent").split(";")[0]),void 0===d||isNaN(I)||("1"!==Bose.CookiePrivacyProfile.getPrivacyProfile().initial&&(d.split(";").length>5&&(w=parseInt(d.split(";")[5].split("=")[1],10)),void 0!==w&&(J=I!==w)),d.indexOf("rss=1")>=0&&(!(H>=I)||d.indexOf("showCookieBar=1")>=0&&d.indexOf("CookieBarVisible=1")>=0)?H>=I&&J?Bose.CookieStore.remove(Bose.CookieStore.CONST.PrivacyProfile):a!==b&&Bose.CookieStore.remove(Bose.CookieStore.CONST.PrivacyProfile):Bose.CookieStore.remove(Bose.CookieStore.CONST.PrivacyProfile),""!==w&&!isNaN(w)||"p=NONE"===b||Bose.CookieStore.remove(Bose.CookieStore.CONST.PrivacyProfile))}function f(){Bose.CookiePrivacyProfile.updatePrivacyProfileCookie(),Bose.CookiePrivacyProfile.updateSatTrackCookie(),$jq(E.checkForResetDate).val(I);var a=$jq(".bose-infoBar2016--cookie"),b=parseInt($jq(E.checkForResetDate).val(),10);a.length&&(a.find(E.closeInfoBar+" > a").on("click",function(){a.find(E.closeInfoBar).hide(),a.slideUp(),!isNaN(I)&&!isNaN(b)&&H>=I?Bose.CookieStore.setPrivacyProfileCookie(a.data("privacy-consent")+";rss=1;showCookieBar=1;CookieBarVisible=1;resetDate="+b,{expires:365}):Bose.CookieStore.setPrivacyProfileCookie(a.data("privacy-consent")+";rss=1",{expires:365}),Bose.CookieStore.setSatTrack(!0)}),void 0!==Bose.CookiePrivacyProfile.getPrivacyProfile().initial&&(a.slideDown(),Bose.DataCapture.disable()))}function g(){var a,b,c,d=$jq('[class*="'+E.shoppingBag+'"]');void 0!==Bose.CookieStore.getCartAmount()&&Bose.CookieStore.getCartAmount()>0?(a=Bose.CookieStore.getCartAmount(),b=1===parseInt(a,10)?"1 item in shopping cart.":"{0} items in shopping cart.",c=Bose.Translation.getSiteTranslation(b).replace("{0}",a),d.attr("aria-label",c),a>20&&(a=""),Bose.Utils.removeClassViaRegex(d,/bose-serviceBar2016__icon--shoppingCartFull[0-9]*/g),d.addClass(E.shoppingBag+a)):(b="Your cart is empty.",c=Bose.Translation.getSiteTranslation(b),d.attr("aria-label",c),Bose.Utils.removeClassViaRegex(d,/bose-serviceBar2016__icon--shoppingCartFull[0-9]*/g),d.addClass(E.shoppingBag))}function h(){G.$topNavExpandableItem.find(".bose-navBar2016__btn").on("click",i)}function i(a){if(!Gridle.isActive("large")){var b=$jq(this),c=b.parent(E.topNavExpandableItem),d=c.siblings(E.topNavExpandableItem);a.preventDefault(),c.hasClass(F.open)?c.removeClass(F.open):(d.removeClass(F.open),c.addClass(F.open)),u()}}function j(){G.$duplicateSearch.on("click",k)}function k(){return r(),G.$searchInput.focus(),!1}function l(){Gridle.isActive("small")||Gridle.isActive("medium")?$jq(E.languageSelector).on("click",function(a){a.preventDefault(),K=!0,q(K)}):($jq(E.languageSelector).on("click",function(a){a.preventDefault(),m()}),$jq("body").on("click",function(a){0===$jq(E.languageSelectorMain).find(a.target).length&&$jq(E.languageSelectorMain).removeClass("open")}))}function m(){$jq(E.languageSelectorMain).toggleClass("open")}function n(){G.$mobileAware=$jq("main, header, footer, .bose-header2016, .bose-navBar2016, .bose-header2016__servicebar .bose-serviceBar2016, .bose-singleInputForm--searchTop2016, .bose-header2016__search"),G.$header.find(".bose-header2016__hamburger").on("click",q),(Gridle.isActive("small")||Gridle.isActive("medium"))&&($jq(E.searchIcon).removeClass("hide"),G.$header.find(E.searchIcon).on("click",o))}function o(){$jq(E.productCatalogSearchBar).length>0?(new Bose.ProductCatalogSearchBar).show():($jq(document).trigger("header.mobileMenuOpened"),r(),p(),$jq(E.searchIcon).hide())}function p(){$jq(".bose-singleInputForm__globalSearch").focus()}function q(a){$jq("header").hasClass(F.open+F.mobileMenu)?s():r(a)}function r(a){var b=G.$hamburger.data("close-menu");$jq(document).trigger("header.mobileMenuOpened"),G.$mobileAware.addClass(F.open+F.mobileMenu),!0===a&&G.$mobileAware.addClass("bose-languageMobile"),G.$hamburger.addClass(F.is+F.active),G.$hamburger.attr({"aria-label":b,"aria-expanded":"true"}),G.$duplicateSearch.addClass(F.open+F.mobileMenu),$jq(E.searchIcon).hide()}function s(){var a=G.$hamburger.data("open-menu");$jq(document).trigger("header.mobileMenuClosed"),G.$topNavExpandableItem.removeClass(F.open),G.$mobileAware.removeClass(F.open+F.mobileMenu),G.$mobileAware.removeClass("bose-languageMobile"),G.$hamburger.removeClass(F.is+F.active),G.$hamburger.attr({"aria-label":a,"aria-expanded":"false"}),G.$duplicateSearch.removeClass(F.open+F.mobileMenu),$jq(E.searchIcon).show(),K=!1}function t(a){var b=$jq(this);!Gridle.isActive("large")&&b.closest(E.navBar)&&(a.preventDefault(),b.hasClass("-open")?(u(),b.closest(E.navBar).find(".bose-navBar2016__items .-open").removeClass("-open"),b.parent().addClass("bose-subnav-focus"),b.removeClass("-open").addClass("-close")):(b.removeClass("-close").addClass("-open"),b.parent().removeClass("bose-subnav-focus")))}function u(){var a=$jq(document).find(".bose-subnav-focus");!Gridle.isActive("large")&&a.closest(E.navBar)&&a.find("-close")&&(a.removeClass("bose-subnav-focus"),a.find(".-close").removeClass("-close").addClass("-open"))}function v(a){var b=$jq(this),c=b.find("a:first");Gridle.isActive("large")&&("mouseenter"!==a.type&&"focusin"!==a.type||"false"!==c.attr("aria-expanded")?"mouseleave"!==a.type&&"focusout"!==a.type||"true"!==c.attr("aria-expanded")||c.attr("aria-expanded","false"):($jq(".bose-serviceBar2016__itemNewVar .bose-serviceBar2016__custom--subnav, .bose-navBar2016 .bose-navBar2016__item:not(.-noChildren) .bose-navBar2016__itemFoldout").css("visibility","hidden"),b.find(E.customSubnav).length>0?b.find(E.customSubnav).css("visibility",""):b.find(E.itemFoldoutMenu).length>0&&b.find(E.itemFoldoutMenu).css("visibility",""),c.attr("aria-expanded","true")))}var w,x,y,z,A,B,C,D,E={topNavExpandableItem:".bose-navBar2016__item:not(.-noChildren)",closeInfoBar:".bose-infoBar2016__closeArea",shoppingBag:"bose-serviceBar2016__icon--shoppingCartFull",serviceBarIcon:"bose-serviceBar2016__icon",topNavContainer:"bose-header2016__topnav",cookieBar:".bose-infoBar2016--cookie",languageCookiePopup:".bose-localeSelector__link",checkForResetDate:".checkForResetDate",alertInforBar:".bose-infoBar2016--alert",geoLocationButtonContainer:".bose-geolocation__buttonsContainer",searchIcon:".js-bose-searchIcon",contactPro:"#bose-serviceBar2016__contactPro",contactNavPro:".bose-navBar2016--contactusPro",languageSelectorMain:".bose-siteSelector",languageSelector:".bose-siteSelector__trigger",languageSelectorDropdown:".bose-siteSelector__nav",contactNavText:".bose-navBar2016__textLabel",customPlus:".bose-navBar2016__customPlus",navBar:".bose-navBar2016",expandableLinks:".bose-serviceBar2016__itemNewVar, .bose-navBar2016 .bose-navBar2016__item:not(.-noChildren)",customSubnav:".bose-serviceBar2016__custom--subnav",productCatalogSearchBar:".header-container",itemFoldoutMenu:".bose-navBar2016__itemFoldout",headerLogoPro:".bose-header2016__logo",languageLinkPro:".bose-siteSelector__link",footerLogoPro:".bose-footer__logo"},F={open:"-open",closed:"-closed",active:"-active",is:"-is",hideClass:"--hide",mobileMenu:"MobileMenu"},G={},H=(new Date).getTime(),I=new Date($jq(E.cookieBar).data("privacy-reset-date")).getTime(),J=!1,K=!1;return{init:a,updateCartAmount:g,setAlertbarDate:c,setTodayDate:d,openMobileMenuSearchIcon:o}}();var Bose=Bose||{};Bose.AlertBar=function(){function a(){var a=$jq(d.alertBar),e=$jq(d.marqueeContainer),f=$jq(d.marqueePause),g=a.data("marquee");Gridle.isActive("large")||"static"===g||(f.on("click",b),a.removeClass("bose-infoBar2016--alert").addClass("bose-infoBar2016--alertTicker"),e.removeClass("bose-infoBar2016__container").addClass("bose-infoBar2016__marqueeContainer bose-infoBar2016__marqueeContainer--"+g)),"static"===g&&f.hide(),a.length&&(a.find(d.closeInfoBar+" > button").on("click",c),Bose.CookieStore.isAlertBarShown()&&a.slideDown(function(){$jq(document).trigger("alertBarOpen")}))}function b(){var a=$jq(d.marqueePauseIcon),b=$jq(d.marqueeContainer);a.hasClass("bose-infoBar2016__pauseIcon")?(a.removeClass("bose-infoBar2016__pauseIcon").addClass("bose-infoBar2016__playIcon"),b.addClass("bose-infoBar2016__marqueePaused")):(a.removeClass("bose-infoBar2016__playIcon").addClass("bose-infoBar2016__pauseIcon"),b.removeClass("bose-infoBar2016__marqueePaused"))}function c(){var a=$jq(d.alertBar);a.find(d.closeInfoBar).hide(),a.slideUp(),Bose.CookieStore.setAlertBarClosed()}var d={alertBar:".js-bose-infoBar2016--alert",closeInfoBar:".bose-infoBar2016__closeArea",marqueeContainer:".js-bose-infoBar2016__container",marqueePauseIcon:".bose-infoBar2016__playPauseIcon",marqueePause:".bose-infoBar2016__playPause"};return{init:a}}();var Bose=Bose||{};Bose.Components=Bose.Components||{},Bose.Components.DynamicVideo=Bose.Components.DynamicVideo||{},Bose.Components.DynamicVideo.consts={POSTER_PATH_PREFIX:"../.."},Bose.Components.DynamicVideo.init=function(a){a.each(function(a,b){Bose.Components.DynamicVideo.makeVideo($jq(b),void 0,!1)})},Bose.Components.DynamicVideo.makeVideo=function(a,b,c){var d,e=a.find(".bose-videoContainer__viewerContainer"),f=e.attr("id"),g=a.data("viewer-params"),h=a.data("posterrenditions"),i=a.width(),j=Bose.Components.DynamicVideo.getPosterRendition(h,i);g.posterimage=Bose.Components.DynamicVideo.consts.POSTER_PATH_PREFIX+j,d={containerId:f,params:g},Bose.Components.DynamicVideo.createS7Viewer(a,d,b,c)},Bose.Components.DynamicVideo.createS7Viewer=function(a,b,c,d){if("undefined"!=typeof s7viewers){var e=a.find(".bose-videoContainer__viewerContainer"),f=e.data("initialized");if(void 0===f||!f||d){e.data("initialized",!0);var g=new s7viewers.VideoViewer(b);g.onInitComplete=c,g.init()}}},Bose.Components.DynamicVideo.getPosterRendition=function(a,b){if(void 0!==a){var c={width:0,rendition:void 0};return a.split(", ").forEach(function(a){var d=a.split(" "),e=d[0],f=parseInt(d[1].substring(0,d[1].length-1),10);(f<=b&&(c.width>b||f>c.width)||void 0===c.rendition)&&(c.width=f,c.rendition=e)}),c.rendition}};var Bose=Bose||{};Bose.ExpandableContent=Bose.ExpandableContent||{},Bose.ExpandableContent.init=function(a){Bose.ExpandableContent.$panelTitle=$jq(a),Bose.ExpandableContent.$panelTitle.not(".bose-expandableContent__title--disabled")&&(Bose.ExpandableContent.$panelTitle.on("click",Bose.ExpandableContent.slide),Bose.ExpandableContent.$panelTitle.on("keydown",Bose.ExpandableContent.captureKeys))},Bose.ExpandableContent.captureKeys=function(a){var b=a.key;"Spacebar"!==b&&"Enter"!==b&&""!==b||(a.preventDefault(),$jq(a.target).click())},Bose.ExpandableContent.slide=function(){Bose.ExpandableContent.$currentPanel=$jq(this);var a="true"===Bose.ExpandableContent.$currentPanel.attr("aria-expanded");return $jq(document).trigger("analyticsExpandableClick",[a,Bose.ExpandableContent.$currentPanel]),Bose.ExpandableContent.$currentPanel.toggleClass("bose-expandableContent__title--active"),Bose.ExpandableContent.$currentPanel.children(".bose-expandableContent__icon").toggleClass("bose-expandableContent__icon--active"),Bose.Utils.isAuthorMode()?Bose.ExpandableContent.$currentPanel.parent().nextAll().slideToggle("fast").toggleClass("bose-expandableContent__content--active"):Bose.ExpandableContent.$currentPanel.parent().next().slideToggle("fast").toggleClass("bose-expandableContent__content--active"),Bose.ExpandableContent.$currentPanel.attr("aria-expanded",!a),!1};var Bose=Bose||{};Bose.TextInput=Bose.TextInput||{},Bose.TextInput.classes={active:"bose-textInput--active",valid:"bose-textInput--valid",error:"bose-textInput--error",readOnly:"bose-textInput--readOnly",type:"input"},Bose.TextInput.selectors={container:".bose-textInput",field:".bose-textInput .bose-textInput__input",cardSection:".js-bose-cardSection",serialNumberLookupErrorMessage:".js-serialNumberLookup-allErrorMessages"},Bose.TextInput.init=function(a,b){var c,d=b;void 0===d&&(d=Bose.TextInput),c=a?a.find(d.selectors.field+":not([data-initialized])"):$jq(d.selectors.field+":not([data-initialized])"),c.on("focus",function(a){d.focus.call(this,a,d)}).on("blur",function(a){d.leave.call(this,a,d)}).on("blur paste keyup",function(a){d.doValidation.call(this,a,d)}).on("change input propertychange",function(a){d.change.call(this,a,d)}).bind("setDisabled",function(a){d.disableField.call(this,a,d)}).bind("setEnabled",function(a){d.enableField.call(this,a,d)}).bind("doValidation",function(a,b){d.doValidation.call(this,a,d,b)}),c.attr("data-initialized",!0),void 0!==Bose.CreditCardDetector&&Bose.CreditCardDetector.init()},Bose.TextInput.change=function(a,b){var c=$jq(this),d=c.closest(b.selectors.container),e=d.hasClass(b.classes.valid)||d.hasClass(b.classes.error);""!==c.val()&&(e||b.setActive.call(this,a,b),void 0!==Bose.AddressValidation&&Bose.AddressValidation.dirtyAddress(c),c.trigger("keyup"))},Bose.TextInput.focus=function(a,b){b.setActive.call(this,a,b)},Bose.TextInput.leave=function(a,b){var c=$jq(this),d=c.closest(b.selectors.container);Bose.TextInput.showErrorMessage(d)},Bose.TextInput.setActive=function(a,b){var c=$jq(this),d=c.closest(b.selectors.container);d.hasClass(b.classes.readOnly)||d.addClass(b.classes.active)},Bose.TextInput.isValid=function(a,b){var c=a.closest(b.selectors.container);return!c.is(":visible")||!c.hasClass(b.classes.error)},Bose.TextInput.disableField=function(a,b){$jq(this).attr("readonly","readonly").closest(b.selectors.container).addClass(b.classes.readOnly)},Bose.TextInput.enableField=function(a,b){$jq(this).prop("readonly",!1).closest(b.selectors.container).removeClass(b.classes.readOnly)},Bose.TextInput.markValid=function(a,b){a.removeClass(b.classes.error).removeClass(b.classes.active).addClass(b.classes.valid),Bose.TextInput.hideErrorMessage(a)},Bose.TextInput.markInvalid=function(a,b,c){a.removeClass(c.classes.valid).removeClass(c.classes.active).addClass(c.classes.error),Bose.TextInput.setErrorMessage(a,b),Bose.TextInput.showErrorMessage(a)},Bose.TextInput.resetState=function(a,b){a.removeClass([b.classes.error,b.classes.valid,b.classes.active].join(" ")),Bose.Tooltip.removeFrom(a)},Bose.TextInput.doValidation=function(a,b,c){var d=$jq(this),e=d.closest(b.selectors.container);d.hasClass("bose-cardNumber__input")&&!d.is(":disabled")&&d.trigger("creditCardType"),e.hasClass(b.classes.readOnly)?b.resetState(e,b):d.is(":focus")&&!c||!b.doChecks(d,e,b)||(b.markValid(e,b),void 0!==a&&"keyup"!==a.type&&$jq(document).trigger("analyticsFormFieldChange",[d]))},Bose.TextInput.doChecks=function(a,b,c){return void 0===a.data("options")||c.doRequiredCheck(a,b,c)&&c.doRegexCheck(a,b,c)&&c.doMaxLengthCheck(a,b,c)&&c.doPostalCodeCheck(a,b,c)&&c.doCardAvailabilityCheck(a,b,c)},Bose.TextInput.doCardAvailabilityCheck=function(a,b,c){var d,e=a.hasClass("bose-cardNumber__input"),f=$jq(Bose.TextInput.selectors.cardSection).data("card-found");return!(e&&a.val().length>6&&!f)||(d=a.data("options").messages.notAvailable,c.markInvalid(b,d,c),!1)},Bose.TextInput.doRequiredCheck=function(a,b,c){if(void 0!==a.attr("data-required")&&""===a.val()){var d=a.data("options").messages.required;return c.markInvalid(b,d,c),!1}return!0},Bose.TextInput.doMaxLengthCheck=function(a,b,c){if(""!==a.val()&&void 0!==a.data("options").maxLength&&""!==a.data("options").maxLength&&(a.val(a.val().trim()),a.val().length>a.data("options").maxLength)){var d=a.data("options").messages.maxLength;return c.markInvalid(b,d,c),!1}return!0},Bose.TextInput.doRegexCheck=function(a,b,c){if(""!==a.val()&&void 0!==a.data("options").regex&&""!==a.data("options").regex){var d=new RegExp(a.data("options").regex);if(a.val(a.val().trim()),!d.test(a.val())){var e=a.data("options").messages.wrongFormat;return c.markInvalid(b,e,c),!1}}return!0},Bose.TextInput.doPostalCodeCheck=function(a,b,c){if(void 0!==a.attr("data-required")&&a.hasClass("bose-textField--invalidPostalCode")){var d=a.data("blockedpostalcodemessage");return c.markInvalid(b,d,c),!1}return!0},Bose.TextInput.setActiveLabel=function(a){$jq(a.selectors.field).each(function(){var b=$jq(this),c=b.closest(a.selectors.container)
;b.val()&&!c.hasClass(a.classes.readOnly)&&c.addClass(a.classes.active)})},Bose.TextInput.setErrorMessage=function(a,b){var c=a.find("input"),d=a.find("textarea"),e=$jq(this.selectors.serialNumberLookupErrorMessage);c.length>0&&(c.attr("aria-invalid",!0),$jq(document).trigger("analyticsFormError",[c,b])),d.length>0&&d.attr("aria-invalid",!0),e.length>0?e.text(b):a.next(".bose-newErrorMessage").html(b)},Bose.TextInput.showErrorMessage=function(a){var b=$jq(this.selectors.serialNumberLookupErrorMessage);b.length>0?(b.addClass("-show"),a.next(".bose-newErrorMessage").removeClass("-show")):(a.next(".bose-newErrorMessage").addClass("-show"),a.next(".bose-newErrorMessage").parent().find(".bose-shoppingBag__addItem__input").addClass("-extraMargin"))},Bose.TextInput.hideErrorMessage=function(a){var b=a.find("input"),c=a.find("textarea"),d=$jq(this.selectors.serialNumberLookupErrorMessage);b.length>0&&b.attr("aria-invalid",!1),c.length>0&&c.attr("aria-invalid",!1),d.length>0?(d.innerHTML="",d.removeClass("-show")):(a.next(".bose-newErrorMessage").innerHTML="",a.next(".bose-newErrorMessage").removeClass("-show"),a.next(".bose-newErrorMessage").parent().find(".bose-shoppingBag__addItem__input").removeClass("-extraMargin"))},$jq(window).on("unload",function(){$jq(window).unbind("unload")});var Bose=Bose||{};Bose.BazaarVoice=function(){function a(a){if("undefined"!=typeof $BV){var c=$jq(a),d=c.data("product-code");void 0!==d&&d.toString().length>0&&($BV.configure("global",{productId:d.toString(),events:{submissionLoad:function a(){Bose.DataCapture.disable()},bvRender:function a(){Bose.Tabs.resetWaypoints(),Bose.Utils.getURLHashParam(e.submit)&&($BV.ui("rr","submit_review",{productId:d.toString()}),Bose.Tabs.scrollToAnchorWithStickyMsg("ProductTabs_tab999"))}}}),$BV.ui("rr","show_reviews",{doShowContent:function a(){Gridle.isActive("small")&&b()}}))}}function b(){var a=$jq("#BVRRContainer").closest(".bose-tabContent__content.ui-accordion-content");if(a.is(":hidden")){a.prev().click(),setTimeout(c,625)}}function c(){var a=$jq("#BVRRContainer").closest(".bose-tabContent__content.ui-accordion-content").prev().offset().top;$jq("body").scrollTop(a)}function d(){for(var a=Bose.DataLayer.Data.Order.details,b=Bose.DataLayer.Data.Page.locale,c=Bose.DataLayer.Data.Order.currency,d=[],e=0;e<a.length;e++)d.push({sku:a[e].sku,quantity:a[e].quantity,price:a[e].price});"undefined"!=typeof BV&&BV.pixel.trackTransaction({currency:c,orderId:Bose.DataLayer.Data.Order.orderNumber,total:Bose.DataLayer.Data.Order.totalAmountWithTax,items:d,email:Bose.DataLayer.Data.Order.billingEmail,locale:b.replace("-","_")})}var e={submit:"submit"};return{getRatingsAndReviews:a,trackTransactionPageView:d,hashParams:e}}();var Bose=Bose||{};Bose.Geolocation=function(){function a(){if(Bose.DataLayer.Data.Settings&&Bose.DataLayer.Data.Settings.geolocationEnabled){if(b(Bose.DataLayer.Data.Settings.geolocationEnabled,Bose.CookieStore.getGeolocationCookie())){var a=Bose.DataLayer.Data.Settings.microServiceUrl;$jq.ajax(a,{method:"GET"}).done(function(a){c(a)}).fail(function(){d()})}}}function b(a,b){var c=void 0!==a&&"true"===a,d=void 0===b,e=-1!==Bose.DataLayer.Data.Page.referrerUrl.indexOf("global.bose.com"),f=CQ.WCM&&CQ.WCM.isEditMode();return c&&d&&!e&&!f}function c(a){var b,c=a.country,d=g(a.domain,c);e(d,c)?(b=Bose.Popup.display(j(a,d),{onClose:i,cloneContent:!1}),$jq(l.closeButton).on("click",function(){Bose.Popup.close(b)})):i()}function d(){i(!0)}function e(a,b){var c=Bose.DataLayer.Data.Page.locale,d=-1!==c.indexOf(b),e=void 0!==a;return"PR"!==b&&"VI"!==b||"en-US"!==c||(d=!0),!d&&e}function f(a,b){var c="true"===Bose.DataLayer.Data.Settings.ecommerceEnabled,d=Bose.Translation.getSiteTranslation("country_name");return-1===b.indexOf("global.bose.com")?h()?Bose.Translation.getSiteTranslation("Geolocation.Message3",[d]):c?Bose.Translation.getSiteTranslation("Geolocation.Message1",[d,a,d,a,b]):Bose.Translation.getSiteTranslation("Geolocation.Message2",[d,a,b]):h()?Bose.Translation.getSiteTranslation("Geolocation.Message6",[d]):c?Bose.Translation.getSiteTranslation("Geolocation.Message4",[d,a,d,a,b]):Bose.Translation.getSiteTranslation("Geolocation.Message5",[d,a,b])}function g(a,b){var c;return $jq("link").each(function(){if(-1!==this.hreflang.indexOf(b))return c=this.href,!1}),c||h()||(c="https://"+a),c}function h(){var a=Bose.DataLayer.Data.Page.type,b=Bose.DataLayer.Data.Page.path;return-1!==a.indexOf("support")||-1!==b.indexOf("support")}function i(a){a?Bose.CookieStore.setGeolocationCookie(!0,!0):Bose.CookieStore.setGeolocationCookie(!0)}function j(a,b){var c={message:f(a.name,a.domain),redirectText:Bose.Translation.getSiteTranslation("Redirect"),stayHereText:Bose.Translation.getSiteTranslation("Stay here"),targetUrl:b};return $jq(nano('<div class="bose-geolocation">    <div class="bose-geolocation__text">       {message}   </div>   <div class="bose-geolocation__buttonsContainer">       <div class="bose-geolocation__buttonsContainer__button bose-geolocation__buttonsContainer__redirect">           <a role="button" aria-label="{redirectText}" class="bose-buttonLink bose-buttonLink--type1 -withBorder" title="{redirectText}" target="_self" href="{targetUrl}">               <span>                   {redirectText}               </span>           </a>       </div>       <div class="bose-geolocation__buttonsContainer__button">           <a role="button" aria-label="{stayHereText}" class="bose-buttonLink bose-buttonLink--type1 -withBorder js-bose-geolocation__buttonsContainer__close" title="{stayHereText}">               <span>                   {stayHereText}               </span>           </a>       </div>   </div></div>',c))}function k(){$jq(document).on("locale-choice-done",a)}var l={closeButton:".js-bose-geolocation__buttonsContainer__close"};return{init:k,_selectors:l}}();var Bose=Bose||{};Bose.Components=Bose.Components||{},Bose.Components.LocaleSelector=function(){function a(a){if(Bose.Components.LocaleSelector.$component=$jq(a),!0===Bose.Components.LocaleSelector.$component.data("multilingual-site")){if("undefined"!=typeof CQ&&void 0!==CQ.WCM&&(CQ.WCM.isEditMode(!0)||CQ.WCM.isDesignMode(!0))||void 0!==Bose.CookieStore.getSelectedLanguage()||void 0!==Bose.CookieStore.getReseller())b();else{if(!0===Bose.Components.LocaleSelector.$component.data("show-modal")){var c=$jq(document).width()*(Gridle.isActive("small")?.8:.4);$jq.fancybox.open($jq(".bose-localeSelector--modal"),{minWidth:c,scrolling:"no",arrows:!1,afterClose:function a(){void 0===Bose.CookieStore.getSelectedLanguage()&&d(),b()}})}else{e(Bose.Components.LocaleSelector.$component.data("default-locale"),Bose.Components.LocaleSelector.$component.data("url"))}}$jq(".bose-localeSelector__languages > .bose-localeSelector__link, .bose-localeSelector__languages > .bose-localeSelector__link2016").on("click",function(a){a.preventDefault();var b=$jq(this),c=b.data("locale"),d=b.attr("href"),f=!1;b.hasClass("js-removePrivacyCookie")&&(f=!0),e(c,d,f)})}else b()}function b(){$jq(document).trigger("locale-choice-done")}function c(){return Bose.Utils.getCurrentHref().match(/\/([a-z]{2}_[a-z]{2})\//).pop()}function d(){e(c())}function e(a,b,d){var e=c();if(void 0===Bose.CookieStore.getReseller()&&Bose.CookieStore.setSelectedLanguage(a),void 0!==b&&e!==a)return d&&Bose.CookieStore.remove(Bose.CookieStore.CONST.PrivacyProfile),void Bose.Utils.setWindowLocation(b);$jq.fancybox.close()}return{init:a}}();var Bose=Bose||{};Bose.CookiePolicyChanger=function(){function a(){$jq(".bose-cookiePolicy").each(function(){var a=$jq(this),d=Bose.CookiePrivacyProfile.getPrivacyProfile(),e={expires:365},f=a.data("cookie-category"),g=!0;d.hasOwnProperty("initial")?(delete d.initial,d[f]="1",c(a,"enabled")):d.hasOwnProperty(f)&&"1"!==d[f]?(e.expires=31,c(a,"disabled"),g=!1):(d[f]="1",c(a,"enabled")),Bose.CookiePrivacyProfile.setPrivacyProfile(d,e),Bose.CookieStore.setSatTrack(g),a.on("click",b)})}function b(a){var b=Bose.CookiePrivacyProfile.getPrivacyProfile(),c=$jq(this).data("cookie-category"),d={expires:365},e=!0;"enabled"===a.target.value?b[c]="1":(b[c]="0",e=!1);for(var f in b)b.hasOwnProperty(f)&&"0"===b[f]&&(d.expires=31);Bose.CookiePrivacyProfile.setPrivacyProfile(b,d),Bose.CookieStore.setSatTrack(e)}var c=function a(b,c){b.find("input[type='radio'][value='"+c+"']").prop("checked",!0)};return{init:a}}();var Bose=Bose||{};Bose.DataCapture=function(){function a(){H=!1}function b(){H=!0,clearTimeout(s),Bose.DataCapture.close(0,!0)}function c(a,b){var c=Gridle.isActive("small");F=a,"emailSubscription"===F&&c&&(F="mobileEmailSubscription"),z=null,y=null,x=null,A=$jq(G.currentPath).val(),B=Bose.DataLayer.Data.Page.formattedLocale,E=Bose.DataLayer.Data.Page.type,C=A.replace(/\//g,")"),"productpage"===E&&(z=Bose.DataLayer.Data.Product.productCode,y=Bose.DataLayer.Data.Product.selectedVariantCode,x=Bose.DataLayer.Display.Product.productName),$jq.ajax({type:"GET",url:A+".fetchDynamicImage."+z+"."+y+"."+B+"."+C+".html",success:function a(b){D=b.split("|"),w=D[0],x=D[1]&&"null"!==D[1]?D[1]:x},error:function a(){}}),s=setTimeout(function(){!H&&q(F)&&(t=F,e(F))},1e3*b)}function d(a){var b=$jq(G.wrapper);b.is(a.target)||0!==b.has(a.target).length||Bose.DataCapture.close()}function e(a){var b="/"+Bose.DataLayer.Data.Page.formattedLocale+"/forms.datacapture."+a+".html";$jq.ajax({type:"GET",url:b,success:function a(b){f(b)},error:function a(){}})}function f(a){g(a),h()}function g(a){var b=$jq("<div/>").append("string"==typeof a?$jq.parseHTML(a,null,!0):a),c=b.find(".bose-dataCapture"),d="-"+c.data("datacapture-type");u=parseInt(c.data("datacapture-maxdisplays"),10),v=$jq("<div/>",{class:"bose-dataCaptureWrapper "+d,html:c})}function h(){var a;$jq("body").append(v),$jq(G.outputScreen).addClass("hide"),Gridle.isActive("small")&&($jq("body").append('<div class="bose-dataCapture__backDrop"></div>'),$jq(document).mousedown(d)),p(),n(),Bose.Utils.initElements(),a=v.find(".bose-formFlowPanel--active"),a.length&&$jq(document).trigger("forms.trackFormLoaded",[a.find("form:first")]),v.addClass("-show"),setTimeout(function(){v.addClass("-animateIn"),setTimeout(function(){v.addClass("-opened"),x&&(x=x.replace("?",""),x=x.replace(/[^\x00-\x7F]/g,"")),m(x),$jq(G.dataCaptureSrc).attr({src:w,alt:x})},600)})}function i(a){return a?l():k()}function j(){var a=$jq(G.emailInput).find("input");if(void 0!==$jq(G.inputScreenError).html()||""===a.val())return void a.focus();var b=$jq(G.servletUrl).val(),c=Bose.DataLayer.Data.Page.country.toUpperCase(),d=Bose.DataLayer.Data.Page.language,e=a.val().toLowerCase();z=Bose.DataLayer.Data.Product.productCode,void 0===z&&(z=Bose.DataLayer.Data.Page.subCategory1),void 0===z&&(z=Bose.DataLayer.Data.Page.primaryCategory),$jq.ajax({url:b+".productEmailSignup.json",method:"POST",data:{email:e,productCode:z,country:c,language:d},success:function a(b){200===b.statusCode?l():k()}})}function k(){$jq(G.inputScreen).addClass("hide"),$jq(G.outputScreen).removeClass("hide"),$jq(G.outputText).prev().addClass("hide"),$jq(G.outputTextNew).prev().addClass("hide"),Bose.DataCapture.close(30)}function l(){$jq(G.inputScreen).addClass("hide"),$jq(G.outputScreen).removeClass("hide"),$jq(G.outputText).addClass("hide"),$jq(G.outputTextNew).addClass("hide"),Bose.DataCapture.close(30)}function m(a){var b=$jq(G.dataCapture).find(".bose-richText__heading4").closest(".text").find(".bose-richText__smallText"),c=b.text(),d=c.replace("#product_name",a);b.text(d)}function n(){var a=parseInt(Bose.CookieStore.getDataCaptureViews(t),10);isNaN(a)&&(a=0),void 0!==Bose.FunctionalCookieStore&&(Bose.FunctionalCookieStore.setDataCaptureViews(t,++a),a>=u&&Bose.FunctionalCookieStore.setDataCaptureViewed(t))}function o(a,b){var c=a,d=$jq(G.wrapper);void 0!==v&&((void 0===c||c<0)&&(c=0),void 0!==b&&b?d.remove():setTimeout(function(){d.removeClass("-animateIn"),setTimeout(function(){Gridle.isActive("small")&&$jq(G.backdrop).addClass("hide"),void 0!==Bose.FunctionalCookieStore&&Bose.FunctionalCookieStore.setDataCaptureViewed(t),d.remove()},600)},1e3*c))}function p(){$jq(G.closeButton).on("click",o)}function q(a){var b=!1;if(!$jq.fancybox.isOpen&&!Bose.Popup.isOpen()&&void 0!==Bose.DataLayer.Data.Page.dataCaptureEnabled&&"true"===Bose.DataLayer.Data.Page.dataCaptureEnabled){var c=Bose.CookieStore.isDataCaptureViewed(a);void 0!==c&&c||(b=!0)}return b}function r(){return $jq.find(G.wrapper).length}var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G={closeButton:".bose-dataCapture__close",wrapper:".bose-dataCaptureWrapper",dataCapture:".bose-dataCapture",dataCaptureSrc:".bose-dataCapture__image",currentPath:".bose-dataCapture__currentPagePath",inputField:".bose-textField__input",backdrop:".bose-dataCapture__backDrop",servletUrl:".js-dataCapture__servletPath",emailInput:".bose-emailSubscriptionInput__input",inputScreen:".bose-dataCapture__inputScreen",outputScreen:".bose-dataCapture__outputScreen",outputText:".bose-dataCapture__outputScreen .text:last",outputTextNew:".bose-dataCapture__outputScreen .bose-text:last",signUpBtn:".js-emailSubscriptionInput__piiAjax",confirmReceipt:'input[name="receiptID"]',inputScreenError:".bose-dataCapture__inputScreen .bose-newErrorMessage.-show"},H=!1;return{enable:a,disable:b,popup:f,trigger:c,close:o,isOpen:r,sendMsData:j,responseOnOneTrust:i}}();var Bose=Bose||{};Bose.Text=function(){function a(){$jq(b.headingScalable).wrapInner('<span class="slabtext"></span>'),$jq(b.headingScalable).slabText({postTweak:!1,maxFontSize:80})}var b={headingScalable:".bose-richText__headingScalable"};return{init:a,_selectors:b}}(),$jq(document).ready(function(){Bose.CookiePolicyChanger.init()}),$jq(document).ready(function(){Bose.Story.init()}),$jq(document).ready(function(){Bose.ExpandableContentContainer.init($jq(".bose-expandableContentContainer"))}),$jq(document).ready(function(){Bose.DTM.init()}),$jq(document).ready(function(){Bose.Tabs.init()}),$jq(document).ready(function(){Bose.Button.init()}),$jq(document).ready(function(){Bose.Header.init()}),$jq(document).ready(function(){Bose.ExpandableContent.init($jq(".bose-expandableContent__title"))}),$jq(document).ready(function(){Bose.Components.DynamicVideo.init($jq(".bose-videoContainer"))}),$jq(document).ready(function(){Bose.Overlay.init()}),$jq(document).ready(function(){Bose.Geolocation.init()}),$jq(document).ready(function(){Bose.Components.LocaleSelector.init($jq(".bose-localeSelector"))}),$jq(document).ready(function(){Bose.BrightcovePlayer.init()}),$jq(document).ready(function(){Bose.Popup.init()}),$jq(document).ready(function(){Bose.VariantChangeListener.init()}),$jq(document).ready(function(){Bose.Text.init()});var Bose=Bose||{};Bose.Panel=function(){function a(){var a=$jq(c.bosePanel);a.hasClass(d.overflowHidden)&&a.removeClass(d.overflowHidden)}function b(){if($jq(c.lazyLoadingTrigger).hasClass(d.lazyloaded)&&Bose.Utils.reMatchHeights(),window.MutationObserver){var b=new MutationObserver(function(){Bose.Utils.reMatchHeights()});$jq(c.panelAdaptiveImage).each(function(){b.observe(this,{attributes:!0})})}else $jq(c.panelAdaptiveImage).on("lazyloaded",function(){Bose.Utils.reMatchHeights()});$jq(document).on("heightsRematched",a)}var c={bosePanel:".bose-panel",panelAdaptiveImage:".bose-panel .js-adaptiveImage",lazyLoadingTrigger:".bose-panel img"},d={overflowHidden:"bose-panel--overflowHidden",lazyloaded:"lazyloaded"};return{init:b,_selectors:c}}(),$jq(document).ready(function(){Bose.Panel.init()});var Bose=Bose||{};Bose.SiteMap=function(){function a(){0!==$jq(g.siteMap).length&&b()}function b(){var a=Bose.Utils.isAuthorMode()?"en_us":Bose.DataLayer.Data.Page.formattedLocale,b=Bose.Utils.getWindowLocation().href,d=b.substring(0,b.indexOf(a));b.indexOf("index")>=0?(d=b.substring(0,b.indexOf("index")),e=d+"index.sitemap.json",f=d+"index.support-sitemap.json"):(e=d+"sitemap.json",f=d+"support-sitemap.json"),$jq.ajax({type:"GET",url:e,dataType:"json",success:function a(b){c(b)},complete:function a(){$jq.ajax({type:"GET",url:f,dataType:"json",success:function a(b){c(b)}})}})}function c(a){for(var b=0;b<a.length;b++){var c='<a href="'+a[b].loc+'">'+a[b].loc+"</a><br>";$jq(g.siteMap).append(c),d(a[b].languagePages,"LanguagePages"),d(a[b].categoryPages,"CategoryPages")}}function d(a,b){for(var c="",d=0;d<a.length;d++)if(c+='<a href="'+a[d].loc+'">'+a[d].loc+"</a><br>",void 0!==a[d].productPages&&"CategoryPages"===b)for(var e=0;e<a[d].productPages.length;e++)c+='<a href="'+a[d].productPages[e].loc+'">'+a[d].productPages[e].loc+"</a><br>";$jq(g.siteMap).append(c)}var e,f,g={siteMap:".js-siteMap-value"};return{init:a,_selectors:g}}(),$jq(document).ready(function(){Bose.SiteMap.init()});
var Bose=Bose||{};Bose.StoreHours=function(){function a(a){for(var b=[],c=0;c<7;c++){var h=g[c];b.push({day:h,hours:void 0===a[h][0].openingTime?[]:a[h].map(e).sort(d).map(f)})}return b}function b(a){return a.map(c).sort(d).map(function(a){var b=a.openingTime;return{day:g[b.getDay()],date:b.toLocaleDateString().substring(0,b.toLocaleDateString().length-5),hours:a.closed?void 0:f(a)}})}function c(a){var b=a.date.split("-"),c=[0,0,0],d=[0,0,0],e=!0;return a.openingTime&&(e=!1,c=a.openingTime.split(":"),d=a.closingTime.split(":")),{closed:e,openingTime:new Date(b[0],b[1]-1,b[2],c[0],c[1],c[2]),closingTime:new Date(b[0],b[1]-1,b[2],d[0],d[1],d[2])}}function d(a,b){return a.openingTime.getTime()-b.openingTime.getTime()}function e(a){var b=a.openingTime.split(":"),c=a.closingTime.split(":");return{openingTime:new Date(1970,0,1,b[0],b[1],b[2]),closingTime:new Date(1970,0,1,c[0],c[1],c[2])}}function f(a){var b={hour:"2-digit",minute:"2-digit"};return a.openingTime.toLocaleTimeString(Bose.DataLayer.Data.Page.locale,b)+" - "+a.closingTime.toLocaleTimeString(Bose.DataLayer.Data.Page.locale,b)}var g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return{getSortedStoreHours:a,getSortedSpecialStoreHours:b}}();var Bose=Bose||{};Bose.StoreSelector=function(){function a(){var a=$jq(N.storeSelector);0!==a.length&&(C=Bose.DataLayer.Data.Page.country,D=$jq(N.storeContainer),B=a.data("pyxisUrl"),z=a.data("googleMapsApiUrl"),A=a.data("googleMapsApiKey"),$jq(document).on("click",N.store.select,t),$jq(document).on("click",N.findStores,f),$jq(document).on("click",N.nextPage,c),$jq(document).on("click",N.geolocation,l),$jq(document).on("keypress",N.locationInput,e))}function b(){var a,b=$jq(this),c=b.closest(N.storeContainer).find(N.store.details);c.toggleClass(O.store.detailsHidden),a=b.data(c.hasClass(O.store.detailsHidden)?"details-more":"details-hide"),b.text(a),b.prop("title",a)}function c(){Bose.Popup.showLoadingIcon(y),m(E,F,++G,d)}function d(a){var c=$jq(N.popup).find(N.nextPageContainer);G=a.currentPage,H=a.totalPages,G===H?c.hide():c.show(),v();for(var d=0;d<a.stores.length;d++)o(a.stores[d]);n(),$jq(N.store.toggleDetails).on("click",b)}function e(a){a.which===R&&f(a)}function f(a){var b=$jq(N.popup).find(N.locationInput),c=b.val();if(b.trigger("doValidation"),Bose.TextField.isValid(b,Bose.TextField)){if(!T)return a&&a.stopImmediatePropagation(),void g();Bose.Popup.showLoadingIcon(y),M.geocode({address:c},i)}}function g(){$jq("head").append('<script src="'+z+"?key="+A+'&callback=Bose.StoreSelector.apiLoaded"><\/script>')}function h(){T=!0,M=new google.maps.Geocoder,f()}function i(a,b){var c=P.error;if("OK"!==b)return"ZERO_RESULTS"===b&&(c=P.badAddress),w(c),void n();var d=a[0].geometry.location.lat(),e=a[0].geometry.location.lng();E=d,F=e,G=Q,m(d,e,G,j)}function j(a){k(),0===a.stores.length?w(P.noStores):d(a),n()}function k(){$jq(N.popup).find(N.storeContainer).remove()}function l(){var a={enableHighAccuracy:!1,timeout:5e3,maximumAge:0},b=null,c=document.documentMode;void 0!==navigator.geolocation&&(Bose.Popup.showLoadingIcon(y),S&&c?b=navigator.geolocation.watchPosition(function(a){m(a.coords.latitude,a.coords.longitude,Q,j),navigator.geolocation.clearWatch(b),b=null},function(){Bose.Popup.hideLoadingIcon(y)},a):navigator.geolocation.getCurrentPosition(function(a){m(a.coords.latitude,a.coords.longitude,Q,j),S=!0},function(){x(),Bose.Popup.hideLoadingIcon(y)}))}function m(a,b,c,d){$jq.ajax({url:B+"/storelocator/bopis/stores",method:"GET",dataType:"json",data:{variantCode:I,quantity:J,country:C,facets:"location="+a+","+b,page:c,pageSize:5},success:d,complete:n})}function n(){Bose.Popup.hideLoadingIcon(y)}function o(a){var b=D.clone(),c="",d=b.find(N.store.stock);b.attr("data-id",a.id),b.find(N.store.name).text(a.name),b.find(N.store.street).text(a.address.streetNumber+" "+a.address.street),b.find(N.store.city).text(a.address.city+" "+a.address.region+" "+a.address.postalCode),a.bopisEnabled?a.inStock?(c=d.data("i18n-instock"),d.removeClass(O.store.outOfStock)):(c=d.data("i18n-outofstock"),b.find(N.store.select).remove(),d.addClass(O.store.outOfStock)):(c=d.data("i18n-nobopis"),b.find(N.store.select).remove(),d.addClass(O.store.outOfStock)),d.text(c),void 0!==a.openingHours&&p(b,a.openingHours),b.find(N.store.phoneNumber).text(a.address.phone),b.find(N.store.phoneNumber).attr("href","tel:"+a.address.phone),b.insertBefore($jq(N.popup).find(N.nextPageContainer))}function p(a,b){void 0!==b.weekdayOpeningResults&&(q(a,b.weekdayOpeningResults),r(a,b.specialOpeningDayResults))}function q(a,b){for(var c=Bose.StoreHours.getSortedStoreHours(b),d=a.find(N.store.details),e=a.find(N.store.openingHours),f="<tr><td>{day}</td><td>{hour}</td></tr>",g=0;g<c.length;g++){var h=c[g];0===h.hours.length?e.append(nano(f,{day:d.data("i18n-"+h.day),hour:d.data("i18n-closed")})):h.hours.forEach(function(a,b){e.append(nano(f,{day:0===b?d.data("i18n-"+h.day):"",hour:a}))})}}function r(a,b){var c=a.find(N.store.specialOpeningHoursTable),d=a.find(N.store.details);b&&(Bose.StoreHours.getSortedSpecialStoreHours(b).forEach(function(a){c.append(nano("<tr><td>{day}</td><td>{hour}</td></tr>",{day:d.data("i18n-"+a.day)+" "+a.date,hour:void 0===a.hours?d.data("i18n-closed"):a.hours}))}),a.find(N.store.specialOpeningHours).show())}function s(a,b,c,d,e){var f=$jq(N.storeSelector);I=$jq(N.selectedVariant).data("variantCode"),J=b,K=d,L=e,c&&f.addClass(O.storePopup),$jq(N.popup).length<1&&(y=Bose.Popup.display(f,{isStoreSelector:!0,wrapCss:"bose-popupInner--storeSelector "+O.popup,onClose:u})),$jq(document).on("shown.popup",function(){Bose.StoreSelector.init()})}function t(){var a=$jq(this),b=a.closest(N.storeContainer),c=a.closest(N.storeSelectedInfo),d=b.data("id"),e={storeName:c.find(N.storeSelectedInfoName).text(),storeStreet:c.find(N.storeSelectedInfoStreet).text(),storeCity:c.find(N.storeSelectedInfoCity).text()};L=void 0,Bose.Popup.close(y),a.parents(N.storeSelectedPopup).length?($jq(N.storeSelectedCheck).hide(),$jq(N.storeSelectedChange).show(),$jq(N.storeSelectedContainer).html("").attr("data-store-id",d).append("<p>"+e.storeName+"</p><p>"+e.storeStreet+"</p><p>"+e.storeCity+"</p>"),$jq("#storeId-hidden").val(d)):(K(b.attr("data-id")),K=void 0)}function u(){var a=$jq(".bose-buttonLink--inProgress"),b=$jq(".bose-popup"),c=$jq(".zoomContainer");"function"==typeof L&&L(),Bose.ButtonLink.removeProgressBar(a),b.removeClass("bose-popupInner--storeSelector js-storeSelector-popup"),c.remove()}function v(){$jq(N.popup).find(N.infoMessage).hide(),$jq(N.nextPage).show()}function w(a){var b=$jq(N.popup).find(N.infoMessage);b.text(b.data("i18n-"+a)),$jq(N.nextPage).hide(),k(),b.show()}function x(){w(P.error),n()}var y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N={storeSelector:".js-storeSelector",stores:".js-storeSelector-stores",findStores:".js-storeSelector-find",locationInput:".js-storeSelector-locationInput",geolocation:".js-storeSelector-geolocation",popup:".js-storeSelector-popup",nextPage:".js-storeSelector-nextPage",nextPageContainer:".js-storeSelector-nextPageContainer",storeContainer:".js-storeSelectorStore",infoMessage:".js-storeSelector-infoMessage",selectedVariant:".bose-colorItem--selected",store:{select:".js-storeSelectorStore-selectStore",name:".js-storeSelectorStore-name",street:".js-storeSelectorStore-street",city:".js-storeSelectorStore-city",stock:".js-storeSelectorStore-stock",openingHour:".js-storeSelectorStore-openingHour",openingHours:".js-storeSelectorStore-openingHours",specialOpeningHours:".js-storeSelectorStore-specialOpeningHours",specialOpeningHoursTable:".js-storeSelectorStore-specialOpeningHoursTable",phoneNumber:".js-storeSelectorStore-phoneNumber",details:".js-storeSelectorStore-details",toggleDetails:".js-storeSelectorStore-toggleDetails"},storeSelectedPopup:".bose-storeSelector-productPage",storeSelectedInfo:".bose-storeSelectorStore__info",storeSelectedInfoName:".js-storeSelectorStore-name",storeSelectedInfoStreet:".js-storeSelectorStore-street",storeSelectedInfoCity:".js-storeSelectorStore-city",storeSelectedContainer:".js-shippingMethod-selectedStore",storeSelectedCheck:".js-bose-link-check",storeSelectedChange:".js-bose-link-change"},O={popup:"js-storeSelector-popup",storePopup:"bose-storeSelector-productPage",store:{detailsHidden:"bose-storeSelectorStore__details--hidden",outOfStock:"bose-storeSelectorStore__stock--outOfStock",openingHour:"bose-storeSelectorStore__openingHour"}},P={badAddress:"badaddress",noStores:"nostores",error:"error"},Q=1,R=13,S=!1,T=!1;return{init:a,apiLoaded:h,displayPopup:s,_selectors:N,_classes:O}}(),$jq(document).ready(function(){Bose.StoreSelector.init()});
function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function a(b){return typeof b}:function a(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}function checkSymbol(a,b,c,d){var e=a;return c&&d.indexOf(c)>-1&&-1===a.indexOf(c)&&(e=b?e+c:c+e),checkRegexValidation(e)}function checkRegexValidation(a){var b=a.match(/\D+0([-.]?0+)*/),c=a.match(/0([-.]?0+)*\D+/),d=a;return-1===a.indexOf(".")&&-1===a.indexOf(",")&&(b?d=b[0]?b[0]:b:c&&c[0]===a&&(d=c)),d}var Bose=Bose||{};Bose.Search=Bose.Search||{},Bose.Search.selectors={searchFiltersMobCollapse:".bose-searchFilters__mobCollapse",searchResultSetSwitcher:".bose-search__resultSetSwitcher.bose-searchResultSetSwitcher",searchResultSetSwitcherItem:".bose-searchResultSetSwitcher__item",searchResultPanel:".bose-search__results",searchResultFilters:".bose-search__filters",searchResultFilterBoxes:".bose-searchFilters__mobCollapse .bose-searchFilters__mobCollapsePart .bose-searchFilters__filterColumn .bose-searchFilters__filterItem",searchResultFilterItem:".bose-searchFilters__filterItem",infiniteSearchResultBox:".bose-search__results",clearButton:".bose-searchFilters__clearButton",showMoreButton:".bose-search__showMoreButton",activeTabCount:".bose-searchResultSetSwitcher__item.-active .bose-searchResultSetSwitcher__total"},Bose.Search.inifiteObj=null,Bose.Search.maxInfinitScrollScrolls=3,Bose.Search.currentFilterCat="",Bose.Search.$currentResultsPannel="",Bose.Search.defaultFilterCat="",Bose.Search.initResults=function(a){var b=!1,c=$jq(".searchResult").prev(".search").find(".bose-singleInputForm__input").val(),d=$jq(Bose.Search.selectors.searchResultSetSwitcherItem+'[data-resultset = "accessory"]').data("accessories-search");Bose.Search.initialized=!1,Bose.Search.isLoading=!1,Bose.Search.$searchBlock=a,Bose.Search.$searchFiltersMobCollapse=a.find(Bose.Search.selectors.searchFiltersMobCollapse),Bose.Search.$searchResultSetSwitcher=a.find(Bose.Search.selectors.searchResultSetSwitcher),Bose.Search.$searchResultSetSwitcherItem=Bose.Search.$searchResultSetSwitcher.find(Bose.Search.selectors.searchResultSetSwitcherItem),Bose.Search.$searchResultPanels=a.find(Bose.Search.selectors.searchResultPanel),Bose.Search.$searchResultFilters=a.find(Bose.Search.selectors.searchResultFilters),Bose.Search.$searchResultBoxes=a.find(Bose.Search.selectors.infiniteSearchResultBox),Bose.Search.initFiltersPanel(),Bose.Search.initInfiniteScroll(),Bose.Search.$searchResultBoxes.each(function(){var a=$jq(this),b=a.find('input[type="hidden"].searchPromoteUrl');a.data("searchPromoteUrl",b.val()),a.data("currentSearchPromoteUrl",a.data("initial-url"))}),Bose.Search.showHideFilterDiv(),Bose.Search.initSearchForms();var e=Bose.Utils.getURLHashParam("tabname");e&&Bose.Search.selectTab(e),void 0!==d&&($jq.each(d,function(a,d){var e=d.toLowerCase();if(e.match(new RegExp(c,"gi"))||-1!==c.search(e))return b=!0,!1}),b&&Bose.Search.selectTab("accessory")),Bose.Search.initialized=!0},Bose.Search.isInitialized=function(){return Bose.Search.initialized},Bose.Search.selectTab=function(a){var b=$jq(Bose.Search.selectors.searchResultSetSwitcherItem+"[data-resultset="+a+"]");b.data("popState","true"),b.click()},Bose.Search.showHideFilterDiv=function(){var a=Bose.Search.$searchBlock.find(".bose-search__resultSetSwitcher .bose-searchResultSetSwitcher__item.-active"),b=a.data("resultset"),c=Bose.Search.$searchBlock.find(Bose.Search.selectors.searchResultFilters+"#searchFilters_"+b+" "+Bose.Search.selectors.searchResultFilterBoxes);Bose.Search.currentFilterCat=b,Bose.Search.$searchResultFilters.removeClass("-active"),c.length&&Bose.Search.$searchBlock.find(Bose.Search.selectors.searchResultFilters+"#searchFilters_"+b).addClass("-active")},Bose.Search.initDestroyCollapsibleFiltersPanel=function(){Gridle.isActive("small")||Gridle.isActive("medium")?Bose.Search.$searchFiltersMobCollapse.hasClass("ui-accordion")||Bose.Search.$searchFiltersMobCollapse.accordion({collapsible:!0,active:!0,animate:200,heightStyle:"content",icons:{header:"bose-icon bose-icon--plus -withBg",activeHeader:"bose-icon bose-icon--minus -withBg"}}):Bose.Search.$searchFiltersMobCollapse.hasClass("ui-accordion")&&Bose.Search.$searchFiltersMobCollapse.accordion("destroy")},Bose.Search.initSearchForms=function(){$jq("form.bose-singleInputForm").submit(function(){var a,b=$jq(this).find("input[name=queryForDisplay]");a=$jq(this).hasClass("product-catalog-search")?$jq(this).find("input[name=term]"):$jq(this).find("input[name=query]"),a.val(b.val().toLowerCase())})},Bose.Search.initFiltersPanel=function(){var a=$jq(".bose-searchFilters__filterColumn"),b=a.find(Bose.Checkbox.selectors.field),c=a.find(".bose-select--sort "+Bose.Select.selectors.field),d=$jq(Bose.Search.selectors.clearButton);Bose.Search.initDestroyCollapsibleFiltersPanel(),Gridle.on("update",Bose.Search.initDestroyCollapsibleFiltersPanel),Bose.Search.$searchResultSetSwitcherItem.on("click",Bose.Search.showHideFiltersPanel),Bose.Search.$searchResultSetSwitcherItem.on("keydown",Bose.Search.captureKeys),Bose.Search.defaultFilterCat=Bose.Search.$searchResultSetSwitcherItem.filter(".-active").data("resultset"),Bose.Search.$currentResultsPannel=Bose.Search.$searchBlock.find(Bose.Search.selectors.infiniteSearchResultBox+":visible"),d.on("click",Bose.Search.clearFilters),c.on("selectmenuchange",Bose.Search.sortResults),b.each(function(){var a=$jq(this);a.data("initial-url",a.val())}),b.on("click",Bose.Search.clickFilter)},Bose.Search.sortResults=function(a,b){Bose.Search.doSearchWithUrl(b.item.value)},Bose.Search.clearFilters=function(){var a=$jq(this),b=a.data("initial-url"),c=$jq("#searchFilters_"+Bose.Search.currentFilterCat+" .bose-searchFilters__filterColumn"),d=c.find(Bose.Checkbox.selectors.field);a.hasClass("-disabled")||(d.each(function(){$jq(this).prop("checked",!1)}),history.replaceState({"Bose.Search.restoreTabState":Bose.Search.currentFilterCat,"Bose.Search.doSearchWithUrl":b},document.title,document.location.href),Bose.Search.$currentResultsPannel.data("currentSearchPromoteUrl",b),Bose.Search.doSearchWithUrl(b))},Bose.Search.clickFilter=function(){var a=$jq(this);a.is(":disabled")||(history.replaceState({"Bose.Search.restoreTabState":Bose.Search.currentFilterCat,"Bose.Search.doSearchWithUrl":a.val()},document.title,document.location.href),Bose.Search.$currentResultsPannel.data("currentSearchPromoteUrl",a.val()),Bose.Search.doSearchWithUrl(a.val()))},Bose.Search.doSearchWithUrl=function(a,b){Bose.Search.$searchBlock.find(Bose.Search.selectors.infiniteSearchResultBox+":visible").data("searchPromoteUrl",a),Bose.Search.doSearch(!0),b&&Bose.Search.saveSearchToHistory(a,Bose.Search.currentFilterCat)},Bose.Search.saveSearchToHistory=function(a,b){if(history&&(!history.state||!history.state["Bose.Search.doSearchWithUrl"])){var c=Bose.Search.defaultFilterCat,d=Bose.Search.$searchBlock.find(Bose.Search.selectors.infiniteSearchResultBox+":visible").data("initial-url");history.replaceState({"Bose.Search.restoreTabState":c,"Bose.Search.doSearchWithUrl":d},document.title,document.location.href)}history.pushState({"Bose.Search.restoreTabState":b,"Bose.Search.doSearchWithUrl":a},document.title,document.location.href)},Bose.Search.showHideFiltersPanel=function(){if(!Bose.Search.isLoading){var a=$jq(this),b=a.data("resultset");Bose.Search.currentFilterCat=b,Bose.Search.$currentResultsPannel=Bose.Search.$searchBlock.find(Bose.Search.selectors.searchResultPanel+"#searchResults_"+Bose.Search.currentFilterCat),Bose.Search.$searchResultPanels.removeClass("-active").css("display",""),Bose.Search.$currentResultsPannel.addClass("-active"),Bose.Search.$searchResultSetSwitcherItem.removeClass("-active"),Bose.Search.$searchResultSetSwitcherItem.attr("aria-selected","false"),a.addClass("-active"),a.attr("aria-selected","true"),Bose.Search.showHideFilterDiv(),$jq.waypoints("refresh");var c=Bose.Search.$currentResultsPannel.data("currentSearchPromoteUrl");history.replaceState({"Bose.Search.restoreTabState":b,"Bose.Search.doSearchWithUrl":c},document.title,document.location.href)}},Bose.Search.restoreTabState=function(a){var b=$jq(Bose.Search.selectors.searchResultSetSwitcherItem+"[data-resultset="+a+"]");Bose.Search.$searchBlock.find(Bose.Search.selectors.searchResultPanel+"#searchResults_"+a).data("currentSearchPromoteUrl",history.state["Bose.Search.doSearchWithUrl"]),b.click()},Bose.Search.setLoadingState=function(){Bose.IconLoader.show(".bose-search__loadingIcon"),Bose.Search.isLoading=!0},Bose.Search.endLoadingState=function(){Bose.IconLoader.hide(".bose-search__loadingIcon"),Bose.Search.isLoading=!1,$jq.waypoints("refresh")},Bose.Search.doSearch=function(a){var b=Bose.Search.$searchBlock.find(Bose.Search.selectors.infiniteSearchResultBox+":visible"),c=b.data("searchPromoteUrl"),d=b.data("pagesAutoLoaded"),e=$jq(".bose-searchResultSetSwitcher").data("results-template"),f=$jq("#searchFilters_"+Bose.Search.currentFilterCat+" .bose-searchFilters__filterColumn"),g={$facetCheckboxes:f.find(Bose.Checkbox.selectors.field),$facetSortDropdowns:f.find(".bose-select--sort "+Bose.Select.selectors.field),$clearFilterButtons:$jq(Bose.Search.selectors.clearButton)},h="/"+Bose.Utils.getCurrentPath()+".search.html",i=0;c&&e&&(g.$facetCheckboxes.trigger("setDisabled"),g.$facetSortDropdowns.trigger("setDisabled"),g.$clearFilterButtons.addClass("-disabled"),a&&(b.empty(),b.data("pagesAutoLoaded",0)),Bose.Search.setLoadingState(),$jq(Bose.Search.selectors.showMoreButton).removeClass("bose-search__showMoreButton--show"),$jq.ajax({url:h,method:"GET",data:{spUrl:c,path:e,tab:Bose.Search.currentFilterCat},dataType:"json",success:function c(e){i=$jq(document).scrollTop(),Bose.Search.onAjaxDone(e,b,g,d,a,i),Bose.BackToTopButton.reCalculate()}}))},Bose.Search.onAjaxDone=function(a,b,c,d,e,f){Bose.Search.populateFacets(a,c.$facetCheckboxes),Bose.Search.populateSortDropdown(a,c.$facetSortDropdowns);var g=a.total,h=void 0===a.nextPageUrl?null:a.nextPageUrl;b.data("searchPromoteUrl",h),e?b.html(a.htmlResult):b.append(a.htmlResult);var i=$jq(Bose.Search.selectors.activeTabCount);null!==g&&i.length>0&&i.html(g),Bose.Search.hideResult(b),c.$clearFilterButtons.removeClass("-disabled"),Bose.Utils.initElements(b),Bose.Search.showResult(b),Bose.Search.endLoadingState(),e||$jq("html,body").scrollTop(f),d===Bose.Search.maxInfinitScrollScrolls&&b.data("searchPromoteUrl")&&$jq(".bose-searchResultSetSwitcher").data("results-template")?$jq(Bose.Search.selectors.showMoreButton).addClass("bose-search__showMoreButton--show"):$jq(Bose.Search.selectors.showMoreButton).removeClass("bose-search__showMoreButton--show")},Bose.Search.toggleTileHeight=function(a,b){a?b.find(".bose-productReference").css("height","auto"):b.find(".bose-productReference").css("height","700px")},Bose.Search.hideResult=function(a){a.hide(),Bose.Search.toggleTileHeight(!1,a)},Bose.Search.showResult=function(a){Bose.Search.toggleTileHeight(!0,a),a.show()},Bose.Search.populateSortDropdown=function(a,b){a.sortOptions&&(b.each(function(b,c){var d=$jq(c);d.find("option").remove(),$jq.each(a.sortOptions,function(a,b){var c=$jq("<option>",{value:b.value,text:b.label,selected:b.selected});d.append(c)}),d.selectmenu("refresh")}),b.trigger("setEnabled"))},Bose.Search.populateFacets=function(a,b){a.facets&&b.each(function(b,c){for(var d=$jq(c),e=0;e<a.facets.length;e++){var f=a.facets[e];d.prop("name")===f.value+"chk"&&(d.trigger("setEnabled"),f.undolink?d.val(f.undolink):d.val(f.link),d.prop("checked",f.selected))}})},Bose.Search.initInfiniteScroll=function(){Bose.Search.$searchResultBoxes.data("pagesAutoLoaded",0),Bose.Search.$searchResultBoxes.waypoint({handler:function a(b){var c,d;"down"===b&&(c=Bose.Search.$searchBlock.find(Bose.Search.selectors.infiniteSearchResultBox+":visible"),d=c.data("pagesAutoLoaded"),!Bose.Search.isLoading&&d<Bose.Search.maxInfinitScrollScrolls&&Bose.Search.isInitialized()&&(d++,c.data("pagesAutoLoaded",d),Bose.Search.doSearch()))},offset:"bottom-in-view"})},Bose.Search.captureKeys=function(a){var b=a.which;13!==b&&32!==b||$jq(a.target).click()};var Bose=Bose||{};Bose.Search=Bose.Search||{},Bose.Search.AutoComplete=function(){function a(){var a;$jq(o.globalSearchInput).on("focus",g),$jq(o.body).on("mouseup",h),$jq(document).on("keydown",o.globalSearchInput,e).on("keydown",o.quickLinkMenuItems,e).on("keydown",o.jqUIItem,e).on("blur",".bose-singleInputForm__submit--2016",h).on("focus",o.quickLinkMenuItems,d),$jq('input[type="search"]').addClass("bose-singleInputForm__autoComplete"),$jq(document).on("click",o.showMore,k),$jq('input[type="search"].bose-singleInputForm__autoComplete').each(function(d){var e=$jq(this);void 0!==($jq(this).closest("form.bose-singleInputForm").hasClass("product-catalog-search")?$jq(this).closest("form.bose-singleInputForm").find("input[name=term]"):$jq(this).closest("form.bose-singleInputForm").find("input[name=query]")).data("autocompletesearchurl")&&(0===d?(a={select:i,source:l,minLength:3,appendTo:$jq(".js-bose-suggestionContainer"),open:c,close:f,position:{offset:"0 20"}},b(e,a)):(a="serial"===$jq('input[type="search"].bose-singleInputForm__autoComplete')[d].name?{select:i,source:l,minLength:4,position:{offset:"0 20"}}:{select:i,source:l,open:j,minLength:3,position:{offset:"0 20"}},b(e,a)))})}function b(a,b){a.autocomplete(b).data("ui-autocomplete")._renderItem=m}function c(a){var b,c=$jq(o.visibleAutoCompleteList),d=$jq('<div class="bose-quickLinks__autoSuggestions"></div>'),e=$jq(a.target).parent().find(o.quickLinks);c.addClass(p.autoCompleteMbl),$jq(o.searchInput).parent().find(o.quickLinks).removeClass(p.show),Gridle.isActive("large")?(c.css("width",$jq(a.target).parent().width),e.find(".-animateNav").removeClass(p.animateNav),d.appendTo(c),b=e.html(),d.html(""),d.html(b)):c.addClass(p.fullScreen)}function d(){$jq(this).addClass("js-bose-state-focus")}function e(a){var b=$jq(this),c=$jq(o.quickLinkMenuItems).first().get(0),d=$jq(o.quickLinkMenuItems).last().get(0);if(["ArrowUp","ArrowDown","Spacebar"," ","Down","Up"].indexOf(a.key)>-1&&!$jq(document.activeElement).hasClass(p.searchInput)&&a.preventDefault(),["Enter","Escape","Spacebar"," "].indexOf(a.key)>-1&&("Enter"===a.key||"Spacebar"===a.key||" "===a.key?b.click():document.activeElement!==$jq(o.topSearchForm).find(o.globalSearchInput)[0]&&(h(a),a.stopPropagation())),("ArrowDown"===a.key||"Down"===a.key)&&document.activeElement===$jq(o.topSearchForm).find(o.globalSearchInput)[0])return void c.focus();"ArrowDown"!==a.key&&"Down"!==a.key||document.activeElement===d||document.activeElement===$jq(o.topSearchForm).find(o.globalSearchInput)[0]||$jq(document.activeElement).next().focus(),"ArrowUp"!==a.key&&"Up"!==a.key||document.activeElement===c?"ArrowUp"!==a.key&&"Up"!==a.key||document.activeElement!==c||$jq(o.topSearchForm).find(o.globalSearchInput).focus():$jq(document.activeElement).prev().focus()}function f(){$jq(o.autoCompleteList).removeClass(p.autoCompleteMbl),$jq(o.searchInput).parent().find(o.quickLinks).addClass(p.show)}function g(){var a=$jq(this),b=a.closest(o.headerSearchContainer),c=b.find(o.quickLinks);c.find(o.quickLinkMenuItems).each(function(a){$jq(this).attr("id","link-"+a)}),a.attr("aria-expanded",!0),b.addClass(p.extendWidth),c.addClass(p.show),c.find(".bose-quickLinks__navItems, .bose-quickLinks__title").addClass(p.animateNav),Gridle.isActive("large")||($jq(o.serviceBar).addClass(p.newMobileMenu),$jq(o.headerBar).addClass(p.newMobileMenu),c.addClass(p.quickLinksMbl),$jq(o.signInRegister).hide())}function h(a){var b=$jq(o.topSearchForm).find(o.globalSearchInput),c=b.closest(o.headerSearchContainer),d=c.find(o.quickLinks),e=$jq(".ui-autocomplete"),f=d.add(b).add(e);b.attr("aria-expanded",!1),(!f.is(a.target)&&0===f.has(a.target).length||"Escape"===a.key)&&(c.removeClass("-extendedWidth"),d.removeClass("-show"),d.find(".bose-quickLinks__navItems, .bose-quickLinks__title").removeClass("-animateNav"),Gridle.isActive("large")||($jq(o.serviceBar).removeClass("-openMobileMenu2018"),$jq(o.headerBar).removeClass("-openMobileMenu2018"),d.removeClass("-quickLinksMobile"),$jq(o.signInRegister).show()))}function i(a,b){var c=$jq(a.target);c.val(b.item.value),Bose.Search.initSearchForms(),Bose.Search.setLoadingState(),"serial4digittextSearch"===$jq(o.searchType).html()&&"serial"===a.target.name?Bose.SerialNumberLookup.handleSerialNumberLookupInfo():"searchArticle"===$jq(o.searchType).html()&&"searchText"===a.target.name?Bose.SearchArticle.handleSearchArticleInfo():"searchArticle"===a.target.name?Bose.SearchArticleV1.searchArticleInfo():c.closest("form").submit()}function j(){var a="",b=$jq(this.element).attr("name")||$jq(this).attr("name"),c=$jq(".js-textSearchShowAllResults"),d=c.length?c.val():"Show all results for";"searchArticle"===b&&(a='<div class="bose-search__showMore">'+d+' "'+$jq(o.searchArticleInput).val()+'"</div>',$jq(o.visibleAutoCompleteList).append(a))}function k(){var a=window.location.origin,b=$jq(o.redirectBose).attr("href");n=$jq(o.searchArticle).val()?$jq(o.searchArticle).val():Bose.DataLayer.Data.Product.productCode||Bose.DataLayer.Data.Page.subCategory4||Bose.Utils.getParameterByName("productCode"),window.location.href=a+b+"?productCode="+n+"&searchTerm="+encodeURIComponent($jq(o.searchArticleInput).val())}function l(a,b){var c,d=encodeURIComponent(a.term.trim()),e=$jq(this.element).closest("form.bose-singleInputForm").hasClass("product-catalog-search")?$jq(this.element).closest("form.bose-singleInputForm").find("input[name=term]"):$jq(this.element).closest("form.bose-singleInputForm").find("input[name=query]"),f=e.data("autocompletesearchurl")+d,g=Bose.DataLayer.Data.Page.formattedLocale;n=$jq(o.searchArticle).val()?$jq(o.searchArticle).val():Bose.DataLayer.Data.Product.productCode||Bose.DataLayer.Data.Page.subCategory4||Bose.Utils.getParameterByName("productCode"),"searchArticle"===$jq(this.element).attr("name")?(c="json",f=f+q.productCodeURLPath+n+q.localeURLPath+g):c=$jq(this.element).closest("form.bose-singleInputForm").hasClass("product-catalog-search")?"json":"jsonp",$jq.ajax({url:f,type:"GET",dataType:c,success:function a(c){var d,e=[];if(c.helpContents){var f=[];c.helpContents.articles.forEach(function(a,b){b<11&&f.push(a.title)}),d=f}else d=c;$jq.each(d,function(a,b){var c={};if(b.substr(0,3).indexOf("_")>-1){var d;d=b.split("_").map(function(a){return a.trim()}),c.id=d[1],c.value=decodeURIComponent(d[1])}else c.id=b,c.value=decodeURIComponent(b);e.push(c)}),b(e)}})}function m(a,b){var c=new RegExp("("+this.term+")","gi"),d=b.label.replace(c,"<strong>$1</strong>");return $jq("<li/>").html(d).appendTo(a)}var n,o={headerSearchContainer:".bose-header2016__search",topSearchForm:".bose-singleInputForm--searchTop",body:"body",searchInput:'input[type="search"].bose-singleInputForm__autoComplete',globalSearchInput:'input[type="search"].bose-singleInputForm__globalSearch.bose-singleInputForm__autoComplete',quickLinks:".bose-quickLinks",serviceBar:".bose-serviceBar2016",headerBar:".bose-header2016",autoCompleteList:".ui-autocomplete",visibleAutoCompleteList:".ui-autocomplete:visible",quickLinkMenuItems:".bose-quickLinks__navItems",jqUIItem:".ui-menu-item",searchType:".js-searchType",signInRegister:".js-accountWidget-hamburger",productCode:".js-productCodeHiddenSearchField",searchArticleInput:".bose-singleInputForm__input[name=searchArticle]",redirectBose:".js-redirectBose",showMore:".bose-search__showMore",searchArticle:".js-productCode"},p={extendWidth:"-extendedWidth",show:"-show",animateNav:"-animateNav",newMobileMenu:"-openMobileMenu2018",quickLinksMbl:"-quickLinksMobile",autoCompleteMbl:"-openAutoCompleteMobile",fullScreen:"-fullScreen",searchInput:"bose-singleInputForm__globalSearch"},q={productCodeURLPath:"&productCode=",localeURLPath:"&locale="};return{selectCallback:i,getSource:l,renderItem:m,_selectors:o,_classes:p,init:a}}();var Bose=Bose||{},ProductCatalogSearchBar=function(){function a(){var a=this;if(this.headerContainer=document.querySelector(".header-container"),this.STORAGE_KEY="productCatalogStorageKey",this.selector={body:document.querySelector("body"),html:document.querySelector("html"),modal:document.querySelector(".header-search-modal"),modalSearchHeader:document.querySelector(".header-search-modal-header"),initialSearchInput:document.querySelector(".header-search-modal-header-searchbar"),searchInput:document.querySelector(".header-search-modal-header-searchbar-input"),flexWrapperTop:document.querySelector(".flex-wrapper--top"),headerSearchBody:document.querySelector(".header-search-body"),suggestions:document.querySelector(".header-search-suggestions"),quickLinks:document.querySelector(".header-search-quicklinks"),topResults:document.querySelector(".header-search-topresults"),loading:document.querySelector(".header-search-loading"),relatedContent:document.querySelector(".header-search-relatedcontent"),searchButton:document.querySelector(".header-search-modal-header-searchbutton"),closeButton:document.querySelector(".header-search-modal-header-closebutton"),clearButton:document.querySelector(".header-search-modal-header-searchbar-clearbutton"),suggestionsItems:document.querySelector(".header-search-suggestions-body"),iconWrapper:document.querySelector(".hamburger-wrapper"),topResultsItems:document.querySelector(".header-search-topresults-body"),arrowButton:document.querySelector(".header-search-modal-header-arrow"),relatedContentItems:document.querySelector(".header-search-relatedcontent-body"),categoryPills:document.querySelectorAll(".header-search-footer-categorypill"),productPill:document.querySelector(".header-search-footer-categorypill[data-category=products]"),accessoriesPill:document.querySelector(".header-search-footer-categorypill[data-category=accessories]"),supportPill:document.querySelector(".header-search-footer-categorypill[data-category=helpContents]"),generalPill:document.querySelector(".header-search-footer-categorypill[data-category=general]"),allResults:document.querySelector(".all-results-container"),boseHeader2016:document.querySelector(".bose-header2016"),boseHeaderServiceBar:document.querySelector(".bose-header2016__servicebar"),boseHeader2016Search:document.querySelector(".bose-header2016__search"),boseHeaderSidebar:document.querySelector(".bose-serviceBar2016"),boseHeaderContainer:document.querySelector(".bose-headercontainer"),form:document.querySelector(".header-search-modal-header-searchbar-form"),addTransitionElementsList:document.querySelectorAll(".add-transition"),footer:document.querySelector(".header-search-footer"),headerSearchBodyMain:document.querySelector(".header-search-body-main")},this.headerContainer){var b=function a(b){var c=document.createElement("div"),d=document.createTextNode(b);return c.appendChild(d),c.innerHTML};this.OPEN_CLASS="open",this.ONLY_FIXED_CLASS="only-fixed",this.SHOW_SEARCH="show-product-catalog-search",this.POSITION_ABOVE_ALL="position-above-all",this.POSITION_FIXED_ELEMENT_CLASS="position-fixed",this.ELEMENT_ON_TOP_OFF_SIDEBAR_CLASS="-elementOnTopOffSidebar",this.EXTERNALLY_OPENED_CLASS="externally-opened",this.NEW_HEADER_SEARCH="-new-header-search",this.FIXED_ELEMENT_CLASS="fixed",this.NOT_FOCUSED_ELEMENT_CLASS="not-focused",this.FOCUSED_ELEMENT_CLASS="focused",this.HIDE_ELEMENT_CLASS="d-none",this.NOT_ALL_CATEGORIES_ITEMS_1="not-all-categories-1",this.NOT_ALL_CATEGORIES_ITEMS_2="not-all-categories-2",this.FOOTER_CLASS_2_ITEMS="footer-2-items",this.FOOTER_CLASS_1_ITEM="footer-1-item",this.DISABLE_SCROLL="-disableScroll",this.ON_TOP_CLASS="on-top",this.TRANSITION_CLASS="transition",this.TYPING_DELAY_MILISECONDS=500,this.LIMIT_OF_FETCH_MILISECONDS=1e3,this.DEFAULT_TOP_EXTRA_VALUE=13,this.DESKTOP_DEFAULT_WIDTH=300,this.DEFAULT_MARGIN_LEFT=20,this.DEFAULT_MARGIN_RIGHT=20,this.LAST_PROPERTY_TRIGGERED="height",this.headerContainerData=this.headerContainer instanceof HTMLElement?this.headerContainer.dataset:{},this.SEARCH_URL=this.headerContainerData.searchUrl,this.directHits=this.headerContainerData&&this.headerContainerData.directHitsResponse?new Map(Object.entries(JSON.parse(this.headerContainerData.directHitsResponse).directHits)):new Map,this.channel=this.headerContainerData.channel,this.language=this.headerContainerData.language,this.catalog=this.headerContainerData.catalog,this.SEARCH_RESULTS_PATH=this.headerContainerData.searchResultsPath,this.inputText="",this.rotated=!1,this.initialInput={width:0,top:0,left:0},this.wasExternallyOpened=function(){return a.selector.initialSearchInput.classList.contains(a.EXTERNALLY_OPENED_CLASS)},this.handleSearch=function(){if(a.selector.searchInput.value){var c=a.selector.searchInput.value.toLowerCase();if(a.directHits.has(c))return void window.open(a.directHits.get(b(c)),"_self")}window.open("".concat(a.SEARCH_RESULTS_PATH,"?term=").concat(b(a.selector.searchInput.value)),"_self")},this.handleKeyUp=function(b){if("Escape"===b.key&&a.closeSearch(),a.selector.clearButton.style.visibility=a.selector.searchInput.value.length>0?"visible":"hidden","Enter"===b.key)return a.handleSearch(),b.preventDefault(),!1;clearTimeout(a.delayTimer),a.delayTimer=setTimeout(function(){a.handleSearchInputText()},a.TYPING_DELAY_MILISECONDS)},this.closeSearch=function(){if(a.selector.clearButton.style.visibility="hidden",a.isMobile())a.wasExternallyOpened()||a.rotated&&!a.isExpanded()?a.selector.initialSearchInput.style.left="-800px":(a.rotated&&a.isExpanded()&&(a.selector.initialSearchInput.style.width=a.getDefaultWidthForMobile(),a.selector.initialSearchInput.style.left=null),a.rotated||(a.updateClassList(a.ONLY_FIXED_CLASS,a.selector.initialSearchInput,!0),a.selector.initialSearchInput.style.width="".concat(a.initialInput.width,"px"),a.selector.initialSearchInput.style.left="".concat(a.initialInput.left,"px"),a.selector.initialSearchInput.style.right="".concat(a.initialInput.right,"px"),a.selector.initialSearchInput.style.top="".concat(a.initialInput.top,"px")),a.selector.initialSearchInput.style.marginLeft=null,a.selector.initialSearchInput.style.marginRight=null),a.showOrHideModal(!1);else{a.headerContainer.getBoundingClientRect();a.selector.initialSearchInput.style.left=null,a.selector.initialSearchInput.style.top=null,a.selector.initialSearchInput.style.right=null,a.selector.initialSearchInput.style.marginLeft=null,a.selector.initialSearchInput.style.marginRight=null,a.showOrHideModal(!1)}},this.orientationChanged=function(){a.updateClassList(a.EXTERNALLY_OPENED_CLASS,a.selector.initialSearchInput,!1),a.isOpen()&&(a.rotated=!0,a.handleInput(!1),a.updateClassList(a.ON_TOP_CLASS,a.selector.flexWrapperTop,!0),a.selector.initialSearchInput.style.width=null)},this.handleAnalytics=function(){Bose&&Bose.WebStorage&&Bose.WebStorage.getData(a.STORAGE_KEY,"localStorage")&&fetch("/bose/api/search/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:Bose.WebStorage.getData(a.STORAGE_KEY,"localStorage")}).then(function(){Bose.WebStorage.storeData(a.STORAGE_KEY,"","localStorage")})},this.removeFixedOnheader=function(b){var c,d;!a.isOpen()&&b.propertyName===a.LAST_PROPERTY_TRIGGERED&&(null===(c=a.selector.modal)||void 0===c?void 0:c.classList.contains(a.FIXED_ELEMENT_CLASS))&&(null===(d=a.selector.modal)||void 0===d||d.classList.remove(a.FIXED_ELEMENT_CLASS))},this.cleanAfterClose=function(b){!a.isOpen()&&b.propertyName===a.LAST_PROPERTY_TRIGGERED&&(a.wasExternallyOpened||a.isMobile()&&a.rotated)?a.resetPosition():a.isOpen()||"top"!==b.propertyName||a.resetPosition()},this.openSearch=function(){var b;a.isOpen()||(null===(b=a.selector.addTransitionElementsList)||void 0===b||b.forEach(function(b){return b.classList.contains("transition")?null:b.classList.add(a.TRANSITION_CLASS)}),a.handleInput(!0),a.updateClassList(a.FIXED_ELEMENT_CLASS,a.selector.modal,!0),a.showOrHideModal(!0),a.handleInput(!1),a.handleSearchInputText(),a.isMobile()&&a.updateClassList(a.ON_TOP_CLASS,a.selector.flexWrapperTop,!0))},this.show=function(){a.updateClassList(a.EXTERNALLY_OPENED_CLASS,a.selector.initialSearchInput,!0);var b;null===(b=a.selector.addTransitionElementsList)||void 0===b||b.forEach(function(b){return b.classList.contains(a.TRANSITION_CLASS)?null:b.classList.add(a.TRANSITION_CLASS)}),a.handleInput(!0),a.updateClassList(a.FIXED_ELEMENT_CLASS,a.selector.modal,!0),a.showOrHideModal(!0),a.handleInput(!1),a.handleSearchInputText()}}}return a.prototype.handleInput=function(a){if(a){this.initialInput=this.selector.initialSearchInput.getBoundingClientRect();var b=this.selector.modal.getBoundingClientRect(),c=(this.isMobile(),this.isMobile()?"".concat(this.DEFAULT_TOP_EXTRA_VALUE,"px"):"".concat(b.top+this.DEFAULT_TOP_EXTRA_VALUE,"px"));this.changeInputPosition({top:c,left:null,marginLeft:"".concat(this.DEFAULT_MARGIN_LEFT,"px"),marginRight:"".concat(this.DEFAULT_MARGIN_RIGHT,"px")}),this.updateClassList(this.POSITION_FIXED_ELEMENT_CLASS,this.selector.initialSearchInput,!0)}else this.isMobile()?this.changeInputPosition({top:null,left:null,marginLeft:"".concat(this.DEFAULT_MARGIN_LEFT,"px"),marginRight:"".concat(this.DEFAULT_MARGIN_RIGHT,"px")}):this.changeInputPosition({top:"20px",left:null,marginLeft:"".concat(this.DEFAULT_MARGIN_LEFT,"px"),marginRight:"".concat(this.DEFAULT_MARGIN_RIGHT,"px")})},a.prototype.changeInputPosition=function(a){this.selector.initialSearchInput.style.top=a.top?a.top:null,this.selector.initialSearchInput.style.left=a.left?a.left:this.selector.initialSearchInput.style.left,this.selector.initialSearchInput.style.marginLeft=a.marginLeft?a.marginLeft:this.selector.initialSearchInput.style.marginLeft,this.selector.initialSearchInput.style.marginRight=a.marginRight?a.marginRight:this.selector.initialSearchInput.style.marginRight},a.prototype.getDefaultTopForMobile=function(){return"".concat(this.isTablet()?34:20,"px")},a.prototype.getDefaultWidthForMobile=function(){var a=this.isTablet()?300:140;return"".concat(.7*(window.innerWidth-a),"px")},a.prototype.resetPosition=function(){this.rotated=!1,this.updateClassList(this.POSITION_FIXED_ELEMENT_CLASS,this.selector.initialSearchInput,!1),this.updateClassList(this.ON_TOP_CLASS,this.selector.flexWrapperTop,!1),this.updateClassList(this.TRANSITION_CLASS,this.selector.initialSearchInput,!1),this.selector.modal.style.width=null,this.updateClassList(this.ONLY_FIXED_CLASS,this.selector.initialSearchInput,!1),this.selector.initialSearchInput.style.top=null,this.selector.initialSearchInput.style.left=null,this.selector.initialSearchInput.style.right=null,this.selector.initialSearchInput.style.width=null,this.selector.initialSearchInput.style.marginLeft=null,this.selector.initialSearchInput.style.marginRight=null,this.updateClassList(this.EXTERNALLY_OPENED_CLASS,this.selector.initialSearchInput,!1)},a.prototype.handleSearchInputText=function(){var a=this;if(this.inputText=this.selector.searchInput.value,this.inputText.length<3)return void this.switchModalBody(!1);var b=!1;setTimeout(function(){b||(a.updateClassList(a.HIDE_ELEMENT_CLASS,a.selector.loading,!1),a.updateClassList(a.HIDE_ELEMENT_CLASS,a.selector.quickLinks,!0),a.updateClassList(a.HIDE_ELEMENT_CLASS,a.selector.headerSearchBody,!0))},this.LIMIT_OF_FETCH_MILISECONDS);var c=Cookies.get("ugUid")?"&groupId="+Cookies.get("ugUid"):"";fetch("".concat(this.SEARCH_URL).concat(encodeURIComponent(this.inputText))+c).then(function(a){return a.text()}).then(function(c){a.updateModalBody(JSON.parse(c)),b=!0})},a.prototype.showOrHideModal=function(a){this.updateClassList(this.NOT_FOCUSED_ELEMENT_CLASS,this.selector.modal,!a),this.updateClassList(this.FOCUSED_ELEMENT_CLASS,this.selector.modal,a),this.updateClassList(this.POSITION_ABOVE_ALL,this.headerContainer,a),this.updateClassList(this.FOCUSED_ELEMENT_CLASS,this.selector.modal,a),this.updateClassList(this.POSITION_ABOVE_ALL,this.headerContainer,a),this.updateClassList(this.SHOW_SEARCH,this.selector.boseHeaderContainer,a),this.updateClassList(this.SHOW_SEARCH,this.selector.boseHeaderServiceBar,a),this.updateClassList(this.SHOW_SEARCH,this.selector.boseHeader2016,a),
this.updateClassList(this.SHOW_SEARCH,this.headerContainer.parentElement,a),this.updateClassList(this.OPEN_CLASS,this.selector.iconWrapper,a),this.updateClassList(this.DISABLE_SCROLL,this.selector.body,a),this.isMobile()&&this.updateClassList(this.ELEMENT_ON_TOP_OFF_SIDEBAR_CLASS,this.selector.boseHeader2016Search,a),a?this.selector.searchInput.focus():this.selector.searchInput&&this.resetInput()},a.prototype.resetInput=function(){this.selector.searchInput.value="",this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.quickLinks,!1),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.headerSearchBody,!0)},a.prototype.updateModalBody=function(a){if(this.selector.suggestionsItems&&this.selector.topResultsItems){this.selector.suggestionsItems.textContent="",this.selector.topResultsItems.textContent="",this.selector.relatedContentItems.textContent="",this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.suggestions,!1),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.topResults,!1),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.relatedContent,!1);var b=!1;if(a.products.length>0){this.updateModalBodySuggestions(a.products),this.updateModalBodyTopResults(a.products),this.updateClassList(this.FOOTER_CLASS_1_ITEM,this.selector.footer,!1),this.updateClassList(this.NOT_ALL_CATEGORIES_ITEMS_1,this.selector.headerSearchBodyMain,!1);var c=a.products.find(function(a){return"Accessory"==a.type}),d=a.products.find(function(a){return"Product"==a.type});this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.accessoriesPill,!c),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.productPill,!d),b=!0}else this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.suggestions,!0),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.topResults,!0),this.updateClassList(this.NOT_ALL_CATEGORIES_ITEMS_1,this.selector.headerSearchBodyMain,!0),this.updateClassList(this.FOOTER_CLASS_1_ITEM,this.selector.footer,!0),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.accessoriesPill,!0),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.productPill,!0);a.helpContents.length>0?(b=!0,this.updateClassList(this.FOOTER_CLASS_2_ITEMS,this.selector.footer,!0),this.updateClassList(this.NOT_ALL_CATEGORIES_ITEMS_2,this.selector.headerSearchBodyMain,!0),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.supportPill,!1),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.relatedContent,!0)):(this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.relatedContent,!0),this.updateClassList(this.FOOTER_CLASS_2_ITEMS,this.selector.footer,!0),this.updateClassList(this.NOT_ALL_CATEGORIES_ITEMS_2,this.selector.headerSearchBodyMain,!0),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.supportPill,!0)),this.switchModalBody(b)}},a.prototype.updateModalBodySuggestions=function(a){var b=this;a.slice(0,7).forEach(function(a,c){var d=document.createElement("a"),e="Accessory"===a.type?"accessories":"products";d.setAttribute("href","".concat(b.SEARCH_RESULTS_PATH,"?term=").concat(a.name,"&category=").concat(e)),d.setAttribute("class","header-search-suggestions-body-link"),a.name.split(new RegExp("(".concat(encodeURIComponent(b.inputText),")"),"gi")).forEach(function(a,c){if(a.trim()){var e=document.createElement("span");e.setAttribute("style",a.toLowerCase()===b.inputText.toLowerCase()?"font-weight: 700":"");var f=document.createTextNode(a);e.appendChild(f),d.appendChild(e)}}),b.selector.suggestionsItems.appendChild(d),d.addEventListener("click",function(a,d){window.console.log("CLICKED"),Bose&&Bose.WebStorage&&Bose.WebStorage.storeData(b.STORAGE_KEY,JSON.stringify({position:c+1,isSearchSuggestions:!0,channel:b.channel,catalog:b.catalog,language:b.language}),"localStorage")})})},a.prototype.updateModalBodyTopResults=function(a){var b=this;a.slice(0,3).forEach(function(a){var c=document.createElement("a");if(c.setAttribute("href",a.url),c.setAttribute("class","header-search-topresults-body-link"),a.mainImage){var d=document.createElement("img");d.setAttribute("src",a.mainImage),d.setAttribute("class","header-search-topresults-body-link-image"),c.appendChild(d)}var e=document.createElement("div");e.setAttribute("class","header-search-topresults-body-link-content");var f=document.createElement("p");f.classList.add("header-search-topresults-body-link-content-title");var g=document.createTextNode(a.name);if(f.appendChild(g),e.appendChild(f),a.price){var h=document.createElement("div");h.setAttribute("class","header-search-topresults-body-link-content-prices");var i=document.createElement("p");i.setAttribute("class","header-search-topresults-body-link-content-prices-price");var j=a.formattedPromotionalPrice?a.formattedPromotionalPrice:a.formattedPrice,k=document.createTextNode(j);i.appendChild(k),h.appendChild(i),e.appendChild(h)}if(b.headerContainer&&!0!==$jq(b.headerContainer).data("hide-stock-status")){var l=document.createElement("p");l.setAttribute("class","header-search-topresults-body-link-content-stock");var m=document.createTextNode(b.translateLabel(a.variants[0].stockStatus));l.appendChild(m),e.appendChild(l)}c.appendChild(e),b.selector.topResultsItems.appendChild(c)})},a.prototype.updateModalBodyRelatedContent=function(a){var b=this;a.slice(0,5).forEach(function(a){var c=document.createElement("a");c.setAttribute("class","header-search-suggestions-body-link"),c.appendChild(document.createTextNode(a.title)),b.selector.relatedContentItems.appendChild(c),c.addEventListener("click",function(){window.open(a.url,"_self")})})},a.prototype.switchModalBody=function(a){a?(this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.quickLinks,!0),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.headerSearchBody,!1),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.loading,!0)):(this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.quickLinks,!1),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.headerSearchBody,!0),this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.loading,!0))},a.prototype.updateClassList=function(a,b,c){var d,e,f,g;b&&!(null===(d=b.classList)||void 0===d?void 0:d.contains(a))&&c?null===(e=b.classList)||void 0===e||e.add(a):b&&(null===(f=b.classList)||void 0===f?void 0:f.contains(a))&&!c&&(null===(g=b.classList)||void 0===g||g.remove(a))},a.prototype.isExpanded=function(){var a;return null===(a=this.selector.boseHeaderSidebar)||void 0===a?void 0:a.classList.contains("-openMobileMenu")},a.prototype.isTablet=function(){return window.innerWidth>=768&&window.innerWidth<1280},a.prototype.isMobile=function(){return window.innerWidth<1280},a.prototype.isOnlyMobile=function(){return window.innerWidth<768},a.prototype.isOpen=function(){var a;return null===(a=this.selector.modal)||void 0===a?void 0:a.classList.contains(this.FOCUSED_ELEMENT_CLASS)},a.prototype.translateLabel=function(a){try{var b=Bose&&(null===Bose||void 0===Bose?void 0:Bose.Translation)?Bose.Translation:null;if(b)return b.getDictionaryTranslation("product-catalog",a)}catch(b){return a}},a.prototype.init=function(){var a,b,c,d,e,f,g,h,i,j=this;null===(a=this.selector.modalSearchHeader)||void 0===a||a.addEventListener("transitionend",this.removeFixedOnheader,!1),null===(b=this.selector.initialSearchInput)||void 0===b||b.addEventListener("transitionend",this.cleanAfterClose,!1),null===(c=this.selector.searchInput)||void 0===c||c.addEventListener("keyup",this.handleKeyUp),null===(e=null===(d=this.selector)||void 0===d?void 0:d.initialSearchInput)||void 0===e||e.addEventListener("click",this.openSearch),null===(f=this.selector.arrowButton)||void 0===f||f.addEventListener("click",this.closeSearch),null===(g=this.selector.closeButton)||void 0===g||g.addEventListener("click",this.closeSearch),null===(h=this.selector.clearButton)||void 0===h||h.addEventListener("click",function(){j.selector.searchInput.value="",j.selector.clearButton.style.visibility="hidden",j.selector.searchInput.focus(),j.switchModalBody(!1)}),this.selector.categoryPills&&(this.updateClassList(this.HIDE_ELEMENT_CLASS,this.selector.generalPill,!0),this.selector.categoryPills.forEach(function(a){a.addEventListener("click",function(a){var b=a.currentTarget.dataset.category;window.open("".concat(j.SEARCH_RESULTS_PATH,"?term=").concat(j.inputText,"&category=").concat(b),"_self")})})),null===(i=this.selector.allResults)||void 0===i||i.addEventListener("click",function(){j.handleSearch()}),null===(_k=this.selector.searchButton)||void 0===i||_k.addEventListener("click",function(){j.handleSearch()}),window.addEventListener("orientationchange",function(){window.addEventListener("resize",j.orientationChanged)}),this.headerContainer&&(this.updateClassList(this.NEW_HEADER_SEARCH,this.selector.boseHeader2016Search,!0),this.handleAnalytics())},a}();Bose.ProductCatalogSearchBar=ProductCatalogSearchBar;var Bose=Bose||{};Bose.ProductDrawer=function(){function a(){if(b(),$jq(document).on("analyticsUpdateProductTile",b),$jq(L.accessoryTab).on("click",function(a){a.stopImmediatePropagation(),a.preventDefault(),$jq(L.productDrawer).data("initialized",!1),Bose.ProductDrawer.init()}),!h()){c(),k(),e(),i(),d(),j(),J(),N.$drawer.data("initialized",!0);var a=N.$queryUrl.val();void 0!==a&&a.length>0&&(Bose.Checkbox.init(),q(a))}window.addEventListener("hashchange",i)}function b(){var a=$jq(L.resultsContainer);a&&0!==a.find(".bose-productTile2020").length&&(a.hasClass("bose-productTile2020__padding")||a.addClass("bose-productTile2020__padding"),a.find($jq(L.removeBorderBottom)).addClass("bose-productTile2020__noBorder"))}function c(){var a,b=$jq(L.searchResultAccessory);b.hasClass("-active")?(a=b,a.find(L.queryUrl).val($jq(L.initialUrl).data("initial-url"))):a=$jq(L.searchResultProduct),N=0===$jq(L.searchResultAccessory).length?{$drawer:$jq(L.productDrawer),$resultsContainer:$jq(L.resultsContainer),$results:$jq(L.results),$filtersContainer:$jq(L.filtersContainer),$loadingIcon:$jq(L.loadingIcon),$displayMoreContainer:$jq(L.showMoreContainer),$filtersCheckboxes:$jq(L.filtersContainer).find(Bose.Checkbox.selectors.field+", "+L.productDrawerFacetButton),$queryUrl:$jq(L.queryUrl),$productDrawerPromotions:$jq(L.showPromotionalOffers)}:{$drawer:a.find(L.productDrawer),$resultsContainer:a.find(L.resultsContainer),$results:a.find(L.results),$filtersContainer:a.find(L.filtersContainer),$loadingIcon:a.find(L.loadingIcon),$displayMoreContainer:a.find(L.showMoreContainer),$filtersCheckboxes:a.find(L.filtersContainer).find(Bose.Checkbox.selectors.field+", "+L.productDrawerFacetButton),$queryUrl:a.find(L.queryUrl),$productDrawerPromotions:a.find(L.showPromotionalOffers)}}function d(){G(0),K=!1;var a={handler:function a(b){g(b)},offset:"bottom-in-view"};N.$resultsContainer.closest(".bose-popup").length&&(a.context=".bose-popup"),N.$displayMoreContainer.waypoint(a)}function e(){var a="promotionApplied|promotionApplied",b=a.split("|");if(N.$productDrawerPromotions.length>0){f();var c=N.$drawer.find('.bose-productDrawerFiltersPanel__filters[data-facet-key="'+b[0]+'"]'),d=c.find('.bose-checkbox__input[name="'+b[1]+'chk"]');d.length&&q(d.val())}}function f(){$jq(".bose-productDrawerFiltersPanel__filters:not(.bose-productDrawerFiltersPanel__filters--sort)").hide()}function g(a){"down"!==a||F()>=M||K||(G(F()+1),h()&&r())}function h(){return $jq(L.productDrawer).data("initialized")}function i(){var a=N.$drawer.data("selected-facets")||Bose.Utils.getURLHashParam("facet")||N.$drawer.data("hash-param");if(a){a=a.split("|");var b=$jq('.bose-productDrawerFiltersPanel__filters[data-facet-key="'+a[0]+'"]'),c=b.find('.bose-checkbox__input[name="'+a[1]+'chk"]');if(!c.length)if(c=b.find('.js-productDrawerFacetRadioButton[name="'+a[1]+'"]'),c.length||"NEW"!==a[1])$jq(L.resultsData).removeClass("hide");else{var d=$jq(L.numResCount);d.html("0"),$jq(L.results).addClass("hide"),$jq(L.emptyResults).removeClass("hide")}c.length&&q(c.val())}else $jq(L.resultsData).removeClass("hide")}function j(){Bose.RadioButton.init()}function k(){var a=N.$filtersCheckboxes;N.$drawer.find(L.dropdownLabel+","+L.closeFilterButton).click(l),N.$drawer.find(L.clearButton).click(p),a.each(function(){var a=$jq(this);a.data("initial-url",a.val())}),a.on("click",m)}function l(){N.$drawer.find(L.productDrawersFilterPanel).toggleClass("-open"),$jq.waypoints("refresh")}function m(){var a=$jq(this);return a.is(":disabled")||(q(a.val()),$jq(document).trigger("analyticsUpdateFilter",[a])),N.$drawer.hasClass("-inOverlay")||"NEWchk"!==a.attr("name")||(Bose.Utils.getURLHashParam("facet")?o():n()),!1}function n(){Bose.Utils.updateURLHashParam("drawer","show"),Bose.Utils.updateURLHashParam("facet","productStatus|NEW"),window.history.pushState(null,null,Bose.Utils.getCurrentHref())}function o(){var a=window.location.href.toString(),b=a.split("#")[0];window.history.pushState(null,null,b)}function p(){var a=$jq(this),b=a.data("initial-url"),c=N.$filtersCheckboxes;a.hasClass("-disabled")||(c.each(function(){$jq(this).prop("checked",!1)}),q(b))}function q(a){N.$results.data("searchpromoteurl",a),r(!0)}function r(a){var b=N.$results.data("searchpromoteurl"),c=N.$drawer.data("producttiletemplate"),d=N.$drawer.data("results-template"),e=N.$drawer.find(L.allAvailableFacets).val(),f={facetCheckboxes:{},$facetSort:N.$drawer.find('.js-productDrawerFacetRadioButton[name="productDrawer_sortOptions-group"]'),$clearFilterButtons:N.$drawer.find(L.clearButton)},g="/"+Bose.Utils.getCurrentPath()+".search.html";"true"===N.$resultsContainer.attr("data-is-accessories")&&(d+=".prodDrawerAccsResultSet"),N.$filtersContainer.find(".bose-productDrawerFiltersPanel__filters").each(function(a,b){var c=$jq(b);f.facetCheckboxes[c.data("facet-key")]=c.find(Bose.Checkbox.selectors.field+","+L.productDrawerFacetButton)}),b&&d&&(t(f),a&&(N.$results.empty(),G(0)),H(),$jq.ajax({url:g,method:"GET",data:{spUrl:b,path:d,tab:"Product",facets:e,productTileTemplate:c},dataType:"json",success:function c(d){s(b),u(d,f,a,$jq(document).scrollTop()),$jq(document).trigger("analyticsUpdateProductTile")}}))}function s(a){N.$queryUrl.val(a)}function t(a){for(var b in a.facetCheckboxes)a.facetCheckboxes.hasOwnProperty(b)&&a.facetCheckboxes[b].trigger("setDisabled");a.$clearFilterButtons.addClass("-disabled")}function u(a,b,c,d){var e=a.total,f=$jq(L.numResCount);$jq(L.resultsData).removeClass("hide"),a.allFacets&&(z(a,b.facetCheckboxes),x(a,b.$facetSort)),N.$results.data("currentsearchpromoteurl",N.$results.data("searchpromoteurl")),a.nextPageUrl?N.$results.data("searchpromoteurl",a.nextPageUrl):N.$results.data("searchpromoteurl",null),v(c,a.htmlResult,d),F()>=M&&a.nextPageUrl&&N.$displayMoreContainer.addClass("-isVisible"),null!==e&&f.length&&f.html(e),b.$clearFilterButtons.removeClass("-disabled")}function v(a,b,c){var d=$jq(b);a?(N.$results.empty(),G(0),N.$results.append(d.children())):(w(),N.$results.append(d.children()),$jq("html,body").scrollTop(c)),I()}function w(){N.$results.find(L.layoutResult).remove()}function x(a,b){if(void 0!==a.drawerSortOptions&&a.drawerSortOptions.length){b.closest(Bose.RadioButton.selectors.radioButton).attr({tabIndex:-1,"aria-checked":"false"}),b.prop("checked",!1),b.removeAttr("checked");for(var c=0;c<a.drawerSortOptions.length;c++)b.filter("[data-index='"+c+"']").val(a.drawerSortOptions[c].value),a.drawerSortOptions[c].selected&&(b.filter("[data-index='"+c+"']").closest(Bose.RadioButton.selectors.radioButton).attr({tabIndex:0,"aria-checked":"true"}),b.filter("[data-index='"+c+"']").prop("checked",!0))}}function y(a){a.undefined.each(function(){$jq(this).trigger("setEnabled")})}function z(a,b){if(a.allFacets)for(var c in b)b.hasOwnProperty(c)&&A(c,a,b);else y(b)}function A(a,b,c){c[a].each(function(){var c=$jq(this);if(c.is(":radio")&&(c.trigger("setEnabled"),c.closest(Bose.RadioButton.selectors.radioButton).attr({tabindex:-1,"aria-checked":"false"}),E(c).hide()),c.prop("checked",!1),b.allFacets[a])for(var d=0;d<b.allFacets[a].length;d++){var e=b.allFacets[a][d];D(c,e)?C(e,c):B(c,e)}})}function B(a,b){if(b.children)for(var c=0;c<b.children.length;c++){var d=b.children[c];D(a,d,b.value)&&C(d,a)}}function C(a,b){b.trigger("setEnabled"),b.prop("checked",a.selected),a.selected?(b.is(":checkbox")&&(b.val(a.undolink),b.closest(Bose.Checkbox.selectors.container).attr("aria-checked","true")),b.is(":radio")&&b.closest(Bose.RadioButton.selectors.radioButton).attr({tabindex:0,"aria-checked":"true"}),E(b).show()):(b.is(":checkbox")&&b.closest(Bose.Checkbox.selectors.container).attr("aria-checked","false"),b.is(":radio")&&b.closest(Bose.RadioButton.selectors.radioButton).attr({tabindex:-1,"aria-checked":"false"}),b.val(a.link),a.children&&E(b).hide())}function D(a,b,c){var d=c?c+"_"+b.value:b.value;return a.attr("name")===d||a.attr("name")===d+"chk"}function E(a){return a.closest(L.productDrawerFacet).find(L.productDrawerFacetChildContainer)}function F(){return N.$resultsContainer.data("pagesAutoLoaded")}function G(a){N.$resultsContainer.data("pagesAutoLoaded",a)}function H(){N.$displayMoreContainer.removeClass("-isVisible"),N.$loadingIcon.show(),K=!0}function I(){N.$loadingIcon.hide(),N.$displayMoreContainer.removeClass("-isVisible"),$jq.waypoints("refresh"),K=!1}function J(){var a={productDrawerResultListContainers:".bose-productDrawer__results,.bose-column__column,.bose-productReferences,.bose-productList",productDrawerResult:".bose-productTile2016--default"};$jq(a.productDrawerResultListContainers).on("focusin",a.productDrawerResult,function(a){$jq(a.currentTarget).addClass("focus")}).on("focusout",a.productDrawerResult,function(a){$jq(a.currentTarget).removeClass("focus")})}var K,L={productDrawer:".bose-productDrawer",results:".bose-productDrawer__results",resultsContainer:".bose-productDrawer__resultContainer",filtersContainer:".bose-productDrawerFiltersPanel__filtersContainer",loadingIcon:".bose-productDrawer__resultContainer__loadingIcon",productDrawersFilterPanel:".bose-productDrawerFiltersPanel",showMoreContainer:".bose-productDrawer__resultContainer__showMoreContainer",clearButton:".bose-productDrawer__clearButton",dropdownLabel:".bose-productDrawerFiltersPanel__dropdownLabel",closeFilterButton:".bose-productDrawer__closeFilterButton",numResCount:".bose-productDrawer__numResCount",productDrawerFacet:".bose-productDrawerFacet",productDrawerFacetChildContainer:".bose-productDrawerFacetChildFacetContainer",showPromotionalOffers:".js-productDrawer__showPromotionalOffers",accessoryTab:".js-searchResultSetSwitcher__item",queryUrl:".js-productDrawer-queryURL",initialUrl:".js-dataInitialUrl",productDrawerFacetButton:".js-productDrawerFacetRadioButton",allAvailableFacets:".js-productDrawer-allAvailableFacets",layoutResult:".js-productDrawer-layoutResult",searchResultAccessory:"#searchResults_accessory",searchResultProduct:"#searchResults_product",removeBorderBottom:".bose-productDrawer__resultContainer__result",emptyResults:".bose-productDrawer__empty",resultsData:".bose-productDrawer__resultsData"},M=3,N={};return{init:a,doSearch:r,populateFacets:z,checkSortOptions:x}}();var Bose=Bose||{};Bose.ProductDrawerOverlay=function(){function a(){b(),window.onhashchange=function(){b()}}function b(){var a=$jq(c.categoryPage).data("drawer-url"),b="show"===Bose.Utils.getURLHashParam(d.drawer),e=Bose.Utils.getURLHashParam(d.facet);if(b&&a){var f;-1===a.indexOf(".html")&&(a+=".html"),e&&(f={selectedFacet:e}),Bose.Popup.displayAjax(a,{wrapCss:"bose-popupInner--fullWidth bose-popupInner--productDrawer",addExtraLogicProductDrawer:!0,urlParameters:f})}}var c={categoryPage:".parent.bose-categoryPage",drawerButton:".js-productDrawerButton"},d={facet:"facet",drawer:"drawer"};return{init:a}}(),$jq(document).ready(function(){Bose.Search.initResults($jq(".bose-search"))}),$jq(document).ready(function(){Bose.Search.AutoComplete.init()}),$jq(document).ready(function(){(new Bose.ProductCatalogSearchBar).init()}),$jq(document).ready(function(){Bose.ProductDrawer.init()}),$jq(document).ready(function(){Bose.ProductDrawerOverlay.init()});var Bose=Bose||{};Bose.ProductSupportArticles=function(){function a(){var a=$jq(document),i=$jq(h.reasonOfFailure).val(),k=Bose.WebStorage.getData("productVariantInfo","sessionStorage");a.on("click",h.activeButton,b).on("click",h.activeButton,d).on("click",h.submitButton,d).on("click",h.fancyboxClose,c).on("focus",h.fancyboxClose,e).on("focus",h.fancyboxClose,f),$jq(h.overlayLink).on("click",g),j=!1,i&&k&&(k=JSON.parse(k),k.reasonOfFailure=i,Bose.WebStorage.storeData("productVariantInfo",JSON.stringify(k),"sessionStorage"))}function b(){$jq(h.btnContainer).hide();var a=$jq(this),b=$jq(h.commentBox);a.hasClass("-selected")||b.find(".bose-textArea__input").val(""),a.hasClass(i.yesButton)?($jq(i.yesMessage).show(),$jq(h.jsIsHelpful).val("true"),Bose.DataLayer.setVariable("TroubleShootingArticle","CustomerRanking","yes")):($jq(i.noMessage).show(),$jq(h.jsIsHelpful).val("false"),Bose.DataLayer.setVariable("TroubleShootingArticle","CustomerRanking","no")),$jq(document).trigger("trackTroubleShootingArticleCustomerResponse"),b.show()}function c(){$jq(".fancybox-inner").find(".bose-articleOverlay").length>0&&!j&&(Bose.DataLayer.setVariable("TroubleShootingArticle","CustomerRanking","close"),$jq(document).trigger("trackTroubleShootingArticleCustomerResponse"))}function d(){j=!0;var a=$jq(this),b="true"===$jq(h.jsIsHelpful).val(),c=a.closest(".bose-formYesNo__submitButton").length,d=$jq(h.commentBox).find(".bose-textArea__input").val().length;c?($jq(h.fancyboxOverlay).hide(),$jq(".fancybox-close").trigger("click")):a.addClass("-selected"),$jq(document).trigger("formYesNoClick",[b,c,d])}function e(){void 0!==$jq(h.linkInArticle).html()&&$jq(h.linkInArticle).each(function(a,b){$jq(b).attr("target","_blank")})}function f(){var a=$jq(".fancybox-inner"),b=$jq(h.youTubePlayer);if(b.data("heightFixed"))return!1;a.find(".bose-youtubePlayer").length>0&&a.find(".bose-articleOverlay").length>0&&(a.css("width","100%"),b.each(function(){var a=$jq(this),b=a.width(),c=b/1.77;a.height(c).data({heightFixed:!0})}))}function g(){var a=Bose.WebStorage.getData("productVariantInfo","sessionStorage");a=JSON.parse(a),Bose.DataLayer.setVariable("TroubleShootingArticle","CustomerRanking",""),Bose.DataLayer.setVariable("Product","inboundproductCode",$jq(h.productCode).val()),Bose.DataLayer.setVariable("Product","issueCategory",a.issueCategory),Bose.DataLayer.setVariable("Product","serviceType",a.serviceType),Bose.DataLayer.setVariable("Product","warrantyStatus",a.warrantyStatus),Bose.DataLayer.setVariable("Product","upgradeService",$jq(h.upgradeServiceType).val()),Bose.DataLayer.setVariable("Product","servicePayload",$jq(h.servicePayload).val()),Bose.DataLayer.setVariable("TroubleShootingArticle","articleTitle",$jq(this).data("articleTitle"));var b=$jq(this).data("supporttype");Bose.DataLayer.setVariable("TroubleShootingArticle","categories",b.substring(b.indexOf(":")+1,b.indexOf("/"))),Bose.DataLayer.setVariable("TroubleShootingArticle","subCategories",b.substring(b.lastIndexOf("/")+1,b.length)),Bose.DataLayer.setVariable("TroubleShootingArticle","sourcePageName",$jq(h.pageName).val()),$jq(document).trigger("trackTroubleShootingArticles")}var h={activeButton:".bose-articleOverlay .bose-formYesNo__button:not(.-disabled)",yesButton:".bose-formYesNo__button--yes",submitButton:".bose-articleOverlay .bose-formYesNo__submitButton",noButton:".bose-formYesNo__button--no",jsIsHelpful:".js-isHelpful",commentBox:".bose-formYesNo__commentBox",fancyboxOverlay:".fancybox-overlay-fixed",fancyboxClose:".fancybox-close",youTubePlayer:".bose-youtubePlayer__player",btnContainer:".js-buttonContainer",overlayLink:".bose-productSupportArticles .bose-link",productCode:".js-hidden-productCode",issueDescription:".js-hidden-issueDescription",serviceType:".js-hidden-serviceType",warrantyStatus:".js-hidden-warrantyStatus",pageName:".js-hidden-pageName",reasonOfFailure:".js-hidden-reasonOfFailure",upgradeServiceType:".js-hidden-upgradeServiceType",servicePayload:".js-hidden-servicePayload",linkInArticle:".bose-articleOverlay .bose-richText a"},i={yesButton:"bose-formYesNo__button--yes",yesMessage:".bose-formYesNo__yesMessage",noMessage:".bose-formYesNo__noMessage"},j=!1;return{init:a,selectors:h,trackClick:d,updateLink:e,youtubeHeight:f,setActive:b,closeArticle:c,enableButton:g}}(),$jq(document).ready(function(){Bose.ProductSupportArticles.init()}),$jq(document).ready(function(){Bose.SearchArticle.init()});var Bose=Bose||{};Bose.SearchArticle=function(){function a(){$jq(i.searchArticleField).val(""),$jq(i.searchArticleButton).on("click",d).on("mousedown",c),$jq(i.searchArticleField).on("keydown",g).on("focusout",b).val(""),Bose.TextField.markValid($jq(i.searchArticleField),Bose.TextField),$jq(i.searchArticleField).attr("autocomplete","off")}function b(){$jq(i.globalSearchErrorMsg).html("")}function c(a){a.preventDefault(),$jq(i.searchArticleButton).focus()}function d(){var a=$jq(i.searchArticleButton),b=$jq(i.searchArticleField).val(),c=$jq(i.productCodeHiddenSearchField).val(),d=Bose.DataLayer.Data.Page.formattedLocale,g=$jq(i.redirectBose).attr("href").replace("html","searchArticle.html")+"?searchTerm="+encodeURIComponent(b)+k.productCodeURLPath+c+k.localeURLPath+d;if(h(),""===b)return void e($jq(i.searchArticleEmptyValueErrorMsg).html());$jq.ajax({url:g,type:"GET"}).done(function(a){"0"===a.total?e($jq(i.searchArticleEmptyResult).html()):(Bose.TextField.markValid($jq(i.searchArticleField),Bose.TextField),f(b))}).fail(function(){e($jq(i.searchArticleEmptyResult).html())}).always(function(){Bose.ButtonLink.enable(a)})}function e(a){var b=$jq(i.globalSearchErrorMsg);b.html(a),b.show(),Bose.TextField.markInvalid($jq(i.searchArticleInput),a,Bose.TextField)}function f(a){var b=$jq(i.productCodeHiddenSearchField).val(),c=$jq(i.redirectBose).attr("href"),d=Bose.DataLayer.Data.Page.formattedLocale,e=window.location.origin,f=e+c+k.productCodeURLPath+b+k.localeURLPath+d+"&searchTerm="+encodeURIComponent(a);window.location.href=f}function g(a){"Enter"!==a.key&&13!==a.keyCode||(a.preventDefault(),d())}function h(){var a=$jq(i.globalSearchErrorMsg);a.hasClass(j.hide)||a.addClass(j.hide)}var i={searchArticleField:".js-searchArticleField input[name=searchText]",searchArticleInput:".js-searchArticleInput",searchArticleButton:".js-searchArticleSubmitButton",productCodeHiddenSearchField:".js-productCodeHiddenSearchField",searchArticlefirstErrorMsg:".js-searchArticle-errorMsgWithInLimit",searchArticleInvalidInputMsg:".js-searchArticle-invalidInput",searchArticleInvalidAttempsCount:".js-searchArticle-attemptsCount",searchArticleExceedsInvalidCountMessage:".js-searchArticle-errorMsgAfterLimit",searchArticleEmptyValueErrorMsg:".js-searchEmptyValueErrorMessage",searchArticleEmptyResult:".js-errorMsgTextSearchArticleNoResults",searchArticle:".bose-searchArticle",globalSearchErrorMsg:".bose-newErrorMessage",redirectBose:".js-redirectBose",currentUrl:".js-currentPath"},j={hide:"hide"},k={productCodeURLPath:"&productCode=",localeURLPath:"&locale="};return{init:a,selectors:i,handleSearchArticleInfo:d}}(),function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a="undefined"!=typeof globalThis?globalThis:a||self,b(a.noUiSlider={}))}(this,function(a){"use strict";function b(a){return c(a)&&"function"==typeof a.from}function c(a){return"object"===_typeof(a)&&"function"==typeof a.to}function d(a){a.parentElement.removeChild(a)}function e(a){return null!==a&&void 0!==a}function f(a){a.preventDefault()}function g(a){return a.filter(function(a){return!this[a]&&(this[a]=!0)},{})}function h(a,b){return Math.round(a/b)*b}function i(a,b){var c=a.getBoundingClientRect(),d=a.ownerDocument,e=d.documentElement,f=r(d);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(f.x=0),b?c.top+f.y-e.clientTop:c.left+f.x-e.clientLeft}function j(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function k(a,b,c){c>0&&(o(a,b),setTimeout(function(){p(a,b)},c))}function l(a){return Math.max(Math.min(a,100),0)}function m(a){return Array.isArray(a)?a:[a]}function n(a){a=String(a);var b=a.split(".");return b.length>1?b[1].length:0}function o(a,b){a.classList&&!/\s/.test(b)?a.classList.add(b):a.className+=" "+b}function p(a,b){a.classList&&!/\s/.test(b)?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}function q(a,b){return a.classList?a.classList.contains(b):new RegExp("\\b"+b+"\\b").test(a.className)}function r(a){var b=void 0!==window.pageXOffset,c="CSS1Compat"===(a.compatMode||"");return{x:b?window.pageXOffset:c?a.documentElement.scrollLeft:a.body.scrollLeft,y:b?window.pageYOffset:c?a.documentElement.scrollTop:a.body.scrollTop}}function s(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function t(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function b(){a=!0}});window.addEventListener("test",null,b)}catch(a){}return a}function u(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function v(a,b){return 100/(b-a)}function w(a,b,c){return 100*b/(a[c+1]-a[c])}function x(a,b){return w(a,a[0]<0?b+Math.abs(a[0]):b-a[0],0)}function y(a,b){return b*(a[1]-a[0])/100+a[0]}function z(a,b){for(var c=1;a>=b[c];)c+=1;return c}function A(a,b,c){if(c>=a.slice(-1)[0])return 100;var d=z(c,a),e=a[d-1],f=a[d],g=b[d-1],h=b[d];return g+x([e,f],c)/v(g,h)}function B(a,b,c){if(c>=100)return a.slice(-1)[0];var d=z(c,b),e=a[d-1],f=a[d],g=b[d-1];return y([e,f],(c-g)*v(g,b[d]))}function C(a,b,c,d){if(100===d)return d;var e=z(d,a),f=a[e-1],g=a[e];return c?d-f>(g-f)/2?g:f:b[e-1]?a[e-1]+h(d-a[e-1],b[e-1]):d}function D(a,b){if(!j(b))throw new Error("noUiSlider: 'step' is not numeric.");a.singleStep=b}function E(a,b){if(!j(b))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");a.keyboardPageMultiplier=b}function F(a,b){if(!j(b))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");a.keyboardMultiplier=b}function G(a,b){if(!j(b))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");a.keyboardDefaultStep=b}function H(a,b){if("object"!==_typeof(b)||Array.isArray(b))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===b.min||void 0===b.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");a.spectrum=new ca(b,a.snap||!1,a.singleStep)}function I(a,b){if(b=m(b),!Array.isArray(b)||!b.length)throw new Error("noUiSlider: 'start' option is incorrect.");a.handles=b.length,a.start=b}function J(a,b){if("boolean"!=typeof b)throw new Error("noUiSlider: 'snap' option must be a boolean.");a.snap=b}function K(a,b){if("boolean"!=typeof b)throw new Error("noUiSlider: 'animate' option must be a boolean.");a.animate=b}function L(a,b){if("number"!=typeof b)throw new Error("noUiSlider: 'animationDuration' option must be a number.");a.animationDuration=b}function M(a,b){var c,d=[!1];if("lower"===b?b=[!0,!1]:"upper"===b&&(b=[!1,!0]),!0===b||!1===b){for(c=1;c<a.handles;c++)d.push(b);d.push(!1)}else{if(!Array.isArray(b)||!b.length||b.length!==a.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");d=b}a.connect=d}function N(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function O(a,b){if(!j(b))throw new Error("noUiSlider: 'margin' option must be numeric.");0!==b&&(a.margin=a.spectrum.getDistance(b))}function P(a,b){if(!j(b))throw new Error("noUiSlider: 'limit' option must be numeric.");if(a.limit=a.spectrum.getDistance(b),!a.limit||a.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function Q(a,b){var c
;if(!j(b)&&!Array.isArray(b))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(b)&&2!==b.length&&!j(b[0])&&!j(b[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==b){for(Array.isArray(b)||(b=[b,b]),a.padding=[a.spectrum.getDistance(b[0]),a.spectrum.getDistance(b[1])],c=0;c<a.spectrum.xNumSteps.length-1;c++)if(a.padding[0][c]<0||a.padding[1][c]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var d=b[0]+b[1],e=a.spectrum.xVal[0];if(d/(a.spectrum.xVal[a.spectrum.xVal.length-1]-e)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function R(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function S(a,b){if("string"!=typeof b)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0,g=b.indexOf("hover")>=0,h=b.indexOf("unconstrained")>=0,i=b.indexOf("drag-all")>=0;if(e){if(2!==a.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");O(a,a.start[1]-a.start[0])}if(h&&(a.margin||a.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");a.events={tap:c||f,drag:d,dragAll:i,fixed:e,snap:f,hover:g,unconstrained:h}}function T(a,b){if(!1!==b)if(!0===b||c(b)){a.tooltips=[];for(var d=0;d<a.handles;d++)a.tooltips.push(b)}else{if(b=m(b),b.length!==a.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");b.forEach(function(a){if("boolean"!=typeof a&&!c(a))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),a.tooltips=b}}function U(a,b){if(b.length!==a.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");a.handleAttributes=b}function V(a,b){if(!c(b))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");a.ariaFormat=b}function W(a,c){if(!b(c))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");a.format=c}function X(a,b){if("boolean"!=typeof b)throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");a.keyboardSupport=b}function Y(a,b){a.documentElement=b}function Z(a,b){if("string"!=typeof b&&!1!==b)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");a.cssPrefix=b}function $(a,b){if("object"!==_typeof(b))throw new Error("noUiSlider: 'cssClasses' must be an object.");"string"==typeof a.cssPrefix?(a.cssClasses={},Object.keys(b).forEach(function(c){a.cssClasses[c]=a.cssPrefix+b[c]})):a.cssClasses=b}function _(a){var b={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:da,format:da},c={step:{r:!1,t:D},keyboardPageMultiplier:{r:!1,t:E},keyboardMultiplier:{r:!1,t:F},keyboardDefaultStep:{r:!1,t:G},start:{r:!0,t:I},connect:{r:!0,t:M},direction:{r:!0,t:R},snap:{r:!1,t:J},animate:{r:!1,t:K},animationDuration:{r:!1,t:L},range:{r:!0,t:H},orientation:{r:!1,t:N},margin:{r:!1,t:O},limit:{r:!1,t:P},padding:{r:!1,t:Q},behaviour:{r:!0,t:S},ariaFormat:{r:!1,t:V},format:{r:!1,t:W},tooltips:{r:!1,t:T},keyboardSupport:{r:!0,t:X},documentElement:{r:!1,t:Y},cssPrefix:{r:!0,t:Z},cssClasses:{r:!0,t:$},handleAttributes:{r:!1,t:U}},d={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:ea,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};a.format&&!a.ariaFormat&&(a.ariaFormat=a.format),Object.keys(c).forEach(function(f){if(e(a[f])||void 0!==d[f])c[f].t(b,e(a[f])?a[f]:d[f]);else if(c[f].r)throw new Error("noUiSlider: '"+f+"' is required.")}),b.pips=a.pips;var f=document.createElement("div"),g=void 0!==f.style.msTransform,h=void 0!==f.style.transform;b.transformRule=h?"transform":g?"msTransform":"webkitTransform";var i=[["left","top"],["right","bottom"]];return b.style=i[b.dir][b.ort],b}function aa(b,c,h){function j(a,b){var c=Ha.createElement("div");return b&&o(c,b),a.appendChild(c),c}function n(a,b){var d=j(a,c.cssClasses.origin),e=j(d,c.cssClasses.handle);if(j(e,c.cssClasses.touchArea),e.setAttribute("data-handle",String(b)),c.keyboardSupport&&(e.setAttribute("tabindex","0"),e.addEventListener("keydown",function(a){return V(a,b)})),void 0!==c.handleAttributes){var f=c.handleAttributes[b];Object.keys(f).forEach(function(a){e.setAttribute(a,f[a])})}return e.setAttribute("role","slider"),e.setAttribute("aria-orientation",c.ort?"vertical":"horizontal"),0===b?o(e,c.cssClasses.handleLower):b===c.handles-1&&o(e,c.cssClasses.handleUpper),d}function v(a,b){return!!b&&j(a,c.cssClasses.connect)}function w(a,b){var d=j(b,c.cssClasses.connects);ta=[],ua=[],ua.push(v(d,a[0]));for(var e=0;e<c.handles;e++)ta.push(n(b,e)),Ea[e]=e,ua.push(v(d,a[e+1]))}function x(a){return o(a,c.cssClasses.target),0===c.dir?o(a,c.cssClasses.ltr):o(a,c.cssClasses.rtl),0===c.ort?o(a,c.cssClasses.horizontal):o(a,c.cssClasses.vertical),"rtl"===getComputedStyle(a).direction?o(a,c.cssClasses.textDirectionRtl):o(a,c.cssClasses.textDirectionLtr),j(a,c.cssClasses.base)}function y(a,b){return!(!c.tooltips||!c.tooltips[b])&&j(a.firstChild,c.cssClasses.tooltip)}function z(){return Aa.hasAttribute("disabled")}function A(a){return ta[a].hasAttribute("disabled")}function B(){wa&&(Z("update"+fa.tooltips),wa.forEach(function(a){a&&d(a)}),wa=null)}function C(){B(),wa=ta.map(y),X("update"+fa.tooltips,function(a,b,d){if(wa&&c.tooltips&&!1!==wa[b]){var e=a[b];!0!==c.tooltips[b]&&(e=c.tooltips[b].to(d[b])),wa[b].innerHTML=e}})}function D(){Z("update"+fa.aria),X("update"+fa.aria,function(a,b,d,e,f){Ea.forEach(function(a){var b=ta[a],e=aa(Da,a,0,!0,!0,!0),g=aa(Da,a,100,!0,!0,!0),h=f[a],i=String(c.ariaFormat.to(d[a]));e=Ba.fromStepping(e).toFixed(1),g=Ba.fromStepping(g).toFixed(1),h=Ba.fromStepping(h).toFixed(1),b.children[0].setAttribute("aria-valuemin",e),b.children[0].setAttribute("aria-valuemax",g),b.children[0].setAttribute("aria-valuenow",h),b.children[0].setAttribute("aria-valuetext",i)})})}function E(b){if(b.mode===a.PipsMode.Range||b.mode===a.PipsMode.Steps)return Ba.xVal;if(b.mode===a.PipsMode.Count){if(b.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var c=b.values-1,d=100/c,e=[];c--;)e[c]=c*d;return e.push(100),F(e,b.stepped)}return b.mode===a.PipsMode.Positions?F(b.values,b.stepped):b.mode===a.PipsMode.Values?b.stepped?b.values.map(function(a){return Ba.fromStepping(Ba.getStep(Ba.toStepping(a)))}):b.values:[]}function F(a,b){return a.map(function(a){return Ba.fromStepping(b?Ba.getStep(a):a)})}function G(b){function c(a,b){return Number((a+b).toFixed(7))}var d=E(b),e={},f=Ba.xVal[0],h=Ba.xVal[Ba.xVal.length-1],i=!1,j=!1,k=0;return d=g(d.slice().sort(function(a,b){return a-b})),d[0]!==f&&(d.unshift(f),i=!0),d[d.length-1]!==h&&(d.push(h),j=!0),d.forEach(function(f,g){var h,l,m,n,o,p,q,r,s,t,u=f,v=d[g+1],w=b.mode===a.PipsMode.Steps;for(w&&(h=Ba.xNumSteps[g]),h||(h=v-u),void 0===v&&(v=u),h=Math.max(h,1e-7),l=u;l<=v;l=c(l,h)){for(n=Ba.toStepping(l),o=n-k,r=o/(b.density||1),s=Math.round(r),t=o/s,m=1;m<=s;m+=1)p=k+m*t,e[p.toFixed(5)]=[Ba.fromStepping(p),0];q=d.indexOf(l)>-1?a.PipsType.LargeValue:w?a.PipsType.SmallValue:a.PipsType.NoValue,!g&&i&&l!==v&&(q=0),l===v&&j||(e[n.toFixed(5)]=[l,q]),k=n}}),e}function H(b,d,e){function f(a,b){var d=b===c.cssClasses.value,e=d?n:p,f=d?l:m;return b+" "+e[c.ort]+" "+f[a]}function g(b,g,h){if((h=d?d(g,h):h)!==a.PipsType.None){var i=j(k,!1);i.className=f(h,c.cssClasses.marker),i.style[c.style]=b+"%",h>a.PipsType.NoValue&&(i=j(k,!1),i.className=f(h,c.cssClasses.value),i.setAttribute("data-value",String(g)),i.style[c.style]=b+"%",i.innerHTML=String(e.to(g)))}}var h,i,k=Ha.createElement("div"),l=(h={},h[a.PipsType.None]="",h[a.PipsType.NoValue]=c.cssClasses.valueNormal,h[a.PipsType.LargeValue]=c.cssClasses.valueLarge,h[a.PipsType.SmallValue]=c.cssClasses.valueSub,h),m=(i={},i[a.PipsType.None]="",i[a.PipsType.NoValue]=c.cssClasses.markerNormal,i[a.PipsType.LargeValue]=c.cssClasses.markerLarge,i[a.PipsType.SmallValue]=c.cssClasses.markerSub,i),n=[c.cssClasses.valueHorizontal,c.cssClasses.valueVertical],p=[c.cssClasses.markerHorizontal,c.cssClasses.markerVertical];return o(k,c.cssClasses.pips),o(k,0===c.ort?c.cssClasses.pipsHorizontal:c.cssClasses.pipsVertical),Object.keys(b).forEach(function(a){g(a,b[a][0],b[a][1])}),k}function I(){va&&(d(va),va=null)}function J(a){I();var b=G(a),c=a.filter,d=a.format||{to:function a(b){return String(Math.round(b))}};return va=Aa.appendChild(H(b,c,d))}function K(){var a=sa.getBoundingClientRect(),b="offset"+["Width","Height"][c.ort];return 0===c.ort?a.width||sa[b]:a.height||sa[b]}function L(a,b,d,e){var f=function f(g){var h=M(g,e.pageOffset,e.target||b);return!!h&&(!(z()&&!e.doNotReject)&&(!(q(Aa,c.cssClasses.tap)&&!e.doNotReject)&&(!(a===xa.start&&void 0!==h.buttons&&h.buttons>1)&&((!e.hover||!h.buttons)&&(za||h.preventDefault(),h.calcPoint=h.points[c.ort],void d(h,e))))))},g=[];return a.split(" ").forEach(function(a){b.addEventListener(a,f,!!za&&{passive:!0}),g.push([a,f])}),g}function M(a,b,c){var d=0===a.type.indexOf("touch"),e=0===a.type.indexOf("mouse"),f=0===a.type.indexOf("pointer"),g=0,h=0;if(0===a.type.indexOf("MSPointer")&&(f=!0),"mousedown"===a.type&&!a.buttons&&!a.touches)return!1;if(d){var i=function b(d){var e=d.target;return e===c||c.contains(e)||a.composed&&a.composedPath().shift()===c};if("touchstart"===a.type){var j=Array.prototype.filter.call(a.touches,i);if(j.length>1)return!1;g=j[0].pageX,h=j[0].pageY}else{var k=Array.prototype.find.call(a.changedTouches,i);if(!k)return!1;g=k.pageX,h=k.pageY}}return b=b||r(Ha),(e||f)&&(g=a.clientX+b.x,h=a.clientY+b.y),a.pageOffset=b,a.points=[g,h],a.cursor=e||f,a}function N(a){var b=a-i(sa,c.ort),d=100*b/K();return d=l(d),c.dir?100-d:d}function O(a){var b=100,c=!1;return ta.forEach(function(d,e){if(!A(e)){var f=Da[e],g=Math.abs(f-a),h=100===g&&100===b,i=g<b,j=g<=b&&a>f;(i||j||h)&&(c=e,b=g)}}),c}function P(a,b){"mouseout"===a.type&&"HTML"===a.target.nodeName&&null===a.relatedTarget&&R(a,b)}function Q(a,b){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===a.buttons&&0!==b.buttonsProperty)return R(a,b);var d=(c.dir?-1:1)*(a.calcPoint-b.startCalcPoint);ca(d>0,100*d/b.baseSize,b.locations,b.handleNumbers,b.connect)}function R(a,b){b.handle&&(p(b.handle,c.cssClasses.active),Fa-=1),b.listeners.forEach(function(a){Ia.removeEventListener(a[0],a[1])}),0===Fa&&(p(Aa,c.cssClasses.drag),ga(),a.cursor&&(Ja.style.cursor="",Ja.removeEventListener("selectstart",f))),b.handleNumbers.forEach(function(a){$("change",a),$("set",a),$("end",a)})}function S(a,b){if(!b.handleNumbers.some(A)){var d;if(1===b.handleNumbers.length){d=ta[b.handleNumbers[0]].children[0],Fa+=1,o(d,c.cssClasses.active)}a.stopPropagation();var e=[],g=L(xa.move,Ia,Q,{target:a.target,handle:d,connect:b.connect,listeners:e,startCalcPoint:a.calcPoint,baseSize:K(),pageOffset:a.pageOffset,handleNumbers:b.handleNumbers,buttonsProperty:a.buttons,locations:Da.slice()}),h=L(xa.end,Ia,R,{target:a.target,handle:d,listeners:e,doNotReject:!0,handleNumbers:b.handleNumbers}),i=L("mouseout",Ia,P,{target:a.target,handle:d,listeners:e,doNotReject:!0,handleNumbers:b.handleNumbers});e.push.apply(e,g.concat(h,i)),a.cursor&&(Ja.style.cursor=getComputedStyle(a.target).cursor,ta.length>1&&o(Aa,c.cssClasses.drag),Ja.addEventListener("selectstart",f,!1)),b.handleNumbers.forEach(function(a){$("start",a)})}}function T(a){a.stopPropagation();var b=N(a.calcPoint),d=O(b);!1!==d&&(c.events.snap||k(Aa,c.cssClasses.tap,c.animationDuration),ha(d,b,!0,!0),ga(),$("slide",d,!0),$("update",d,!0),c.events.snap?S(a,{handleNumbers:[d]}):($("change",d,!0),$("set",d,!0)))}function U(a){var b=N(a.calcPoint),c=Ba.getStep(b),d=Ba.fromStepping(c);Object.keys(Ga).forEach(function(a){"hover"===a.split(".")[0]&&Ga[a].forEach(function(a){a.call(Ma,d)})})}function V(a,b){if(z()||A(b))return!1;var d=["Left","Right"],e=["Down","Up"],f=["PageDown","PageUp"],g=["Home","End"];c.dir&&!c.ort?d.reverse():c.ort&&!c.dir&&(e.reverse(),f.reverse());var h=a.key.replace("Arrow",""),i=h===f[0],j=h===f[1],k=h===e[0]||h===d[0]||i,l=h===e[1]||h===d[1]||j,m=h===g[0],n=h===g[1];if(!(k||l||m||n))return!0;a.preventDefault();var o;if(l||k){var p=k?0:1,q=pa(b),r=q[p];if(null===r)return!1;!1===r&&(r=Ba.getDefaultStep(Da[b],k,c.keyboardDefaultStep)),r*=j||i?c.keyboardPageMultiplier:c.keyboardMultiplier,r=Math.max(r,1e-7),r*=k?-1:1,o=Ca[b]+r}else o=n?c.spectrum.xVal[c.spectrum.xVal.length-1]:c.spectrum.xVal[0];return ha(b,Ba.toStepping(o),!0,!0),$("slide",b),$("update",b),$("change",b),$("set",b),!1}function W(a){a.fixed||ta.forEach(function(a,b){L(xa.start,a.children[0],S,{handleNumbers:[b]})}),a.tap&&L(xa.start,sa,T,{}),a.hover&&L(xa.move,sa,U,{hover:!0}),a.drag&&ua.forEach(function(b,d){if(!1!==b&&0!==d&&d!==ua.length-1){var e=ta[d-1],f=ta[d],g=[b],h=[e,f],i=[d-1,d];o(b,c.cssClasses.draggable),a.fixed&&(g.push(e.children[0]),g.push(f.children[0])),a.dragAll&&(h=ta,i=Ea),g.forEach(function(a){L(xa.start,a,S,{handles:h,handleNumbers:i,connect:b})})}})}function X(a,b){Ga[a]=Ga[a]||[],Ga[a].push(b),"update"===a.split(".")[0]&&ta.forEach(function(a,b){$("update",b)})}function Y(a){return a===fa.aria||a===fa.tooltips}function Z(a){var b=a&&a.split(".")[0],c=b?a.substring(b.length):a;Object.keys(Ga).forEach(function(a){var d=a.split(".")[0],e=a.substring(d.length);b&&b!==d||c&&c!==e||Y(e)&&c!==e||delete Ga[a]})}function $(a,b,d){Object.keys(Ga).forEach(function(e){var f=e.split(".")[0];a===f&&Ga[e].forEach(function(a){a.call(Ma,Ca.map(c.format.to),b,Ca.slice(),d||!1,Da.slice(),Ma)})})}function aa(a,b,d,e,f,g){var h;return ta.length>1&&!c.events.unconstrained&&(e&&b>0&&(h=Ba.getAbsoluteDistance(a[b-1],c.margin,!1),d=Math.max(d,h)),f&&b<ta.length-1&&(h=Ba.getAbsoluteDistance(a[b+1],c.margin,!0),d=Math.min(d,h))),ta.length>1&&c.limit&&(e&&b>0&&(h=Ba.getAbsoluteDistance(a[b-1],c.limit,!1),d=Math.min(d,h)),f&&b<ta.length-1&&(h=Ba.getAbsoluteDistance(a[b+1],c.limit,!0),d=Math.max(d,h))),c.padding&&(0===b&&(h=Ba.getAbsoluteDistance(0,c.padding[0],!1),d=Math.max(d,h)),b===ta.length-1&&(h=Ba.getAbsoluteDistance(100,c.padding[1],!0),d=Math.min(d,h))),d=Ba.getStep(d),!((d=l(d))===a[b]&&!g)&&d}function ba(a,b){var d=c.ort;return(d?b:a)+", "+(d?a:b)}function ca(a,b,c,d,e){var f=c.slice(),g=d[0],h=[!a,a],i=[a,!a];d=d.slice(),a&&d.reverse(),d.length>1?d.forEach(function(a,c){var d=aa(f,a,f[a]+b,h[c],i[c],!1);!1===d?b=0:(b=d-f[a],f[a]=d)}):h=i=[!0];var j=!1;d.forEach(function(a,d){j=ha(a,c[a]+b,h[d],i[d])||j}),j&&(d.forEach(function(a){$("update",a),$("slide",a)}),void 0!=e&&$("drag",g))}function da(a,b){return c.dir?100-a-b:a}function ea(a,b){Da[a]=b,Ca[a]=Ba.fromStepping(b);var d=10*(da(b,0)-Ka),e="translate("+ba(d+"%","0")+")";ta[a].style[c.transformRule]=e,ia(a),ia(a+1)}function ga(){Ea.forEach(function(a){var b=Da[a]>50?-1:1,c=3+(ta.length+b*a);ta[a].style.zIndex=String(c)})}function ha(a,b,c,d,e){return e||(b=aa(Da,a,b,c,d,!1)),!1!==b&&(ea(a,b),!0)}function ia(a){if(ua[a]){var b=0,d=100;0!==a&&(b=Da[a-1]),a!==ua.length-1&&(d=Da[a]);var e=d-b,f="translate("+ba(da(b,e)+"%","0")+")",g="scale("+ba(e/100,"1")+")";ua[a].style[c.transformRule]=f+" "+g}}function ja(a,b){return null===a||!1===a||void 0===a?Da[b]:("number"==typeof a&&(a=String(a)),a=c.format.from(a),!1!==a&&(a=Ba.toStepping(a)),!1===a||isNaN(a)?Da[b]:a)}function ka(a,b,d){var e=m(a),f=void 0===Da[0];b=void 0===b||b,c.animate&&!f&&k(Aa,c.cssClasses.tap,c.animationDuration),Ea.forEach(function(a){ha(a,ja(e[a],a),!0,!1,d)});var g=1===Ea.length?0:1;if(f&&Ba.hasNoSize()&&(d=!0,Da[0]=0,Ea.length>1)){var h=100/(Ea.length-1);Ea.forEach(function(a){Da[a]=a*h})}for(;g<Ea.length;++g)Ea.forEach(function(a){ha(a,Da[a],!0,!0,d)});ga(),Ea.forEach(function(a){$("update",a),null!==e[a]&&b&&$("set",a)})}function la(a){ka(c.start,a)}function ma(a,b,c,d){if(!((a=Number(a))>=0&&a<Ea.length))throw new Error("noUiSlider: invalid handle number, got: "+a);ha(a,ja(b,a),!0,!0,d),$("update",a),c&&$("set",a)}function na(a){if(void 0===a&&(a=!1),a)return 1===Ca.length?Ca[0]:Ca.slice(0);var b=Ca.map(c.format.to);return 1===b.length?b[0]:b}function oa(){for(Z(fa.aria),Z(fa.tooltips),Object.keys(c.cssClasses).forEach(function(a){p(Aa,c.cssClasses[a])});Aa.firstChild;)Aa.removeChild(Aa.firstChild);delete Aa.noUiSlider}function pa(a){var b=Da[a],d=Ba.getNearbySteps(b),e=Ca[a],f=d.thisStep.step,g=null;if(c.snap)return[e-d.stepBefore.startValue||null,d.stepAfter.startValue-e||null];!1!==f&&e+f>d.stepAfter.startValue&&(f=d.stepAfter.startValue-e),g=e>d.thisStep.startValue?d.thisStep.step:!1!==d.stepBefore.step&&e-d.stepBefore.highestStep,100===b?f=null:0===b&&(g=null);var h=Ba.countStepDecimals();return null!==f&&!1!==f&&(f=Number(f.toFixed(h))),null!==g&&!1!==g&&(g=Number(g.toFixed(h))),[g,f]}function qa(){return Ea.map(pa)}function ra(a,b){var d=na(),f=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];f.forEach(function(b){void 0!==a[b]&&(h[b]=a[b])});var g=_(h);f.forEach(function(b){void 0!==a[b]&&(c[b]=g[b])}),Ba=g.spectrum,c.margin=g.margin,c.limit=g.limit,c.padding=g.padding,c.pips?J(c.pips):I(),c.tooltips?C():B(),Da=[],ka(e(a.start)?a.start:d,b)}var sa,ta,ua,va,wa,xa=s(),ya=u(),za=ya&&t(),Aa=b,Ba=c.spectrum,Ca=[],Da=[],Ea=[],Fa=0,Ga={},Ha=b.ownerDocument,Ia=c.documentElement||Ha.documentElement,Ja=Ha.body,Ka="rtl"===Ha.dir||1===c.ort?0:100;!function La(){sa=x(Aa),w(c.connect,sa),W(c.events),ka(c.start),c.pips&&J(c.pips),c.tooltips&&C(),D()}();var Ma={destroy:oa,steps:qa,on:X,off:Z,get:na,set:ka,setHandle:ma,reset:la,__moveHandles:function a(b,c,d){ca(b,c,Da,d)},options:h,updateOptions:ra,target:Aa,removePips:I,removeTooltips:B,getPositions:function a(){return Da.slice()},getTooltips:function a(){return wa},getOrigins:function a(){return ta},pips:J};return Ma}function ba(a,b){if(!a||!a.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+a);if(a.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var c=_(b),d=aa(a,c,b);return a.noUiSlider=d,d}a.PipsMode=void 0,function(a){a.Range="range",a.Steps="steps",a.Positions="positions",a.Count="count",a.Values="values"}(a.PipsMode||(a.PipsMode={})),a.PipsType=void 0,function(a){a[a.None=-1]="None",a[a.NoValue=0]="NoValue",a[a.LargeValue=1]="LargeValue",a[a.SmallValue=2]="SmallValue"}(a.PipsType||(a.PipsType={}));var ca=function(){function a(a,b,c){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[c||!1],this.xNumSteps=[!1],this.snap=b;var d,e=[];for(Object.keys(a).forEach(function(b){e.push([m(a[b]),b])}),e.sort(function(a,b){return a[0][0]-b[0][0]}),d=0;d<e.length;d++)this.handleEntryPoint(e[d][1],e[d][0]);for(this.xNumSteps=this.xSteps.slice(0),d=0;d<this.xNumSteps.length;d++)this.handleStepPoint(d,this.xNumSteps[d])}return a.prototype.getDistance=function(a){var b,c=[];for(b=0;b<this.xNumSteps.length-1;b++){var d=this.xNumSteps[b];if(d&&a/d%1!=0)throw new Error("noUiSlider: 'limit', 'margin' and 'padding' of "+this.xPct[b]+"% range must be divisible by step.");c[b]=w(this.xVal,a,b)}return c},a.prototype.getAbsoluteDistance=function(a,b,c){var d=0;if(a<this.xPct[this.xPct.length-1])for(;a>this.xPct[d+1];)d++;else a===this.xPct[this.xPct.length-1]&&(d=this.xPct.length-2);c||a!==this.xPct[d+1]||d++,null===b&&(b=[]);var e,f=1,g=b[d],h=0,i=0,j=0,k=0;for(e=c?(a-this.xPct[d])/(this.xPct[d+1]-this.xPct[d]):(this.xPct[d+1]-a)/(this.xPct[d+1]-this.xPct[d]);g>0;)h=this.xPct[d+1+k]-this.xPct[d+k],b[d+k]*f+100-100*e>100?(i=h*e,f=(g-100*e)/b[d+k],e=1):(i=b[d+k]*h/100*f,f=0),c?(j-=i,this.xPct.length+k>=1&&k--):(j+=i,this.xPct.length-k>=1&&k++),g=b[d+k]*f;return a+j},a.prototype.toStepping=function(a){return a=A(this.xVal,this.xPct,a)},a.prototype.fromStepping=function(a){return B(this.xVal,this.xPct,a)},a.prototype.getStep=function(a){return a=C(this.xPct,this.xSteps,this.snap,a)},a.prototype.getDefaultStep=function(a,b,c){var d=z(a,this.xPct);return(100===a||b&&a===this.xPct[d-1])&&(d=Math.max(d-1,1)),(this.xVal[d]-this.xVal[d-1])/c},a.prototype.getNearbySteps=function(a){var b=z(a,this.xPct);return{stepBefore:{startValue:this.xVal[b-2],step:this.xNumSteps[b-2],highestStep:this.xHighestCompleteStep[b-2]},thisStep:{startValue:this.xVal[b-1],step:this.xNumSteps[b-1],highestStep:this.xHighestCompleteStep[b-1]},stepAfter:{startValue:this.xVal[b],step:this.xNumSteps[b],highestStep:this.xHighestCompleteStep[b]}}},a.prototype.countStepDecimals=function(){var a=this.xNumSteps.map(n);return Math.max.apply(null,a)},a.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},a.prototype.convert=function(a){return this.getStep(this.toStepping(a))},a.prototype.handleEntryPoint=function(a,b){var c;if(c="min"===a?0:"max"===a?100:parseFloat(a),!j(c)||!j(b[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(c),this.xVal.push(b[0]);var d=Number(b[1]);c?this.xSteps.push(!isNaN(d)&&d):isNaN(d)||(this.xSteps[0]=d),this.xHighestCompleteStep.push(0)},a.prototype.handleStepPoint=function(a,b){if(b){if(this.xVal[a]===this.xVal[a+1])return void(this.xSteps[a]=this.xHighestCompleteStep[a]=this.xVal[a]);this.xSteps[a]=w([this.xVal[a],this.xVal[a+1]],b,0)/v(this.xPct[a],this.xPct[a+1]);var c=(this.xVal[a+1]-this.xVal[a])/this.xNumSteps[a],d=Math.ceil(Number(c.toFixed(3))-1),e=this.xVal[a]+this.xNumSteps[a]*d;this.xHighestCompleteStep[a]=e}},a}(),da={to:function a(b){return void 0===b?"":b.toFixed(2)},from:Number},ea={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},fa={tooltips:".__tooltips",aria:".__aria"},ga={__spectrum:ca,cssClasses:ea,create:ba};a.create=ba,a.cssClasses=ea,a.default=ga,Object.defineProperty(a,"__esModule",{value:!0})});var Bose=Bose||{},slider=document.querySelector(".range-slider-simple .slider"),currenciesNotSupported=[{code:"NOK",handler:function a(b){return b.replace("NOK","kr")}},{code:"JPY",handler:function a(b){return b?"¥"+b.substring(1):""}}],BoseRangeSlider={show:function a(b,c,d,e){if(b){var f=b,g=e&&e.minValue&&e.minValue.value?parseInt(e.minValue.value):0,h=e&&e.maxValue&&e.maxValue.value?parseInt(e.maxValue.value):100,i=e&&e.maxValue&&e.maxValue.label?e.maxValue.label:"$1,000",j=e&&e.maxValue&&e.maxValue.currencyCode?e.maxValue.currencyCode:null,k=j&&d?new Intl.NumberFormat(d,{style:"currency",maximumFractionDigits:0,minimumFractionDigits:0,currency:j}):new Intl.NumberFormat(d),l=e&&e.maxValue&&e.maxValue.measurementUnitSymbol&&!e.maxValue.currencyCode?e.maxValue.measurementUnitSymbol:null,m=l&&i.indexOf(l)===i.length-1,n={start:[g,h],tooltips:!0,connect:!0,behaviour:"drag",step:e&&e.step?parseInt(e.step):1,range:{min:g,max:h},format:{to:function a(b){var c=k.format(b);return j?c:checkSymbol(c,m,l,i)},from:function a(b){return b.replace(",-","")}}};noUiSlider.create(b,n),b.noUiSlider.on("change",function(a,b,d){c({sel:f,label:a[b],value:d[b],max:1==b})})}}};Bose.range=BoseRangeSlider;var Bose=Bose||{},sortingEvents={CHANGE_SORTING:"CHANGE_SORTING",CHANGE_SORTING_EXTERNALLY:"CHANGE_SORTING_EXTERNALLY",HIDED_SORTING:"HIDED_SORTING"};!function(){function a(){return window.innerWidth<768}function b(){v.topNavContainer.style.height="100%"}function c(){v.topNavContainer.style.height=null}function d(a){var b=a.detail.filters;u=i(b),e()}function e(){if(f()){h(),v.selectOption&&v.selectTrigger&&(v.selectTrigger.innerHTML=m(u),v.sortingBoxLabel.innerHTML=o("Sort By"),v.selectOption.innerHTML=n(u),j());var a=new CustomEvent(sortingEvents.HIDED_SORTING,{detail:!1});document.dispatchEvent(a)}else g()}function f(){return u.length>1}function g(){var a=new CustomEvent(sortingEvents.HIDED_SORTING,{detail:!0});document.dispatchEvent(a),null===q||void 0===q||q.classList.add("d-none")}function h(){null===q||void 0===q||q.classList.remove("d-none")}function i(a){var b=null===a||void 0===a?void 0:a.map(function(a){return a.field});return s.filter(function(a){return""===a.field||(null===b||void 0===b?void 0:b.includes(a.field))})}function j(){for(var a=0,b=Array.from(document.querySelectorAll(".".concat(p," .custom-option")));a<b.length;a++){b[a].addEventListener("click",function(){this.classList.contains("selected")||(this.parentNode.querySelector(".".concat(p," .custom-option.selected .bose-icon.bose-icon--checkmark")).classList.remove("bose-icon--checkmark"),this.parentNode.querySelector(".".concat(p," .custom-option.selected")).classList.remove("selected"),document.querySelector(".".concat(p," .sorting-box-label")).textContent=l(this.textContent),this.classList.add("selected"),this.parentNode.querySelector(".".concat(p," .custom-option.selected .icon-space")).classList.add("bose-icon--checkmark"),this.closest(".".concat(p," .custom-select")).querySelector(".".concat(p," .custom-select__trigger span")).textContent=l(this.textContent),k(this.dataset),c())})}}function k(a){var b=new CustomEvent(sortingEvents.CHANGE_SORTING,{detail:a});document.dispatchEvent(b)}function l(a){return window.innerWidth<900&&a.length>15?a.substring(0,15)+"...":a}function m(a){return"<span>".concat(o(a[0].label),"</span><div class='sorting-icon bose-icon bose-icon--chevronDown'></div>")}function n(a){return a.reduce(function(a,b,c){return a+="  <div class='custom-option ".concat(0==c?"selected":"","' data-orientation='").concat(b.orientation,"' data-field='").concat(b.field,"' data-value='").concat(b.value,"'><span class='icon-space bose-icon ").concat(0==c?"bose-icon--checkmark":"","'></span><span class='option-label'>").concat(o(b.label),"</span></div>")},"")}function o(a){try{var b=Bose&&(null===Bose||void 0===Bose?void 0:Bose.Translation)?Bose.Translation:null;if(b)return b.getDictionaryTranslation("product-catalog",a)}catch(b){return a}}var p="sorting-component-container",q=document.querySelector(".".concat(p)),r=q instanceof HTMLElement?q.dataset:{},s=r.sortingOptions?function t(a){return a=a.replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f"),a=a.replace(/[\u0000-\u0019]+/g,""),JSON.parse(a)}(r.sortingOptions):[],u=s,v={sortingBoxLabel:document.querySelector(".".concat(p," .sorting-box .sorting-box-label")),sortingComponentMobile:document.querySelector(".".concat(p," .sorting-component-mobile")),sortingSelectSearch:document.querySelector(".".concat(p," .select.search")),customSelect:document.querySelector(".".concat(p," .custom-select")),selectOption:document.querySelector(".".concat(p," .select.search .custom-options")),selectTrigger:document.querySelector(".".concat(p," .select.search .custom-select__trigger")),topNavContainer:document.querySelector(".".concat(p," .topnav-container")),close:document.querySelector(".".concat(p," .close"))};!function w(){var f,g,h;document.addEventListener(sortingEvents.CHANGE_SORTING_EXTERNALLY,d),null===(f=v.sortingSelectSearch)||void 0===f||f.addEventListener("click",function(){a()||this.querySelector(".custom-select").classList.toggle("open")}),null===(g=v.sortingComponentMobile)||void 0===g||g.addEventListener("click",b),null===(h=v.close)||void 0===h||h.addEventListener("click",c),v.customSelect&&window.addEventListener("click",function(a){var b=v.customSelect;b.contains(a.target)||b.classList.remove("open")}),e()}()}();var Bose=Bose||{},__assign=this&&this.__assign||function(){return __assign=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},__assign.apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))};Bose.ProductCatalogListContainer=function(){function a(a){return a=a.replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f"),a=a.replace(/[\u0000-\u0019]+/g,""),JSON.parse(a)}function b(a){var b;if(a.detail.type==typesOfFilter.rating||a.detail.type==typesOfFilter.checkBox){var c=document.querySelector(".filters-selected-element-container div[data-description='".concat(a.detail.description,"'] "));null===(b=null===c||void 0===c?void 0:c.parentElement)||void 0===b||b.remove()}}function c(a){var b=a.variants.findIndex(function(a){return!0===a.defaultVariant});if(v(a.variants[b])){var c="pro_categories"===db.catalog?a.variants[b].images.mediumImageURL:a.variants[b].images.smallImageURL;return __assign(__assign({},a.variants[b]),{mainImage:c})}return a}function d(a){lb=(null===a||void 0===a?void 0:a.totalArticles)>0?Math.ceil((null===a||void 0===a?void 0:a.totalArticles)/bb):0;var b="<div class='".concat(Ia,"'>");return(null===a||void 0===a?void 0:a.articles)&&(b+=e(a.articles)),b+="</div>"}function e(a){return null===a||void 0===a?void 0:a.reduce(function(a,b,c){return a+="<a href='".concat(b.url,"' class='bose-search-result tracking-click-position'  data-click-type='").concat(Ga.KNOWLEDGE_BASE_RESULT,"' data-position='").concat(c+1,"' >\n      <div class='bose-search-result-title-container'>\n        <label  class='bose-search-result-title'>").concat(b.title,"</label>\n      </div>\n      <div class='bose-search-result-description'>\n        ").concat(b.description,"\n      </div>\n    </a>")},"")}function f(a){var b="";return a.proCTAUrl&&(b+='<div class="bose-technicalInfo__button"><a href="'+a.proCTAUrl+'" role="button" class="bose-buttonLink bose-buttonLink--type1 bose-buttonLink bose-buttonLink--fontWeightNormal -withBorder" title="Technical Info" target="_blank"><span class="  bose-design2020__label">'+db.proCtaLabel+"</span></a></div>"),b}function g(a){var b=j();return a.reduce(function(a,d,e){var g=c(d),j=b&&b.find(function(a){return d.code===a})?i(d.code):h(d),o=JSON.stringify(k(d,g)),r=xa("categoryname_"+d.categories[0].code);r=r.toLowerCase().includes("speakers")||r.toLowerCase().includes("headphones")||r.toLowerCase().includes("frames")?r:r.toLowerCase().includes("wellness")?"Headphones":r.toLowerCase().includes("outlet")?"Speakers":r.toLowerCase().includes("audio sunglasses")?"Frames":"";var s=JSON.stringify({name:g.code}),t=Da===Fa.PRODUCTS.label
;return a+="\n    <div class='bose-productDrawer__resultContainer__result bose-productTile2020__noBorder'>\n    <div class='bose-productTile2020 bose-productTile2020--default' data-commerce='"+o+"' data-tracking-info="+s+" data-category='"+r+"' data-product-code='".concat(d.code,"' data-tracking-done='true'>\n      <div class='bose-productTile2020__inner'>\n        <div class='bose-productTile2020__imageWrapper light-grey'>\n"+(mb?j:"")+" <a class='bose-productTile2020__imageWrapper-body js-imageWrapperLink tracking-click-position pc-").concat(d.code," href-to-change' data-click-type='").concat(t?Ga.PRODUCT_RESULT:Ga.ACCESSORY_RESULT,"' data-position='").concat(e+1,"' href='").concat(g.url,"' title='").concat(xa(g.name),"' >\n            <img class='bose-productTile2020__imageWrapper__image lazyloaded pc-").concat(d.code," src-to-change' data-src='").concat(g.mainImage,"' alt='").concat(xa(g.name),"' aria-label='").concat(xa(g.name),"' title='").concat(xa(g.name),"' src='").concat(g.mainImage,"'>\n         </a>\n          <div class='product-tile-colors-variant-container'>\n            ").concat(u(d,g.code),"\n          </div>\n        </div>\n        <div class='bose-productTile2020__info'>\n          <div class='bose-productTile2020__info__wrapper'>\n             <a class='bose-productTile2020__info__wrapper-link pc-").concat(d.code," tracking-click-position href-to-change' data-click-type='").concat(t?Ga.PRODUCT_RESULT:Ga.ACCESSORY_RESULT,"' data-position='").concat(e+1,"' href='").concat(g.url,"' title='").concat(xa(g.name),"' >\n              <div class='bose-productStatus bose-productStatus--hide bose-productTile2020__info__productStatus' style='display: none;'>\n                <div aria-hidden='true' class='bose-productStatus__container js-productStatusContainer'></div>\n                <div class='bose-screenReaderText'><span style='display: none;'></span> ").concat(g.name,"</div>\n             </div>\n              <div class='product-tile-product-status-container product-status-to-change'>\n                ").concat(n(d.variants),"\n              </div>\n\n              <div class='bose-productTile2020__info-body'>\n                <div id='ariaButtonLabelID' class='bose-title bose-title--product bose-productTile2020__info__title'>\n                  <p class='bose-title__link js-productTitle__link'>\n                    ").concat(g.name,"\n                  </p>\n                </div>\n              <p class='bose-productTile2020__info__description' aria-label='").concat(xa(l(d)),"'>\n                  ").concat(xa(l(d)),"\n                </p>\n                <div class='bose-productTile2020__info__userPref'>\n                  <div class='bose-productTile2020__priceWrapper'>\n                  </div>\n                  <div class='product-tile-price-container'>\n                    ").concat(q(d.variants),"\n                  </div>\n                  ").concat(m(d.variants,d.code),"\n                </div>\n              </div>\n            </a>\n            ").concat(f(d),"").concat(p(d),"\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>")},"")}function h(a){var b="";return a.addToCompareEnabled&&(b='<div class="bose-productTile2020__addToCompare">\n  <div data-info="null" role="checkbox" tabindex="0" aria-checked="false" aria-required="false" class="bose-checkbox bose-productTile2020__checkBox">\n    <input class="bose-checkbox__input bose-checkbox__input--hidden" type="hidden" name="compare" value="" />\n    <input data-info="{&quot;field&quot;:&quot;null&quot;, &quot;type&quot;:&quot;checkbox&quot;}" class="bose-checkbox__input js-productTile2020__checkBox" name="compareCheck" id="'+a.code+'" type="checkbox" value="false" data-initialized="true" />\n    <label class="bose-checkbox__label" for="'+a.code+'">\n      <span class="bose-checkbox__icon"></span>\n      <span class="bose-screenReaderText">'+xa("Add to compare")+'</span>\n      <span class="bose-checkbox__text">'+xa("Compare")+"</span>\n    </label>\n  </div>\n</div>"),b}function i(a){return'<div class="bose-productTile2020__addToCompare checked">\n  <div data-info="null" role="checkbox" tabindex="0" aria-checked="true" aria-required="false" class="bose-checkbox bose-productTile2020__checkBox">\n    <input class="bose-checkbox__input bose-checkbox__input--hidden" type="hidden" checked name="compare" value="">\n    <input data-info="{&quot;field&quot;:&quot;null&quot;, &quot;type&quot;:&quot;checkbox&quot;}" class="bose-checkbox__input js-productTile2020__checkBox" name="compareCheck" id="'+a+'" type="checkbox" value="true" checked data-initialized="true">\n    <label class="bose-checkbox__label" for="'+a+'">\n      <span class="bose-checkbox__icon"></span>\n      <span class="bose-screenReaderText">'+xa("Remove from compare")+'</span>\n      <span class="bose-checkbox__text">'+xa("Compare")+"</span>\n    </label>\n  </div>\n</div>"}function j(){if(Bose&&Bose.WebStorage&&Bose.WebStorage.getData("productComparisonDrawer","sessionStorage"))try{return JSON.parse(Bose.WebStorage.getData("productComparisonDrawer","sessionStorage")).map(function(a){return a&&a.id?a.id:""})}catch(a){}return[]}function k(a,b){return{productStatus:a.stockStatus?a.stockStatus.value:"",mainproduct:a.code,color:b.color,variants:a.variants.map(function(a){a.code,a.category,a.sku}).join(","),type:a.type,name:b.code,category:a.categories[0].code,sku:b.sku}}function l(a){var b=a.categories.find(function(a){return a.name});return(null===b||void 0===b?void 0:b.name)?b.name:""}function m(a,b){if(Ea)return"";var c="";return a.forEach(function(a,d){var e=0===d?"bose-productStockMessage--show":"bose-productStockMessage--hide";a.stockStatus&&"IN_STOCK"!==a.stockStatus&&rb.headerContainer&&!0!==$jq(rb.headerContainer).data("hide-stock-status")&&(c+="\n     <div class='bose-productTile2020__infoNewCTABadge bose-productTile2020__infoNewCTABadgeLarge -stockOut "+e+" ' data-product-code='"+b+"' data-variant-code='"+a.code+"'>\n         <div class='bose-productTile2020__info__ctaFeatures__tileMessage'>\n           <div class='bose-productTile2020__info__ctaFeatures__messageLabel' aria-label='".concat(xa(a.stockStatus),"'>\n          <span>").concat(xa(a.stockStatus),"</span>\n          </div>\n        </div>\n      </div>"))}),c}function n(a){var b="";return a.forEach(function(a,c){var d=0===c?"":"hide";a.productStatus&&a.productStatus.value&&a.formattedPrice!=a.formattedPromotionalPrice&&(b+="\n      <div class='bose-productStatus bose-productTile2020__info__productStatus "+d+"'>\n        <div aria-hidden='true' class='bose-productStatus__container js-productStatusContainer'>\n          ".concat(xa(a.productStatus.value),"\n        </div>\n        <div class='bose-screenReaderText'>\n           <span style='display: inline;'> ").concat(xa(a.productStatus.value),"</span>\n          ").concat(xa(a.name),"\n        </div>\n      </div>"))}),b}function o(a){return a.productStatus&&a.productStatus.value?"\n      <div class='bose-productStatus bose-productTile2020__info__productStatus' style='display: block;'>\n        <div aria-hidden='true' class='bose-productStatus__container js-productStatusContainer'>\n          ".concat(xa(a.productStatus.value),"\n        </div>\n        <div class='bose-screenReaderText'>\n           <span style='display: inline;'> ").concat(xa(a.productStatus.value),"</span>\n          ").concat(xa(a.name),"\n        </div>\n      </div>"):""}function p(a){return a.refurbishedOption&&a.refurbishedOption.formattedPrice&&a.refurbishedOption.url?"\n      <a class='bose-productTile2020__secondChance' href='".concat(a.refurbishedOption.url,"'>\n        <p class='bose-productTile2020__secondChance__link'>\n            <span class='bose-productTile2020__secondChance__link-text'>").concat(xa("Refurbished"),"</span>\n        </p>\n         <span class='bose-productTile2020__secondChance__priceDescription'>").concat(xa("from")," ").concat(a.refurbishedOption.formattedPrice,"</span>\n     </a>"):""}function q(a){if(Ea)return"";var b="";return a.forEach(function(a,c){var d=a.defaultVariant?"":"hide",e=a.hideStrikeThroughPrice?"hide":"";a.formattedPrice&&(b+="\n      <p class='"+a.code+" bose-productPriceSummary bose-productTile2020__info__price "+d+"'>\n        ".concat(a.formattedPromotionalPrice&&a.formattedPrice!=a.formattedPromotionalPrice?"<span class='bose-screenReaderText'>".concat(xa("ORIGINAL_PRICE")," ").concat(a.formattedPrice,"</span>\n          <span class='bose-productPriceSummary__price bose-productPriceSummary__price--original "+e+"' data-price='").concat(a.price,"' aria-hidden='true'>").concat(a.formattedPrice,"</span>\n          <span class='bose-screenReaderText'>").concat(xa("CURRENT_PRICE")," ").concat(a.formattedPromotionalPrice,"</span>\n          <span class='bose-productPriceSummary__price js-productPriceSummary__price' data-price='").concat(a.promotionalPrice,"' aria-hidden='true'>").concat(a.formattedPromotionalPrice,"</span>"):"<span class='bose-screenReaderText'>Price ".concat(a.formattedPrice,"</span>\n          <span class='bose-productPriceSummary__price js-productPriceSummary__price' data-price='").concat(a.price,"'>").concat(a.formattedPrice,"</span>"),"\n      </p>"))}),b}function r(){for(var a=document.querySelectorAll(".tracking-click-position"),b=0;b<a.length;b++)a[b].addEventListener("click",function(){Bose&&Bose.WebStorage&&Bose.WebStorage.storeData(qb,JSON.stringify({position:this.dataset.position,isSearchSuggestions:!1,channel:nb,catalog:pb,language:ob}),"localStorage")})}function s(){for(var a=document.querySelectorAll(".bose-color-variant "),b=0;b<a.length;b++)a[b].addEventListener("mouseenter",function(){if(!this.classList.contains("bose-colorIndicator__color--default")){var a=this.parentNode.parentNode;document.querySelector(".pc-".concat(this.dataset.productCode," .src-to-change")).setAttribute("src",this.dataset.imageUrl);var b=this.dataset.productStatus?{name:this.dataset.productName,productStatus:{value:this.dataset.productStatus}}:{};document.querySelector(".pc-".concat(this.dataset.productCode," .product-tile-product-status-container")).innerHTML=o(b),document.querySelector(".pc-".concat(this.dataset.productCode," .src-to-change")).setAttribute("src",this.dataset.imageUrl),a.querySelector(".".concat(Va," .bose-colorIndicator__color--default")).classList.remove("bose-colorIndicator__color--default"),this.classList.add("bose-colorIndicator__color--default")}})}function t(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return(null===(b=a.color)||void 0===b?void 0:b.hexadecimalCodes.indexOf(","))>-1&&"Combination"===a.color.colorGroup?"style='background-color: ".concat(null===(d=null===(c=a.color)||void 0===c?void 0:c.hexadecimalCodes)||void 0===d?void 0:d.split(",")[0],";background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, ").concat(null===(e=a.color)||void 0===e?void 0:e.hexadecimalCodes.split(",")[0],"), color-stop(50%, ").concat(null===(f=a.color)||void 0===f?void 0:f.hexadecimalCodes.split(",")[0],"), color-stop(51%, ").concat(null===(g=a.color)||void 0===g?void 0:g.hexadecimalCodes.split(",")[1],"));background: -moz-linear-gradient(-45deg,").concat(null===(h=a.color)||void 0===h?void 0:h.hexadecimalCodes.split(",")[0]," 0%,").concat(null===(i=a.color)||void 0===i?void 0:i.hexadecimalCodes.split(",")[0]," 50%,").concat(null===(j=a.color)||void 0===j?void 0:j.hexadecimalCodes.split(",")[1]," 51%);background: -webkit-linear-gradient(-45deg,").concat(null===(k=a.color)||void 0===k?void 0:k.hexadecimalCodes.split(",")[0]," 0%,").concat(null===(l=a.color)||void 0===l?void 0:l.hexadecimalCodes.split(",")[0]," 50%,").concat(null===(m=a.color)||void 0===m?void 0:m.hexadecimalCodes.split(",")[1]," 51%);background: -o-linear-gradient(-45deg,").concat(null===(n=a.color)||void 0===n?void 0:n.hexadecimalCodes.split(",")[0]," 0%,").concat(null===(o=a.color)||void 0===o?void 0:o.hexadecimalCodes.split(",")[0]," 50%,").concat(null===(p=a.color)||void 0===p?void 0:p.hexadecimalCodes.split(",")[1]," 51%);background: -ms-linear-gradient(-45deg,").concat(null===(q=a.color)||void 0===q?void 0:q.hexadecimalCodes.split(",")[0]," 0%,").concat(null===(r=a.color)||void 0===r?void 0:r.hexadecimalCodes.split(",")[0]," 50%,").concat(null===(s=a.color)||void 0===s?void 0:s.hexadecimalCodes.split(",")[1]," 51%);background: linear-gradient(-45deg,").concat(null===(t=a.color)||void 0===t?void 0:t.hexadecimalCodes.split(",")[0]," 0%,").concat(null===(u=a.color)||void 0===u?void 0:u.hexadecimalCodes.split(",")[0]," 50%,").concat(null===(v=a.color)||void 0===v?void 0:v.hexadecimalCodes.split(",")[1]," 51%);"):"style='background-color: ".concat(null===(w=a.color)||void 0===w?void 0:w.hexadecimalCodes,";'")}function u(a,b){return!a.variants||0===a.variants.length||Ea?"":a.variants.reduce(function(c,d){var e,f,g;return d.color||(d.color=d.masterProductVariant?d.masterProductVariant.color:null),c+=v(d)?"\n    <li>\n     <a class='bose-color-variant bose-colorIndicator__color bose-colorIndicator__color--variant bose-productTile2020__colorIndicator2020 ".concat(d.code===b?"bose-colorIndicator__color--default":"","' href='").concat(d.url,"' data-product-code='").concat(a.code,"' data-variant-url='").concat(d.url,"' data-variant-code='").concat(d.code,"' ").concat(d.productStatus&&d.productStatus.value?"data-product-status='".concat(d.productStatus.value,"'"):""," data-image-url='").concat(null===(e=d.images)||void 0===e?void 0:e.smallImageURL,"' data-name='").concat(d.name,"' title='").concat(xa(null===(f=d.color)||void 0===f?void 0:f.description),"' data-tracking-event='product-click' >\n      <span class='bose-colorIndicator__color--colorVariant' ").concat(t(d),"'></span>\n        <span class='bose-screenReaderText'>").concat(xa(null===(g=d.color)||void 0===g?void 0:g.description),"</span>\n      </a>\n    </li>"):""},"<ul class='bose-colorIndicator bose-productTile2020__info__userPref__colors bose-productTile2020__colorIndicator bose-dynamicProductTile2020__colorIndicator' title='".concat(xa("Available colors"),"' aria-label='").concat(xa("Available colors"),"' data-size='").concat(a.variants.length,"'>"))+" </ul>"}function v(a){return a&&a.images&&a.images.smallImageURL&&a.url&&a.name&&a.code&&(a.color&&a.color.hexadecimalCodes&&a.color.description||a.masterProductVariant)}function w(){for(var a="",b=document.querySelectorAll(".filters-selected-element-container"),c=0;c<b.length;c++)b[c].remove();gb&&gb.size>0?rb.searchDesktopSecondRow.classList.remove(Ua):rb.searchDesktopSecondRow.classList.add(Ua),gb.forEach(function(b){for(var c=0,d=b;c<d.length;c++){var e=d[c];document.querySelector(".filters-selected-element[data-description='".concat(e.description,"']"))||(a+="\n          <div class='filters-selected-element-container'>\n            <div class='filters-selected-element' data-type='".concat(e.type,"' data-max='").concat(e.max,"' data-description='").concat(e.description,"' data-value='").concat(e.value,"' data-field='").concat(e.field,"'>\n              ").concat(xa(e.description),"\n              <span class='close'>\n                <span class='bose-icon bose-icon--close'>\n                </span>\n              </span>\n            </div>\n          </div>"))}}),document.querySelector(".filters-selected-container").innerHTML+=a,y()}function x(){y(),M()}function y(){var a=document.querySelector(".search-desktop-content-third-row");0!=rb.searchDesktopSecondRow.getBoundingClientRect().height&&Pa<document.querySelector(".filters-selected-container").getBoundingClientRect().height?(a.classList.remove(Ua),rb.searchDesktopSecondRow.classList.contains(Ra)||(rb.dividerLabel.textContent=xa(Na),rb.dividerIcon.classList.remove(Xa),rb.dividerIcon.classList.add(Wa))):a.classList.contains(Ua)||a.classList.add(Ua)}function z(){document.querySelector(".filters-selected-clear").addEventListener("click",function(a){B(),rb.searchDesktopSecondRow.classList.remove(Ra);var b=new CustomEvent(filteringEvents.RESET_FILTERS_EXTERNALLY,{detail:Da});document.dispatchEvent(b)});for(var a=document.querySelectorAll(".filters-selected-container .close"),b=0;b<a.length;b++)a[b].addEventListener("click",function(a){if(this.parentElement.dataset.type==typesOfFilter.rating||this.parentElement.dataset.type==typesOfFilter.checkBox)"none"==window.getComputedStyle(rb.filteringDesktop).display?(document.querySelector(".filtering-mobile-content input[data-description='".concat(this.parentElement.dataset.description,"'] ")).click(),document.querySelector(".button--filtering-apply").click()):document.querySelector(".filtering-desktop input[data-description='".concat(this.parentElement.dataset.description,"'] ")).click();else if(this.parentElement.dataset.type==typesOfFilter.rangeSlider){var b=document.querySelector(".filtering-desktop div[data-field='".concat(this.parentElement.dataset.field,"'] .range-slider-simple .slider"));A(b,this.parentElement.dataset)}else this.parentElement.dataset.type==typesOfFilter.radio&&(document.dispatchEvent(new CustomEvent(filteringEvents.CLEAR_FILTER,{detail:{field:this.parentElement.dataset.field}})),document.querySelector(".button--filtering-apply").click())})}function A(a,b){var c,d=[null,null];d="true"===b.max?[null,a.querySelector(".noUi-handle-upper").ariaValueMax]:[a.querySelector(".noUi-handle-lower").ariaValueMin,null],a.noUiSlider.set(d),P(b),hb=D(da(Da),gb),G(hb,jb,null,gb),Z(hb),ea(hb);var e=document.querySelector(".filters-selected-element-container div[data-max='".concat(b.max,"'][data-field='").concat(b.field,"'][data-type='").concat(b.type,"'] "));null===(c=null===e||void 0===e?void 0:e.parentElement)||void 0===c||c.remove(),w(),z()}function B(){ya&&(gb.clear(),w(),F(gb,[],{}))}function C(a,b){a&&a.detail&&a.detail.field&&hb&&(b?O(a.detail):P(a.detail))}function D(a,b){return Da===Fa.HELP_CONTENTS.label?a:E(null===a||void 0===a?void 0:a.filter(function(a){return S(a,b)}))}function E(a){var b;return ib&&ib.detail.field&&a?null===(b=null===a||void 0===a?void 0:a.slice())||void 0===b?void 0:b.sort(function(a,b){return Y(a,b,ib)}):ib&&a?a.sort(function(a,b){return da(Da).indexOf(a)-da(Da).indexOf(b)}):a}function F(a,b,c){jb=b,hb=D(da(Da),a),G(hb,b,c,gb),Z(hb),ea(hb)}function G(a,b,c,d){null===b||void 0===b||b.forEach(function(b){var e=b.field,f=b.type,g=0!==d.size&&null!=c&&(null===c||void 0===c?void 0:c.field)===e&&(null===c||void 0===c?void 0:c.type)===f;b.type===typesOfFilter.rangeSlider?L(a,b,d):b.type!==typesOfFilter.rangeSlider&&b.options&&!g&&b.options.forEach(function(c){var g,h=0===d.size||1===d.size&&d.has(e),i=c.description,j=c.label,k=b.type==typesOfFilter.rating?"[data-value-from='".concat(c.from,"'][data-value-to='").concat(c.to,"']"):"[data-value='".concat(j,"']"),l=document.querySelector(".".concat(Va," [data-field='").concat(e,"'] ").concat(k,"[data-description='").concat(i,"']")),m=l?l.parentElement:"";if((a.find(function(a){return R(a,{field:e,type:f,description:i,value:j})})||h)&&m&&a.length>1){m.classList.remove(Qa);var n=document.querySelector(".filters-selected-element-container [data-field='".concat(e,"'][data-description='").concat(i,"'][data-value='").concat(j,"']"));null===(g=null===n||void 0===n?void 0:n.classList)||void 0===g||g.remove(Qa)}else m&&(a.length>1||1===a.length&&!d.has(c.field))&&(null!==m.children[0]&&m.children[0].checked?H(m,e,i,j):I(m,e,i,j))})}),K(a,d,c)}function H(a,b,c,d){a.classList.contains(Qa)&&a.classList.remove(Qa)}function I(a,b,c,d){var e,f;a.classList.contains(Qa)||a.classList.add(Qa);var g=document.querySelector(".filters-selected-element-container [data-field='".concat(b,"'][data-description='").concat(c,"'][data-value='").concat(d,"']"));(null===(e=null===g||void 0===g?void 0:g.classList)||void 0===e?void 0:e.contains(Qa))||null===(f=null===g||void 0===g?void 0:g.classList)||void 0===f||f.add(Qa)}function J(){return window.matchMedia("(max-width: 767.95px)").matches}function K(a,b,c){if(a&&!a.articles){var d=null!=c?a.filter(function(a){return R(a,c)}):a,e=[];b.forEach(function(a,b){a.forEach(function(a){Q(c,a)||e.push(a)})}),e.forEach(function(a,f){var g=e.slice();g.splice(f,1);var h=!1;if(g.forEach(function(a){d.find(function(b){return R(b,a)})&&(h=!0)}),g.length>0&&!h&&a.field!==c.field&&b.size>1){var i=a.description,j=a.value,k=a.field,l=a.from,m=a.to;if(a.type===typesOfFilter.rangeSlider){var n=document.querySelector(".filtering-desktop div[data-field='".concat(k,"'][data-description='").concat(i,"'] .range-slider-simple .slider"));null===n||void 0===n||n.setAttribute("disabled",!0)}else if(a.type!==typesOfFilter.rangeSlider){var o=a.type==typesOfFilter.rating?"[data-value-from='".concat(l,"'][data-value-to='").concat(m,"']"):"[data-value='".concat(j,"']"),p=document.querySelector(".".concat(Va," [data-field='").concat(k,"'] ").concat(o,"[data-description='").concat(i,"']")),q=p.parentElement;I(q,k,i,j)}}})}}function L(a,b,c){var d,e,f=b.field,g=b.type,h=b.description,i=document.querySelector(".filtering-desktop div[data-field='".concat(f,"'][data-description='").concat(h,"'] .range-slider-simple .slider"));if(a&&a.length>0&&c.size>0){var j,k;if(j=k=parseInt(T(a[0],f)),a.forEach(function(a){var b=parseInt(T(a,f));j>b&&(j=b),k<b&&(k=b)}),a&&a.length>0&&!c.has(f)&&Number.isInteger(j)&&Number.isInteger(k)&&j!=k){i.removeAttribute("disabled");var l={start:[j,k],range:{min:j,max:k},step:1};null===(d=null===i||void 0===i?void 0:i.noUiSlider)||void 0===d||d.updateOptions(l)}else!a||c.has(f)||a&&j!=k&&Number.isInteger(j)&&Number.isInteger(k)||(null===i||void 0===i||i.setAttribute("disabled",!0),document.querySelectorAll(".filters-selected-element-container [data-field='".concat(f,"'][data-type='").concat(g,"']")).forEach(function(a){var b,c;return(null===(b=null===a||void 0===a?void 0:a.classList)||void 0===b?void 0:b.contains(Qa))?null:null===(c=null===a||void 0===a?void 0:a.classList)||void 0===c?void 0:c.add(Qa)}))}else if(a&&0===a.length&&!c.has(f))null===i||void 0===i||i.setAttribute("disabled",!0),document.querySelectorAll(".filters-selected-element-container [data-field='".concat(f,"'][data-type='").concat(g,"']")).forEach(function(a){var b,c;return(null===(b=null===a||void 0===a?void 0:a.classList)||void 0===b?void 0:b.contains(Qa))?null:null===(c=null===a||void 0===a?void 0:a.classList)||void 0===c?void 0:c.add(Qa)});else if(a&&a.length>0){var m,n,o=da(Da);m=n=parseInt(T(o[0],f)),o.forEach(function(a){var b=parseInt(T(a,f));(isNaN(m)||m>b)&&!isNaN(b)&&(m=b),(isNaN(n)||n<b)&&!isNaN(b)&&(n=b)}),i.removeAttribute("disabled");var l={start:[m,n],range:{min:m,max:n},step:1};null===(e=null===i||void 0===i?void 0:i.noUiSlider)||void 0===e||e.updateOptions(l)}}function M(){J()?document.querySelectorAll(".".concat(Va," .").concat(Ja," .").concat(Ma)).forEach(function(a){a.classList.remove(Ma),a.classList.add(La)}):document.querySelectorAll(".".concat(Va," .").concat(Ja)).forEach(function(a,b){b<5?(a.classList.contains(Ma)&&a.classList.remove(Ma),a.classList.contains(La)||a.classList.add(La)):(a.classList.contains(La)&&a.classList.remove(La),a.classList.contains(Ma)||a.classList.add(Ma))})}function N(a){if(a.type===typesOfFilter.rangeSlider||a.type===typesOfFilter.radio)return!0;if(a.type===typesOfFilter.checkBox||a.type===typesOfFilter.rating){var b=!1;return gb.forEach(function(c){for(var d=0,e=c;d<e.length;d++){var f=e[d];if(a.type===f.type&&a.field===f.field&&a.value===f.value&&a.description===f.description){b=!0;break}}}),b}Z(a),ea(a)}function O(a){N(a)&&P(a),gb.has(a.field)?gb.set(a.field,__spreadArray(__spreadArray([],gb.get(a.field),!0),[a],!1)):gb.set(a.field,[a])}function P(a){if(gb.has(a.field)){var b=gb.get(a.field),c=[];c=a.type===typesOfFilter.rangeSlider?b.filter(function(b){return b.type!==a.type||b.field===a.field&&b.type===a.type&&b.max!=JSON.parse(a.max)}):a.type===typesOfFilter.radio?b.filter(function(b){return b.field!=a.field}):b.filter(function(b){return!Q(a,b)}),c.length>0?gb.set(a.field,c):gb.delete(a.field)}}function Q(a,b){return a&&b&&a.type===b.type&&a.field===b.field&&a.description===b.description}function R(a,b){var c=T(a,b.field);return b.type===typesOfFilter.rangeSlider?U(c,b,b.max?"smallerOrEquals":"biggerOrEquals"):b.type===typesOfFilter.rating?U(c,b,"between"):V(c,b)}function S(a,b){var c=!0;return b.forEach(function(b){for(var d=!1,e=0,f=b;e<f.length;e++){var g=f[e];if(!(d=R(a,g))&&g.type===typesOfFilter.rangeSlider)break;if(d&&g.type!==typesOfFilter.rangeSlider)break}if(!d)return void(c=!1)}),c}function T(a,b){if("price"===b){var c=va(a,"promotionalPrice");if(c)return c}return va(a,b)}function U(a,b,c){return!Array.isArray(a)&&("biggerOrEquals"===c?a>=b.value:"smallerOrEquals"===c?a<=b.value:"between"===c?b.value.from<=a&&b.value.to>a:void 0)}function V(a,b){var c=wa(b.value);if(Array.isArray(a)){return-1!=a.findIndex(function(a){return"string"==typeof a&&"string"==typeof c?a.toLowerCase()==c.toLowerCase():a===c})}return"boolean"==typeof a&&(a=String(a)),"string"==typeof a&&"string"==typeof c?a.toLowerCase()===c.toLowerCase():a&&a===c}function W(a){ib=a,ea(D(da(Da),gb))}function X(a){a&&a.detail?rb.filteringMobile.classList.add(Ta):rb.filteringMobile.classList.remove(Ta)}function Y(a,b,c){var d=T(a,c.detail.field),e=T(b,c.detail.field);return d&&e?"smaller"===c.detail.orientation?d-e:e-d:d||e?d?-1:1:0}function Z(a){var b="0",c="0";Da===Fa.HELP_CONTENTS.label?(b=za,c=a.articles.length):(b=null===a||void 0===a?void 0:a.length,c=null===a||void 0===a?void 0:a.length),0==gb.size&&rb.numberResults.forEach(function(a){a.innerHTML=b}),rb.displayedNumberResults.forEach(function(a){a.innerHTML=c})}function _(a){var b;null===(b=rb.searchTerm)||void 0===b||b.forEach(function(b){return b.innerHTML=aa(a)})}function aa(a){var b=document.createElement("div"),c=document.createTextNode(a);return b.appendChild(c),b.innerHTML}function ba(){for(var a in Fa){var b=da(Fa[a].label);(ca(a,b)||b&&0===b.length)&&document.querySelectorAll("div[data-value='".concat(Fa[a].label,"'] ")).forEach(function(a){return a.classList.add("disabled")})}}function ca(a,b){return"HELP_CONTENTS"===a&&(null===b||void 0===b?void 0:b.articles)&&0===(null===b||void 0===b?void 0:b.articles.length)}function da(a){if(rb.productsContainer){if(fb)return ya[Fa.PRODUCTS.label]?ya[Fa.PRODUCTS.label]:[];switch(a){case Fa.PRODUCTS.label:return ya[Fa.PRODUCTS.label]?ya[Fa.PRODUCTS.label].filter(function(a){return"Product"===a.type}):[];case Fa.HELP_CONTENTS.label:return ya[a]?ya[a]:[];case Fa.ACCESSORIES.label:return ya[Fa.PRODUCTS.label]?ya[Fa.PRODUCTS.label].filter(function(a){return"Accessory"===a.type}):[];case Fa.GENERAL.label:return ya[a]?ya[a]:[];default:return[]}}}function ea(a){if(rb.productsContainer){switch(Da){case Fa.ACCESSORIES.label:case Fa.PRODUCTS.label:rb.productsContainer.innerHTML=g(a),s();break;case Fa.HELP_CONTENTS.label:rb.productsContainer.innerHTML=d(a);break;default:rb.productsContainer.innerHTML=""}r()}}function fa(a){if(a.detail&&a.detail.value){var b=new CustomEvent(filteringEvents.CHANGE_FILTERS_EXTERNALLY,{detail:a.detail.value});B(),ib=null,document.dispatchEvent(b),Da=a.detail.value,hb=D(da(Da),gb),ea(hb),Z(hb),pa(),ga()}}function ga(){try{$jq(".search-scroll-check").waypoint({handler:function a(b){ha(b)},offset:"bottom-in-view"})}catch(a){}}function ha(a){"down"===a&&kb<lb&&(ia(!0,!0),kb++,fetch("".concat(Ba).concat($a).concat(Aa).concat(_a).concat(kb).concat(ab).concat(bb)).then(function(a){return a.text()}).then(function(a){var b,c=JSON.parse(a);if(null===c||void 0===c?void 0:c.articles){var d=$jq(document).scrollTop();null===(b=$jq(".".concat(Ia)))||void 0===b||b.append(e(c.articles)),$jq("html,body").scrollTop(d-200),$jq(".number-displayed-results").text(parseInt($(".number-displayed-results").html())+c.articles.length),setTimeout(function(){$.waypoints("refresh")},10),ia(!1,!0)}}))}function ia(a,b){var c,d,e;if(null===(c=document.querySelectorAll(".".concat(Va," .").concat(Ya)))||void 0===c||c.forEach(function(b){return a?b.classList.add(Za):b.classList.remove(Za)}),null===(d=document.querySelectorAll(".".concat(Va," .collapsible-selector")))||void 0===d||d.forEach(function(b){return a?b.classList.add(Za):b.classList.remove(Za)}),null===(e=document.querySelectorAll(".".concat(Va," button")))||void 0===e||e.forEach(function(b){return a?b.classList.add(Za):b.classList.remove(Za)}),rb.sidebar.style.opacity=a?"0.3":null,a?rb.sidebar.classList.add(Za):rb.sidebar.classList.remove(Za),rb.firstRow.style.opacity=a?"0.3":null,a?rb.firstRow.classList.add(Za):rb.firstRow.classList.remove(Za),b)a?$(".".concat(Ia)).append("<div class='loading-banner support-loading'><div class='loading'></div></div>"):$(".loading-banner.support-loading")&&$(".loading-banner.support-loading").remove();else{var f=document.querySelector(".search-desktop-content").getBoundingClientRect(),g=document.querySelector(".loading-banner");g&&g.classList&&(a&&g.classList?g.classList.remove(Sa):g.classList.add(Sa),a&&g.classList?g.style.left="".concat(f.left,"px"):g.style.left=null,a&&g.classList?g.style.top="".concat(f.top,"px"):g.style.top=null)}}function ja(a){ia(!0,!1),B(),w(),ia(!1,!1),ra()}function ka(a){if(ia(!0,!1),a.detail.length>0){for(var b=0,c=a.detail;b<c.length;b++){O(c[b])}w(),F(gb,a.detail.otherFilters,a.detail.lastFilterSelected),z()}ia(!1,!1)}function la(a){if(a&&a.detail){var b=new Map;a.detail.tempFiltersSelected.forEach(function(a){b.has(a.field)?b.set(a.field,__spreadArray([a],b.get(a.field),!0)):b.set(a.field,[a])});G(D(da(Da),b),a.detail.otherFilters,a.detail.lastFilterSelected,b)}}function ma(a){ia(!0,!1),a.detail&&(C(a,!0),w(),F(gb,a.detail.otherFilters,a.detail.lastFilterSelected),z()),ia(!1,!1)}function na(a){if(ia(!0,!1),a.detail.length>0){for(var b=0,c=a.detail;b<c.length;b++){var d=c[b];gb.has(d.field)&&P(d)}w(),F(gb,a.detail.otherFilters,a.detail.lastFilterSelected),z()}ia(!1,!1)}function oa(a){ia(!0,!1),a.detail&&(C(a,!1),w(),F(gb,a.detail.otherFilters,a.detail.lastFilterSelected),b(a),z()),ia(!1,!1)}function pa(){Object.keys(Fa).forEach(function(a){Fa[a].label===Da&&rb.filteringMobile&&rb.sortingArea&&(Fa[a].filtering?rb.filteringAreaSidebar.classList.remove(Sa):rb.filteringAreaSidebar.classList.add(Sa),rb.filteringMobile.classList.contains(Sa)?rb.sortingComponentMobile.classList.add(Ta):rb.sortingComponentMobile.classList.remove(Ta),Fa[a].sorting?rb.sortingArea.classList.remove(Sa):rb.sortingArea.classList.add(Sa),rb.filteringMobile.classList.contains(Sa)&&!Fa[a].sorting?rb.sidebar.classList.contains(Ka)||rb.sidebar.classList.add(Ka):rb.sidebar.classList.contains(Ka)&&rb.sidebar.classList.remove(Ka))})}function qa(a){rb.searchDesktopSecondRow.classList.contains(Ra)?(rb.searchDesktopSecondRow.classList.remove(Ra),rb.dividerLabel.textContent=xa(Na),rb.dividerIcon.classList.remove(Xa),rb.dividerIcon.classList.add(Wa)):(rb.searchDesktopSecondRow.classList.add(Ra),rb.dividerLabel.textContent=xa(Oa),rb.dividerIcon.classList.remove(Wa),rb.dividerIcon.classList.add(Xa))}function ra(){var a=Bose.Utils.getParameterByName("filters").split(",")||[],b=Bose.Utils.getParameterByName("range").split(",")||[];a.length>0&&a.forEach(function(a){var b=$jq('input[data-value="'+a.replace(/-/g," ")+'"]');b.trigger("click"),b.closest(".collapsible-container").find(".collapsible-selector").hasClass("collapsed")&&b.closest(".collapsible-container").find(".collapsible").trigger("click")}),b.length>0&&document.querySelector(".slider").noUiSlider.set([b[0],b[1]])}function sa(){var b;Ca=db.searchUrl,ya=db.searchData?a(db.searchData):null,Ba=db.searchSupportUrl?db.searchSupportUrl:"",Ea="true"==db.isSupportPage,Aa=db.term?db.term:"",Da=db.selectedType?db.selectedType:"",za=null===(b=null===ya||void 0===ya?void 0:ya.helpContents)||void 0===b?void 0:b.totalArticles;try{gb=new Map}catch(a){gb=[]}ya&&eb&&(document.addEventListener(sortingEvents.CHANGE_SORTING,W),document.addEventListener(sortingEvents.HIDED_SORTING,X),document.addEventListener(filteringEvents.CHANGE_FILTERS,ta),
document.addEventListener(filteringEvents.CHANGE_FILTERS_WITHOUT_CHANGING_DATA,la),document.addEventListener(filteringEvents.RESET_FILTERS,ja),document.addEventListener(filteringEvents.SELECT_FILTERS,ka),document.addEventListener(filteringEvents.SELECT_FILTER,ma),document.addEventListener(filteringEvents.UNSELECT_FILTERS,na),document.addEventListener(categoryEvents.CHANGE_CATEGORY,fa),document.addEventListener(filteringEvents.UNSELECT_FILTER,oa),document.addEventListener(filteringEvents.UNSELECT_FILTER,oa),null===(b=rb.dividerButton)||void 0===b||b.addEventListener("click",qa),hb=da(Da),ua(),ea(hb),_(Aa),Z(hb),ba(),pa())}function ta(a){var b=new CustomEvent(sortingEvents.CHANGE_SORTING_EXTERNALLY,a);document.dispatchEvent(b)}function ua(){if(0==hb.length){for(var a in Fa){var b=da(Fa[a].label);if(b&&0!==b.length){hb=b,Da=Fa[a].label;break}}var c=new CustomEvent(categoryEvents.CHANGE_CATEGORY_EXTERNALLY,{detail:{category:Da}});document.dispatchEvent(c);var d=new CustomEvent(filteringEvents.CHANGE_FILTERS_EXTERNALLY,{detail:Da});document.dispatchEvent(d)}}function va(a,b){if(!b)return a;for(var c,d=b.split("."),e=0,f=d.length-1;e<f;e++)if(c=d[e],Array.isArray(a)){for(var g=[],h=0,i=a;h<i.length;h++){var j=i[h],k=j[c];if(void 0===k)break;g.push(k)}if(g&&0===g.length)break;a=g}else{var k=a[c];if(void 0===k)break;a=k}if(Array.isArray(a)){for(var g=[],l=0,m=a;l<m.length;l++){var j=m[l];g.push(j[d[e]])}return g}return a[d[e]]}function wa(a){return Ha[a]?Ha[a]:a}function xa(a){try{var b=Bose&&(null===Bose||void 0===Bose?void 0:Bose.Translation)?Bose.Translation:null;if(b)return b.getDictionaryTranslation("product-catalog",a)}catch(b){return a}}var ya,za,Aa,Ba,Ca,Da,Ea,Fa={PRODUCTS:{label:"products",filtering:!0,sorting:!0},ACCESSORIES:{label:"accessories",filtering:!0,sorting:!0},HELP_CONTENTS:{label:"helpContents",filtering:!0,sorting:!1},GENERAL:{label:"general",filtering:!1,sorting:!1}},Ga={SUGGESTION:"SUGGESTION",PRODUCT_RESULT:"PRODUCT_RESULT",ACCESSORY_RESULT:"ACCESSORY_RESULT",KNOWLEDGE_BASE_RESULT:"KNOWLEDGE_BASE_RESULT"},Ha={categoryshortname_speakers:"SPEAKER",categoryshortname_headphones:"HEADPHONES",categoryshortname_frames:"FRAMES"},Ia="support-container",Ja="collapsible-selector",Ka="without-filtering-and-sorting",La="open",Ma="close",Na="more",Oa="Show less",Pa=86,Qa="disabled",Ra="expanded",Sa="d-none",Ta="alone",Ua="height-with-no-overflow",Va="search-organism-container",Wa="bose-icon--moreCircle",Xa="bose-icon--lessCircle",Ya="content",Za="no-action",$a="?term=",_a="&pageNumber=",ab="&pageSize=",bb=10,cb=document.querySelector(".".concat(Va)),db=cb instanceof HTMLElement?cb.dataset:{},eb=document.querySelector(".".concat(Va," .main-content")),fb=!!db.isCategory&&JSON.parse(db.isCategory.toLowerCase()),gb=null,hb=[],ib=null,jb=[],kb=0,lb=0,mb="true"==db.enableCompare,nb=db.channel,ob=db.language,pb=db.catalog,qb="productCatalogStorageKey",rb={sortingComponentMobile:document.querySelector(".".concat(Va," .sorting-component-mobile")),productsContainer:document.querySelector(".".concat(Va," .search-desktop-content-product-row")),searchTerm:document.querySelectorAll(".".concat(Va," .search-term")),numberResults:document.querySelectorAll(".".concat(Va," .number-results")),filteringMobile:document.querySelector(".".concat(Va," .filtering-mobile")),displayedNumberResults:document.querySelectorAll(".".concat(Va," .number-displayed-results")),firstRow:document.querySelector(".search-desktop-content-first-row"),sidebar:document.querySelector(".search-desktop-sidebar"),filteringDesktop:document.querySelector(".filtering-container .filtering-desktop"),filteringAreaSidebar:document.querySelector(".filtering-area"),filteringAreaTop:document.querySelector(".filtering-area-top"),categoryArea:document.querySelector(".category-area"),sortingArea:document.querySelector(".sorting-area"),dividerButton:document.querySelector(".divider-button"),dividerIcon:document.querySelector(".divider-icon"),dividerLabel:document.querySelector(".divider-label"),searchDesktopSecondRow:document.querySelector(".search-desktop-content-second-row"),headerContainer:document.querySelector(".header-container")};return window.addEventListener("orientationchange",function(){window.addEventListener("resize",x)}),{init:sa}}(),$jq(document).ready(function(){var a={containerClass:".search-organism-container",filterContainer:".filtering-container"};if("accomm"===$jq(a.containerClass).data("website-type")){var b=$jq(a.containerClass).data("cmp-path")+".accomResults."+Cookies.get("ugUid")+".html?term="+Bose.Utils.getParameterByName("term");$jq.ajax(b,{contentType:"application/json",method:"GET"}).done(function(b){var c=$jq(b),d=c.data("search-data"),e=Bose.Utils.getParameterByName("category")?Bose.Utils.getParameterByName("category"):$jq("[data-selected-type]").attr("data-selected-type");if($jq("[data-selected-option]").attr("data-selected-option",e),$jq("[data-selected-type]").attr("data-selected-type",e),d.products.length>0||d.helpContents.articles.length>0){var f=JSON.stringify(d),g=c.data("search-url"),h=c.data("search-support-url"),i=c.data("term");$jq(a.containerClass).attr({"data-search-data":f,"data-search-url":g,"data-search-support-url":h,"data-term":i}),$jq(a.filterContainer).attr("data-filter",f),Bose.ProductCatalogCategory.init(),Bose.ProductCatalogFilter.init(),Bose.ProductCatalogListContainer.init()}else $jq(".null-results-container-acc").removeClass("hide"),$jq(".results-container-acc").addClass("hide"),$jq(".null-results-container-acc .search-term").text(c.data("term"))})}else Bose.ProductCatalogCategory.init(),Bose.ProductCatalogFilter.init(),Bose.ProductCatalogListContainer.init()}),$jq(window).on("load",function(){$jq(".button--filtering-reset").length>0&&$jq(".button--filtering-reset").trigger("click")});var Bose=Bose||{},categoryEvents={CHANGE_CATEGORY:"CHANGE_CATEGORY",CHANGE_CATEGORY_EXTERNALLY:"CHANGE_CATEGORY_EXTERNALLY"};Bose.ProductCatalogCategory=function(){function a(){t.topNavContainer.style.height="100%"}function b(){t.topNavContainer.style.height="0"}function c(){k=q.selectedOption?q.selectedOption:"product",t.categoryComponentMobile&&t.close&&(e(),document.addEventListener(categoryEvents.CHANGE_CATEGORY_EXTERNALLY,d),t.categoryComponentMobile.addEventListener("click",a),t.close.addEventListener("click",b))}function d(a){a&&a.detail&&a.detail.category&&g(a.detail.category)}function e(){if(t.selectOption&&(t.selectOption.innerHTML=i(r),f()),t.titleLabel&&k){var a=r.filter(function(a){return a.value===k});t.titleLabel.textContent=j(a&&a[0]&&a[0].label?a[0].label:k)}}function f(){for(var a=0,c=Array.from(document.querySelectorAll(".".concat(l," .").concat(m," ")));a<c.length;a++){c[a].addEventListener("click",function(){this.classList.contains(n)||(this.parentNode.querySelector(".".concat(l," .").concat(m,".").concat(n)).classList.remove(n),this.parentNode.querySelector(".".concat(l," .").concat(m," .bose-icon.bose-icon--checkmark")).classList.remove("bose-icon--checkmark"),t.titleLabel.textContent=j(this.dataset.label),this.classList.add(n),this.parentNode.querySelector(".".concat(l," .").concat(m,".").concat(n," .icon-space")).classList.add("bose-icon--checkmark"),h(this.dataset),b())})}}function g(a){for(var b=document.querySelectorAll(".".concat(l," .").concat(n)),c=0;c<b.length;c++)b[c].classList.remove(n);for(var d=document.querySelectorAll(".".concat(l,' div[data-value="').concat(a,'"]')),c=0;c<d.length;c++)d[c].classList.add(n);t.titleLabel.textContent=r.filter(function(b){return b.value===a})}function h(a){var b=new CustomEvent(categoryEvents.CHANGE_CATEGORY,{detail:a});document.dispatchEvent(b)}function i(a){return a.reduce(function(a,b,c){return a+='<div class="category-option '.concat(b.disabled?o:""," ").concat(b.value==k?n:"",'" data-label="').concat(b.label,'" data-value="').concat(b.value,'"><span class="icon-space bose-icon  ').concat(b.value==k?"bose-icon--checkmark":"",'"></span>').concat(j(b.label),"</div>")},"")}function j(a){try{var b=Bose&&(null===Bose||void 0===Bose?void 0:Bose.Translation)?Bose.Translation:null;if(b)return b.getDictionaryTranslation("product-catalog",a)}catch(b){return a}}var k,l="category-component-container",m="category-option",n="selected",o="disabled",p=document.querySelector(".".concat(l)),q=p instanceof HTMLElement?p.dataset:{},r=q.categoryOptions?function s(a){return a=a.replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f"),a=a.replace(/[\u0000-\u0019]+/g,""),JSON.parse(a)}(q.categoryOptions):"",t={categoryBoxLabel:document.querySelector(".".concat(l," .").concat("category-component-mobile"," .title-label")),categoryComponentMobile:document.querySelector(".".concat(l," .category-component-mobile")),selectOption:document.querySelector(".".concat(l," .").concat("category-component-desktop"," .content")),topNavContainer:document.querySelector(".".concat(l," .topnav-container")),titleLabel:document.querySelector(".".concat(l," .title-label")),close:document.querySelector(".".concat(l," .close"))};return{init:c}}();var __spreadArray=this&&this.__spreadArray||function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},filteringEvents={CHANGE_FILTERS_WITHOUT_CHANGING_DATA:"CHANGE_FILTERS_WITHOUT_CHANGING_DATA",SELECT_FILTER:"SELECT_FILTER",SELECT_FILTERS:"SELECT_FILTERS",UNSELECT_FILTER:"UNSELECT_FILTER",UNSELECT_FILTERS:"UNSELECT_FILTERS",CLEAR_FILTER:"CLEAR_FILTER",RESET_FILTERS:"RESET_FILTERS",RESET_FILTERS_EXTERNALLY:"RESET_FILTERS_EXTERNALLY",CHANGE_FILTERS:"CHANGE_FILTERS",CHANGE_FILTERS_EXTERNALLY:"CHANGE_FILTERS_EXTERNALLY"},typesOfFilter={radio:"RADIO",checkBox:"CHECK_BOX",rating:"RATING",rangeSlider:"RANGE"};Bose.ProductCatalogFilter=function(){function a(a){return a=a.replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f"),a=a.replace(/[\u0000-\u0019]+/g,""),JSON.parse(a)}function b(){return window.matchMedia("(max-width: 767.95px)").matches}function c(){return _.topNavContainer.style.height}function d(){for(var a=document.getElementsByClassName("collapsible-selector"),c=0;c<a.length;c++)a[c].addEventListener("click",function(){this.classList.toggle("collapsed");var a=this.querySelector(".collapsible-icon"),b=this.nextElementSibling;b.classList.contains(Q)?(b.classList.remove(Q),a.classList.remove(P),a.classList.add(O)):(b.classList.add(Q),a.classList.add(P),a.classList.remove(O))});for(var d=document.querySelectorAll(".filtering-desktop .checkbox-input, .filtering-mobile-content .checkbox-input"),c=0;c<d.length;c++)d[c].addEventListener("click",function(a){var c=this.parentElement.parentElement.parentElement.dataset,d=c.type,e=this.dataset.value;d===typesOfFilter.rating&&(e={from:this.dataset.valueFrom,to:this.dataset.valueTo});var f={field:c.field,type:d,description:this.dataset.description,value:e};if(g(f,this.checked),b())this.checked?S.push(f):S=S.filter(function(a){return a.description!=f.description&&a.value!=f.value}),f.otherFilters=$?J.filters:J.filters[X],f.lastFilterSelected=U,f.tempFiltersSelected=S,l(filteringEvents.CHANGE_FILTERS_WITHOUT_CHANGING_DATA,f);else{var h=this.checked?filteringEvents.SELECT_FILTER:filteringEvents.UNSELECT_FILTER;f.otherFilters=$?J.filters:J.filters[X],f.lastFilterSelected=U,l(h,f)}a.stopPropagation()});for(var e=document.querySelectorAll(".checkbox-container, .radio-container"),c=0;c<e.length;c++)e[c].addEventListener("click",function(a){this.children[0].click()});for(var f=document.getElementsByClassName("more-label"),c=0;c<f.length;c++)f[c].addEventListener("click",function(){this.classList.add(Q),this.parentNode.classList.remove(N);for(var a=this.parentNode.querySelectorAll(".checkbox-container, .radio-container"),b=0;b<a.length;b++)a[b].classList.remove(Q)});for(var h=document.querySelectorAll(".filtering-desktop .radio-input, .filtering-mobile-content .radio-input"),c=0;c<h.length;c++)h[c].addEventListener("click",function(a){var c=this.parentElement.parentElement.parentElement.dataset,d=c.type,e=this.dataset.value,f={field:c.field,type:d,description:this.dataset.description,value:e};g(f,!0),b()?(S=S.filter(function(a){return a.field!=c.field}),S.push(f),f.otherFilters=$?J.filters:J.filters[X],f.lastFilterSelected=U,f.tempFiltersSelected=S,l(filteringEvents.CHANGE_FILTERS_WITHOUT_CHANGING_DATA,f)):(f.otherFilters=$?J.filters:J.filters[X],f.lastFilterSelected=U,l(filteringEvents.SELECT_FILTER,f)),a.stopPropagation()});document.querySelector(".button-container-desktop .button--filtering-reset").addEventListener("click",j),document.querySelector(".button-container-mobile .button--filtering-reset").addEventListener("click",j),document.querySelector(".button--filtering-apply").addEventListener("click",function(){R.otherFilters=$?J.filters:J.filters[X],R.lastFilterSelected=U,l(filteringEvents.SELECT_FILTERS,R),T.length>0&&(T.otherFilters=$?J.filters:!J.filters[X],l(filteringEvents.UNSELECT_FILTERS,T));var a=R.map(function(a){return a.type===typesOfFilter.rangeSlider?"".concat(a.field,"-").concat(a.type,"-").concat(a.max):"".concat(a.field,"-").concat(a.type,"-").concat(a.value,"-").concat(a.description)});_.filtersSelectedLabel.innerHTML="(".concat(new Set(a).size,")"),u()}),document.addEventListener(filteringEvents.CLEAR_FILTER,function(a){S=S.filter(function(b){return b.field!=a.detail.field});for(var b=document.getElementsByName(a.detail.field),c=0;c<b.length;c++)b.item(c).checked=!1})}function e(a){R.push(a)}function f(a){var b=R.findIndex(function(b){return b.field===a.field&&b.type===a.type&&b.description===a.description&&b.value===a.value});b>-1&&(T.push(a),R.splice(b,1))}function g(a,b){a.type!==typesOfFilter.rangeSlider&&a.type!==typesOfFilter.radio||f(a),b?(e(a),U=a):f(a)}function h(a){var c=filteringEvents.SELECT_FILTER,d=a.sel.parentElement.parentElement.parentElement,e=d.querySelector(".noUi-handle-upper"),f=d.querySelector(".noUi-handle-lower"),h=d.querySelector(".slider");(a.max&&e.ariaValueMax===e.ariaValueNow||!a.max&&f.ariaValueMin===f.ariaValueNow)&&(c=filteringEvents.UNSELECT_FILTER);var i={type:d.dataset.type,field:d.dataset.field,value:a.value,description:a.max?"".concat(h.dataset.maxDescription," : ").concat(e.ariaValueText):"".concat(h.dataset.minDescription," : ").concat(f.ariaValueText),max:a.max};g(i,c===filteringEvents.SELECT_FILTER),b()?(S=S.filter(function(a){return a.field!=i.field||a.max!=i.max}),S.push(i),i.otherFilters=$?J.filters:J.filters[X],i.lastFilterSelected=U,i.tempFiltersSelected=S,l(filteringEvents.CHANGE_FILTERS_WITHOUT_CHANGING_DATA,i)):(i.otherFilters=$?J.filters:J.filters[X],i.lastFilterSelected=U,l(c,i))}function i(){u(),R=[],S=[],T=[],y(),_.filtersSelectedLabel.innerHTML=""}function j(){u(),R=[],S=[],T=[],y(),l(filteringEvents.RESET_FILTERS,{detail:$?J.filters:J.filters[X]}),_.filtersSelectedLabel.innerHTML=""}function k(a){var b;return F(null===(b=null===a||void 0===a?void 0:a.options)||void 0===b?void 0:b.reduce(function(a,b,c){return a+=m(b,c)},""),a,a.options&&a.options.length>5)}function l(a,b){var c=new CustomEvent(a,{detail:b});document.dispatchEvent(c)}function m(a,b){return"IN_STOCK"===a.label&&!0===$jq(".header-container").data("hide-stock-status")?"":"\n      ".concat(5==b?"<span class='more-label'>".concat(H(K),"</span>"):"","\n      <div class='checkbox-container ").concat(b>4?Q:""," ").concat(a.disabled?"disabled":"","'>\n          <input type='checkbox' data-value='").concat(a.label,"' class='checkbox-input' name='").concat(H(a.label),"' data-description='").concat(a.description,"' aria-label='").concat(H(a.description),"' ").concat(a.checked?"checked":"","/>\n        <span class='label'>").concat(H(a.label),"</span>\n      </div>\n")}function n(a){var b;return F(null===(b=null===a||void 0===a?void 0:a.options)||void 0===b?void 0:b.reduce(function(a,b,c){return a+=o(b,c)},""),a,a.options&&a.options.length>5)}function o(a,b){var c=parseInt(a.label);return"\n      ".concat(5==b?"<span class='more-label'>".concat(H(K),"</span>"):"","\n      <div class='checkbox-container ").concat(b>4?Q:""," ").concat(a.disabled?"disabled":"","'>\n        <input type='checkbox' data-value-from='").concat(a.from,"' data-value-to='").concat(a.to,"' class='checkbox-input' data-description='").concat(a.description,"'  name='").concat(H(a.label),"' aria-label='").concat(H(a.description),"' ").concat(a.checked?"checked":"","/>\n        <span class='label'>").concat("<i class='bose-icon star full' role='contentinfo' aria-hidden='true'></i>".repeat(c),"</span>\n      </div>\n")}function p(a){return F("\n        <div class='range-slider-simple'><div class='slider'></div></div>\n    ",a)}function q(a){var b;return F(null===(b=null===a||void 0===a?void 0:a.options)||void 0===b?void 0:b.reduce(function(b,c,d){return b+=r(c,d,null===a||void 0===a?void 0:a.field)},""),a,a.options&&a.options.length>5)}function r(a,b,c){return"\n    ".concat(5==b?"<span class='more-label'>".concat(H(K),"</span>"):"","\n    <div class='radio-container ").concat(b>4?Q:""," ").concat(a.disabled?"disabled":"","'>\n      <input type='radio' data-value='").concat(a.label,"' class='radio-input' name='").concat(c,"' data-description='").concat(a.description,"' aria-label='").concat(H(a.description),"' ").concat(a.checked?"checked":"","/>\n      <span class='label'>").concat(H(a.label),"</span>\n    </div>\n    ")}function s(){S=[],T=[],Y=__spreadArray([],R,!0),_.topNavContainer.style.height="100%"}function t(){v(),R=__spreadArray([],Y,!0),_.topNavContainer.style.height=null}function u(){_.topNavContainer.style.height=null}function v(){y();for(var a=new Map,b=0,c=Y;b<c.length;b++){var d=c[b];if(d.type===typesOfFilter.checkBox||d.type===typesOfFilter.radio||d.type===typesOfFilter.rating)document.querySelector("input[data-description='".concat(d.description,"']")).checked=!0;else if(d.type===typesOfFilter.rangeSlider)if(a.has(d.field)&&a.get(d.field).length>0){var e=a.get(d.field);e.push(d),a.set(d.field,e)}else a.set(d.field,[d])}a.forEach(function(a){for(var b=null,c=null,d=null,e=0,f=a;e<f.length;e++){var g=f[e];b=document.querySelector(".filtering-desktop div[data-field='".concat(g.field,"'] .range-slider-simple .slider")),!0===g.max?d=g.value:c=g.value}w(b,[c,d])}),Y&&Y.length>0&&l(filteringEvents.CHANGE_FILTERS_WITHOUT_CHANGING_DATA,{tempFiltersSelected:Y,otherFilters:$?J.filters:J.filters[X],lastFilterSelected:Y.slice(-1).pop()})}function w(a,b){null===a||void 0===a||a.noUiSlider.set(b)}function x(){J=W.filter?a(W.filter):"",V&&J&&(document.addEventListener(filteringEvents.RESET_FILTERS_EXTERNALLY,function(a){X=a.detail,i()}),document.addEventListener(filteringEvents.CHANGE_FILTERS_EXTERNALLY,function(a){X=a.detail,i(),l(filteringEvents.CHANGE_FILTERS,{filters:$?J.filters:J.filters[X]})}),y())}function y(){if(V&&J){var a;if($&&J.filters?a=J.filters:J.filters&&(a=J.filters[X]),a&&a.length>0){_.desktopContainer.classList.remove(Q),_.mobileContainer.classList.remove(Q);B(z(a)),d(),C(a),_.mobileContainer.addEventListener("click",s),_.close.addEventListener("click",t)}else _.desktopContainer.classList.add(Q),_.mobileContainer.classList.add(Q)}}function z(a){return null===a||void 0===a?void 0:a.reduce(function(a,c,d){return d>4&&!b()&&(c.collapsed=!0),(null===c||void 0===c?void 0:c.type)&&typesOfFilter.checkBox===(null===c||void 0===c?void 0:c.type)?a+=k(c):(null===c||void 0===c?void 0:c.type)&&typesOfFilter.rating===(null===c||void 0===c?void 0:c.type)?a+=n(c):(null===c||void 0===c?void 0:c.type)&&typesOfFilter.rangeSlider===(null===c||void 0===c?void 0:c.type)?a+=p(c):typesOfFilter.radio===(null===c||void 0===c?void 0:c.type)&&(a+=q(c)),a},"")}function A(){return"<div class='filters-title'>"+H("search_filters")+"</div>"}function B(a){_.desktopContainer.innerHTML=A()+a+E()}function C(a){null===a||void 0===a||a.forEach(function(a){(null===a||void 0===a?void 0:a.type)&&typesOfFilter.rangeSlider===(null===a||void 0===a?void 0:a.type)&&D(a)})}function D(a){for(var b=null===a||void 0===a?void 0:a.options.reduce(function(a,b){return a&&a.value<b.value?a:b}),c=null===a||void 0===a?void 0:a.options.reduce(function(a,b){return a&&a.value>b.value?a:b}),d={minValue:b,maxValue:c},e=document.querySelectorAll("div [data-field='".concat(null===a||void 0===a?void 0:a.field,"'] .slider")),f=0;f<e.length;f++)e[f].setAttribute("data-max-description",H(c.description)),e[f].setAttribute("data-min-description",H(b.description)),Bose.range.show(e[f],h,Z,d),G(e[f])}function E(){return"\n     <div class='button-container-desktop'>\n        <button class='button--filtering-reset'>\n         ".concat(H(L),"\n        </button>\n     </div>\n    ")}function F(a,b,c){return"\n    <div class='collapsible-container ' data-description='".concat(null===b||void 0===b?void 0:b.description,"'  data-field='").concat(null===b||void 0===b?void 0:b.field,"' data-type='").concat(null===b||void 0===b?void 0:b.type,"'>\n      <div class='collapsible-selector ").concat((null===b||void 0===b?void 0:b.label)?"":Q," ").concat((null===b||void 0===b?void 0:b.collapsed)?"collapsed":"open","' >\n      <div class='collapsible'>\n         <span class='collapsible-label'>").concat(H(null===b||void 0===b?void 0:b.label),"</span><span class='collapsible-icon bose-icon ").concat((null===b||void 0===b?void 0:b.collapsed)||"true"===(null===b||void 0===b?void 0:b.collapsed)?P:O,"'><div class='up'></div><div class='down'></div></span></div>\n     </div>\n      <div class='content  "+(c?N:"")+" ").concat((null===b||void 0===b?void 0:b.collapsed)?Q:"","'>\n       ").concat(a,"\n      </div>\n    </div>")}function G(a){var b;a.noUiSlider.on("update",function(c,d,e,f,g){var h,i=null===(h=null===a||void 0===a?void 0:a.noUiSlider)||void 0===h?void 0:h.getTooltips(),j=null===i||void 0===i?void 0:i.find(function(a){return a.parentElement.classList.contains("noUi-handle-upper")}),k=i.find(function(a){return a!==j}),l=k.parentElement;I(j,k)&&!a.parentElement.parentElement.classList.contains(Q)?(b||(j.classList.add("not-visible"),b=k.cloneNode(!0),k.classList.add("not-visible"),l.appendChild(b)),c[0]!==c[1]?(b.innerHTML="".concat(c[0]," - ").concat(c[1]),b.style.setProperty("margin-left","".concat(4*c[0].length,"px")),b.style.setProperty("left","100%")):(b.innerHTML=c[0],b.style.removeProperty("margin-left"),b.style.removeProperty("left"))):b&&(j.innerHTML=c[1],k.innerHTML=c[0],l.removeChild(b),b=null,k.classList.remove("not-visible"),j.classList.remove("not-visible"))})}function H(a){try{var b=Bose&&(null===Bose||void 0===Bose?void 0:Bose.Translation)?Bose.Translation:null;if(b)return b.getDictionaryTranslation("product-catalog",a)}catch(b){return a}}function I(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect();return!(c.right<d.left||c.left>d.right||c.bottom<d.top||c.top>d.bottom)}var J,K="more",L="search_reset",M="filtering-container",N="with-more",O="bose-icon--chevronUp",P="bose-icon--chevronDown",Q="d-none",R=[],S=[],T=[],U={},V=document.querySelector(".".concat(M)),W=V instanceof HTMLElement?V.dataset:{},X=W.selectedOption?W.selectedOption:"products",Y=[],Z=W.locale?W.locale:"",$=!!W.isCategory&&JSON.parse(W.isCategory.toLowerCase()),_={mobileContainer:document.querySelector(".".concat(M," .").concat("filtering-mobile")),mobileContent:document.querySelector(".".concat(M," .").concat("filtering-mobile-content")),desktopContainer:document.querySelector(".".concat(M," .").concat("filtering-desktop"," .modal-body")),topNavContainer:document.querySelector(".".concat(M," .topnav-container")),filtersSelectedLabel:document.querySelector(".".concat(M," .number-of-filtering-selected")),close:document.querySelector(".".concat(M," .close"))};return jQuery(function(){V&&J&&l(filteringEvents.CHANGE_FILTERS,{filters:J.filters?$?J.filters:J.filters[X]:[]})}),window.addEventListener("orientationchange",function(){window.addEventListener("resize",function(){!b()&&c()&&t()})}),{init:x,reset:i}}(),function(){var a=document.querySelector(".".concat("null-results-content")),b=a instanceof HTMLElement?a.dataset:{};b.categoryList&&function c(a){return a=a.replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f"),a=a.replace(/[\u0000-\u0019]+/g,""),JSON.parse(a)}(b.categoryList)}();
function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function a(b){return typeof b}:function a(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(a)}var Bose=Bose||{};Bose.Forms=function(a){function b(a){var b=$jq("form#"+a.formId),c=b.data("validationError"),g=b.find("input:visible, textarea, select").filter(".js-bose-setFocus"),i=$jq(g).prop("tagName"),k=b.data("dtm-event"),l=b.data("validation-error"),n=b.find(x.errorMessage).data("errorMessage");if("exchangeservicerequest"===Bose.DataLayer.Data.Page.name&&void 0!==l&&void 0!==n&&"string"==typeof n){var o={serviceRequestError:"servicerequest|error|"+[n],key:l.key,type:l.type};$jq(document).trigger("forms.B2BServiceRequestError",[o])}if(void 0!==n&&"string"==typeof n)switch(k){case"loginB2B_login":$jq(document).trigger("forms.B2BloginError",[n]);break;case"b2bcheckout_placeorder":$jq(document).trigger("forms.B2BCheckoutError",[n])}b.data("options",a),d(b),e(),j(g,i),void 0!==c&&$jq(document).trigger("forms.validationError",[c]),0===b.closest(".bose-formFlowPanel").length&&$jq(document).trigger("forms.trackFormLoaded",[b]),"true"===a.ajaxEnabled?f(a.formId):m(a.formId),$jq(document).on("highLightErrorFields",h)}function c(){$jq(this).closest("form").submit()}function d(a){a.hasClass(y.submitOnEnter)&&a.find("input").keypress(function(a){a.which===z&&n(a.currentTarget)})}function e(){Bose.TextField.setActiveLabel(Bose.TextField),Bose.TextArea.setActiveLabel(Bose.TextArea),Bose.Select.setActiveLabel()}function f(a){$jq("form#"+a+".ajax-enabled").submit(g)}function g(a,b){a&&a.preventDefault();var c=$jq(this),d=!0,e=c.attr("id");return(b||void 0===b)&&(d=Bose.Forms.Validation.isValid(c)),"step_review"===$jq(x.formContent).parent(x.activeStep).data("stepName")&&$jq(x.activeStep).find("form").data("formEvent").indexOf("adyenReview")>-1&&Bose.AdyenPayment.isCardSaved()?void Bose.Payment.submit(c,"Adyen_PaymentProvider"):(d?(c.find(".bose-button").trigger("setLoading"),$jq(document).trigger("enableCheckoutLoader"),$jq.ajax({url:c.attr("action"),method:c.attr("method"),dataType:"json",data:c.serialize(),success:function b(d){$jq(document).trigger("analyticsFormStepComplete",[a]),c.find(".bose-button").trigger("setCompleted");var f=v[e];void 0===f?i(d):(f(d),$jq(document).trigger("disableCheckoutLoader")),Bose.Select.resetSelectMenuToNative(),$jq(document).trigger("analyticsFormLoadForm")},error:function a(b,d){c.find(".bose-button").trigger("setError"),$jq(document).trigger("disableCheckoutLoader");var f=w[e];void 0===f?l(b,d):f(b,d)}}).done(function(){h()})):(c.find(".bose-button").trigger("setError"),$jq(document).trigger("disableCheckoutLoader")),!1)}function h(){var a,b=$jq("form[data-validation-error]:visible"),c=b.find(x.errorMessage);c.is(":visible")&&void 0!==c.data("associated-fields")&&(a=c.data("associated-fields").split(","),$jq.each(a,function(a,b){var c=$jq('[name$="'+b+'"]'),d=$jq('[name$="'+b+'"]').closest(Bose.TextField.selectors.container);c.is("input")?(Bose.TextField.init(d),Bose.TextInput.markInvalid(d,"",Bose.TextField)):c.is("select")&&Bose.Select.markInvalid(c.closest(Bose.Select.selectors.container),"")})),c.is(":visible")&&void 0!==c.data("error-message")&&-1!==c.data("error-message").indexOf("postcode")&&$jq(x.zipCodeField).blur()}function i(a){var b;if(void 0!==a&&void 0!==a.redirectUrl)window.location=a.redirectUrl;else if(void 0!==a&&void 0!==a.stepId){var c=$jq('.bose-formWrapper[data-step-name="'+a.stepId+'"]'),d=c.closest(".bose-formFlow").data("disabledStepHistory");$jq(document).trigger("disableCheckoutLoader"),void 0===d&&(d=!1),a.subContent&&(b={},b.stepName=a.stepSummaryId,b.content=a.subContent),c.html(a.content),Bose.FormFlow.openStep(a.stepId,!d,a.additionalContent,"",b),Bose.Forms.initFields(c),Bose.Utils.reMatchHeights(),"step_payment"===a.stepId&&(Bose.Tooltip.init(),$jq('input[id*="klarna"]:checked').length&&void 0!==a.client_token&&Bose.Klarna.init(a),"Adyen_PaymentProvider"===$jq('form[name="payment"]').find('input[type="radio"]:checked').data("payment-provider")&&Bose.AdyenPayment.loadAdyenComponent(),Bose.Address.initDropdownListener(),$jq('input[name="payment.cardNumber"]').val(""),$jq('input[name="payment.ccv"]').val(""),$jq(".bose-paymentControl__cardDetailsFormContainer .bose-select__select .ui-selectmenu-text").text(""),$jq('select[name$="payment."]').closest(".bose-select").attr("class","bose-select"))}else void 0!==a&&a.isThreeD&&$jq(document).trigger("loadAdyen3DS",a.paymentMode||"")}function j(a,b){a.length>0&&("select"===b.toLowerCase()?Bose.Select.openAndFocus.call(a):Bose.TextField.autoFocus(a))}function k(a){Bose.HiddenField.init(a),Bose.TextField.init(a),Bose.Checkbox.init(a),Bose.Select.init(a),Bose.Button.init(),Bose.AddressValidation.init(a),Bose.AddressValidationSuggestions.init(a),Bose.Overlay.init()}function l(a,b){$jq(document).trigger("forms.submitError",[b]),$jq(document).trigger("forms.ricCableFormError",a)}function m(a){$jq("form#"+a).not(".ajax-enabled").submit(function(){var a=$jq(this),b=!!a.data("validated")||Bose.Forms.Validation.isValid(a,!0);return a.find(".bose-button").trigger(b?"setCompleted":"setError"),b})}function n(a,b){var c=$jq(a),d=c.closest("form"),e=d.find('input[type="hidden"][name="payment.paymentInfoType"]:not([disabled="disabled"])');if(!Bose.Forms.Validation.isValid(d,!0))return d.find(".bose-button").trigger("setError"),void $jq(document).trigger("disableCheckoutLoader");(void 0!==b||void 0===Bose.AddressValidation||p(d,c,b))&&(e.length&&"CreditCardPaymentInfo"===e.val()&&!b?Bose.Payment.submit(d,Bose.PaymentControl.getPaymentProvider(d)):o(c,d,b))}function o(a,b,c){var d=b.find('input[type="hidden"][name="payment.paymentInfoType"]:not([disabled="disabled"])');$jq(document).trigger("forms.actualSubmit",[a]),a.trigger("setLoading"),Bose.DataLayer.Data.Page.name.indexOf("checkout")>-1&&$jq(document).trigger("enableCheckoutLoader"),!d.length||"CreditCardPaymentInfo"!==d.val()&&"AdyenPaymentInfo"!==d.val()||c?(a.closest("form").submit(),a.hasClass("js-cta__resellerDirectButton")&&a.closest("form")[0].reset()):Bose.Payment.submit(b,Bose.PaymentControl.getPaymentProvider(b))}function p(a,b,c){var d=a.find(".bose-address .bose-address__form:visible");if(!d.length)return!0;d=d.closest(".bose-address");var e=$jq(d[0]),f=e.data("avs-enabled"),g=e.data("avs-type"),h=!1,i=!1;if(f){if(d.each(function(){var b=$jq(this),c=b.find(".bose-address__addressInfo"),d=q(c);if("assisted"===g||"assisted-lookup"===g){if(d)return;if(!c.filter(":visible").length)return Bose.Forms.Validation.displayError(a,Bose.Translation.getSiteTranslation("FORM.fieldserror.title"),Bose.Translation.getSiteTranslation("checkout.error.search.address.incomplete")),a.find(".bose-button").trigger("setError"),$jq(document).trigger("disableCheckoutLoader"),void(i=!0)}Bose.AddressValidation.isDirty(b)&&(h=!0)}),i)return!1;if(h&&"assisted-lookup"!==g)return $jq.when(Bose.AddressValidation.validateForm(a)).done(function(){o(b,a,c)}).fail(function(){b.trigger("setDefault")}),!1}return!0}function q(a){return 0===a.find('input[required="required"],input[data-required="required"]').length}function r(a,b){v[a]=b}function s(a,b){w[a]=b}function t(a){return nano('<div class="bose-form bose-form--showErrors"><div class="bose-form__errorTitle">{errorTitle}</div><div class="bose-form__errorMessage" data-error-message={errorCode}>{errorMessage}</div></div>',{errorTitle:a.errorTitle,errorMessage:a.errorMessage,errorCode:a.errorCode})}function u(a){history.replaceState({},document.title,location.protocol+"//"+location.host+location.pathname),a.find(".bose-form--showErrors").remove()}var v={},w={},x={submitOnClick:".js-form-submitOnClick",formContent:".bose-formFlowPanel__content",errorMessage:".bose-form__errorMessage",zipCodeField:'input[name="shipping.postalCode"]',activeStep:".bose-formFlowPanel--active"},y={submitOnEnter:"js-form-submitOnEnter"},z=13;return $jq(document).on("click",x.submitOnClick,c),a.initForm=b,a.doActualAjaxSubmit=g,a.doActualSubmit=o,a.submitForm=n,a.initFields=k,a.registerSuccessCallBack=r,a.registerErrorCallBack=s,a.generateHtmlErrorBlock=t,a.removeErrorsFromForm=u,a._classes=y,a}(Bose.Forms||{});var Bose=Bose||{};Bose.Forms=function(a){function b(){j=[Bose.TextField,Bose.HiddenField,Bose.Checkbox,Bose.Select,Bose.TextArea,Bose.DatePicker,Bose.RadioButton,Bose.QuantitySelector,Bose.UploadButton],$jq(document).trigger("highLightErrorFields")}function c(a){return d(a,!1,!0)}function d(a,b,c){var d,e,k,l,m=!0,n=!0,o={type:"CLIENT",key:"form_validation_error",fields:[]},p=[],q=b;if(void 0===q&&(q=!1),!a.hasClass("bose-noValidation")){if(j.forEach(function(b){if(void 0!==b){var c=b.selectors.field+(q?':not([name*=".search."])':""),d=a.find(c);d.trigger("doValidation",!0),d.each(function(){var a=$jq(this);if(a.closest(h.fileUploadContainer).find(h.hiddenFieldError).addClass(i.errorValidate),a.closest(h.returnRequest).find(h.hiddenFieldError).addClass(i.errorValidate),"disabled"!==a.attr("disabled")&&!b.isValid(a,b)){m=!1,b!==Bose.HiddenField&&(n=!1);var c=a.attr("name");p.push(c),o.fields.push({name:c})}})}}),c)return m;if(m)g(a);else{var r=a.data("options");void 0!==r.hideError&&"false"!==r.hideError||f(a,r.fieldErrorTitle,n?"":r.fieldErrorMessage),o.fields.length>0&&(d=$jq(".js-errorValidate:visible").first(),e=d.find("input,textarea,select").filter(":visible:first"),k=d.offset(),l=70,$jq(document).trigger("forms.validationError",[o]),k&&(e.focus(),$jq("html, body").animate({scrollTop:k.top-l},500)))}}return m}function e(a){var b=a.data("options");Bose.Forms.Validation.displayError(a,b.fieldErrorTitle,b.fieldErrorMessage)}function f(a,b,c){a.find(".bose-form__errorTitle").html(b).show().focus(),a.find(".bose-form__errorMessage").html(c).show(),a.find(".bose-button").trigger("setError"),$jq("html, body").animate({scrollTop:$jq(".bose-form__errorTitle").first().offset().top},500)}function g(a){a.find(".bose-form__errorTitle").text("").hide(),a.find(".bose-form__errorMessage").text("").hide()}var h={fileUploadContainer:".js-fileUploadContainer",returnRequest:".bose-returnServiceRequestOverview",hiddenFieldError:".bose-hiddenField--error"},i={errorValidate:"js-errorValidate"},j=[];return a.Validation={init:b,isValid:d,isValidSilent:c,displayDefaultError:e,displayError:f,hideError:g},a}(Bose.Forms||{});var Bose=Bose||{};Bose.Checkbox=Bose.Checkbox||{},Bose.Checkbox.selectors={container:".bose-checkbox",field:".bose-checkbox:not(.bose-checkbox--simple) .bose-checkbox__input:not(.bose-checkbox__input--hidden)"},Bose.Checkbox.selectors.fieldNotInitialized=Bose.Checkbox.selectors.field+":not([data-initialized])",Bose.Checkbox.init=function(a){var b,c=a;b=c?c.find(Bose.Checkbox.selectors.fieldNotInitialized):$jq(Bose.Checkbox.selectors.fieldNotInitialized),b.on("change",Bose.Checkbox.doValidation),b.on("change",Bose.Checkbox.doAriaAttribs),$jq(Bose.Checkbox.selectors.container).on("keydown",Bose.Checkbox.captureKeys),b.bind("setEnabled",Bose.Checkbox.enableField).bind("setDisabled",Bose.Checkbox.disableField).bind("doValidation",Bose.Checkbox.doValidation),b.attr("data-initialized",!0)},Bose.Checkbox.disableField=function(){$jq(this).prop("disabled",!0),$jq(this).closest(Bose.Checkbox.selectors.container).addClass("bose-checkbox--readOnly")},Bose.Checkbox.enableField=function(){$jq(this).prop("disabled",!1),$jq(this).closest(Bose.Checkbox.selectors.container).removeClass("bose-checkbox--readOnly")},Bose.Checkbox.resetState=function(a){a.removeClass("bose-checkbox--error bose-checkbox--valid bose-checkbox--active"),a.find("span.bose-checkbox__label-title").show(),a.find("span.bose-checkbox__errorMessage").text("")},Bose.Checkbox.isValid=function(a){var b=a.closest(Bose.Checkbox.selectors.container);return!b.is(":visible")||!b.hasClass("bose-checkbox--error")},Bose.Checkbox.markValid=function(a){a.removeClass("bose-checkbox--error").removeClass("bose-checkbox--active").addClass("bose-checkbox--valid"),a.find("span.bose-checkbox__errorMessage").text("")},Bose.Checkbox.markInvalid=function(a,b){a.removeClass("bose-checkbox--valid").removeClass("bose-checkbox--active").addClass("bose-checkbox--error"),a.find("span.bose-checkbox__errorMessage").text(b)},Bose.Checkbox.doValidation=function(){var a=$jq(this),b=$jq(a.siblings(".bose-checkbox__input--hidden")),c=a.closest(Bose.Checkbox.selectors.container);if(c.hasClass("bose-checkbox--readOnly"))return void Bose.Checkbox.resetState(c);var d=b.data("options"),e=a.is(":checked"),f=b.data("sendfalsewhenunchecked")?"false":"",g=a.attr("id").indexOf("oneTrust");if(b.val(e?a.val():f),d&&"true"!==d.required)e?Bose.Checkbox.markValid(c):Bose.Checkbox.resetState(c);else if(e)Bose.Checkbox.markValid(c);else if(g<0){var h=d.messages.required;Bose.Checkbox.markInvalid(c,h)}},Bose.Checkbox.doAriaAttribs=function(){var a=$jq(this),b=a.parent(Bose.Checkbox.selectors.container),c=a.siblings(".bose-checkbox__input--hidden"),d=c.val();d&&"false"!==d?b.attr("aria-checked","true"):b.attr("aria-checked","false"),$jq(document).trigger("analyticsFormFieldChangeCheckbox",[a])},Bose.Checkbox.captureKeys=function(a){var b=a.key;"Spacebar"!==b&&"Enter"!==b&&" "!==b||(a.preventDefault(),$jq(a.target).find("input[data-initialized]").click())};var Bose=Bose||{};Bose.RadioButton=function(){function a(a){var f;f=a?a.find(r.uninitialized):$jq(r.uninitialized),f.on("setEnabled",d).on("setDisabled",e).on("click",m).on("change",c).on("keydown",q),f.addClass(s.initialized),f.each(function(){b($jq(this).closest(r.field))})}function b(a){a.hasClass(s.initializedGroup)||(a.on("doValidation",f),a.addClass(s.initializedGroup))}function c(){var a=$jq(this);a.closest(r.field).find(r.radioButton).removeClass(s.checked).attr({tabindex:"-1","aria-checked":"false"}),a.addClass(s.checked).attr({tabindex:"0","aria-checked":"true"});for(var b=document.getElementsByClassName("houseNumber-error-message");b.length>0;)b[0].parentNode.removeChild(b[0]);var c=a.find(r.input).data("id");c&&Bose.AddressValidationService.getSingleAddress(c).done(function(b){var c=b.address.houseNumber.length;if(void 0!==c&&c>Bose.AddressValidation.MAX_HOUSE_NO_LEN){var d=Bose.Translation.getDictionaryTranslation("labels","restricted_house_number_validation");a.append('<p class="error houseNumber-error-message" style="color: #ba2d26; font-size: 13px;margin-left: 30px">'+d+"</p>")}})}function d(){var a=$jq(this);a.find(r.input).prop("disabled",!1),a.removeClass(s.readOnly)}function e(){var a=$jq(this);a.find(r.input).prop("disabled",!0),a.addClass(s.readOnly)}function f(){var a=$jq(this);g(a)&&k(a)}function g(a){return void 0===a.data("required")||(h(a).filter(":checked:visible:not(:disabled)").length>0||(i(a,a.data("requiredMessage")),!1))}function h(a){var b=a.data("name");return"string"==typeof b&&b.length>0?$jq(r.input).filter('[name="'+b+'"]'):a.find(r.input)}function i(a,b){if(j(a),a.addClass(s.errorGroup),void 0!==b){var c=a.find(r.errorMessage);c.length?c.text(b):a.prepend(n(b))}}function j(a){h(a).closest(r.radioButton).addClass(s.error)}function k(a){a.removeClass(s.errorGroup),h(a).closest(r.radioButton).removeClass(s.error),a.find(r.errorMessage).remove()}function l(a){return!a.hasClass(s.errorGroup)}function m(){var a=$jq(this),b=a.closest(r.field);0===b.length&&(b=$jq('[data-name="'+a.find(r.input).attr("name")+'"]')),k(b)}function n(a){return $jq(nano('<span class="bose-radioButtonGroup__errorMessage js-radioButtonGroup-errorMessage">{msg}</span>',{msg:a}))}function o(a){return p(a),nano('<div class="bose-radioButton {styleClass} {disabledClass}">     <label class="bose-radioButton__label">         <input name="{name}" type="radio" class="bose-radioButton__input {inputClass}" value="{value}" {disabled} {checked}/>         <span class="bose-radioButton__inputIcon bose-radioButton__inputIcon--short"></span>         {text}     </label> </div>',a)}function p(a){a.checked=a.checked?"checked":"",a.disabled=a.disabled?"disabled":"",a.disabledClass=a.disabled?"-readOnly":""}function q(a){var b=$jq(this),c=b.closest(r.field),d=c.children(r.radioButton).last(),e=c.children(r.radioButton).first(),f=a.key;"ArrowUp"===f&&(b.prev().length?b.prev().focus():d.focus()),"ArrowDown"===f&&(b.next().length?b.next().focus():e.focus()),"Spacebar"!==f&&"Enter"!==f&&" "!==f||b.find("input").click(),["ArrowUp","ArrowDown","Spacebar"," "].indexOf(a.key)>-1&&a.preventDefault()}var r={uninitialized:".bose-radioButton:not(.js-radioButton--initialized)",input:".bose-radioButton__input",radioButton:".bose-radioButton",field:".js-radioButtonGroup",errorMessage:".js-radioButtonGroup-errorMessage"},s={initialized:"js-radioButton--initialized",initializedGroup:"js-radioButtonGroup--initialized",error:"bose-radioButton--error",errorGroup:"bose-radioButtonGroup--error",readOnly:"-readOnly",checked:"bose-radioButton--checked"};return{init:a,isValid:l,create:o,selectors:r,_classes:s}}();var Bose=Bose||{};Bose.TextArea=$jq.extend(!0,{},Bose.TextInput),Bose.TextArea.classes={active:"bose-textArea--active",valid:"bose-textArea--valid",error:"bose-textArea--error js-errorValidate",readOnly:"bose-textArea--readOnly",type:"textarea"},Bose.TextArea.selectors={container:".bose-textArea",field:".bose-textArea .bose-textArea__input"},Bose.TextArea.init=function(a){var b,c=$jq(Bose.TextArea.selectors.field);c.length>0&&(b=c.val().trim(),c.val(b),0===b.length&&$jq(Bose.TextArea.selectors.container).removeClass(Bose.TextArea.classes.active)),Bose.TextInput.init(a,Bose.TextArea)};var Bose=Bose||{};Bose.TextField=$jq.extend(!0,{},Bose.TextInput),Bose.TextField.classes={active:"bose-textField--active",valid:"bose-textField--valid",error:"bose-textField--error js-errorValidate",readOnly:"bose-textField--readOnly",type:"input"},Bose.TextField.selectors={container:".bose-textField",field:".bose-textField .bose-textField__input",hiddenEmailValidationStatus:'input[name="emailValidationStatus"]',error:".bose-textField--error",textFieldSuggestion:".bose-textField__suggestion",shownErrorMsg:".bose-newErrorMessage.-show",otherEmailValidation:'input[name="otherEmailValidation"]'},Bose.TextField.init=function(a){Bose.TextInput.init(a,Bose.TextField);var b=Bose.TextField.selectors;$jq(document).on("click",b.textFieldSuggestion,function(){var a=$jq(this),c=a.closest(b.shownErrorMsg).siblings(b.container).find("input#"+a.attr("data-target"));c.val(a.text()),c.focus()})},Bose.TextField.autoFocus=function(a){var b=$jq(a),c=b.closest(Bose.TextField.selectors.container),d=b.parent().find(".bose-textField__label-title").text();c.hasClass(Bose.TextField.classes.readOnly)||c.addClass(Bose.TextField.classes.active),b.focus().attr("aria-label",d)},Bose.TextField.doChecks=function(a,b,c){return Bose.TextInput.doChecks(a,b,c)&&c.doLuhnCheck(a,b,c)&&c.doIbanCheck(a,b,c)&&c.doEmailCheck(a,b,c)},Bose.TextField.doEmailCheck=function(a,b,c){if(void 0!==a.data("options")&&"emailaddressValidator"===a.data("options").validator){if(""===a.val())return!1;var d=b.find(Bose.TextField.selectors.hiddenEmailValidationStatus);if(d.length){if(a.siblings(Bose.TextField.selectors.otherEmailValidation).val().length)return!1;var e=Bose.DataLayer.Data.Page.country.toUpperCase(),f=Bose.DataLayer.Data.Page.language.toLowerCase(),g=d.data("stub"),h={address:{emailAddress:a.val()}},i="/bin/avs/emailaddress?countryCode="+e+"&languageCode="+f+"&stub="+g;$jq.ajax(i,{contentType:"application/json",method:"POST",data:JSON.stringify(h)}).done(function(e){if("valid"===e.status||"unknown"===e.status)c.markValid(b,c);else{var f=a.data("options").messages.invalid,g=a.attr("data-email-suggestion-message")||"",h=e.suggestions&&e.suggestions[0]||"",i=g.replace("{0}",'<a href="javascript:void(0)" class="bose-textField__suggestion" data-target="'+a.attr("id")+'" title="'+a.attr("data-email-suggestion-tooltip")+'">'+h+"</a>");f=h?i:f,c.markInvalid(b,f,c)}d.val(e.status)}).fail(function(){d.val("client_error")})}}return!0},Bose.TextField.doLuhnCheck=function(a,b,c){if(void 0!==a.data("options")&&"true"===a.data("options").luhn){if(""===a.val())return!1;for(var d=a.val(),e=parseInt(d.substr(d.length-1),10),f=d.slice(0,-1),g=f.split("").reverse().join(""),h=g.split(""),i=0,j=[],k=2,l=0;l<h.length;l++){if(k%2==0){var m=2*h[l];m>9&&(m-=9),j.push(m)}else j.push(parseInt(h[l],10));k++}for(var n=0;n<j.length;n++)i+=j[n];if((i+=e)%10!=0){var o=a.data("options").messages.wrongFormat;return c.markInvalid(b,o,c),!1}}return!0},Bose.TextField.doIbanCheck=function(a,b,c){if(void 0!==a.data("options")&&"true"===a.data("options").ibanCheck){if(""===a.val())return!1;var d=a.val().replace(/\s+/g,""),e=d.substring(0,2).toUpperCase(),f=(e.charCodeAt(0)-55).toString().concat((e.charCodeAt(1)-55).toString()),g=d.substring(4).concat(f+d.substring(2,4));if(isNaN(g))return!1;for(;g.length>9;){g=g.substring(0,9)%97+g.substring(9)}if(g%97!=1){var h=a.data("options").messages.wrongFormat;return c.markInvalid(b,h,c),!1}}return!0};var Bose=Bose||{};Bose.PasswordField=function(){function a(){$jq(d.component).length>0&&($jq(d.passwordToggle).on("click",b),$jq(document).on("forms.actualSubmit",c))}function b(){var a,b=$jq(this),c=b.closest(d.component),f=c.find(d.input),g=c.find(d.passwordToggle);"password"===f.attr("type")?(a="text",g.addClass(e.iconActive)):(a="password",g.removeClass(e.iconActive)),f.attr("type",a)}function c(){$jq(d.input).each(function(a,c){var d=$jq(c);"password"!==d.attr("type")&&b.call(d)})}var d={component:".js-passwordField",passwordToggle:".js-passwordField-togglePW",input:".js-passwordField-input"},e={iconActive:"bose-passwordField__icon--active"};return{init:a,_selectors:d}}();var Bose=Bose||{};Bose.Address=function(){function a(a){var d=$jq('input[name="'+a+'"]');void 0===d.data("clicked")&&(d.data("clicked",!0),d.on("change",c),n("multipleAddresses",!d.first().prop("checked")),b())}function b(){$jq(o.checkoutPanel).find(o.email).addClass("js-bose-setFocus"),$jq(o.state).on("selectmenuchange change",function(){d.call(this),e.call(this)}),$jq(o.town).on("selectmenuchange change",function(){e.call(this),k()}),$jq(o.country).on("selectmenuchange change",function(){d.call(this),h.call(this),k()}),$jq(o.postalcode).on("blur",l).on("updateFields blur",i),$jq(o.billingpostalcode).on("blur",l).on("updateFields blur",i),$jq(o.militarypostalcode).off("blur").on("blur",l).on("updateFields blur",i),Bose.Select.init(),$jq(o.country).each(function(){h.call(this)}),k(),$jq(o.country+' option[value="US"]').length&&j(),Bose.Select.resetSelectMenuToNative(),Bose.Tooltip.initTooltip($jq(o.infoIcon),{content:{text:$jq(o.infoIcon).data("content")},position:{target:"event"},style:{classes:"bose-tooltip bose-tooltip--text"}}),$jq('[data-mod="addressautocomplete"]:not(.initialized)').each(function(){Bose.AddressAutoComplete&&new Bose.AddressAutoComplete({el:this})})}function c(){var a=$jq(this),b=a.closest(".bose-address"),c=b.parent().find(".bose-address--summary"),d=c.is(":visible");b.find(".bose-address__form").toggle(),c.removeClass("hide").removeClass("show"),d?c.hide():c.show(),n("multipleAddresses",!a.first().prop("checked")),$jq(o.postalCheck)?$jq(o.billingpostalcode).on("blur",l):$jq(o.billingpostalcode).off("blur",l)}function d(){var a=$jq(this).find(":selected");if(a.hasClass("bose-dropdownRestrictions")){$jq(".bose-select").removeClass("bose-selectRestrictionError");var b=a.data("denyforselfservice"),c=a.val(),d=a.data("message");b?(void 0===$jq(o.restrictionMessage).html()?($jq(".serviceFormFlow .bose-address").after('<div class="bose-richText bose-purchaseRestrictionErrorMessage" data-code="'+c+'"></div>'),$jq(o.restrictionMessage).html(d)):($jq(o.restrictionMessage).html(d),$jq(o.restrictionMessage).data("code",c)),a.parent().closest(".bose-select").addClass("bose-selectRestrictionError"),$jq(o.serviceFormFlowButton).attr("onclick",""),Bose.ButtonLink.disable($jq(o.serviceFormFlowButton))):void 0!==$jq(o.restrictionMessage).html()&&$jq(o.restrictionMessage).data("code")&&-1===$jq(o.restrictionMessage).data("code").indexOf(c)&&($jq(o.restrictionMessage).text(""),$jq(o.serviceFormFlowButton).attr("onclick","return Bose.Forms.submitForm(this);"),Bose.ButtonLink.enable($jq(o.serviceFormFlowButton)))}}function e(){var a,b=$jq(this).find(":selected"),c=b.val(),d=b.data("country"),e=b.data("overrideCountry"),f=$jq(this).closest(".bose-address"),h=f.find(o.state).length?f.find(o.state):f.find(o.town),i=f.find(o.country),j=i.val(),k=i.attr("name"),l=null;i.find("option").prop("selected",!1),e?(l=i.find("option[data-override-state="+e+"]"),l.attr("selected","selected")):d&&(l=i.children().filter(function(){return void 0===$jq(this).data("overrideState")&&$jq(this).val()===d}),l.attr("selected","selected")),null===l?void 0===i.find('option[value="US"]').val()?(a=i.find("option").first().val(),i.val(a),i.find("option[value="+a+"]").first().attr("selected","selected")):(i.val("US"),i.find('option[value="US"]').attr("selected","selected")):(i.val(d),i.find("option[value="+d+"]").prop("selected",!0)),(d||e)&&Bose.Select.setActive.call(i),p[k]=i.val(),p[k]!==j&&h.length>0&&(g(h,p[k]),h.val(c),h.selectmenu().selectmenu("refresh"),Bose.Select.setActive.call(h))}function f(a,b,c){for(var d=0;d<b.length;d++)if("-1"===c||b[d].country===c){var e=$jq('<option value="'+b[d].state+'"> '+b[d].label+"</option>");b[d].country&&e.data("country",b[d].country),b[d].override&&e.data("override-country",b[d].override),b[d].hasOwnProperty("denyforselfservice")&&void 0!==b[d].denyforselfservice&&(e.data("denyforselfservice",b[d].denyforselfservice),e.addClass("bose-dropdownRestrictions")),b[d].hasOwnProperty("message")&&void 0!==b[d].message&&e.data("message",b[d].message),a.append(e)}}function g(a,b){var c=[];a.data("initialStates")||(a.find("option").each(function(a,b){var d=$jq(b);c.push({country:d.data("country"),state:d.val(),label:d.text(),override:d.data("override-country"),denyforselfservice:d.data("denyforselfservice"),message:d.data("message")})}),a.data("initialStates",c)),0===c.length&&(c=a.data("initialStates")),b&&(a.find("option").remove(),c&&$jq.isArray(c)&&c.length>0&&f(a,c,b),a.find("option").length>=1&&a.prepend('<option value="-1"></option>'))}function h(){var a,b,c=$jq(this),d=c.find(":selected").val(),e=c.find(":selected").data("overrideState"),f=c.closest(o.address),h=f.find(o.state).length?f.find(o.state):f.find(o.town),i=c.attr("name");if(h.length>0){var j=h.val();g(h,d),b=0!==h.find('option[value="-1"]').length,a=e||(b?"-1":h.find('option[data-country="'+d+'"]').first().val()),h.val(j),(null===h.val()||e)&&a&&h.val(a),Bose.Select.setActive.call(h)}p[i]=d}function i(a){var b=$jq.trim(this.value),c=Bose.DataLayer.Data.Page.formattedLocale,d=$jq(o.city),e=$jq(o.state),f=$jq(o.country);a.stopPropagation(),"en_us"===c&&b&&$jq.ajax({url:"/"+c+"/checkout.zipcode.html/zipcodeLookup",method:"POST",dataType:"json",data:{zipcodeValue:b},success:function a(b){var c=b.zipCode.countryCode,g=b.zipCode.countryStateCode;d.val(b.zipCode.city).blur(),f.val(c).trigger("change"),e.val(g).trigger("change"),$jq(o.phone).focus(),Gridle.isActive("large")&&$jq(o.country+","+o.state).selectmenu().selectmenu("refresh")},error:function a(){d.val(""),e.val("-1").trigger("change"),f.val("US").trigger("change"),Gridle.isActive("large")&&$jq(o.country+","+o.state).selectmenu().selectmenu("refresh"),$jq(o.state).closest(".bose-select--error").removeClass("bose-select--error js-errorValidate").next(".bose-newErrorMessage").removeClass("-show")}})}function j(){$jq(o.country).each(function(){$jq(this).find('option[value="PR"]').attr("data-override-state","PR-PR"),$jq(this).find('option[value="VI"]').attr("data-override-state","VI-VI")}),$jq(o.state).each(function(){$jq(this).find('option[value="US-PR"]').attr("data-override-country","US-PR"),$jq(this).find('option[value="US-VI"]').attr("data-override-country","US-VI")})}function k(){$jq(o.country).selectmenu().selectmenu("refresh").selectmenu("close"),$jq(o.country).css("display","inline-block"),$jq(o.state).selectmenu().selectmenu("refresh").selectmenu("close"),$jq(o.state).css("display","inline-block"),Bose.Select.resetSelectMenuToNative()}function l(a){var b=$jq(this),c=b.data("blockedpostalcode");if(0!==c.length){b.removeClass("bose-textField--invalidPostalCode");var d=b.val().replace(/\s/g,"").toUpperCase();($jq('input[name="shippingAddressSameAsBillingchk"]').is(":checked")&&"shipping.postalCode"!==$jq(this).attr("name")||"shipping.postalCode"===$jq(this).attr("name"))&&$jq.each(c,function(c,e){if(e.toUpperCase()===d||-1!==e.indexOf("*")&&0===d.indexOf(e.substring(0,e.indexOf("*")).toUpperCase()))return b.addClass("bose-textField--invalidPostalCode"),b.trigger("doValidation"),a.preventDefault(),!1})}}function m(){$jq(o.companyPurchaseCheckbox).each(function(){var a=$jq(this);if(!a.data("eventAdded")){a.data("eventAdded",!0);var b=a.parents(".bose-address__row").find("fieldset"),c=b.find(o.companyName),d=b.find(o.taxField);(c.val()||d.val())&&(a.prop("checked",!0),b.removeClass("hide")),a.on("change",function(a){a.stopImmediatePropagation(),a.target.checked?b.show():(c.val(""),d.val(""),b.hide())})}})}function n(a,b){Bose.DataLayer.setVariable("Address",a,b)}var o={address:".bose-address",country:'select[name$=".country.isocode"]',state:'select[name$=".state"]',town:'select[name$=".town"]',city:'input[name$=".town"]',phone:'input[name$=".phone"]',postalcode:'input[name="shipping.postalCode"]',billingpostalcode:'input[name="billing.postalCode"]',militarypostalcode:'input[name="communication.postalCode"]',errorMessageContainer:".bose-form__errorTitle",textFieldContainer:".bose-textField",infoIcon:".js-bose-infoIcon",postalCheck:".bose-checkbox__input:checked",email:'input[type="email"]',checkoutPanel:".bose-formFlowPanel--checkoutPanel",restrictionMessage:".serviceFormFlow .bose-purchaseRestrictionErrorMessage",serviceFormFlowButton:".serviceFormFlow .submitButton .bose-button",companyPurchaseCheckbox:'.bose-address_companyPurchase__checkbox input[type="checkbox"]',companyName:'input[name*=".careOf"]',taxField:'input[name*=".vat"]'},p={};return{init:a,initDropdownListener:b,updateCountrySelect:e,populateInitialStates:g,updateStateSelect:h,addUSStateAsCountryOverride:j,refreshDropdown:k,checkForServiceDeny:d,handleCompanyPurchaseCheckbox:m,_selectors:o}}();var Bose=Bose||{};Bose.AddressAutoComplete=Bose.BaseClass.extend(function(){function a(){var a=this,c="";"object"===_typeof(navigator.geolocation)&&"CA"!==a.currentCountry&&navigator.geolocation.getCurrentPosition(function(a){c=a.coords.latitude+","+a.coords.longitude}),a.$lineOne.on("input",j.debounce(function(d){var e=this.value.trim();e.length>2&&"Escape"!==d.key&&!a.disableAutoSuggestion&&(a.previousValue===e?a.$quickLinks.addClass("-show"):(a.previousValue=e,b.call(a,e,c)))},300,!1)).on("keydown",h.bind(a)),Gridle.isActive("small")&&a.$lineOne.on("focus",function(){$jq("html, body").animate({scrollTop:$jq(this).parents(i.containerRow).offset().top})}),$jq(document).on("click keydown",function(b){(["Tab","Escape"].indexOf(b.key)>-1||!$jq(b.target).closest(a.$lineOne.closest(i.containerRow)).length)&&(a.$quickLinks.removeClass("-show"),a.$lineOne.attr("aria-label",""))}),a.$quickLinksContainer.on("click",i.quickLinkMenuItems,e.bind(a))}function b(a,b){var c=this,d="&maxSuggestions="+(Gridle.isActive("small")?+c.maxsuggestionsmobile:c.maxsuggestionsdesktop),e="&country="+c.currentCountry,g=b?"&location="+b:"";null!==c.$suggestionRequest&&c.$suggestionRequest.abort(),c.$suggestionRequest=$jq.ajax({url:c.searchurl+"/search?query="+a+e+g+d}).done(c.updateListAndShow.bind(c)).fail(f)}function c(a){var b=this,c=a.data,e=""
;0===c.totalMatches?e='<a role="option" tabindex="-1" href="#" class="bose-quickLinks__navItems bose-quickLinks__navItems--no-results">'+Bose.Translation.getSiteTranslation("label_no_matches")+' <u class="js-clear-results">'+Bose.Translation.getSiteTranslation("label_please_try_again")+"</u></a>":(e='<a role="option" tabindex="-1" href="#" class="bose-quickLinks__navItems bose-quickLinks__navItems--manual-address"><div class="bose-quickLinks__navItems__manual-address-text">'+Bose.Translation.getSiteTranslation("label_select_an_address_or")+' <u class="js-manual-address">'+Bose.Translation.getSiteTranslation("label_enter_your_address_manually")+"</u></div></a>",e+=c.results.map(function(a){return'<a role="option" tabindex="-1" href="#" title="'+a.suggestion+'" data-id="'+a.format+'" class="bose-quickLinks__navItems ctHidden">'+d(a)+"</a>"}).join("")),b.$quickLinksContainer.html(e),b.$quickLinks.addClass("-show")}function d(a){for(var b=a.matched||[],c=a.suggestion,d=0;d<b.length;d++){var e='<b class="ctHidden">'+c.substring(b[d][0],b[d][1])+"</b>";c=c.substring(0,b[d][0])+e+c.substring(b[d][1])}return c}function e(a){var b=this,c=$jq(a.currentTarget),d=c.attr("data-id");if(a.preventDefault(),"string"!=typeof d||""===d){var e=c.hasClass("selected"),g=c.hasClass("js-manual-address")||e&&c.find(".js-manual-address").length,h=c.hasClass("js-clear-results")||e&&c.find(".js-clear-results").length;return void(g?(b.disableAutoSuggestion=!0,b.$quickLinks.removeClass("-show")):h&&(b.$lineOne.val("").attr("aria-label","").focus(),b.$quickLinks.removeClass("-show")))}$jq.ajax({url:b.searchurl+"/format?country="+b.currentCountry+"&id="+d}).done(b.updateFields.bind(b)).fail(f())}function f(a){window.console.log(a)}function g(a){var b=this,c=a.data.address[0],d=c.addressLine1,e=c.addressLine2,f=c.addressLine3,g=c.province,h=c.country,i=c.postalCode,j=c.locality;b.$lineOne.val(d+(e?", "+e:"")+(f?", "+f:"")),b.$postalCode.val(i).trigger("change"),b.$city.val(j).trigger("change"),["PR","VI"].indexOf(g)>-1&&"US"===h?(b.$country.val(g).trigger("change"),b.$state.val(g+"-"+g).trigger("change")):(b.$country.val(h).trigger("change"),b.$state.val(h+"-"+g).trigger("change")),Gridle.isActive("large")&&(b.$country.selectmenu().selectmenu("refresh"),b.$state.selectmenu().selectmenu("refresh")),b.$quickLinks.removeClass("-show"),b.$phone.focus()}function h(a){var b=this,c=b.$quickLinksContainer.find(i.quickLinkMenuItems),d=c.first(),e=c.last(),f=a.key,g=b.$quickLinksContainer.find(".selected");if(-1===["ArrowUp","ArrowDown"].indexOf(f))return void("Enter"===f&&g.click());g.removeClass("selected"),"ArrowUp"===f&&(g.is(d)?g.is(d)&&e.addClass("selected"):g.prev().addClass("selected")),"ArrowDown"===f&&(g.length?g.is(e)?g.is(e)&&d.addClass("selected"):g.next().addClass("selected"):d.addClass("selected")),b.$lineOne.attr("aria-label",b.$quickLinksContainer.find(".selected").text())}var i={lineOne:'input[name$=".line1"]',country:'select[name$=".country.isocode"]',state:'select[name$=".state"]',town:'select[name$=".town"]',city:'input[name$=".town"]',phone:'input[name$=".phone"]',postalcode:'input[name$=".postalCode"]',quickLinks:".bose-quickLinks",quickLinksContainer:".js-bose-quickLinksContainer",quickLinkMenuItems:".bose-quickLinks__navItems",containerRow:".bose-address__row"},j=Bose.Utils;return{$city:null,$state:null,$country:null,$lineOne:null,$postalCode:null,$phone:null,$quickLinks:null,$quickLinksContainer:null,searchurl:"",maxsuggestionsdesktop:7,maxsuggestionsmobile:7,disableAutoSuggestion:!1,currentCountry:"",previousValue:"",$suggestionRequest:null,_setup:function b(){var c=this;c._super(),c.$city=$jq(i.city,c.$el),c.$state=$jq(i.state,c.$el),c.$country=$jq(i.country,c.$el),c.$lineOne=$jq(i.lineOne,c.$el),c.$postalCode=$jq(i.postalcode,c.$el),c.$phone=$jq(i.phone,c.$el),c.$quickLinks=$jq(i.quickLinks,c.$el),c.$quickLinksContainer=$jq(i.quickLinksContainer,c.$el),c.currentCountry=(Bose.DataLayer.Data.Page.country||"US").toUpperCase(),a.call(c)},updateFields:g,updateListAndShow:c}}());var Bose=Bose||{};Bose.CheckoutShipping=function(){function a(){var a=$jq(n.infoIconExpressShipping);j=$jq(n.deliveryMethodContainer),k=$jq(n.shippingMethodList),l=$jq(n.allowedStates),m=$jq(n.state),!1===k.find(n.shippingOption).prop("checked")?$jq(n.selectedDeliveryMode).val("US_express"):$jq(n.selectedDeliveryMode).val("US_expedited"),$jq(document).on("change selectmenuchange",n.state,f).on("change selectmenuchange",n.state,g).on("change",n.shippingOption,b).on("keypress",n.tel,d).on("click",n.deliveryOptions,c),m.is(":visible")?m.trigger("selectmenuchange"):e(),g(),Bose.Tooltip.initTooltip(a,{content:{text:a.data("content")},position:{my:"bottom left",at:"top right",target:"event"},style:{classes:"bose-tooltip bose-tooltip--text bose-tooltip--shippingMethod"}})}function b(){var a=$jq(this);a.data("address")&&($jq(n.streetField).val(a.data("address")),$jq(n.postalField).val(a.data("postalcode")),$jq(n.town).val(a.data("city")),m.val(a.data("isocode")),m.selectmenu().selectmenu("refresh"))}function c(){sessionStorage.setItem("deliveryMode",$jq(this).val())}function d(a){var b=String.fromCharCode(a.which);return!b.match(/[^0-9+-]/)}function e(){var a,b=$jq(n.stateWithDeliveryModes).find("option"),c={};$jq(n.rowWithDeliveryModes).removeClass("bose-checkoutShipping__row--hide"),j.html(""),b.each(function(b,d){var e=$jq(d);c.deliveryModeLabel=e.data("namelabel"),c.deliveryTime=e.data("desclabel"),c.deliveryPrice=e.data("cost"),c.deliveryModeValue=e.data("code"),c.deliveryMode=e.data("free"),a=e.data("express")?'<div class="bose-checkoutShipping__method__list"><input type="radio" name="shipping.option" value="{deliveryModeValue}"/><span class="bose-checkoutShipping__rightContent"><span class="bose-checkoutShipping__method__deliveryMode">{deliveryModeLabel}<span>:</span></span>  {deliveryTime} <div class="bose-checkoutShipping__method__deliveryMode bose-checkoutShipping__method__deliveryMode--price"><span>+  </span>{deliveryPrice}</div></span></div>':'<div class="bose-checkoutShipping__method__list"><input type="radio" name="shipping.option" checked  value="{deliveryModeValue}"/><span class="bose-checkoutShipping__rightContent"> <span class="bose-checkoutShipping__method__deliveryMode bose-checkoutShipping__method__deliveryMode--highlight">{deliveryMode}</span> <span class="bose-checkoutShipping__method__deliveryMode">{deliveryModeLabel}<span>:</span></span>  {deliveryTime}</span></div>',j.append(nano(a,c)),h()})}function f(){var a,b,c,d=$jq(n.stateWithDeliveryModes),f=m.val(),g=d.find("option"),k=d.find("option[data-isocode ="+f+"]"),l="",o=0===d.find("option[data-isocode ="+f+'][data-code="US_express"]').length,p=0===d.find("option[data-isocode ="+f+'][data-code="US_standard"], option[data-isocode ='+f+'][data-code="US_expedited"]').length;if($jq(g).each(function(){var c=$jq(this);void 0===c.data("isocode")&&void 0===c.data("facilitypickupaddressLine1")&&(c.data("express")?b=c:a=c)}),c={deliveryModeLabel:$jq(a).data("namelabel"),deliveryTime:$jq(a).data("desclabel"),deliveryPrice:$jq(a).data("cost"),deliveryModeValue:$jq(a).data("code"),deliveryMode:$jq(a).data("free"),deliveryModeLabelExpress:$jq(b).data("namelabel"),deliveryTimeExpress:$jq(b).data("desclabel"),deliveryModeValueExpress:$jq(b).data("code"),deliveryPriceExpress:$jq(b).data("cost")},"-1"===f&&(f=0),1===g.length)return void e();$jq(n.rowWithDeliveryModes).removeClass("bose-checkoutShipping__row--hide"),p&&(l='<div class="bose-checkoutShipping__method__list"><input type="radio" name="shipping.option" checked value="{deliveryModeValue}"/><span class="bose-checkoutShipping__rightContent"><span class="bose-checkoutShipping__method__deliveryMode bose-checkoutShipping__method__deliveryMode--highlight">{deliveryMode}</span> <span class="bose-checkoutShipping__method__deliveryMode">{deliveryModeLabel}<span>:</span></span> {deliveryTime}</span></div>'),o&&(l+='<div class="bose-checkoutShipping__method__list"><input type="radio" name="shipping.option" value="{deliveryModeValueExpress}"/><span class="bose-checkoutShipping__rightContent"><span class="bose-checkoutShipping__method__deliveryMode">{deliveryModeLabelExpress}<span>:</span></span>  {deliveryTimeExpress} <div class="bose-checkoutShipping__method__deliveryMode bose-checkoutShipping__method__deliveryMode--price"><span>+  </span>{deliveryPriceExpress}</div></span></div>'),j.html("").append(nano(l,c)),(k.length<=0||1!==d.find("option").length)&&h(),f&&i(f)}function g(){var a,b=$jq(n.stateWithDeliveryModes),c=b.find("option"),d={};$jq(n.accDeliverMethodContainer).html(""),$jq(n.rowWithDeliveryModes).removeClass("bose-checkoutShipping__row--hide"),$jq(c).each(function(){var b=$jq(this);d={},void 0===b.data("isocode")&&void 0!==b.data("facilitypickupaddressLine1")&&m.val()===b.data("facilitypickupaddressIsocode")&&(d={deliveryModeLabel:b.data("namelabel"),deliveryTime:b.data("desclabel"),deliveryPrice:b.data("cost"),deliveryModeValue:b.data("code"),deliveryMode:b.data("free"),deliveryAddress:b.data("facilitypickupaddressStreetnumber")+" "+b.data("facilitypickupaddressLine1"),deliveryIsoCode:b.data("facilitypickupaddressIsocode"),deliveryPostalCode:b.data("facilitypickupaddressPostalcode"),deliveryCity:b.data("facilitypickupaddressTown")},a='<div class="bose-checkoutShipping__method__list"><input type="radio" name="shipping.option" value="{deliveryModeValue}" data-isocode ="{deliveryIsoCode}" data-postalcode="{deliveryPostalCode}" data-address="{deliveryAddress}" data-city="{deliveryCity}" /><span class="bose-checkoutShipping__rightContent"> <span class="bose-checkoutShipping__method__deliveryMode">{deliveryModeLabel}<span>:</span></span> {deliveryTime}</span></div>',$jq(n.accDeliverMethodContainer).append(nano(a,d)),h())})}function h(){var a=sessionStorage.getItem("deliveryMode");a&&$jq(n.shippingMethodList).find('input[name="shipping.option"][value='+a+" ]").attr("checked","checked")}function i(a){var b,c=l.data(o.allowedStatesData),d=a.split("-")[1],e=[];for(var f in c)c[f]&&-1===c[f].indexOf(d)&&e.push(f);e.length?(b=Bose.Translation.getSiteTranslation("label_restricted_products_error_message","<strong>"+e.join(", ")+"</strong>"),l.data(o.invalidSelectionData,!0),Bose.Select.markInvalid($jq(n.shippingState).closest(Bose.Select.selectors.container),b)):(l.data(o.invalidSelectionData,!1),Bose.Select.markValid($jq(n.shippingState)))}var j,k,l,m,n={state:'select[name$=".state"]',country:'select[name$=".country.isocode"]',streetField:'input[name="shipping.line1"]',postalField:'input[name="shipping.postalCode"]',town:'input[name="shipping.town"]',tel:'input[name="shipping.phone"]',stateWithDeliveryModes:".js-stateDeliverModes",rowWithDeliveryModes:".js-bose-checkoutShippingRow",deliveryMethodContainer:".js-bose-checkoutShipping__method",productDescriptionContainer:".bose-shoppingCart__productContainerDescriptionInStock",freeHighlighter:".bose-checkoutShipping__method__deliveryMode--highlight",deliveryModeLabel:".bose-checkoutShipping__method__deliveryMode",accDeliverMethodContainer:".js-bose-accCheckoutShipping__method",deliveryOptions:'input[name$=".option"]',selectedDeliveryMode:".js-selectedDeliveryMethod",allowedStates:".js-bose-allowedStates",shippingState:'select[name$="shipping.state"]',shippingMethodList:".bose-checkoutShipping__method__list",shippingOption:'[name="shipping.option"]',infoIconExpressShipping:".js-bose-expressInfo"},o={allowedStatesData:"allowed-states",countryCodeData:"country-code",invalidSelectionData:"invalid-selection"};return{init:a,_selectors:n}}(),$jq(document).ready(function(){Bose.CheckoutShipping.init()});var Bose=Bose||{};Bose.AddressValidation=function(){function a(a){b(a)}function b(a){var b,f,g;a?(b=a.find(z.searchButton),f=a.find(z.manualAddress),g=a.find(z.showSearchButton)):(b=$jq(z.searchButton),f=$jq(z.manualAddress),g=$jq(z.showSearchButton)),b.on("click",c),f.on("click",d),g.on("click",e)}function c(a){var b=$jq(a.delegateTarget),c=b.closest(z.address);!b.hasClass("bose-button--loading")&&n(c)&&(q(c),j(c,f(c,!0)))}function d(a){var b=$jq(a.delegateTarget).closest(z.address);s(b),y(b,"MANUAL"),o(b)}function e(a){var b=$jq(a.delegateTarget).closest(z.address),c=b.closest("form");Bose.Forms.Validation.hideError(c),p(b)}function f(a,b){var c={},d=["shipping","billing","communication"];return a.find(":input").serializeArray().forEach(function(a){var e=a.name;if(b){if(-1===e.indexOf("search."))return;e=e.replace("search.","")}d.forEach(function(a){var b=a+".";-1!==e.indexOf(b)&&(e=e.replace(b,""))}),c[e]="state"===e?$jq("select[name='"+a.name+"'] option:selected").text():a.value}),{address:c}}function g(a){return h(a.find(".bose-address .bose-address__form:visible").closest(".bose-address"))}function h(a){var b=$jq(a[0]),c=[],d=w(b),e=b.closest("form"),g=$jq.Deferred();return a.each(function(){var a=$jq(this);u(a)&&c.push({address:f(a,!1),$address:a})}),Bose.AddressValidationService.validateAddresses(c,"validate",d).done(function(a){i(e,a),g.resolve()}).fail(function(a){i(e,a),g.reject()}),g.promise()}function i(a,b){b.forEach(function(a){y(a.$address,a.status),a.address&&m(a.$address,a.address)}),Bose.Forms.Validation.hideError(a)}function j(a,b){var c=a.closest("form"),d=w(a),e=[{address:b,$address:a}];if(k(a),!n(a))return void r(a);Bose.AddressValidationService.validateAddresses(e,"search",d).done(function(b){var d=b[0];Bose.Forms.Validation.hideError(c),y(d.$address,d.status),void 0!==d.error?d.error.code===Bose.AddressValidation.NO_ADDRESSES||d.error.code===Bose.AddressValidation.TOO_MANY_ADDRESSES?(l(a,"avs."+d.error.code),r(a)):(Bose.Forms.Validation.displayError(c,"avs.search.error.title","avs.error.message"),o(a)):d.address?(m(d.$address,d.address),o(a)):o(a)}).fail(function(){r(a)})}function k(a){a.find(".bose-addressSearchError").hide()}function l(a,b){var c=a.find(".bose-addressSearchError");c.find(".bose-addressSearchError__message").text(Bose.Translation.getSiteTranslation(b)),c.show()}function m(a,b){if(a.find(":input").filter(':not([name*="search"])').each(function(){var a=$jq(this),c=a.prop("name");for(var d in b)if(b.hasOwnProperty(d)&&"country"!==d&&-1!==c.indexOf(d)&&-1===c.indexOf("search")){var e=b[d];"state"===d&&(e=$jq('select[name="'+c+'"] option').filter(':contains("'+b[d]+'")').val()),"houseNumber"===d&&e.length>Bose.AddressValidation.MAX_HOUSE_NO_LEN&&(e=e.substr(0,Bose.AddressValidation.MAX_HOUSE_NO_LEN)),void 0!==e&&(a.val(e),a.trigger("change"))}}),!a.find('.bose-address__addressInfo [name$="houseNumber"]').length&&!a.find('.bose-address__addressInfo [name$="line2"]').length&&b.houseNumber){var c=a.find('.bose-address__addressInfo [name$="line1"]');"street-housenumber"===x(a)?c.val(c.val()+" "+(b.line2?b.line2:"")+" "+b.houseNumber):c.val((b.line2?b.line2:"")+" "+b.houseNumber+" "+c.val()),c.trigger("change")}t(a)}function n(a){var b=a.find('input[name*="search"]'),c=!0;return b.trigger("doValidation"),b.each(function(){Bose.TextField.isValid($jq(this),Bose.TextField)||(c=!1)}),c}function o(a){a.find(z.addressInfo).show(),a.find(".bose-address__addressInfo .bose-postalRestriction__service .bose-textField__input").focus(),a.find(".bose-address__addressInfo .bose-postalRestriction__service .bose-textField").removeClass("bose-textField--error js-errorValidate").addClass("bose-textField--valid"),a.find(".bose-address__addressInfo .bose-postalRestriction__service .bose-newErrorMessage").removeClass("-show"),a.find(z.addressSearch).hide(),r(a)}function p(a){a.find(z.addressInfo).hide(),a.find(z.addressSearch).show()}function q(a){Bose.Button.setLoading.call(a.find(z.searchButton))}function r(a){Bose.Button.setDefault.call(a.find(z.searchButton))}function s(a){var b=a.closest(z.address);a.closest(z.addressInfo).length&&v(b,!0)}function t(a){v(a,!1)}function u(a){var b=a.find(".bose-address__form").data("dirty");return void 0===b&&(b=!0,v(a,b)),b}function v(a,b){a.find(".bose-address__form").data("dirty",b)}function w(a){return a.data("avs-stub")||!1}function x(a){return a.data("avs-address-line1-format")}function y(a,b){a.find('input[name$="addressValidationStatus"]').val(b)}var z={address:".bose-address",addressForm:".bose-address__form",addressInfo:".bose-address__addressInfo",showSearchButton:".bose-address__showSearch",addressSearch:".bose-addressSearch",searchButton:".bose-addressSearch__searchButton",manualAddress:".bose-addressSearch__manualAddress"};return{init:a,dirtyAddress:s,isDirty:u,validateForm:g,searchForAddress:j,searchClick:c,SAME_ADDRESS:"SAME_ADDRESS",RETRY_ADDRESS:"RETRY_ADDRESS",MANUAL_ADDRESS:"MANUAL_ADDRESS",USE_SUGGESTED_ADDRESS:"USE_SUGGESTED_ADDRESS",TOO_MANY_ADDRESSES:"too.many.matches",NO_ADDRESSES:"no.matches",MAX_HOUSE_NO_LEN:10}}();var Bose=Bose||{};Bose.AddressValidationService=function(){function a(){t={post:function a(b,c){return $jq.ajax(b,{contentType:"application/json",method:"POST",data:JSON.stringify(c)})},search:function a(b,c,d){var e="/bin/avs/address/search?countryCode="+b+"&stub="+c;return this.post(e,d)},getAddress:function a(b,c,d,e){var f="/bin/avs/address/get?countryCode="+b+"&languageCode="+c+"&stub="+d;return this.post(f,e)}},Bose.DataLayer.Data.Page&&(Bose.DataLayer.Data.Page.country&&(r=Bose.DataLayer.Data.Page.country.toUpperCase()),Bose.DataLayer.Data.Page.language&&(s=Bose.DataLayer.Data.Page.language.toLowerCase()))}function b(a){var b={address:{id:a}};return t.getAddress(r,s,!1,b)}function c(a,b,c){return l(),n=$jq.Deferred(),p=b,q=c,o=a,d(),n.promise()}function d(){if(o.length){var a=o.splice(0,1)[0];t.search(r,q,a.address).done(function(b){e(b,a)}).fail(function(){m(a.$address),d()})}else x.length?f():j()}function e(a,b){if(a.status===u.perfectMatch||a.status===u.unknown){var c={address:{id:a.suggestions[0].id}};t.getAddress(r,s,q,c).done(function(a){i(a,b.$address),d()}).fail(function(){m(b.$address),d()})}else a.status===u.list?(x.push({address:b,suggestions:a.suggestions}),d()):"search"===p||a.error.code!==Bose.AddressValidation.NO_ADDRESSES&&a.error.code!==Bose.AddressValidation.TOO_MANY_ADDRESSES?(y.push({error:a.error,status:a.status,$address:b.$address}),d()):(x.push({address:b,suggestions:[],reason:a.error.code}),d())}function f(){Bose.AddressValidationSuggestions.showSuggestions(x,p).done(function(a){w=a,g()}).fail(function(a){z=!0,w=a,g()})}function g(){if(w.length){h(w.splice(0,1)[0])}else z?k():j()}function h(a){var b=a.$address;if(a.choice===Bose.AddressValidation.SAME_ADDRESS||a.choice===Bose.AddressValidation.MANUAL_ADDRESS)y.push({status:v.manual,$address:b}),g();else if(a.choice===Bose.AddressValidation.RETRY_ADDRESS)z=!0,g();else if(a.choice===Bose.AddressValidation.USE_SUGGESTED_ADDRESS){var c={address:{id:a.value}};t.getAddress(r,s,q,c).done(function(c){c.status===u.perfectMatch?y.push({status:c.status,address:c.address,$address:a.$address}):y.push({status:v.serverError,error:c.error,$address:b}),g()}).fail(function(){m(b),g()})}}function i(a,b){a.status===u.perfectMatch?y.push({status:a.status,address:a.address,$address:b}):y.push({status:v.serverError,error:a.error,$address:b})}function j(){n.resolve(y)}function k(){n.reject(y)}function l(){n=void 0,w=[],x=[],y=[],z=!1}function m(a){y.push({status:v.clientError,$address:a})}var n,o,p,q,r,s,t,u={perfectMatch:"perfect_match",unknown:"unknown",list:"list",error:"error"},v={success:"success",manual:"MANUAL",serverError:"ERROR",clientError:"CLIENT_ERROR",cancel:"cancel"},w=[],x=[],y=[],z=!1;return{init:a,validateAddresses:c,getSingleAddress:b}}();var Bose=Bose||{};Bose.AddressValidationSuggestions=function(){function a(a){var b,e;a?(b=a.find(u.useSuggestionButton),e=a.find(u.overrideAddress)):(b=$jq(u.useSuggestionButton),e=$jq(u.overrideAddress)),b.on("click",c),e.on("click",d)}function b(a,b){x=[],y=[];var c=a[0].address.$address;return y=a,q=b,p=$jq.Deferred(),s=Bose.Popup.display(c.find(u.overlay),{onClose:f,wrapCss:t.overlayWrapper}),g(),p.promise()}function c(a){var b=$jq(a.target).closest(u.overlay).find("input[name=addressSuggestion]:checked");e(b.data("choice"),b.val())}function d(){e(Bose.AddressValidation.MANUAL_ADDRESS,"")}function e(a,b){p&&(x.push({choice:a,value:b,$address:r.address.$address}),y.length?g():(p.resolve(x),p=void 0,Bose.Popup.close(s)))}function f(){p&&(p.reject(x),p=void 0)}function g(){if(y.length){var a=y.splice(0,1)[0];r=a,h(a)}}function h(a){var b=$jq(u.overlayWrapper);i(b,a),j(b,a),m(b,a),n(b,a),o(b,a)}function i(a,b){var c=a.find(u.overlaySuggestions);if(c.empty(),b.suggestions.length)b.suggestions.forEach(function(a){c.append(k(a.address,a.id,Bose.AddressValidation.USE_SUGGESTED_ADDRESS,"bose-addressValidationOverlay__suggestion"))}),c.find("input").filter(":first").prop("checked",!0);else{var d=k("","",Bose.AddressValidation.RETRY_ADDRESS,"bose-addressValidationOverlay__suggestion");d.find(".bose-radioButton__label").prepend($jq("<span/>",{class:"bose-radioButton__label__text",text:Bose.Translation.getSiteTranslation(w.returnText)})).prepend($jq("<span/>",{class:"bose-radioButton__label__text",text:Bose.Translation.getSiteTranslation("avs."+b.reason)})),c.append(d)}}function j(a,b){var c=a.find(".bose-addressValidationOverlay__oldAddress"),d=a.find(u.overrideAddress);"search"===q?(d.show(),c.hide()):(d.hide(),c.show(),c.find(".bose-addressValidationOverlay__oldAddress__address").text(l(b)),c.find("input").filter(":first").prop("checked",!0))}function k(a,b,c,d){return $jq("<div/>",{class:"bose-radioButton "+d}).append($jq("<label/>",{class:"bose-radioButton__label",text:a}).append($jq("<input/>",{class:"bose-radioButton__input bose-addressValidation__radioButton",type:"radio",name:"addressSuggestion",value:b,data:{choice:c,id:b}})).append($jq("<span/>",{class:"bose-radioButton__inputIcon"})))}function l(a){var b="";return v.forEach(function(c){var d=a.address.address.address[c.field];void 0!==d&&d.length&&(b+=d+(c.comma?", ":" "))}),b=b.substr(0,b.length-2)}function m(a,b){var c=a.find(u.title),d=/bose-address--(\w*)/.exec(b.address.$address.attr("class"))[1];c.text(Bose.Translation.getSiteTranslation(d+" address"))}function n(a,b){b.suggestions.length||a.find(u.subTitle).text(Bose.Translation.getSiteTranslation(w.subTitle.requireAction))}function o(a,b){b.suggestions.length||a.find(u.useSuggestionButtonLabel).text(Bose.Translation.getSiteTranslation("Continue"))}var p,q,r,s,t={overlayWrapper:"bose-addressValidationOverlayWrapper"},u={overlay:".bose-addressValidationOverlay",overlaySuggestions:".bose-addressValidationOverlay__suggestions",title:".bose-addressValidationOverlay__title",subTitle:".bose-addressValidationOverlay__subTitle",useSuggestionButton:".bose-addressValidationOverlay__useSuggestionButton",useSuggestionButtonLabel:".bose-addressValidationOverlay__useSuggestionButton span",overrideAddress:".bose-addressValidation__overrideAddress",overlayWrapper:"."+t.overlayWrapper},v=[{field:"houseNumber",comma:!1},{field:"line1",comma:!0},{field:"line2",comma:!0},{field:"town",comma:!1},{field:"postalCode",comma:!0}],w={returnText:"I shall try again by returning to the address form.",subTitle:{requireAction:"Please confirm to continue:"}},x=[],y=[];return{init:a,showSuggestions:b}}();var Bose=Bose||{};Bose.SelectNewBrand=function(){function a(){$jq(d.select).each(function(){var a=$jq(this),d=a.data("prefix"),e={disableOnMobile:!1,arrowButtonMarkup:'<div class="arrow"></div>'};void 0!==d&&(e.labelBuilder='<span class="labelPrefix">'+d+'</span><span class="labelText">{text}</span>'),a.on("disable",b),a.on("enable",c),a.selectric(e)})}function b(){$jq(this).attr("disabled","disabled").selectric("refresh")}function c(){$jq(this).prop("disabled",!1).selectric("refresh")}var d={select:".js-selectNewBrand"};return{init:a}}();var Bose=Bose||{};Bose.ProductRegistration=function(){function a(){k=void 0,$jq(l.lookupSerialNumberButton).on("click",b),$jq(l.productSelectionDropdown).on("selectmenuchange",f),$jq(l.country).on("selectmenuchange",g),$jq(l.submitButton).on("click",c),i(),j()}function b(){var a=$jq(l.lookupSerialNumberInput).find("input").val(),b=$jq(l.lookupSerialNumberApiUrl).val()+"/products/"+a;k=void 0,i(),j(),$jq(l.productSelectionDropdown).empty().append('<option selected="selected"></option>'),$jq.ajax({type:"GET",url:b,datatype:"json",success:function b(c){$jq(l.serialNumberHiddenInput).val(a),k=d(c),1===k.length?($jq(l.productCodeHiddenInput).val(k[0].productCode),$jq(l.productNameContainer).html(Bose.Utils.getGraniteTranslation("productname_"+k[0].productCode)),$jq(l.skuHiddenInput).val(k[0].sku),h()):k.length>=2&&($jq(l.productCodeHiddenInput).val(""),$jq(l.productNameContainer).empty(),$jq(l.skuHiddenInput).val(""),e(k)),Bose.TextField.markValid($jq(l.lookupSerialNumberInput),Bose.TextField)},error:function a(){Bose.TextField.markInvalid($jq(l.lookupSerialNumberInput),Bose.Translation.getSiteTranslation("error.serialnr.notfound"),Bose.TextField)}})}function c(){var a,b=$jq(this),c=b.closest("form"),d=$jq(l.emailValidationInput),e=Bose.Forms&&Bose.Forms.Validation;void 0!==k&&$jq(document).trigger("productRegistration.submitRegistration",[c.find(l.country).val(),k]),!(a=e&&e.isValid&&e.isValid(c))||0!==d.length&&"valid"!==d.val()||c.submit()}function d(a){var b=[];if(void 0===a.partOf||null===a.partOf?b.push({productCode:a.productCode}):void 0!==a.soldSeparately&&null!==a.soldSeparately&&!1!==a.soldSeparately&&b.push({productCode:a.productCode}),void 0!==a.partOf&&null!==a.partOf)for(var c=a.partOf,d={},e=0;e<c.length;e++){var f=c[e];d[f.productCode]||(d[f.productCode]=!0,b.push({productCode:f.productCode}))}return b}function e(a){$jq.each(a,function(a,b){$jq(l.productSelectionDropdown).append('<option value="'+b.productCode+'">'+Bose.Utils.getGraniteTranslation("productname_"+b.productCode)+"</option>")}),$jq(l.productSelectionContainer).removeClass("bose-productRegistration__productSelection--hidden"),$jq(l.productSelectionDropdown).selectmenu("refresh")}function f(){var a=$jq(l.productSelectionDropdown).find(":selected").val();void 0!==a&&a.length?($jq(l.productCodeHiddenInput).val(a),h()):($jq(l.productCodeHiddenInput).val(""),i())}function g(){Bose.DatePicker.setLocale($jq(l.purchaseDate),$jq(this).val())}function h(){Bose.Utils.isAuthorMode()||$jq(l.productRegistrationContainer).removeClass("bose-productRegistration__customerData--hidden")}function i(){Bose.Utils.isAuthorMode()?$jq(l.productRegistrationContainer).removeClass("bose-productRegistration__customerData--hidden"):($jq(l.productRegistrationContainer).addClass("bose-productRegistration__customerData--hidden"),$jq(l.productSelectionContainer).next(".bose-newErrorMessage").removeClass("bose-newErrorMessage--hidden"))}function j(){Bose.Utils.isAuthorMode()?($jq(l.productSelectionContainer).removeClass("bose-productRegistration__productSelection--hidden"),$jq(l.productSelectionContainer).next(".bose-newErrorMessage").removeClass("bose-newErrorMessage--hidden")):($jq(l.productSelectionContainer).addClass("bose-productRegistration__productSelection--hidden"),$jq(l.productSelectionContainer).next(".bose-newErrorMessage").addClass("bose-newErrorMessage--hidden"))}var k,l={lookupSerialNumberApiUrl:".js-serialNumberLookupApiUrl",lookupSerialNumberButton:".js-serialNumberLookupSubmit",lookupSerialNumberInput:".js-productRegistration-serialNumber",serialNumberHiddenInput:'.bose-productRegistration__productData input[name="serialnumber"]',productCodeHiddenInput:'.bose-productRegistration__productData input[name="productcode"]',skuHiddenInput:'.bose-productRegistration__productData input[name="sku"]',productNameContainer:".js-productDataProductName",productRegistrationContainer:".js-customerDataContainer",productSelectionContainer:".js-productRegistration__productSelectionContainer",productSelectionDropdown:".js-productRegistration__productSelectionDropdown",submitButton:".js-productRegistration-submit",country:".js-productRegistration-country",purchaseDate:".js-productRegistration-purchaseDate",emailValidationInput:'.js-customerDataContainer input[name="emailValidationStatus"]'};return{init:a,_selectors:l}}();var Bose=Bose||{};Bose.DatePicker=function(){function a(a,b){A[a]=b}function b(){v=void 0,$jq(w.field).not("."+x.initialised).each(d)}function c(a){a.find(w.field).each(function(){$jq(this).removeClass(x.initialised)})}function d(){var a=$jq(this),b=t(a),c=new Pikaday({field:a.find(w.interceptor)[0],theme:"bose-pikaDay",i18n:u(),disableDayFn:function c(d){return h(b.dayValidator)(a,d)},onSelect:function b(c){i(a,c)},onOpen:function b(){f(a)},onClose:function b(){g(a)}});z[a.attr("id")]=c,o(a,b.minDate),p(a,b.maxDate),q(a,b.value||b.minDate),a.addClass(x.initialised),a.on("doValidation",l)}function e(a,b){a.find(w.hiddenField).on("change",function(){b(a)})}function f(a){a.data("popupOpen",!0)}function g(a){a.data("popupOpen",!1)}function h(a){return a&&A[a]?A[a]:function(){}}function i(a,b){var c=a.closest(w.field),d=c.find(w.hiddenField),e=c.find(w.textField),f=b.getDate(),g=b.getMonth()+1,h="";h+=b.getFullYear(),h+="-",h+=g<10?"0"+g:g,h+="-",h+=f<10?"0"+f:f,d.val(h),j(a,b),e.trigger("change"),a.data("popupOpen")&&(d.trigger("change"),a.data("popupOpen",!1)),e.trigger("doValidation")}function j(a,b){var c=a.closest(w.field),d=c.find(w.textField),e="en-US";void 0!==b&&null!==b&&(a.data(y.locale)?e=a.data(y.locale):void 0!==Bose.DataLayer.Data.Page.locale&&(e=Bose.DataLayer.Data.Page.locale),d.val(k(b,e)))}function k(a,b){return a.toLocaleDateString(b).replace(/[.-]/g,"/")}function l(){var a=$jq(this),b=a.closest(w.field),c=b.find(w.textField);Bose.TextField.doValidation.call(c,void 0,Bose.TextField)}function m(a){return Bose.TextField.isValid(a.find(w.textField),Bose.TextField)}function n(a,b){a.data(y.locale,b),j(a,s(a).getDate())}function o(a,b){var c=!(!b||""===b)&&new Date(b);s(a).setMinDate(c)}function p(a,b){var c=!(!b||""===b)&&new Date(b);s(a).setMaxDate(c)}function q(a,b){var c=b&&""!==b?new Date(b):new Date;s(a).setDate(c)}function r(a){return a.find(w.hiddenField).val()}function s(a){return z[a.attr("id")]}function t(a){return{value:a.data(y.value),required:a.data(y.required),requiredMessage:a.data(y.requiredMessage),minDate:a.data(y.minDate),maxDate:a.data(y.maxDate),dayValidator:a.data(y.dayValidator)}}function u(){return void 0===v&&(v={previousMonth:Bose.Translation.getSiteTranslation("bose_previous_month"),nextMonth:Bose.Translation.getSiteTranslation("bose_next_month"),months:Bose.Translation.getSiteTranslations(["bose_January","bose_February","bose_March","bose_April","bose_May","bose_June","bose_July","bose_August","bose_September","bose_October","bose_November","bose_December"]),weekdays:Bose.Translation.getSiteTranslations(["bose_Sunday","bose_Monday","bose_Tuesday","bose_Wednesday","bose_Thursday","bose_Friday","bose_Saturday"]),weekdaysShort:Bose.Translation.getSiteTranslations(["bose_Sun","bose_Mon","bose_Tue","bose_Wed","bose_Thu","bose_Fri","bose_Sat"])}),v}var v,w={field:".bose-datePicker",interceptor:".js-datePicker-interceptor",hiddenField:".js-datePicker-hiddenField",textField:".js-datePicker-textField"},x={initialised:"js-datePicker-initialised"},y={value:"value",required:"required",requiredMessage:"requiredMessage",minDate:"minDate",maxDate:"maxDate",dayValidator:"dayValidator",locale:"locale"},z={},A={};return{init:b,unInit:c,registerDayValidator:a,isValid:m,setMinDate:o,setMaxDate:p,setDate:q,setLocale:n,getDate:r,onChange:e,selectors:w,_classes:x}}(),$jq(document).ready(function(){Bose.Checkbox.init()}),$jq(document).ready(function(){Bose.RadioButton.init()}),$jq(document).ready(function(){Bose.TextArea.init()}),$jq(document).ready(function(){Bose.TextField.init()}),$jq(document).ready(function(){Bose.PasswordField.init()}),$jq(document).ready(function(){Bose.AddressValidation.init(),Bose.AddressValidationService.init(),Bose.AddressValidationSuggestions.init()}),$jq(document).ready(Bose.SelectNewBrand.init),$jq(document).ready(function(){Bose.Forms.Validation.init()}),$jq(document).ready(function(){Bose.ProductRegistration.init()}),$jq(document).ready(function(){Bose.DatePicker.init()})
;var Bose=Bose||{};Bose.HiddenField=function(){function a(a){var b;b=a?a.find(g.field):$jq(g.field),b.on("change",f).bind("doValidation",f)}function b(a){return!a.hasClass(h.hiddenFieldErrorModifier)}function c(a){a.removeClass(h.hiddenFieldErrorModifier).addClass(h.hiddenFieldValidModifier),a.find(g.errorMessage).text("")}function d(a,b){a.removeClass(h.hiddenFieldValidModifier).addClass(h.hiddenFieldErrorModifier),a.find(g.errorMessage).text(b)}function e(a){a.removeClass(h.hiddenFieldErrorModifier+h.hiddenFieldValidModifier),a.find(g.errorMessage).text("")}function f(){var a=$jq(this),b=a.find(g.input);"disabled"===b.attr("disabled")?c(a):b.prop("required")?""===b.val()?d(a,b.data("options").messages.required):c(a):""===b.val()?e(a):c(a)}var g={field:".bose-hiddenField",input:".bose-hiddenField__input",errorMessage:".bose-hiddenField__errorMessage"},h={hiddenFieldErrorModifier:"bose-hiddenField--error",hiddenFieldValidModifier:"bose-hiddenField--valid"};return{init:a,isValid:b,markValid:c,markInvalid:d,resetState:e,doValidation:f,selectors:g}}(),$jq(document).ready(function(){Bose.HiddenField.init()});var Bose=Bose||{};Bose.EmailTextField=function(){function a(){$jq(document).on("focusout",".emailTextField",function(){$jq(this).find(".js-encryptApiUrlField").length&&b()})}function b(){var a=$jq(".js-encryptApiUrlField").next().find("input[type=email]").val().trim();if(a.length){var b=$jq(c.encryptApiUrlField).val();$jq.ajax({type:"POST",url:b,headers:{"Content-Type":"application/json","encrypt-fields":"email"},data:JSON.stringify([{email:a}]),dataType:"json",crossDomain:!0,success:function a(b){for(var c="",d=0;d<b.length;d++)b[d].email&&(c=b[d].email);Bose.DataLayer.setVariable("UserContext","encryptedEmailAddress",c)}})}}var c={encryptApiUrlField:".js-encryptApiUrlField"};return{init:a,selectors:c}}(),$jq(document).ready(function(){Bose.EmailTextField.init()});var Bose=Bose||{};Bose.EmailSignUp=function(){function a(){$jq(document).on("click",d.emailSignUpSubmitButton,b)}function b(){var a=$jq(this),b=a.closest(d.emailSignUp),f=b.find(d.emailSignUpInput),g=f.find(d.textFieldInput),h=g.val(),i=f.find(d.errorMessage);if(a.removeClass(e.buttonLoading),void 0===h||""===h||i.hasClass("-show"))i.text(g.data("options").messages.required).addClass("-show");else if(b.find(d.selectEndPoint).length>=1){var j={emailId:h,segment:void 0===(Bose.IframeHearx&&Bose.IframeHearx._segment)?"":Bose.IframeHearx._segment};$jq.ajax({url:b.find(d.cdpUrlField).val().trim(),method:"POST",data:JSON.stringify(j),dataType:"json",success:function a(){c(f,b)},headers:{"Content-Type":"application/json"}})}else c(f,b)}function c(a,b){a.addClass(e.emailSignUpHide),b.find(d.emailSignUSubmit).addClass(e.emailSignUpHide),b.find(d.emailSignUpFooter).addClass(e.emailSignUpHide),b.find(d.thankyouIcon).removeClass(e.emailSignUpHide),b.find(d.emailSignUpHeaderText).replaceWith(b.find(d.thankyouMessage).html())}var d={emailSignUp:".bose-emailSignUp",emailSignUpSubmitButton:".bose-emailSignUp_submit .bose-button",emailSignUpInput:".bose-emailSignUp_input",textFieldInput:".bose-textField__input",errorMessage:".bose-newErrorMessage",cdpUrlField:".js-cdpUrlField",emailSignUSubmit:".bose-emailSignUp_submit",emailSignUpFooter:".bose-emailSignUp_footer",thankyouIcon:".bose-emailSignUp_thankyouIcon",emailSignUpHeaderText:".bose-emailSignUp_header>p",thankyouMessage:".bose-emailSignUp_thankyouMessage",selectEndPoint:".js-selectEndPoint"},e={buttonLoading:"bose-button--loading",emailSignUpHide:"bose-emailSignUp_hide"};return{init:a,selectors:d}}(),$jq(document).ready(function(){Bose.EmailSignUp.init()});var Bose=Bose||{};Bose.OtConsent=function(){function a(a,c){var d=a.closest("form");if(a.closest("form").on("submit",function(){b($jq(this),c)}),"PopUP"===(l=a.find(m.dataField).val())||"SignUpIndy"===l){a.closest(m.containerWithoutFormContainer).find(m.buttonWithoutFormContainer).on("click",function(){var a=$jq(this).closest(m.containerWithoutFormContainer);a.find('[name="email"],[name="communication.email"]').val().length&&b(a,c)}),d.length&&"emailSubscription_createSubscriber"===d.data("info")&&d.attr("action","javascript:void(0)")}}function b(a,b){c(b).then(function(b){i(a,b)})}function c(a){return $jq.ajax({type:"GET",url:a,dataType:"JSON"})}function d(a,b){var c=Bose.DataLayer.Data.Page;o.Country=c.country,o.Language=c.language,o.Locale=c.locale.replace("-","_"),o["Product Code"]=Bose.DataLayer.Data.Product.productCode||c.subCategory1||c.primaryCategory||"",o["Mobile device"]=Gridle.isActive("small")?"Yes":"No",j=b.preferences.map(function(a){return{id:a.purpose}}),a.find(m.oneTrustElem).each(function(){var a=$jq(this),b=a.data("element"),c=a.val();c&&(o[b]=c)})}function e(a){return $jq.ajax({type:"GET",url:a})}function f(a,b){var c,d,f=a.closest(m.formFlowContainer),g=b?"step_updatesubscriberdata":"step_confirmation";f.find('section[data-step-name="step_createsubscription"]').removeClass(n.formFlowPanelActive).addClass(n.formFlowPanelComplete),c=f.find('section[data-step-name="'+g+'"]'),d=c.attr("data-step-path"),e(d).then(function(a){c.find(m.formFlowPanelContent).append(a),c.addClass(n.formFlowPanelActive)})}function g(a,b,c,d,e){var g,i={};i.locale=d.Locale,i.productCode=d["Product Code"],g={body:JSON.stringify(i)},window.OneTrust.Api.TriggerReceiptAction(a,b,c,d).then(function(a){e.is("form")&&"emailSubscription_createSubscriber"===e.data("info")?f(e,a):Bose.DataCapture.responseOnOneTrust(a),a&&h(g)})}function h(a){return $jq.ajax({url:$jq(m.otAnalyticsServletpath).val()+".postdatatoanalytics.html",method:"POST",dataType:"json",data:a})}function i(a,b){var c=a.find('[name="email"],[name="communication.email"]'),e=b.token,f=a.find(m.oneTrustOptId).is(":checked");d(a,b),k=c.length?c.val():a.closest(m.formFlowContainer).find('[name="email"]').val(),o["Email Address"]=k,window.OneTrust.ScriptTag.Language=Bose.DataLayer.Data.Page.locale,a.find(".bose-textField--error , .bose-checkbox--error").length||(f?"PopUP"===l?g(k,e,j,o,a):window.OneTrust.Api.TriggerReceiptAction(k,e,j,o):window.OneTrust.Api.TriggerReceiptAction(k,e,null,o))}var j,k,l,m={dataField:".dataSourceType",oneTrustElem:".oneTrustElement",oneTrustOptId:'[name="marketingpermission.EMAILchk"] , [name="oneTrustOptID"]',buttonWithoutFormContainer:".bose-oneTrust__button",containerWithoutFormContainer:".bose-oneTrustComponentPlaceholder",otAnalyticsServletpath:".onetrust-analytics__servletpath",formFlowContainer:".bose-formFlow__container",formFlowPanelContent:".bose-formFlowPanel__content"},n={formFlowPanelActive:"bose-formFlowPanel--active",formFlowPanelComplete:"bose-formFlowPanel--completed"},o={};return{init:a,_selectors:m}}();
var Bose=Bose||{};Bose.OnlineResellers=function(){function a(){"1"===Bose.Utils.getParameterByName("online_resellers")&&c()}function b(){c()}function c(){var a=$jq(f.ecommerceArea);a.length&&a.data(g.onlineResellingEnabled)&&(d().insertAfter($jq(f.primaryCta)),e())}function d(){var a=Bose.Translation.getSiteTranslation("ONLINE_RESELLER");return $jq("<a/>",{class:"js-onlineReseller__button bose-buttonLink bose-buttonLink--type1 bose-buttonLink--cta -wide -iconOnlineReseller -withBorder",html:"<span>"+a+"</span>",title:a,href:"javascript:;"})}function e(){$jq(f.ecommerceArea).on("click",f.onlineResellersButton,function(){Bose.WhereToBuy.loadResellers(this,"iceleads")})}var f={primaryCta:".js-cta__primary",ecommerceArea:".js-ecommerceArea",onlineResellersButton:".js-onlineReseller__button"},g={onlineResellingEnabled:"onlineResellingEnabled"};return{init:a,load:b}}();var Bose=Bose||{};Bose.orderConfirmationMessage=function(){function a(){if(d=$jq(e.accWidContainer).attr("href"),void 0!==Bose.GigyaService){var a=$jq(e.registerBtn);d?a.on("click",b):a.on("click",Bose.GigyaService.register)}window.onload=c}function b(){window.location.href=$jq(e.accWidContainer).attr("href")}function c(){var a=Bose.CookieStore.get("isLoggedIn");void 0===Bose.UserData||a||(d=$jq(e.accWidContainer).attr("href"),d?$jq(e.newCreateAccBanner).removeClass("hide"):$jq(e.oldCreateAccBanner).removeClass("hide"))}var d,e={registerBtn:".js-registerButton",signUp:".js-show_signUp",accWidContainer:".js-data-registrationPageUrl",oldCreateAccBanner:".bose-orderConfirmationMessage__signUpAction",newCreateAccBanner:".bose-orderConfirmationMessage__signUpActionNew"};return{init:a,_selector:e}}(),$jq(document).ready(function(){Bose.orderConfirmationMessage.init()});var Bose=Bose||{};Bose.SocialMedia=function(){function a(){c()&&(j={},b(),$jq(h.facebookContainer).length&&($jq.ajaxSetup({cache:!0,async:!0}),$jq.getScript("//connect.facebook.net/".concat(Bose.DataLayer.Data.Page.locale.replace("-","_"),"/sdk.js"),function(){FB.init({appId:"878190328913680",version:"v2.3"})})),d())}function b(a){j=$jq.extend({},i,j,a)}function c(){return $jq(".bose-socialMedia").length}function d(){var a=$jq(h.facebookHandler),b=$jq(h.twitterHandler),c=$jq(h.weiboHandler);a.on("click",function(b){b.preventDefault(),e("u",a,!0)}),b.on("click",function(a){a.preventDefault(),e("url",b,!0)}),c.on("click",function(a){return a.preventDefault(),e("url",c,!0),!0}),$jq(h.shortUrlReadOnlyFieldHandler).on("focus",function(){e("u",a,!1),e("url",b,!1),e("url",c,!1),$jq(h.shortUrlReadOnlyFieldHandler).select()}),e("u",a,!1),e("url",b,!1),e("url",c,!1)}function e(a,b,c){var d=$jq(h.shortenDataHandler),e=d.data("shortenserviceurl"),g=d.data("shortenservicelogin"),i=d.data("shortenserviceapikey"),k=d.data("shortenservicedatatype"),l=window.location.href;j.refreshShortURL?(j.refreshShortURL=!1,void 0===e?f(window.location.href,b,a,d,c):$jq.ajax({url:e,data:{longUrl:l,login:g,apiKey:i},dataType:k,async:!1,success:function e(g){f(g.data.url,b,a,d,c)}})):f(d.data("shorturl"),b,a,d,c)}function f(a,b,c,d,e){var f=a||window.location.href,i=b.attr("href"),j=g(i,c,f);b.attr("href",j),d.data("shorturl",f);var k=$jq(h.shortUrlReadOnlyFieldHandler);k.val(f),k.select(),e&&Bose.Utils.openWindow(b.attr("href"),"_blank")}function g(a,b,c){var d=new RegExp("([?&])"+b+"=.*?(&|$)","i"),e="&";return void 0!==a&&-1!==a.indexOf("?")||(e="?"),void 0!==a&&a.match(d)?a.replace(d,"$1"+b+"="+c+"$2"):a+e+b+"="+c}var h={facebookHandler:".customShare.bose-icon--facebook",facebookContainer:".js-socialMedia__facebook",twitterHandler:".customShare.bose-icon--twitter",weiboHandler:".customShare.bose-icon--weibo",shortUrlReadOnlyFieldHandler:".shortUrl",shortenDataHandler:".bose-socialMedia__shortenData"},i={refreshShortURL:!0},j={};return{init:a,setOptions:b,selectors:h}}();var Bose=Bose||{};Bose.quantityChanger=function(){function a(){$jq(f.qtySelect).not(f.initialised).on("selectmenuchange",b).addClass(g.initialised),h||($jq(document).on("variantChanged",c),h=!0)}function b(){var a=$jq(this);a.trigger("quantity_changed",a.val())}function c(a,b,c){$jq(".bose-quantityChanger").filter('[data-product-code="'+b+'"]').filter("[data-variant-code]").removeClass("bose-quantityChanger--show").addClass("bose-quantityChanger--hide"),$jq(".bose-quantityChanger").filter('[data-variant-code="'+c+'"]').removeClass("bose-quantityChanger--hide").addClass("bose-quantityChanger--show")}function d(a){var b=a.closest(f.qtySelectContainer);return parseInt(b.data("quantity"),10)}function e(a){return parseInt(a.val(),10)}var f={qtySelect:".bose-shoppingCart_quantityInput .bose-select__native, .bose-shoppingBag__qtyInput .bose-select__native",initialised:".js-quantitySelector-initialised",qtySelectContainer:".js-cartItem-qtySelect"},g={initialised:"js-quantitySelector-initialised"},h=!1;return{init:a,getOldValue:d,getNewValue:e}}();var Bose=Bose||{};Bose.ProductATP=function(){function a(){$jq(document).on("variantChanged",b),c()}function b(a,b,c){var d,e=$jq(g.container).filter('[data-product-code="'+b+'"]'),f=Bose.ProductCallToAction.inStockVariant?Bose.ProductCallToAction.inStockVariant.code:"";d=c||f,""!==f&&(e.filter("[data-variant-code]").addClass(h.hidden),e.filter('[data-variant-code="'+d+'"]').removeClass(h.hidden))}function c(){if("true"===Bose.DataLayer.Data.Settings.ecommerceEnabled){var a=[];$jq(g.container).each(function(){var b=$jq(this).data("url"),c=Bose.CookieStore.get(Bose.CookieStore.CONST.UserName)||"anonymous";void 0!==b&&(b=b.replace("{userId}",c)),-1===a.indexOf(b)&&(a.push(b),$jq.ajax({url:b,dataType:"json",success:function a(b,c,e){var f="";Bose.DataLayer.Data.Product.productCode===b.code&&Bose.DataLayer.setVariable("Product","stockStatus",b.variantOptions[0].stockStatusData.stockStatus),void 0!==e&&null!==e.getResponseHeader("Date")&&(f=e.getResponseHeader("Date"));var g=(new Date).toUTCString();new Date(f)<new Date(g)&&(i=Number((new Date(g)-new Date(f))/1e3/60)),b.variantOptions.forEach(function(a){d(a,b.variantOptions)})}}))})}}function d(a,b){var c="",d="",f="",h=$jq(g.container).filter('[data-variant-code="'+a.code+'"]');void 0!==a.atpData&&void 0!==a.atpData.message&&(c=a.atpData.message,void 0!==a.stockStatusData&&"ENDING_SOON"===a.stockStatusData.stockStatus&&(f=Bose.Translation.getSiteTranslation(a.stockStatusData.stockStatus))),d=!!h.data("enableaccuratedelivery")&&h.data("enableaccuratedelivery"),d&&h.addClass("bose-productATP--accurate"),d&&$jq(g.boseProductATPShow).length>0&&i>=1&&(-1!==c.indexOf("hr")||-1!==c.indexOf("min"))?(c=e(c,i),void 0!==a.stockStatusData&&"ENDING_SOON"===a.stockStatusData.stockStatus&&(f=Bose.Translation.getSiteTranslation(a.stockStatusData.stockStatus))):d||void 0===a.stockStatusData||(c=Bose.Translation.getSiteTranslation(a.stockStatusData.stockStatus),f=""),h.html(c),void 0!==a.stockStatusData&&"OUT_OF_STOCK"===a.stockStatusData.stockStatus?(h.addClass("-bold"),f=""):h.removeClass("-bold"),f&&h.prepend('<div class="bose-productATP-lowStock">'+f+"</div>"),$jq(document).trigger("variantUpdatedATP",[a,b])}function e(a,b){var c=a,d=0,e="",g=!1,h=0,i="",j=!1,k=0,l=a.indexOf('textBold">'),m="";-1!==a.indexOf("mins")?(i="mins",j=!0):-1!==a.indexOf("min")&&(i="min",j=!0),m=a.substring(l+10,a.indexOf(i)+i.length),-1!==a.indexOf("hrs")?(e="hrs",g=!0):-1!==a.indexOf("hr")&&(e="hr",g=!0),g&&j?h=m.substring(0,m.indexOf(e)):g&&(m=a.substring(l+10,a.indexOf(e)+e.length),h=m.substring(0,m.indexOf(e))),j&&(k=m.substring(m.indexOf(e)+e.length,m.indexOf(i))),d=g?Math.round(60*h)+Math.round(k):Math.round(k);var n=d-b;return n<1&&(n=1),n>0&&(g||j)&&(c=a.replace(m,f(n,g)+" ")),c}function f(a,b){var c="hr",d="min",e=0,f=0,g=0;b&&(f=a/60,e=Math.floor(f)),b&&e>1&&(c="hrs"),g=b?60*(f-e):a;var h=Math.round(g);h>1&&(d="mins");var i="";return b&&0!==e&&(i=e+" "+c),0!==h&&(i+=" "+h+" "+d+" "),i}var g={container:".js-productATP",boseProductATPShow:".bose-productATP--show"},h={hidden:"bose-productATP--hide"},i=0;return{init:a,_selectors:g,_classes:h}}();var Bose=Bose||{};Bose.Payment=function(){function a(a){delete f[a]}function b(a,b){var c=void 0===b?a.getName():b;f[c]=a}function c(a,b){var c=f[b];void 0===c?e(a):c.submit(a,d,e)}function d(a){Bose.Forms.doActualAjaxSubmit.call(a,null,!1)}function e(a,b,c){void 0!==b&&void 0!==c?Bose.Forms.Validation.displayError(a,b,c):Bose.Forms.Validation.displayDefaultError(a)}var f={};return{registerPaymentModule:b,unregisterPaymentModule:a,submit:c}}();var Bose=Bose||{};Bose.PaymentControl=function(){function a(a){var g=$jq(p.paymentGroupInput),h=window.location.origin,i=Bose.DataLayer.Data.Page.name||"",j=Bose.DataLayer.Data.Page.adyenMicroService||"",o=Bose.DataLayer.Data.Page.adyenEnabled;$jq(p.icon).on("mouseover",d).on("click",e).on("mouseleave",f),$jq(".bose-paymentGroup__radioButton").on("change",k),$jq(".bose-paymentGroup__singleGroup").length&&(l(),m()),a&&n(a);var q=$jq(p.selectedMethod).val();if(void 0!==q&&!q.length){var r=$jq('section[data-step-name="step_payment"]').find(".bose-button");r.addClass("-inactive"),r.prop("onclick",function(){return!1})}$jq('.checkoutSelectPaymentOptionsForm .bose-checkbox__input[name="billingAddressSameAsShippingchk"]').is(":checked")?$jq(".checkoutSelectPaymentOptionsForm .bose-reviewItem").show():$jq(".checkoutSelectPaymentOptionsForm .bose-reviewItem").hide(),$jq(".checkoutSelectPaymentOptionsForm .bose-checkbox__input").on("change",c),"true"===$jq(".js-hasPickupItems").val()&&($jq(".checkoutSelectPaymentOptionsForm .bose-checkbox__input").prop("checked",!1),$jq(".checkoutSelectPaymentOptionsForm .bose-address--checkbox").hide(),$jq(".checkoutSelectPaymentOptionsForm .bose-address__form").show(),$jq(".checkoutSelectPaymentOptionsForm .bose-reviewItem").hide()),b(g),o&&i.indexOf("checkout")>-1&&!window.isOriginKey&&(window.isOriginKey=!0,$jq.ajax({type:"GET",url:j+"/originKeys",data:{domains:h},success:function a(b){window.adyenData={},window.adyenData.originkey=b.data.originKeys[h],$jq(document).trigger("loadAdyenComponent")},error:function a(){window.isOriginKey=!1}}))}function b(a){a.length&&a.each(function(){var a=$jq(this);if(a.is(":checked")){var b=a.closest(p.paymentGroupContainer),c=b.closest(p.paymentGroup);b.addClass(q.active),a.closest(p.paymentGroupLabel).focus(),"true"===$jq(p.isCheckoutContainer).val()&&h(c,!0)}})}function c(){$jq(this).is(":checked")?$jq(this).closest(p.paymentGroup).find(p.reviewItem).show():$jq(this).closest(p.paymentGroup).find(p.reviewItem).hide()}function d(){var a=$jq(this),b=a.parent();b.hasClass(q.readOnly)||(b.find(p.unselectedIcon).addClass(q.inactive),a.removeClass(q.inactive))}function e(){var a=$jq(this),b=a.closest("form"),c=a.closest(p.container);if(!c.hasClass(q.readOnly)&&!a.hasClass(q.selectedIcon)){var d=a.data("hybris-id");c.find(p.selectedIcon).removeClass(q.selectedIcon),a.addClass(q.selectedIcon),c.find(p.unselectedIcon).addClass(q.inactive),b.find(".bose-paymentControl__cardDetailsFormContainer input:visible, .bose-paymentControl__cardDetailsFormContainer select").not('input[name="payment.accountHolderName"]').val(""),b.addClass(q.noValidation),b.find(p.selectedMethod).val(d),$jq(p.paymentOptionsSubStep).val("paymentMethod"),Bose.Forms.submitForm(a,!0),b.removeClass(q.noValidation)}}function f(){var a=$jq(this).parent();a.find(p.selectedIcon).length?a.closest(p.container).find(p.unselectedIcon).addClass(q.inactive):a.find(".bose-paymentControl__icon.-inactive").removeClass(q.inactive)}function g(){$jq(p.dataStepName).find(p.button).each(function(){var a=$jq(this);a.removeClass(q.inactive),void 0===a.data(t.onlick)&&null!==a.data(t.onlick)||(a.attr(t.onlick,a.attr(t.onlick)),a.data(t.onlick,a.attr(t.onlick)))})}function h(a,b){var c=a.siblings(p.paymentGroup);c.find(p.formInputsWithoutRadio).prop("disabled",!0),c.find(p.cardExpiryMonth+","+p.cardExpiryYear).attr("disabled","disabled"),c.find(p.paymentInfoTypeInput).attr("disabled","disabled"),c.find(".bose-paymentControl__cardDetailsFormContainer input:visible, .bose-paymentControl__cardDetailsFormContainer select").not('input[name="payment.accountHolderName"]').val(""),b&&c.addClass(q.noValidation),$jq.each(r,function(a,b){c.find(b).attr("disabled",!0)}),$jq.each(s,function(a,b){c.find(b).attr("disabled",!0)})}function i(a){a.find("input, select").removeAttr("disabled"),$jq.each(r,function(b,c){a.find(c).removeAttr("disabled")}),$jq.each(s,function(b,c){a.find(c).removeAttr("disabled")}),a.find(p.paymentGroupContainer).addClass(q.active),a.find(p.paymentGroupMethod).addClass(q.active).show(),a.find(p.paymentGroupInput).focus(),$jq(p.activeForm)[0].scrollIntoView()}function j(a,b){var c=a.find(p.cardExpiryMonth+","+p.cardExpiryYear),d=c.closest("select"),e=d.closest(Bose.Select.selectors.container),f=a.find(p.cardNumber),g=f.closest(p.cardNumberContainer),h=b.find(p.cardNumber+","+p.cardCvv),i=h.closest(Bose.TextField.selectors.container),j=b.find(".bose-paymentGroup__method .bose-textField__input ").not(p.cardNumber+","+p.cardCvv),k=j.closest(Bose.TextField.selectors.container);h.val(""),Bose.TextInput.markValid(i,Bose.TextField),j.val()||Bose.TextInput.markValid(k,Bose.TextField),Bose.Select.refresh(c),c.length&&c.selectmenu("instance")?d.trigger("setEnabled"):e.removeClass(Bose.Select.classes.disabled),Bose.Select.resetState(e),Bose.Select.selectedFields.expiryYear=!1,Bose.CreditCardDetector.removeCreditCardModifierClass(f),g.addClass(q.defaultPayment)}function k(){var a=$jq(this),b=a.closest("form"),c=$jq('input[name="checkout_payment-group"]:checked'),d=c.closest(".bose-paymentGroup__container"),e=a.closest(".bose-paymentGroup");if($jq(p.paymentGroupMethod).hide(),b.find(".bose-paymentControl__cardDetailsFormContainer input:visible, .bose-paymentControl__cardDetailsFormContainer select").not('input[name="payment.accountHolderName"]').val(""),b.addClass(q.noValidation),$jq(p.paymentGroupContainer).removeClass(q.active),$jq(p.paymentGroupMethod).removeClass(q.active),!1===c.data("multiple-payment-methods")){var f=d.find(".bose-paymentGroup__singlePaymentMethod").data("hybris-id");b.find(p.selectedMethod).val(f)}$jq(p.paymentOptionsSubStep).val("paymentMethod"),"true"===$jq(p.isCheckoutContainer).val()?($jq(p.paymentOptionsSubStep).val(""),j(e,b),h(e,!1),i(e),g(),e.removeClass(q.noValidation),"Adyen_PaymentProvider"===$jq('form[name="payment"]').find('input[type="radio"]:checked').data("payment-provider")&&Bose.AdyenPayment.loadAdyenComponent()):Bose.Forms.submitForm(a,!0),b.removeClass(q.noValidation)}function l(){var a=$jq('form[name="payment"]'),b=$jq(".bose-paymentGroup__method");if(!1===b.data("multiple-payment-methods")){var c=b.find(".bose-paymentGroup__singlePaymentMethod").data("hybris-id");a.find(p.selectedMethod).val(c)}}function m(){var a=$jq(".bose-paymentGroup__method").find(".bose-paymentGroup__singlePaymentMethod");"PayPal_PaymentProvider"===a.data("payment-provider")?$jq(".bose-paymentGroup__method").hide():"Adyen_PaymentProvider"===a.data("payment-provider")&&Bose.AdyenPayment.loadAdyenComponent()}function n(a){$jq(".bose-paymentControl__icon.bose-paymentControl__icon-"+a).addClass(q.selectedIcon),$jq(p.container).find(p.unselectedIcon).addClass(q.inactive)}function o(a){return a.find(p.selectedIcon).length?a.find(p.selectedIcon).data("paymentProvider"):a.find(".bose-paymentGroup__singlePaymentMethod:visible").data("paymentProvider")}var p={unselectedIcon:".bose-paymentControl__icon:not(.bose-paymentControl__icon--selected)",selectedIcon:".bose-paymentControl__icon.bose-paymentControl__icon--selected",container:".bose-paymentControl",icon:".bose-paymentControl .bose-paymentControl__icon",paymentGroupInput:".bose-paymentGroup__radioButton",paymentGroupContainer:".bose-paymentGroup__container",paymentGroup:".bose-paymentGroup",activePaymentGroupContainer:".bose-paymentGroup__container.-active",activeForm:".bose-formFlowPanel--active",reviewItem:".bose-reviewItem",selectedMethod:'input[type="hidden"][name="checkout_payment-method"]',paymentGroupLabel:".bose-paymentGroup__label",paymentGroupMethod:".bose-paymentGroup__method",buttonOnClick:".bose-button[onclick]",button:".bose-button",paymentOptionsSubStep:"#selectPaymentOptionsSubStep",dataStepName:'section[data-step-name="step_payment"]',formInputsWithoutRadio:":input:not([type=radio])",paymentInfoTypeInput:'input[type="hidden"][name="payment.paymentInfoType"]',isCheckoutContainer:'input[type="hidden"][name=":isCheckoutContainer"]',cardNumberContainer:".bose-cardNumber",cardExpiryMonth:'select[name="payment.expiryMonth"]',cardExpiryYear:'select[name="payment.expiryYear"]',cardNumber:'input[name="payment.cardNumber"]',cardCvv:'input[name="payment.ccv"]'},q={selectedIcon:"bose-paymentControl__icon--selected",readOnly:"bose-paymentControl--readonly",active:"-active",inactive:"-inactive",noValidation:"bose-noValidation",defaultPayment:"-defaultPayment"},r={alias:".bose-ingenicoAliasRequestData__alias",aliasRequestUrl:".bose-ingenicoAliasRequestUrl",cardHolder:".bose-ingenicoAliasRequestData__cardHolder",cardNumber:".bose-ingenicoAliasRequestData__cardNumber",cvc:".bose-ingenicoAliasRequestData__cvc",expiryDate:".bose-ingenicoAliasRequestData__expiryDate",iframe:".bose-ingenicoAliasRequestIframe",formData:".bose-ingenicoAliasRequestData"},s={tokenRequestUrl:".bose-cyberSourceTokenRequestUrl",cardNumber:".bose-cyberSourceTokenRequestData__cardNumber",cvc:".bose-cyberSourceTokenRequestData__cardCvn",expiryDate:".bose-cyberSourceTokenRequestData__cardExpiryDate",iframe:".bose-cyberSourceTokenRequestIframe",formData:".bose-cyberSourceTokenRequestData",billToForename:".bose-cyberSourceTokenRequestData__billToForename",billToSurname:".bose-cyberSourceTokenRequestData__billToSurname",billToEmail:".bose-cyberSourceTokenRequestData__billToEmail",billToAddressLine1:".bose-cyberSourceTokenRequestData__billToAddressLine1",billToAddressCity:".bose-cyberSourceTokenRequestData__billToAddressCity",billToAddressPostalCode:".bose-cyberSourceTokenRequestData__billToAddressPostalCode",billToAddressState:".bose-cyberSourceTokenRequestData__billToAddressState",billToAddressCountry:".bose-cyberSourceTokenRequestData__billToAddressCountry"},t={onlick:"onclick"};return window.isOriginKey=!1,{init:a,getPaymentProvider:o}}();var Bose=Bose||{};Bose.IngenicoPaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"Ingenico_PaymentProvider"}function c(a,b,c){d(a),g(a,b,c)}function d(a){var b=a.find(j.form.expiryYear).val().substr(2),c=a.find(j.form.expiryMonth).val();a.find(j.ingenico.cardHolder).html(a.find(j.form.cardHolder).val()),a.find(j.ingenico.cardNumber).html(a.find(j.form.cardNumber).val()),a.find(j.ingenico.cvc).html(a.find(j.form.ccv).val()),a.find(j.ingenico.expiryDate).html(c+b)}function e(a){var b={};return a.find(j.ingenico.formData).children("div").each(function(){var a=$jq(this),c=a.data("param-name"),d=a.html().replace(/%20/g,"+");-1===["ALIASUSAGE","ALIASOPERATION"].indexOf(c.toUpperCase())&&(b[c]=d)}),b}function f(a,b,c){var d=$jq('<iframe id="ingenico_custom_payment" class="bose-customIngenicoAliasRequestIframe" name="ingenico_custom_payment"></iframe>'),f=e(a),g=a.find(j.ingenico.aliasRequestUrl).html(),i=$jq('<form target="ingenico_custom_payment" action="'+g+'" method="post"></form>');$jq("body").append(d.hide()).append(i),$jq.each(f,function(a,b){$jq('<input type="hidden" name="'+a+'" value="'+b+'"/>').appendTo(i)}),i.submit().remove(),d.on("load",function(){h(a,b,c,d)})}function g(a,b,c){$jq(j.ingenico.customIngenicoIframe).remove();var d=a.find(j.ingenico.aliasRequestUrl).html(),e=Bose.DataLayer.Data.Page.formattedLocale,g=Bose.CreditCardDetector._paymentMethodRequest;void 0===d||""===d?$jq.ajax({url:"/"+e+"/checkout.paymentMethodController.html/paymentMethod",method:"POST",dataType:"json",data:g,success:function d(e){$jq(Bose.CreditCardDetector._selectors.ingenicoAuthURL).val(e.AUTHRESPONSEURL),$jq(Bose.CreditCardDetector._selectors.ingenicoURLContainer).text(e.ALIASURL),$jq.each(e,function(a,b){-1===["CN","CARDNO","CVC","ED"].indexOf(a)&&$jq(Bose.CreditCardDetector._selectors.ingenicoSourceRequestDiv).find('div[data-param-name="'+a+'"]').text(b)}),f(a,b,c)}}):f(a,b,c)}function h(a,b,c,d){var e=d.get(0).contentWindow,f=e.paymentResult;void 0===f?c(a,Bose.Translation.getSiteTranslation("error.payment.ingenico.title"),Bose.Translation.getSiteTranslation("form.error.PaymentAuthorizationException")):"1"===f.status?(i(a,f.values.cardNumber,f.values.cvc),b(a)):c(a,e.errorTitle,e.paymentError)}function i(a,b,c){a.find(j.form.cardNumber).val(b),a.find(j.form.ccv).val(c),a.find(j.form.subscriptionId).val(a.find(j.ingenico.alias).html())}var j={ingenico:{alias:'.bose-ingenicoAliasRequestData__alias:not([disabled="disabled"])',aliasRequestUrl:'.bose-ingenicoAliasRequestUrl:not([disabled="disabled"])',cardHolder:'.bose-ingenicoAliasRequestData__cardHolder:not([disabled="disabled"])',cardNumber:'.bose-ingenicoAliasRequestData__cardNumber:not([disabled="disabled"])',cvc:'.bose-ingenicoAliasRequestData__cvc:not([disabled="disabled"])',expiryDate:'.bose-ingenicoAliasRequestData__expiryDate:not([disabled="disabled"])',iframe:'.bose-ingenicoAliasRequestIframe:not([disabled="disabled"])',formData:'.bose-ingenicoAliasRequestData:not([disabled="disabled"])',customIngenicoIframe:".bose-customIngenicoAliasRequestIframe"},form:{cardHolder:'input[name="payment.accountHolderName"]:not([disabled])',cardNumber:'input[name="payment.cardNumber"]:not([disabled])',ccv:'input[name="payment.ccv"]:not([disabled])',expiryYear:'select[name="payment.expiryYear"]:not([disabled])',expiryMonth:'select[name="payment.expiryMonth"]:not([disabled])',subscriptionId:'[name="payment.subscriptionId"]:not([disabled])'}};return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.CyberSourcePaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"CyberSource_PaymentProvider"}function c(a,b,c){d(a),f(a,b,c)}function d(a){var b=a.find(k.form.expiryYear).val(),c=a.find(k.form.expiryMonth).val();a.find(k.cybersource.cardNumber).html(a.find(k.form.cardNumber).val()),a.find(k.cybersource.cvc).html(a.find(k.form.ccv).val()),a.find(k.cybersource.expiryDate).html(c+"-"+b),$jq(".checkoutSelectPaymentOptionsForm .bose-checkbox__input").is(":checked")||$jq(".servicePaymentOptions .bose-checkbox__input").is(":checked")?(a.find(k.cybersource.billToForename).html($jq(k.cybersource.shippingFirstname).val()),a.find(k.cybersource.billToSurname).html($jq(k.cybersource.shippingSurname).val()),a.find(k.cybersource.billToAddressLine1).html($jq(k.cybersource.shippingAddressLine1).val()),a.find(k.cybersource.billToAddressCity).html($jq(k.cybersource.shippingAddressCity).val()),a.find(k.cybersource.billToAddressPostalCode).html($jq(k.cybersource.shippingAddressPostalCode).val()),a.find(k.cybersource.billToAddressState).html($jq(k.cybersource.shippingAddressState).val()),a.find(k.cybersource.billToAddressCountry).html($jq(k.cybersource.shippingAddressCountry).val())):(a.find(k.cybersource.billToForename).html($jq(k.cybersource.billingFirstname).val()),a.find(k.cybersource.billToSurname).html($jq(k.cybersource.billingSurname).val()),a.find(k.cybersource.billToAddressLine1).html($jq(k.cybersource.billingAddressLine1).val()),a.find(k.cybersource.billToAddressCity).html($jq(k.cybersource.billingAddressCity).val()),a.find(k.cybersource.billToAddressPostalCode).html($jq(k.cybersource.billingAddressPostalCode).val()),a.find(k.cybersource.billToAddressState).html($jq(k.cybersource.billingAddressState).val()),a.find(k.cybersource.billToAddressCountry).html($jq(k.cybersource.billingAddressCountry).val()))}function e(a){var b=$jq("<form>",{action:a.find(k.cybersource.tokenRequestUrl).html(),method:"POST",target:"tokenIframe"});return a.find(k.cybersource.formData).children("div").each(function(){var a=$jq(this),c=a.data("param-name"),d=a.html();b.append($jq("<input/>",{name:c,value:d}))}),b}function f(a,b,c){var d,f,h=a.find(k.cybersource.iframe).get(0).contentWindow,l=e(a);$jq("body").append(l),l.submit().remove(),d=setInterval(function(){void 0!==h.paymentResult&&(clearInterval(d),clearTimeout(f),g(a,b,c))},j),f=setTimeout(function(){clearInterval(d),clearTimeout(f),c(a,Bose.Translation.getSiteTranslation("error.payment.cybersource.title"),Bose.Translation.getSiteTranslation("form.error.PaymentAuthorizationException"))},i)}function g(a,b,c){var d=a.find(k.cybersource.iframe).get(0).contentWindow,e=d.paymentResult;"1"===e.status?(h(a,e.values.cardNumber,e.values.cvc,e.values.token),b(a)):c(a,d.errorTitle,d.paymentError)}function h(a,b,c,d){a.find(k.form.cardNumber).val(b),a.find(k.form.ccv).val(c),a.find(k.form.subscriptionId).val(d)}var i=9e3,j=300,k={cybersource:{tokenRequestUrl:'.bose-cyberSourceTokenRequestUrl:not([disabled="disabled"])',cardNumber:'.bose-cyberSourceTokenRequestData__cardNumber:not([disabled="disabled"])',cvc:'.bose-cyberSourceTokenRequestData__cardCvn:not([disabled="disabled"])',expiryDate:'.bose-cyberSourceTokenRequestData__cardExpiryDate:not([disabled="disabled"])',iframe:'.bose-cyberSourceTokenRequestIframe:not([disabled="disabled"])',formData:'.bose-cyberSourceTokenRequestData:not([disabled="disabled"])',billToForename:'.bose-cyberSourceTokenRequestData__billToForename:not([disabled="disabled"])',billToSurname:'.bose-cyberSourceTokenRequestData__billToSurname:not([disabled="disabled"])',billToEmail:'.bose-cyberSourceTokenRequestData__billToEmail:not([disabled="disabled"])',billToAddressLine1:'.bose-cyberSourceTokenRequestData__billToAddressLine1:not([disabled="disabled"])',billToAddressCity:'.bose-cyberSourceTokenRequestData__billToAddressCity:not([disabled="disabled"])',billToAddressPostalCode:'.bose-cyberSourceTokenRequestData__billToAddressPostalCode:not([disabled="disabled"])',billToAddressState:'.bose-cyberSourceTokenRequestData__billToAddressState:not([disabled="disabled"])',billToAddressCountry:'.bose-cyberSourceTokenRequestData__billToAddressCountry:not([disabled="disabled"])',shippingFirstname:'input[name="shipping.firstName"]',shippingSurname:'input[name="shipping.lastName"]',shippingAddressLine1:'input[name="shipping.line1"]',shippingAddressCity:'input[name="shipping.town"]',shippingAddressPostalCode:'input[name="shipping.postalCode"]',shippingAddressState:'select[name="shipping.state"]',shippingAddressCountry:'input[name="shipping.country.isocode"]',billingFirstname:'input[name="billing.firstName"]:not([disabled])',billingSurname:'input[name="billing.lastName"]:not([disabled])',billingAddressLine1:'input[name="billing.line1"]:not([disabled])',billingAddressCity:'input[name="billing.town"]:not([disabled])',billingAddressPostalCode:'input[name="billing.postalCode"]:not([disabled])',billingAddressState:'select[name="billing.state"]:not([disabled])',billingAddressCountry:'input[name="billing.country.isocode"]:not([disabled])'},form:{cardNumber:'input[name="payment.cardNumber"]:not([disabled])',ccv:'input[name="payment.ccv"]:not([disabled])',expiryYear:'select[name="payment.expiryYear"]:not([disabled])',expiryMonth:'select[name="payment.expiryMonth"]:not([disabled])',subscriptionId:'[name="payment.subscriptionId"]:not([disabled])'}};return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.InternalPaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"Internal_PaymentProvider"}function c(a,b){b(a)}return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.IngenicoEcommercePaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"Ingenico_Ecommerce_PaymentProvider"}function c(a,b){b(a)}return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.SEPAPaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"SEPA_PaymentProvider"}function c(a,b){b(a)}return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.ISDToolKitPaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"ISD_PaymentProvider"}function c(a,b,c){var e=$jq("#order_payment_token_url:not([disabled])").val(),g=a.find(f.expiryYear).val().substr(2)+a.find(f.expiryMonth).val(),h='<?xml version="1.0" ?><request><cc>'+a.find(f.cardNumber).val()+"</cc><exp>"+g+"</exp></request>";$jq.ajax({type:"POST",url:e,data:{request:h},dataType:"text",crossDomain:!0,cache:!1,success:function e(f){d(a,f,b,c)},error:function b(){c(a)}})}function d(a,b,c,d){try{var g=$jq.parseXML(b),h=$jq(g),i=h.find("rc").text(),j=h.find("token").text(),k=h.find("cc").text(),l=-1!==b.indexOf(e);"0"===i?(a.find(f.cardNumber).val(k),a.find(f.subscriptionId).val(j),c(a)):l?d(a,Bose.Translation.getSiteTranslation("error.isdtoolkit.notresponding.title"),Bose.Translation.getSiteTranslation("error.isdtoolkit.notresponding.message")):d(a)}catch(c){-1!==c.message.indexOf("Invalid XML")&&-1!==b.indexOf(e)?d(a,Bose.Translation.getSiteTranslation("error.isdtoolkit.notresponding.title"),Bose.Translation.getSiteTranslation("error.isdtoolkit.notresponding.message")):d(a)}}var e="#302",f={expiryYear:'[name="payment.expiryYear"]:not([disabled])',expiryMonth:'[name="payment.expiryMonth"]:not([disabled])',cardNumber:'[name="payment.cardNumber"]:not([disabled])',subscriptionId:'[name="payment.subscriptionId"]:not([disabled])'};return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.AdyenPayment=function(){function a(){return"Adyen_PaymentProvider"}function b(a){$jq(document).on("loadAdyenComponent",c).on("loadAdyen3DS",j).on("formFlowStepOpened",o),r="true"===Bose.DataLayer.Data.Page.isProductionMode,Bose.Payment.registerPaymentModule(this,a)}function c(){var a=$jq(w.formContent);"step_payment"!==a.data("stepName")||"Adyen_PaymentProvider"!==a.find('input[type="radio"]:checked').data("payment-provider")&&"serviceCheckout_payment"!==a.find("form").data("form-event")||d()}function d(){var a,b="",c=$jq(w.formContent).find("form"),d=c.data("options"),f=$jq(".bose-paymentGroup__radioButton:checked");if(!(f.length>0&&f.closest(".bose-paymentGroup__container").find(w.adyenContainer).children().length>0||0===f.length&&$jq(w.adyenContainer).children().length>0)){if(void 0===d&&(d={fieldErrorTitle:Bose.Translation.getSiteTranslation("FORM.fieldserror.title"),fieldErrorMessage:Bose.Translation.getSiteTranslation("FORM.fieldserror.message")}),void 0===window.adyenData)return void p(c,d.fieldErrorTitle,d.fieldErrorMessage);v=Bose.DataLayer.Data.Page.adyenMicroService||"",b=$jq(".bose-paymentGroup__radioButton:checked").val(),(void 0===b||""===b)&&$jq("div[data-adyen-payment]").length>0&&(b="CREDIT_CARD"),void 0!==b&&""!==b||(b="card"),a={locale:Bose.DataLayer.Data.Page.locale,environment:r?"live":"test",clientKey:window.adyenData.originkey,paymentMethodsResponse:$jq('*[data-hybris-id="'+b+'"]').find(w.paymentControl).data("adyenPayment"),styles:{base:{color:"#4d4d4d",fontSize:"14px",fontSmoothing:"antialiased",fontFamily:"BoseText",background:"#eee"},error:{color:"#ba2d26"},placeholder:{color:"#4d4d4d",fontSize:"12px",fontWeight:"normal"}},onChange:e,onBrand:i},$jq(w.cardsContainer).empty(),$jq(w.idealContainer).empty();new Promise(function(b){b(AdyenCheckout(a))}).then(function(a){s=a,B=!0,b.indexOf("ideal")>-1?s.create("ideal").mount(w.idealContainer):b.toLowerCase().indexOf("card")>-1?(y={},s.create("card",{hasHolderName:!0,holderNameRequired:!0,onBrand:i}).mount(w.cardsContainer)):b.toLowerCase().indexOf("dotpay")>-1?s.create("dotpay").mount(w.dotPayContainer):b.indexOf("onlineBanking_PL")>-1?s.create("onlineBanking_PL").mount(w.onlineBankingPLContainer):B=!1})}}function e(a){y=a.isValid?a.data.paymentMethod:{},A=!0}function f(a,b,c){var d,e=Bose.Translation.getSiteTranslation("FORM.fieldserror.required"),f=$jq(w.paymentRadioButton),g="";return g=f.length>0?f.val():"card",B&&$jq.isEmptyObject(y)?($jq(document).trigger("disableCheckoutLoader"),void c(a,"",e)):"step_review"!==$jq(w.formContent).data("stepName")?void b(a):(y.paymentMethod=f.val(),d=g.toLowerCase().indexOf("card")>-1?"/save":"/bkSave",void $jq.ajax({
type:"POST",url:v+d,headers:{"Content-Type":"application/json"},data:JSON.stringify(y),dataType:"json",crossDomain:!0,cache:!1,success:function c(d){200===d.statusCode?(A=!1,z=!1,t=d.data,$jq(w.cardNumber).val(d.data),b(a)):m()},error:m}))}function g(){return t}function h(){return{language:navigator.language,javaEnabled:navigator.javaEnabled(),colorDepth:screen.colorDepth,screenHeight:screen.height,screenWidth:screen.width,timeZoneOffset:(new Date).getTimezoneOffset()}}function i(a){s.paymentMethod=a.brand,$jq(w.cardType).val(s.paymentMethod)}function j(a,b){var c=g();u=b,$jq.ajax({type:"POST",url:v+"/getThreeDAction",headers:{"Content-Type":"text/plain"},data:c,dataType:"json",crossDomain:!0,cache:!1,success:function a(b){200===b.statusCode?k(JSON.parse(b.data)):m()},error:m})}function k(a){var b,c,d={locale:Bose.DataLayer.Data.Page.locale,environment:r?"live":"test",clientKey:window.adyenData.originkey,onAdditionalDetails:l},e=$jq(w.formContent),f=e.find('input[name$="payment.authResponseUrl"]').val(),h={url:f||""},i={};"threeDS2"===a.type?i.wrapCss="":i.wrapCss=x.threeDSModifier,i.isBuyButton=!1,i.cloneContent=!1,i.onClose=function(){Bose.Button.setDefault.call(e.find(w.nextButton)),e.find(w.nextButton).focus()},h.url=h.url,h.selectedPayment=u,h.seqNumber=g(),c='<div class="bose-adyenThreeDSecure js-bose-threeDStemplate"><div id="bose-adyen3DS"></div><form class="process-pay" method="post" name="processThreeDSPayment" action="{url}"><input type="hidden" name="paymentMethod" value="{selectedPayment}" /> <input type="hidden" name="seqNumber" value="{seqNumber}"/><input type="hidden" name="isAjaxEnabled" value="true"></form></div>',$jq(w.formContent).append(nano(c,h)),Bose.Popup.display($jq(w.threeDStemplate),i),$jq(document).trigger("disableCheckoutLoader"),new Promise(function(a){a(AdyenCheckout(d))}).then(function(c){b=c,b.createFromAction(a).mount(w.threeDSContainer)})}function l(a){$jq(w.overlayContent).css("visibility","hidden"),a.data.sequenceNumber=g(),$jq(document).trigger("enableCheckoutLoader"),$jq.ajax({type:"POST",url:v+"/updateThreeD",headers:{"Content-Type":"application/json"},data:JSON.stringify(a.data),dataType:"json",crossDomain:!0,cache:!1,success:n,error:m})}function m(){z=!0,Bose.FormFlow.openStep("step_payment")}function n(a){var b=$jq("form.process-pay");200===a.statusCode?($jq.ajax({type:"POST",url:b.attr("action"),method:b.attr("method"),dataType:"json",data:b.serialize(),crossDomain:!0,cache:!1,success:function a(b){b.redirectURL?window.location=b.redirectURL:j({},u)},error:m}),$jq(w.closeButton).trigger("click")):m()}function o(a,b){if("step_payment"!==b||!z)return!1;var c=$jq(w.formContent).find("form"),d=c.data("options");p(c,d.fieldErrorTitle,d.fieldErrorMessage),$jq(document).trigger("disableCheckoutLoader")}function p(a,b,c){a.find(w.errorTitleContainer).html(b).show().focus(),a.find(w.errorMessageContainer).html(c).show(),a.find(w.nextButton).trigger("setError"),$jq("html, body").animate({scrollTop:$jq(w.errorTitleContainer).first().offset().top},500)}function q(){return A}var r,s,t,u,v,w={cardType:'input[name="payment.adyenPaymentBrand"]',cardNumber:'input[name="payment.sequenceNumberAdyen"]',paymentControl:".bose-paymentControl",paymentGroup:".bose-paymentGroup__container",formContent:".bose-formFlowPanel--active",adyenContainer:".js-bose-adyen",cardsContainer:"#cardsContainer",idealContainer:"#idealContainer",threeDSContainer:"#bose-adyen3DS",dotPayContainer:"#dotPayContainer",onlineBankingPLContainer:"#onlineBanking_PL-container",threeDStemplate:".js-bose-threeDStemplate",threeDSform:'form[name="processThreeDSPayment"]',closeButton:".bose-popupClose",nextButton:".bose-button",errorTitleContainer:".bose-form__errorTitle",errorMessageContainer:".bose-form__errorMessage",overlayContent:".bose-popupInner",paymentRadioButton:".bose-paymentGroup__radioButton:checked"},x={threeDSModifier:"bose-popupInner--threeDSFingerPrinting"},y={},z=!1,A=!0,B=!1;return{init:b,loadAdyenComponent:d,load3DsComponent:k,getName:a,submit:f,getBrowserInfo:h,getSequenceNumber:g,isCardSaved:q,_selectors:w}}();var Bose=Bose||{};Bose.ProductStatus=function(){function a(){$jq(document).on("variantChanged",b)}function b(a,b,e){var f=$jq(c.productStatus).filter('[data-product-code="'+b+'"]'),g=f.find(c.productContainer),h=f.find(".bose-screenReaderText>span"),i=f.data("status-productcodemapping"),j=$jq(d.productVariantStatus);if(g.html(""),j.val(""),h.html("").hide(),f.addClass(d.productStatusHide),void 0!==i){$jq(c.productStatus).show();var k=i[e];void 0!==k&&""!==k&&(g.html(k),h.html(k).show(),j.val(k),f.removeClass(d.productStatusHide))}}var c={productContainer:".js-productStatusContainer",productStatus:".bose-productStatus"},d={productStatusHide:"bose-productStatus--hide",productVariantStatus:'input[name="productStatus-variantCode"]'};return{init:a,_selectors:c,_classes:d}}();var Bose=Bose||{};Bose.ProductCallToAction=function(){function a(){try{i=window.analyticstracker()}catch(a){window.console.error("Bose.Analytics: Script is not able to instantiate")}$jq(document).on("variantChanged",b),h=$jq(j.colorItem.selected).data("variant-code"),$jq(document).on("variantUpdatedATP",c),$jq(j.resellerOverlayButton).on("click",d),$jq(j.resellerDirectButton).on("click",f),$jq(j.loadResellers).on("click",d),$jq(j.loadResellersFromHatch).on("click",e)}function b(a,b,c){var d,e=$jq(j.container).filter('[data-product-code="'+b+'"]'),f=e.closest($jq('*[data-product-reference-code="'+b+'"]')).find("a.bose-productLink"),h=$jq(j.colorVariant),i="";g&&g.code&&(i=g.code),d=c||i,h.filter("[data-variant-code]").removeClass("bose-colorItem--selected"),h.filter('[data-variant-code="'+d+'"]').addClass("bose-colorItem--selected"),e.filter("[data-variant-code]").addClass(k.hidden),e.filter('[data-variant-code="'+d+'"]').removeClass(k.hidden);var l=$jq(".js-productATP").filter('[data-product-code="'+b+'"]');l.filter("[data-variant-code]").addClass("bose-productATP--hide"),l.filter('[data-variant-code="'+d+'"]').removeClass("bose-productATP--hide"),f.each(function(a,b){var c=$jq(b),e=c.attr("href");c.attr("href",Bose.Utils.updatedHashParam(e,"v",d))}),$jq(j.variantPath).val($jq(j.colorItem.component).data("variantPath")),$jq(j.masterColorName).text($jq(j.colorItem.selected).attr("title")),$jq(j.variantCode).val(d)}function c(a,b,c){var d=$jq(j.container).filter('[data-variant-code="'+b.code+'"]'),e=d.find(j.primary),f=d.data("orderable");if(n++,(void 0===f||f)&&(b.atpData&&b.atpData.sellable?Bose.ButtonLink.enable(e):Bose.ButtonLink.disable(e),g=c||[],g.length>0&&void 0===(g=g.find(function(a){return!0===a.atpData.sellable?a:null}))&&(g=[]),b.code===h&&b.atpData.sellable&&(l=!0),b.code===Bose.Utils.getURLHashParam("v")&&b.atpData.sellable&&(m=!0),c&&c.length===n))if(l||m){if(m){var i=$jq(j.container).filter('[data-variant-code="'+Bose.Utils.getURLHashParam("v")+'"]');$jq(document).trigger("variantChanged",[i.data("product-code"),Bose.Utils.getURLHashParam("v"),""])}else if(l){var i=$jq(j.container).filter('[data-variant-code="'+h+'"]');$jq(document).trigger("variantChanged",[i.data("product-code"),h,""]),Bose.Utils.updateURLHashParam("v",h)}}else if(g.atpData.sellable&&0!==g.length){var i=$jq(j.container).filter('[data-variant-code="'+g.code+'"]');$jq(document).trigger("variantChanged",[i.data("product-code"),g.code,""])}}function d(a){Bose.WhereToBuy.loadResellers(a.target)}function e(a){Bose.WhereToBuy.loadResellers(a.target,"iceleads")}function f(a){var b=$jq(a.target),c=b.closest(".bose-buttonLink"),d=c.attr("title");if(void 0!==i&&!c.hasClass(k.buyButton)){var e={event:"product-addtocart",info:b.closest(".bose-cta").data("tracking-info"),commerce:c.data("tracking-commerce")};i.trackEvent(e)}$jq(document).trigger("trackResellerDirectLink",d)}var g,h,i,j={resellerOverlayButton:".js-cta__resellerOverlayButton",resellerDirectButton:".js-cta__resellerDirectButton",loadResellers:".js-whereToBuy__loadResellers",loadResellersFromHatch:".js-cta__resellerOverlayButton_activeHatch",masterColorName:".bose-colorSelector__colorName--masterProduct",container:".js-cta",primary:".js-cta__primary",colorVariant:'.js-colorSelector-productPageSelector .bose-colorSelector__colorItem:not(".js-bose-incentivepckgItem")',colorItem:{component:".bose-colorItem",selected:".bose-colorItem--selected",variantStatus:".bose-variantStatus",variantText:".bose-productTitle__status__container",productQuantity:".bose-productBuyArea__qty",productWrapper:".bose-productBuyArea__priceWrapper",confidentialLable:".bose-confidentialLabel",releaseLable:".bose-releaseLabel"}},k={hidden:"bose-cta--hide",buyButton:"bose-buttonLink__buyButton"},l=!1,m=!1,n=0;return{init:a,_selectors:j,_classes:k,inStockVariant:g}}(),$jq(document).ready(function(){Bose.ProductCallToAction.init()});var Bose=Bose||{};Bose.CreditCardDetector=function(){function a(){g=$jq(h.paymentGroup).data("payment-group"),$jq(h.cardNumberField).on("creditCardType",b).on("blur",f)}function b(){var a,b,d,f=$jq(this),g=f.closest(h.cardNumberContainer);if(""===f.val())return e(f),f.parent().addClass("-defaultPayment"),$jq(h.cardSection).data("card-found",!1),$jq(h.tooltipContent).find(h.boseIcon).removeClass().addClass(i.boseIcon+" "+i.cvvIcon),!1;a=c(f),b=$jq.isEmptyObject(a),b&&f.val().length>j?(e(f),g.addClass("-defaultPayment")):!1===b?(d=a.code,f.data("options").regex=a.regex,k.groupCode=a.code,k.methodCode=a.paymentCode,k.provider=a.provider,$jq(h.cardSection).data("card-found",!0),f.closest(h.paymentFieldsContainer).data("hybris-id",a.code).data("payment-provider",a.provider).attr("id",a.code),g.find(h.cardTypeScreenReader).text(a.name),$jq(h.paymentCardTypeInput).val(a.code),$jq(h.paymentCodeInput).val(a.code),$jq(h.paymentInfoInput).val(a.paymentInfoType),$jq(h.paymentMethodInput).val(a.code),$jq(h.cardSelectionInput).val(a.code).attr("id",a.code),$jq(h.paymentTokenURL).val(a.activePaymentMethods[0].aliasUrl),e(f),g.addClass("-"+d.substring(d.indexOf("_")+1)),$jq(h.tooltipContent).find(h.tooltipLabel).html(a.cvvNumberMessage),$jq(h.tooltipContent).find(h.boseIcon).removeClass().addClass(i.boseIcon+" "+i.cvvIcon+" "+i.boseIcon+"--"+d.substring(d.indexOf("_")+1))):b&&(e(f),f.parent().addClass("-defaultPayment"),$jq(h.cardSection).data("card-found",!1))}function c(a){return d(a.val(),g)}function d(a,b){var c={};return $jq.each(b,function(b,d){if(d.hasOwnProperty("detectionRegex")&&"null"!==d.detectionRegex&&new RegExp(d.detectionRegex).test(a))return c.code=d.code,c.name=d.name.replace(/\s/g,""),c.regex=d.validationRegex,c.provider=d.paymentProvider,c.paymentInfoType=d.paymentInfoType,c.paymentCode=d.paymentMethodCode,c.cvvNumberMessage=d.cvvNumberMessage,c.activePaymentMethods=d.activePaymentMethods,!1}),c}function e(a){a.parent().removeClass(function(a,b){return(b.match(/(^|\s)-\S+/g)||[]).join(" ")})}function f(a){var b=$jq(h.cardSection).data("card-found"),c=$jq(this).val(),d=k.provider,e=Bose.DataLayer.Data.Page.formattedLocale;a.stopPropagation(),c.length>j&&b&&"ISD_PaymentProvider"!==d&&$jq.ajax({url:"/"+e+"/checkout.paymentMethodController.html/paymentMethod",method:"POST",dataType:"json",data:k,success:function a(b){$jq(document).trigger("disableCheckoutLoader"),"Ingenico_PaymentProvider"===k.provider?($jq(h.ingenicoAuthURL).val(b.AUTHRESPONSEURL),$jq(h.ingenicoURLContainer).text(b.ALIASURL),$jq.each(b,function(a,b){$jq(h.ingenicoSourceRequestDiv).find('div[data-param-name="'+a+'"]').text(b)})):"CyberSource_PaymentProvider"===k.provider&&($jq(h.cyberSourceURLContainer).text(b.token_url),$jq.each(b,function(a,b){$jq(h.cyberSourceRequestDiv).find('div[data-param-name="'+a+'"]').text(b)}))}})}var g,h={cardNumberContainer:".bose-cardNumber",cardNumberField:".bose-cardNumber input",cardTypeScreenReader:".bose-cardNumber__cardType .bose-screenReaderText",paymentGroup:".bose-paymentOptionsForm",cyberSourceURLContainer:".bose-cyberSourceTokenRequestUrl",cyberSourceRequestDiv:".bose-cyberSourceTokenRequestData",ingenicoURLContainer:".bose-ingenicoAliasRequestUrl",ingenicoSourceRequestDiv:".bose-ingenicoAliasRequestData",paymentFieldsContainer:".js-bose-paymentProvider",cardSection:".js-bose-cardSection",cardSelectionInput:".js-bose-creditCardGrouping",ingenicoAuthURL:'input[name="payment.authResponseUrl"]:not([disabled])',paymentMethodInput:'input[name="checkout_payment-method"]:not([disabled])',paymentCardTypeInput:'input[name="payment.cardType"]:not([disabled])',paymentCodeInput:'input[name="payment.code"]:not([disabled])',paymentInfoInput:'input[name="payment.paymentInfoType"]:not([disabled="disabled"])',tooltipContent:".bose-tooltipContent--cvv",tooltipButton:".js-bose-cvvTooltip",tooltipLabel:".bose-tooltipContent__text",boseIcon:".bose-icon",paymentTokenURL:"#order_payment_token_url:not([disabled])"},i={boseIcon:"bose-icon",cvvIcon:"bose-icon--cvv"},j=6,k={};return{init:a,_selectors:h,_paymentMethodRequest:k,removeCreditCardModifierClass:e}}();var Bose=Bose||{};Bose.Klarna=function(){function a(a){var d,h,i={};if(i.continueButton=Bose.Translation.getSiteTranslation("Continue"),i.client_token=a.client_token,i.paymentMethodCategories=a.payment_method_categories,0===a.payment_method_categories.length)return void $jq(e.errorLabel).html($jq(e.iframeContainer).data("klarnanotavailable")).show();$jq(document).trigger("enableCheckoutLoader"),Bose.Popup.display($jq(e.klarnaPayment),{isBuyButton:!1,wrapCss:f.popupModifier}),h=$jq(e.boseOverlay),h.find(e.overlayHeader).addClass(f.show),h.addClass(f.hide),$jq(document).on("click",e.continue,c),d='<form id="bose-klarnaForm" method="post" class="ajax-enabled" data-dtm-event="checkout_payment"><div id="klarna_container" class="bose-klarna__klarnaWidget js-bose-klarnaWidget"></div><input id="klarna_token" type="hidden"/><input type="hidden" id="paymentCategory" value="{paymentMethodCategories}"/><input type="hidden" name="authorizeToken" id="authorizeToken"/><input type="hidden" id="current-step"/><a href="" class="bose-button bose-button--setLoadingAfterClick -center -continue js-bose-authorizeKlarna"><span class="bose-button__label">{continueButton}</span><span class="bose-button__progressbar"></span></a></form>',$jq(e.popupModifier).find(e.iframeContainer).append(nano(d,i)),$jq(g.klarnaToken).val(a.client_token);try{Klarna.Payments.init({client_token:a.client_token}),Klarna.Payments.load({container:e.klarnaWidget,instance_id:"klarna-payments-instance",payment_method_categories:a.payment_method_categories},function(a){var c=$jq(e.iframeContainer);$jq(document).trigger("disableCheckoutLoader"),a.hasOwnProperty("error")?(b(a.error.invalid_fields),$jq(e.closeButton).trigger("click")):a.show_form?($jq(e.boseOverlay).removeClass(f.hide),$jq(e.closeButton).focus()):($jq(document).trigger("trackKlarnaCustomerRejection"),$jq(e.closeButton).trigger("click"),$jq(e.errorLabel).html(c.data("autherror")).show())})}catch(a){$jq(e.closeButton).trigger("click"),$jq(e.errorLabel).html($jq(e.iframeContainer).data("klarnanotavailable")).show()}}function b(a){var b,c=$jq('input[name="billingAddressSameAsShippingchk"]').is(":checked"),d=$jq(e.errorLabel),f=$jq(e.iframeContainer);b=a,b.forEach(function(a){!c&&a.indexOf("billing")>"-1"&&a.indexOf("phone")>"-1"?d.html(f.data("invalidphonenumberBilling")).show():c||a.indexOf("shipping")>"-1"?a.indexOf("email")>"-1"?d.html(f.data("invalid-email")).show():a.indexOf("phone")>"-1"?d.html(f.data("invalidphonenumberShipping")).show():d.html(f.data("addresserrorShipping")).show():d.html(f.data("addresserrorBilling")).show()})}function c(a){var b=$jq(this),c=$jq(g.klarnaToken).val();a.preventDefault(),a.stopImmediatePropagation(),b.addClass(f.loadButton);try{Klarna.Payments.on("fullscreenOverlayShown",function(){$jq(e.popupModifier).addClass(f.hide)}),Klarna.Payments.authorize({instance_id:"klarna-payments-instance",client_token:c},d)}catch(a){$jq(e.closeButton).trigger("click"),$jq(e.errorLabel).html($jq(e.iframeContainer).data("klarnanotavailable")).show()}}function d(a){var c={formId:"bose-klarnaForm",ajaxEnabled:"true"},d=Bose.DataLayer.Data.Page.formattedLocale,h=$jq('input[id*="klarna"]').val(),i="/"+d+"/checkout.checkout.processpayment.html/"+h,j=$jq(e.continue);if(j.removeClass(f.loadButton),a.hasOwnProperty("error"))b(a.error.invalid_fields),$jq(e.closeButton).trigger("click");else{if(a.show_form&&!a.approved)return void $jq(e.popupModifier).removeClass(f.hide);if(!a.show_form&&!a.approved)return $jq(document).trigger("trackKlarnaCustomerRejection"),$jq(e.closeButton).trigger("click"),void $jq(e.errorLabel).html($jq(e.iframeContainer).data("autherror")).show()}$jq(e.closeButton).trigger("click"),$jq(g.authorizeTokenField).val(a.authorization_token),$jq(g.stepIdField).val($jq(e.activeStep).find('input[name=":currentStep"]').val()).attr("name",":currentStep"),$jq(g.klarnaForm).attr("action",i),Bose.Forms.initForm(c),Bose.Forms.submitForm(j)}var e={popupModifier:".bose-popupInner--klarnaPayment",iframeContainer:".bose-klarna__IframeContainer",klarnaPayment:".js-klarna-method",continue:".js-bose-authorizeKlarna",errorLabel:".bose-form__errorMessage",klarnaWidget:".js-bose-klarnaWidget",activeStep:".bose-formFlowPanel--active",boseOverlay:".bose-popup",closeButton:".bose-popupClose",overlayHeader:".bose-klarna__logo"},f={popupModifier:"bose-popupInner--klarnaPayment",hide:"-visiblyHide",loadButton:"bose-button--loading",show:"-show"},g={klarnaForm:"#bose-klarnaForm",authorizeTokenField:"#authorizeToken",klarnaToken:"#klarna_token",stepIdField:"#current-step",reAuthorizable:"#re-authorize",paymentCategory:"#paymentCategory"};return{init:a,_selectors:e}}();var Bose=Bose||{};Bose.VariantDDSelector=Bose.VariantDDSelector||{},Bose.VariantDDSelector.variantSelector=".bose-variantSelector__variants",Bose.VariantDDSelector.selectedVariantSelector=Bose.VariantDDSelector.variantSelector+" option:selected",Bose.VariantDDSelector.ecommerceAreajqSelector=".bose-ecommerceArea__ctaArea .bose-variantSelector__variants",Bose.VariantDDSelector.jqSelector=".bose-variantDDSelector",Bose.VariantDDSelector.jqSelectorItem=".bose-variantSelector__variantItem",Bose.VariantDDSelector.selectedItemClass="bose-variantSelector__variantItem--selected",Bose.VariantDDSelector.jqSelectorLabel=".bose-variantSelector__label",Bose.VariantDDSelector.variantCodeFormFieldSelector='input[name=":product-variantCode"]',Bose.VariantDDSelector.variantPathFormFieldSelector='input[name=":product-path"]',Bose.VariantDDSelector.$allVariantDDSelectors=null,Bose.VariantDDSelector.init=function(){Bose.Select.init(),Bose.VariantDDSelector.$allVariantDDSelectors=$jq(Bose.VariantDDSelector.jqSelector+":not([data-initialized])"),Bose.VariantDDSelector.attachListeners();var a=Bose.Utils.getURLHashParam("v");Bose.VariantDDSelector.navigateToVariant(a),Bose.VariantDDSelector.prependSelect(),Bose.VariantDDSelector.$allVariantDDSelectors.attr("data-initialized",!0)},Bose.VariantDDSelector.Handlers={},Bose.VariantDDSelector.Handlers.selectionChange=function(){var a=$jq(this).find("option:selected"),b=a.data("variant-code"),c=a.data("variant-path"),d=a.attr("title"),e=a.parent().data("variant-image")||a.data("variant-image"),f=a.parents(Bose.VariantDDSelector.jqSelector),g=$jq(this).closest(".bose-productReference__container").find(".bose-productReference__image img"),h=f.data("product-code"),i=!!a.closest(".js-parentProduct").length&&a.closest(".js-parentProduct").data("productcode"),j=a.data("dtmSkip");0===g.length&&(g=a.closest(".bose-productReferences__reference__container").find(".bose-productReference__image")),Bose.VariantDDSelector.updateStyling(a,f),Bose.VariantDDSelector.updateFormField(f,b,c),Bose.VariantDDSelector.updateLabel(f,d),Bose.VariantDDSelector.updateImage(g,e),$jq(document).trigger("variantChanged",[h,b,c,e,i]),void 0!==j&&null!==j&&""!==j&&j||$jq(document).trigger("product.trackVariantChanged"),Bose.Utils.reMatchHeights()},Bose.VariantDDSelector.updateImage=function(a,b){a.attr("src",b)},Bose.VariantDDSelector.Handlers.appendVariantToURI=function(){var a=$jq(this).find("option:selected"),b=a.data("variant-code");Bose.Utils.updateURLHashParam("v",b)},Bose.VariantDDSelector.attachListeners=function(){Bose.VariantDDSelector.$allVariantDDSelectors.find(Bose.VariantDDSelector.variantSelector).on("selectmenuchange",Bose.VariantDDSelector.Handlers.selectionChange),$jq(Bose.VariantDDSelector.ecommerceAreajqSelector).on("selectmenuchange",Bose.VariantDDSelector.Handlers.appendVariantToURI)},Bose.VariantDDSelector.updateStyling=function(a,b){b.find(Bose.VariantDDSelector.jqSelectorItem).removeClass(Bose.VariantDDSelector.selectedItemClass),a.addClass(Bose.VariantDDSelector.selectedItemClass)},Bose.VariantDDSelector.updateLabel=function(a,b){a.find(Bose.VariantDDSelector.jqSelectorLabel).html(b)},Bose.VariantDDSelector.updateFormField=function(a,b,c){var d=a.find(Bose.VariantDDSelector.variantCodeFormFieldSelector),e=a.find(Bose.VariantDDSelector.variantPathFormFieldSelector);d.val(b),e.val(c)},Bose.VariantDDSelector.navigateToVariant=function(a){var b=$jq(Bose.VariantDDSelector.ecommerceAreajqSelector);if(void 0!==a&&""!==a&&b.length){var c=$jq(Bose.VariantDDSelector.ecommerceAreajqSelector+" option[value="+a+"]");c.index()>-1&&(c.attr("data-dtm-skip",!0),b.val(a).trigger("selectmenuchange").selectmenu("refresh"),c.removeAttr("data-dtm-skip"))}},Bose.VariantDDSelector.prependSelect=function(){$jq(".bose-variantDDSelector:not([data-initialized])").each(function(){var a=$jq(this);a.find(".bose-select__select").prepend(a.find(".bose-variantDDSelector__selectMessage"))})};var Bose=Bose||{};Bose.ColorSelector=function(){function a(){var a=$jq(F.component).not(F.initialised),f=$jq(F.promotionPriceBanner),g=$jq(F.virtualBundleSelector);if(D=window.location.search,a.find(F.colorItem.component).on("click",m),a.find(F.dimension).on("click",i),$jq(document).on("change",F.addBundleCheckbox,d).on("change updateIncentiveProduct",F.virtualBundleSelector,e).on("window.load",c),E=$jq(F.bundleProductMap).data("bundle-map"),a.addClass(G.initialised),u($jq(F.colorItem.selected)),f.length>0&&f.each(function(){var a=$jq(this),b=parseFloat(a.data("promotionprice"));a.text("+ "+h(b,Bose.DataLayer.Data.Page.locale,a.data("currency")))}),g.length&&-1!==D.indexOf("?"))return void b();g.length>0&&$jq(F.packageProductContainer).each(function(){0===$jq(this).find(F.colorItem.selected).length&&$jq(this).find(F.colorItem.component).eq(0).addClass("bose-colorItem--selected")}),$jq(F.colorItem.selected).click(),$jq(F.list).find("li:first-child a.js-colorSelector-pckProduct").each(function(){$jq(this).click()}),$jq(F.ecommerceArea2019).length>0&&$jq(F.colorItem.component).hover(function(){var a,b=$jq(this),c=b.attr("title");a=b.hasClass(G.incentiveBundleVariants)?b.closest(".bose-colorSelectorContainer"):b.closest(".bose-colorSelector"),z(b),a.find(F.colorName).text(c)},function(){var a,b=$jq(this),c=b.closest("ul").find(F.colorItem.selected).attr("title");a=b.hasClass(G.incentiveBundleVariants)?b.closest(".bose-colorSelectorContainer"):b.closest(".bose-colorSelector"),z(b.closest("ul").find(F.colorItem.selected)),a.find(F.colorName).text(c)})}function b(){var a=$jq(".bose-packageVariantSelector"),b=$jq(F.productPageSelector),c=b.data("productCode"),d=Bose.Utils.getParameterByName(c);d&&b.find(F.colorItem.component).eq(parseInt(d,10)-1).click(),a.each(function(){var a=$jq(this),b=a.data("incentive-product-code"),c=Bose.Utils.getParameterByName(b);c?(a.find(F.colorItem.component).eq(parseInt(c,10)-1).click(),a.find(F.virtualBundleSelector).prop("checked",!0).trigger("change")):a.find(F.colorItem.component+":first").click()})}function c(){var a=$jq(F.virtualBundleSelector),b=$jq(F.productCodeSelector).data("product-code");a.length&&$jq(document).trigger("variantChanged",[b,C,"","","","","",!0])}function d(a){var b=$jq(a.currentTarget),c=b.parent().closest(".bose-packageVariantSelector__addProduct").parent().find(".bose-colorItem--selected");c.hasClass(G.incentiveBundleVariants)||c.hasClass(G.incentiveBaseVariants)||($jq(F.packageVariantListContainer).find("input:checked").length>0?c.click():$jq(F.masterColorList).find("li a.bose-colorItem--selected").click())}function e(a){var b,c,d,e,i=$jq(this),j=$jq(F.incentiveBundleContainer),k=i.parent().closest(F.addProdCheckboxContainer).parent().find(F.colorItem.selected),l=k.closest(F.list),m=parseFloat(l.data("base-price")),n=parseFloat(l.data("original-base-price")),q=l.data("currency"),r=parseFloat(k.data("variant-discounted-price")),s=parseFloat(k.data("variant-original-price")),t=Bose.DataLayer.Data.Page.locale,u=$jq(F.productCodeSelector).data("product-code"),v=i.closest(".bose-packageVariantSelector").find(".js-price-included"),w=i.closest(".bose-packageVariantSelector").find(".js-bose-promotionPrice");a.stopImmediatePropagation(),b=j.data("total-price")?parseFloat(j.data("total-price")):m,d=j.data("total-originalPrice")?parseFloat(j.data("total-originalPrice")):n,f(i),i.is(":checked")?(e=b+r,c=d+s,w.addClass("-animatePrice"),v.addClass("-animateIncPrice")):(w.removeClass("-animatePrice"),v.removeClass("-animateIncPrice"),i.closest(".bose-packageVariantSelector").find(".js-price-included").removeClass("animate__fadeInRight animate__fadeOutRight"),i.closest(".bose-packageVariantSelector").find(".js-bose-promotionPrice").removeClass("animate-price"),e=b-r,c=d-s),j.data("total-price",""+e),j.data("total-originalPrice",""+c),$jq(F.totalPriceContainer).text(h(e,t,q)),e===c?$jq(F.priceArea).removeClass(G.promoPrice):($jq(F.priceArea).addClass(G.promoPrice),$jq(F.originalTotPriceContainer).text(h(c,t,q))),$jq(document).trigger("variantChanged",[u,C,"","","","","",!0]),p(),o(),g()}function f(a){a.is(":checked")?a.closest(".bose-packageVariantSelector").addClass("-selected"):a.closest(".bose-packageVariantSelector").removeClass("-selected")}function g(){var a=$jq(F.packageProductContainer).find("input:checked"),b=$jq(F.productATP),c=$jq(F.incentiveProductATP);if(0===a.length)return b.attr("style",""),void c.remove();b.hide(),$jq.each(a,function(){var a,d=$jq(this),e=d.closest(F.packageProductContainer).find(F.colorItem.selected),f={};if("OUT_OF_STOCK"===e.data("variant-atp"))return c.remove(),b.hide(),f.atpMessage=Bose.Translation.getSiteTranslation("BUNDLE_OUT_OF_STOCK"),a='<div class="bose-incentiveProductATP js-bose-incentiveProductATP" aria-live="polite">{atpMessage}</div>',b.parent().append(nano(a,f)),!1;c.remove(),b.attr("style","")})}function h(a,b,c){return a.toLocaleString(b,{style:"currency",currency:c})}function i(a){var b=$jq(a.currentTarget),c=b.data(H.dimension),d=b.closest(F.component);b.hasClass(G.dimensionSelected)||(k(d,c),l(d,c))}function j(a){var b=a.closest(F.component),c=a.closest(F.dimensionColor).data(H.dimension),d=b.find(F.dimension+"[data-"+H.dimension+'="'+c+'"]');d.hasClass(G.dimensionSelected)||(Bose.VariantBlockSelector.updateStyling(b,d),k(b,c))}function k(a,b){var c=a.find(F.dimensionColor),d=c.filter("[data-"+H.dimension+'="'+b+'"]');c.hide(),d.show()}function l(a,b){var c=a.find(F.dimensionColor),d=c.filter("[data-"+H.dimension+'="'+b+'"]'),e=d.find(F.colorItem.selected);e.length||(e=d.find(F.colorItem.component).first()),e.click()}function m(){var a,b=$jq(this),c=b.closest(F.component),d=c.data("multi-dimensional"),e=c.data("product-code"),f=$jq(F.packageVariantListContainer).find("input:checked"),h=v(b),i=!0;d&&j(b),b.hasClass(G.bundleVariants)&&!b.hasClass(G.incentiveBaseVariants)?0===f.length&&b.hasClass(G.packageColorSelector)?(c=b.closest(F.packageVariantListContainer),i=!1,s(b,h),w(d?b.closest(F.dimensionColor):c,b),t(d,b,c,e,h,i)):b.hasClass(G.masterVariants)?(C=b.data("variant-code"),c=b.closest(F.productPageSelector),w(d?b.closest(F.dimensionColor):c,b),s(b,h),h.multiVariantCode=q(),a=r(h),h.variantCode=a.variantCode,h.variantPath=a.variantPath,h.variantImage=a.variantImage,h.totalPrice=a.totalPrice,h.totalPriceFormat=a.totalPriceFormat,t(d,b,c,e,h,i)):f.length>0&&b.hasClass(G.packageColorSelector)&&(c=b.closest(F.packageVariantListContainer),w(d?b.closest(F.dimensionColor):c,b),s(b,h),h.multiVariantCode=q(),a=r(h),h.variantCode=a.variantCode,h.variantPath=a.variantPath,h.variantImage=a.variantImage,h.totalPrice=a.totalPrice,h.totalPriceFormat=a.totalPriceFormat,t(d,b,c,e,h,i)):b.hasClass(G.incentiveBundleVariants)||b.hasClass(G.incentiveBaseVariants)?(f=$jq(F.packageProductContainer).find("input:checked"),b.hasClass(G.incentiveBaseVariants)?(C=b.data("variantCode"),c=b.closest(F.productPageSelector)):(c=b.closest(F.packageVariantListContainer),i=!1,b.data("variant-atp")&&c.find(F.prodStockStatusContainer).html(Bose.Translation.getSiteTranslation(b.data("variant-atp")))),h.haveIncentiveBundle=!0,s(b,h),w(d?b.closest(F.dimensionColor):c,b),b.hasClass(G.incentiveBundleVariants)&&f.length>0||b.hasClass(G.incentiveBaseVariants)?(p(),t(d,b,c,e,h,i),g()):b.hasClass(G.incentiveBundleVariants)&&t(d,b,c,e,h,i),o()):(w(d?b.closest(F.dimensionColor):c,b),t(d,b,c,e,h,i)),$jq(F.mediaArea).removeClass(G.mediaAreaBorder),$jq(F.ecommerceArea2019ProdStatus).text().length>0&&$jq(F.mediaArea).addClass(G.mediaAreaBorder)}function n(){var a,b;return b=q(),b.unshift(C),a=b.toString(),a=a.replace(/,/g,"-")}function o(){var a;a=q(),a=a.toString(),$jq('input[name=":incentive-variantCode"]').val(a)}function p(){var a=$jq(F.productCodeSelector).data("product-code"),b=n();$jq(document).trigger("incentiveVariantChanged",[a,b,"","","","","",!1,C])}function q(){var a=$jq(F.packageProductContainer).find("input:checked"),b=[];return $jq.each(a,function(){var a=$jq(this),c=a.parent().closest(".bose-packageVariantSelector").find(".bose-colorItem--selected");b.push(c.data("variantCode"))}),b}function r(a){var b=a.multiVariantCode,c={};for(var d in E)if(E.hasOwnProperty(d)){var e=E[d],f=[];if(e.master.code===C&&void 0!==e.slaves&&e.slaves.length===b.length){for(var g=0;g<e.slaves.length;g++)f.push(e.slaves[g].code);for(var h=0;h<b.length;h++)f=f.filter(function(a){return a!==b[h]});if(0===f.length){c.variantCode=e.code,c.variantPath=e.path,c.variantImage=e.image,c.totalPrice=e.bundleTotalPrice,c.totalPriceFormat=e.bundleTotalPriceFormat;break}}else if(0===b.length&&e.master.code===C&&void 0===e.slaves){c.variantCode=e.code,c.variantPath=e.path,c.variantImage=e.image,c.totalPrice=e.bundleTotalPrice,c.totalPriceFormat=e.bundleTotalPriceFormat;break}}return c}function s(a,b){a.closest(F.packageProductContainer).find("img").attr({alt:b.title,src:b.variantImage})}function t(a,b,c,d,e,f){z(b),x(c,e.variantLabel),u(b),f&&(y(c,e.variantCode,e.variantPath),$jq(document).trigger("variantChanged",[d,e.variantCode,e.variantPath,e.variantImage,"",e.totalPrice,e.totalPriceFormat,e.haveIncentiveBundle]),void 0!==e.dtmSkip&&null!==e.dtmSkip&&""!==e.dtmSkip&&e.dtmSkip||$jq(document).trigger("product.trackVariantChanged"))}function u(a){var b=a.find(F.bopisEnabledStatus).html();void 0!==b&&("true"===b?($jq(F.shippingMethod).show(),$jq(F.stockDetails).hide()):($jq(F.shippingMethod).hide(),$jq(F.stockDetails).show()))}function v(a){return{variantCode:a.data("variant-code"),variantPath:a.data("variant-path"),variantLabel:a.attr("title"),variantImage:a.data("variant-image"),dtmSkip:a.data("dtmSkip"),title:a.data("product-title")}}function w(a,b){a.find(F.colorItem.component).removeClass(G.selectedItem),b.addClass(G.selectedItem)}function x(a,b){a.find(F.colorName).text(b)}function y(a,b,c){a.find(F.variantCode).length?(a.find(F.variantCode).val(b),a.find(F.variantPath).val(c)):($jq(F.component).find(F.variantCode).val(b),$jq(F.component).find(F.variantPath).val(c))}function z(a){a.find(F.screenReader).html(Bose.Translation.getSiteTranslation(I.selectedColor+a.attr("title"))),a.parent().siblings().each(function(){var a=$jq(this),b=a.find(".bose-colorSelector__colorItem").attr("title");a.find(F.screenReader).html(Bose.Translation.getSiteTranslation(I.color+b))})}function A(a,b){if(void 0!==b&&""!==b&&a.length){B(a.find(F.color).filter("[data-variant-code="+b+"]"))}}function B(a){a.attr("data-dtm-skip",!0),a.click(),a.removeAttr("data-dtm-skip")}var C,D,E,F={
component:".js-colorSelector",initialised:".js-colorSelector-initialised",dimension:".js-colorSelector__dimension",dimensionColor:".js-colorSelector__dimensionColor",variantCode:'input[name=":product-variantCode"]',variantPath:'input[name=":product-path"]',color:".bose-colorSelector__colorItem",colorName:".bose-colorSelector__colorName",masterColorName:".bose-colorSelector__colorName--masterProduct",list:".js-colorSelector-list",screenReader:".bose-screenReaderText",subVariantImgContainer:".bose-packageVariantSelector__imageBlock",addBundleCheckbox:".js-bose-bundleSelector",virtualBundleSelector:".js-bose-virtualBundleSelector",packageVariantList:".js-hiddenValues",masterColorList:".js-masterColor-list",packageProductContainer:".bose-packageVariantSelector",packageVariantListContainer:".bose-packageVariantSelector__productDetails",stockDetails:".js-stockDetails",colorItem:{component:".bose-colorItem",selected:".bose-colorItem--selected",colorField:".bose-colorItem__colorField"},shippingMethod:".bose-shippingMethod",bopisEnabledStatus:".bose-bopisEnabledStatus",bundleProductMap:".js-bose-bundleProduct-map",masterVariant:".bose-colorItem--masterVariant",incentiveBaseProduct:".js-bose-incentiveBundleBase",incentiveBundleContainer:".js-bose-incentiveBundles",totalPriceContainer:".bose-price__price--productPage",originalTotPriceContainer:".js-bose-originalTotalPrice",promotionPriceBanner:".js-bose-promotionPrice",productPageSelector:".js-colorSelector-productPageSelector",addProdCheckboxContainer:".bose-packageVariantSelector__addProduct",productCodeSelector:".js-variantSelector",productATPContainer:".productATP",productATP:".js-productATP",incentiveProductATP:".js-bose-incentiveProductATP",prodStockStatusContainer:".bose-packageVariantSelector__stockStatus",ecommerceArea2019:".bose-ecommerceArea2__ctaArea",ecommerceArea2019ProdStatus:".js-productStatusContainer",mediaArea:".js-ecommerceArea2-mediaArea",colorSelectorContainer:".bose-colorSelectorContainer",priceArea:".bose-price"},G={initialised:"js-colorSelector-initialised",dimensionSelected:"bose-variantBlockSelector__block--selected",selectedItem:"bose-colorItem--selected",packageColorSelector:"js-colorSelector-pckProduct",bundleVariants:"bose-colorItem__bundleVariant",masterVariants:"bose-colorItem--masterVariant",incentiveBundleVariants:"js-bose-incentivepckgItem",incentiveBaseVariants:"js-bose-incentiveBundleBase",mediaAreaBorder:"bose-ecommerceArea2__mediaArea--border",promoPrice:"bose-price--withPromo"},H={dimension:"dimension"},I={selectedColor:"currently selected color: ",color:"select this color: "};return{init:a,selectVariant:A,_selectors:F,_classes:G,_labels:I,_selectedVariant:C}}();var Bose=Bose||{};Bose.VariantBlockSelector=function(){function a(){$jq(document).on("click",f.variantBlock,b),c($jq(f.selectedVariantBlock))}function b(){var a=$jq(this),b=a.closest(f.container),i=b.find(f.selectorBlock),j=i.data(h.notVariant);if(!a.hasClass(g.variantBlockSelected)){if(e(i,a),!j){var k=i.data(h.productCode),l=a.data(h.code),m=a.data(h.path),n=a.data(h.image);d(b,l,m),$jq(document).trigger("variantChanged",[k,l,m,n])}c($jq(f.selectedVariantBlock))}}function c(a){var b=a.find(f.bopisEnabledStatus).html();void 0!==b&&("true"===b?$jq(f.shippingMethod).show():$jq(f.shippingMethod).hide())}function d(a,b,c){a.find(f.variantCode).val(b),a.find(f.variantPath).val(c)}function e(a,b){a.find(f.variantBlock).removeClass(g.variantBlockSelected),b.addClass(g.variantBlockSelected)}var f={variantCodeInput:'input[name=":product-variantCode"]',variantPathInput:'input[name=":product-path"]',variantBlock:".js-variantBlock--block",container:".js-variantSelector",selectorBlock:".js-variantBlock",parentProduct:".js-parentProduct",variantCode:'input[name=":product-variantCode"]',variantPath:'input[name=":product-path"]',shippingMethod:".bose-shippingMethod",bopisEnabledStatus:".bose-variantBlock-bopisEnabledStatus",selectedVariantBlock:".bose-variantBlockSelector__block--selected"},g={variantBlockSelected:"bose-variantBlockSelector__block--selected"},h={path:"variantPath",code:"variantCode",image:"variantImage",productCode:"productCode",notVariant:"notVariant"};return{init:a,selectVariant:b,updateStyling:e,_selector:f,_classes:g,_dataKeys:h}}();var Bose=Bose||{};Bose.Promo=Bose.Promo||{},Bose.Promo.init=function(){$jq(document).on("variantChanged",Bose.Promo.switchVariant)},Bose.Promo.getElementCssClasses=function(a,b){var c=$jq.trim(a.find(b).attr("class")),d=c.split(" ");return $jq.grep(d,function(a){return a.indexOf("bose-promo")<0}).join(" ")},Bose.Promo.switchVariant=function(a,b,c){var d=$jq(".bose-promoHolder[data-product-code='"+b+"']"),e=Bose.Promo.getElementCssClasses(d,".bose-promo");d.each(function(a,d){var f=$jq(d),g=f.data("text-information"),h=f.data("promo-productcodemapping");if(void 0!==h){var i=h[c];if(f.html(""),void 0!==i)for(var j=0;j<i.length;j++){var k=i[j],l="bose-promo ";"default"===k.customType?l+=" bose-promo--default":l+=" bose-promo--"+k.customType;var m=$jq("<div/>",{class:l});if(k.name&&$jq("<div/>",{class:"bose-promo__title",text:k.name}).appendTo(m),k.description&&$jq("<div/>",{class:"bose-promo__descr",text:k.description}).appendTo(m),k.imageUrl&&$jq("<img/>",{class:"bose-promo__img",src:k.imageUrl,width:90,title:k.name}).appendTo(m),k.moreInfoUrl){var n={href:k.moreInfoUrl,text:g},o=k.promotionTarget,p="bose-promo__cta bose-link bose-link--arrowRight";"OVERLAY"===o?p+=" overlay":"NEW_WINDOW"===o&&(n.target="_blank"),n.class=p;var q=$jq("<a/>",n);"OVERLAY"===o&&Bose.Overlay.doOverlay(q),q.appendTo(m)}m.appendTo(f),$jq(".bose-promoHolder[data-product-code='"+b+"']").find(".bose-promo").addClass(e)}}})};var Bose=Bose||{};Bose.ProductRatings=function(){function a(){$jq(c.container).on("click",b)}function b(){Bose.Tabs.scrollToAnchorWithStickyMsg("ProductTabs_tab999")}var c={container:".js-bose-productRatings__container"};return{init:a,_selectors:c}}();var Bose=Bose||{};Bose.EcommerceArea=function(){function a(){var a=$jq(e.component),d=Bose.Utils.getURLHashParam(f);0!==a.length&&(c(),void 0!==d&&(Bose.ColorSelector.selectVariant(a,d),Bose.VariantBlockSelector.selectVariant(a,d)),Gridle.on("update",c),$jq(document).on("variantChanged",function(a,c,d){b(d)}))}function b(a){Bose.Utils.updateURLHashParam(f,a)}function c(){var a=$jq(e.ctaArea),b=$jq(e.mediaArea);Gridle.isActive("small")?d(a,b):d(b,a)}function d(a,b){var c=a.find("h1.bose-title");c.length>0&&c.prependTo(b)}var e={component:".js-ecommerceArea",mediaArea:".js-ecommerceArea-mediaArea",ctaArea:".js-ecommerceArea-ctaArea"},f="v";return{init:a,_selectors:e}}();var Bose=Bose||{};Bose.ProductPrice=Bose.ProductPrice||{},Bose.ProductPrice.selectors={bundleMapContainer:".js-bose-bundleProduct-map"},Bose.ProductPrice.init=function(){$jq(document).on("variantChanged",Bose.ProductPrice.switchVariant)},Bose.ProductPrice.switchVariant=function(a,b,c,d,e,f,g,h,i){var j;if(!i){j=f?$jq('.js-parentProduct[data-productCode="'+f+'"] .bose-price[data-product-code="'+b+'"]'):$jq(".bose-price").filter('[data-product-code="'+b+'"]');var k=j.data("price-productcodemapping");if(void 0!==k){var l=k[c];void 0===l||null===l||l.empty?(j.find(".bose-price__price:not(.bose-price__price--original):not(.bose-price__price--taxdata)").html(""),j.find(".bose-price__price--original").html(""),j.find(".bose-price__rrpMsg").removeClass("bose-price__rrpMsg--visible")):(j.removeClass("bose-price--withPromo"),l.showPromotionalPrice?(j.addClass("bose-price--withPromo"),j.find(".bose-price__price:not(.bose-price__price--original):not(.bose-price__price--taxdata)").html(l.promotionalPrice),j.find(".bose-price__price--original").html(l.originalPrice)):(j.find(".bose-price__price:not(.bose-price__price--original):not(.bose-price__price--taxdata)").html(l.originalPrice),j.find(".bose-price__price--original").html("")),j.find(".bose-price__rrpMsg").addClass("bose-price__rrpMsg--visible"))}}};var Bose=Bose||{};Bose.WhereToBuy=function(){function a(){$jq(document).on("click",".js-cta__resellerOverlayButton",b)}function b(){Bose.WhereToBuy.loadResellers($jq(this))}function c(a,b){if(!t){var c=$jq(a),e=c.closest(".bose-cta"),g=e.attr("data-product-code"),h=e.attr("data-variant-code"),i=e.attr("data-variant-sku"),j=Bose.DataLayer.Data.Page.hatchUrl,k="",m="",n="";sessionStorage.clear(),sessionStorage.setItem("productCode",g),sessionStorage.setItem("variantCode",h),t=!0,"iceleads"===b?(s=!0,Bose.DataLayer.Data.Page.enableOrionCall?(Bose.IconLoader.showIconLoaderPageOverlay(),$jq.ajax(Bose.DataLayer.Data.Settings.microServiceUrl,{method:"GET"}).done(function(a){var b=a.country.toLowerCase();Bose.IconLoader.removeIconLoaderPageOverlay(),k=j+b+"&mpn="+i,m=Bose.DTM.getVisitorID(),""!==m&&(k=k+"&adobeID="+m),d(k)}).fail(function(){Bose.IconLoader.removeIconLoaderPageOverlay(),l()})):(k=j+Bose.DataLayer.Data.Page.country+"&mpn="+i,m=Bose.DTM.getVisitorID(),""!==m&&(k=k+"&adobeID="+m),d(k))):(n=Bose.DataLayer.Data.Page.formattedLocale,s=!1,$jq.ajax({url:"/"+n+"/forms.wheretobuy."+g+"."+h+".json",method:"GET",contentType:"application/json",success:f,error:l}))}}function d(a){$jq.ajax({url:a,method:"GET",dataType:"jsonp",contentType:"application/json",jsonpCallback:"Bose.WhereToBuy.displayHatch"})}function e(a){var b=a.iceleads_interface.retailers;b&&!Array.isArray(b.retailer)&&(b.retailer=[b.retailer]),g(a.iceleads_interface)}function f(a){var b;b="string"==typeof a?JSON.parse(a):a,b.status===q.OK?(Bose.Popup.display(o(b),{cloneContent:!1}),i(),k()):m(b.status),t=!1}function g(a){var b;b="string"==typeof a?JSON.parse(a):a,b.status===q.OK?(Bose.Popup.display(o(b),{cloneContent:!1}),i(),k()):Bose.WhereToBuy._loadResellersFromStaticContent(),t=!1}function h(){var a=sessionStorage.getItem("productCode"),b=sessionStorage.getItem("variantCode"),c="";t=!0,c=Bose.DataLayer.Data.Page.formattedLocale,s=!1,$jq.ajax({url:"/"+c+"/forms.wheretobuy."+a+"."+b+".json",method:"GET",contentType:"application/json",success:f,error:l})}function i(){$jq(document).on("click",".bose-whereToBuy__store__shopButton",j)}function j(a){var b=$jq(a.target),c=b.closest(".bose-buttonLink").data("reseller");$jq(document).trigger("trackResellerLink",c)}function k(){$jq(document).trigger("trackResellerOverlay")}function l(){m(),t=!1}function m(a){var b="FORM.FIELD-NOT-FOUND";a&&(b="BOSE_WHERE_TO_BUY_ERROR_",-1===r.NO_RESELLERS_FOUND.indexOf(a)?b+="GENERAL":b+="NO_RESELLERS_FOUND"),Bose.Popup.display(n(b),{cloneContent:!1})}function n(a){var b={errMsg:Bose.Translation.getSiteTranslation(a)},c=nano('<div class="bose-whereToBuy bose-whereToBuy--error"><div class="bose-whereToBuy__textbox">{errMsg}</div></div>',b);return $jq(c)}function o(a){var b=sessionStorage.getItem("productCode"),c=Bose.DataLayer.Data.Page.formattedLocale,d={whereToBuyShops:""},e="";if(!(a.retailers&&a.retailers.retailer&&a.retailers.retailer.length>0)){var f={space:". &nbsp; &nbsp; &nbsp;",unavalableMsg:Bose.Translation.getSiteTranslation("Currently unavailable online"),storeLinkMsg:Bose.Translation.getSiteTranslation("This product doesn't appear to be available for purchase online through any of our partner sites. But you might find it in a store near you."),storeLocator:Bose.Translation.getSiteTranslation("Store Locator"),linkHref:"/"+c+"/store_locator.html?productCode="+b},g=nano('<div class="bose-whereToBuy"><div class="bose-whereToBuy__errorTitle">{unavalableMsg}</div><div class="bose-whereToBuy__errorDescription">{storeLinkMsg}</div><div class="bose-whereToBuy__storeButton"><a role="button" aria-label="{}" class="bose-buttonLink bose-buttonLink--type1 -withBorder bose-productLink" title="{storeLocator}" data-reseller="{storeLocator}" href="{linkHref}"<span class="bose-button__label">{storeLocator}</span><span class="bose-button__progressbar"></span></a></div></div>',f);return $jq(g)}return a.retailers.retailer.forEach(function(a){d.whereToBuyShops+=p(a)}),e=nano(v,d),$jq(e)}function p(a){var b={imgAltText:a.name,imgSrc:a.logo,imgClasses:"bose-whereToBuy__store__img"+(s?" bose-whereToBuy__store__img--small":""),stockText:"&nbsp;",btnLabel:Bose.Translation.getSiteTranslation("Buy"),btnName:a.name,btnHref:a.purchase_link};return a.stock_info?b.stockText=a.stock_qty?Bose.Translation.getSiteTranslation("In stock"):Bose.Translation.getSiteTranslation("Out of stock"):void 0===a.stock_info?b.stockText="&nbsp;":b.stockText=Bose.Translation.getSiteTranslation("Out of stock"),nano(u,b)}var q={OK:200},r={NO_RESELLERS_FOUND:[201,203,204]},s=!1,t=!1,u='<div class="bose-whereToBuy__store"><div><img class="{imgClasses}" alt="{imgAltText}" src="{imgSrc}"></div><span class="bose-whereToBuy__store__stockInfo">{stockText}</span><div class="bose-whereToBuy__store__shopButton"><a role="button" aria-label="{btnLabel}" class="bose-buttonLink -withBorder bose-productLink" title="{btnLabel}" data-reseller="{btnName}" target="_blank" href="{btnHref}"><span class="bose-button__label">{btnLabel}</span><span class="bose-button__progressbar"></span></a></div></div>',v='<div class="bose-whereToBuy">{whereToBuyShops}</div>';return{init:a,isLoading:t,loadResellers:c,displayHatch:e,_displayResellerFromHatch:g,_loadResellersFromStaticContent:h}}();var Bose=Bose||{};Bose.Promotion=function(){function a(){$jq(document).on("variantChanged",b)}function b(a,b,f){var g=$jq('.bose-highlightedPromotionHolder[data-product-code="'+b+'"]'),h=$jq('.bose-nonHighlightedpromotionHolder[data-product-code="'+b+'"]'),i=c(g,".bose-promotion");d(h,c(h,".bose-promotion"),f,b),e(g,i,f,b)}function c(a,b){var c=$jq.trim(a.find(b).attr("class")),d=c.split(" ");return $jq.grep(d,function(a){return a.indexOf("bose-promotion")<0}).join(" ")}function d(a,b,c,d){a.each(function(a,e){var f=$jq(e),g=f.data("promo-productcodemapping");if(void 0!==g){var h=g[c];if(f.html(""),void 0!==h){f.html("");for(var i=$jq("<div/>",{class:"bose-promotion bose-promotion--nonhighlighted "}),j=0;j<h.length;j++){var k=h[j];k.name&&$jq("<div/>",{class:"bose-promotion__title",text:k.name}).appendTo(i),i.appendTo(f),$jq('.bose-nonHighlightedpromotionHolder[data-product-code="'+d+'"]').find(".bose-promotion").addClass(b)}}}})}function e(a,b,c,d){a.each(function(a,e){var f=$jq(e),g=f.data("promo-productcodemapping");if(void 0!==g){var h=g[c];if(f.html(""),void 0!==h){for(var i=$jq("<div/>",{class:"bose-promotion bose-promotion--highlighted "}),j=0;j<h.length;j++){var k=h[j],l=k.detailsURLLabel,m="bose-promotion__highlightedpromo bose-promotion__"+k.icon;0===j?m+=" -first":$jq("<div/>",{class:"bose-promotion  -rowrule"}).appendTo(i);var n=$jq("<div/>",{class:m}),o="";if(k.name&&(o=$jq("<div/>",{class:"bose-promotion__highlightedpromoinfo"}),$jq("<div/>",{class:"bose-promotion__title",text:k.name}).appendTo(o)),k.description&&$jq("<div/>",{class:"bose-promotion__descr",text:k.description}).appendTo(o),k.moreInfoUrl){var p={href:k.moreInfoUrl,title:l,text:l},q=k.promotionTarget,r="bose-promotion__ctalink -arrowRight";"OVERLAY"===q?r+=" overlay":p.target="NEW_WINDOW"===q?"_blank":"_self",p.class=r;var s=$jq("<div/>",{class:"bose-promotion__cta"}),t=$jq("<a/>",p);"OVERLAY"===q&&Bose.Overlay.doOverlay(t),t.appendTo(s),s.appendTo(o)}if(o.appendTo(n),k.imageUrl){var u=$jq("<div/>",{class:"bose-promotion__promoimg"});$jq("<img/>",{src:k.imageUrl,class:"bose-promotion__highlightedimg",title:k.name}).appendTo(u),u.appendTo(n)}n.appendTo(i)}i.appendTo(f),$jq('.bose-highlightedPromotionHolder[data-product-code="'+d+'"]').find(".bose-promotion").addClass(b)}}})}return{init:a}}(),$jq(document).ready(function(){Bose.OnlineResellers.init()}),$jq(document).ready(function(){Bose.SocialMedia.init()}),$jq(document).ready(function(){Bose.quantityChanger.init()}),$jq(document).ready(function(){Bose.ProductATP.init()}),$jq(document).ready(function(){Bose.PaymentControl.init(),Bose.IngenicoPaymentModule.init(),Bose.CyberSourcePaymentModule.init(),Bose.ISDToolKitPaymentModule.init(),Bose.InternalPaymentModule.init(),Bose.IngenicoEcommercePaymentModule.init(),Bose.MockedPaymentModule.init(),Bose.SEPAPaymentModule.init(),Bose.CreditCardDetector.init(),Bose.AdyenPayment.init()}),$jq(document).ready(function(){Bose.ProductStatus.init()}),$jq(document).ready(function(){Bose.Promo.init()}),$jq(document).ready(function(){Bose.ProductPrice.init()}),$jq(document).ready(Bose.Promotion.init),$jq(document).ready(function(){Bose.VariantDDSelector.init(),Bose.VariantBlockSelector.init()}),$jq(document).ready(function(){Bose.ProductRatings.init()}),$jq(document).ready(function(){Bose.EcommerceArea.init()});var Bose=Bose||{};Bose.MockedPaymentModule=function(){function a(a){Bose.Payment.registerPaymentModule(this,a)}function b(){return"Mockup"}function c(a,b){a.find(d.subscriptionId).val("123456789"),b(a)}var d={subscriptionId:'[name="payment.subscriptionId"]'};return{init:a,submit:c,getName:b}}();var Bose=Bose||{};Bose.ProductTile2016=function(){function a(){try{i=window.analyticstracker()}catch(a){window.console.error("Bose.Analytics: Script is not able to instantiate")}c(),$jq(document).on("variantChanged",b),$jq(document).on("click",j.variantLineButton,h)}function b(a,b,c,d,e){var h=$jq(a.target.activeElement),i=h.closest(j.productTile),k=i.find(j.productImage),l=i.find(j.productLink);f(k,e),g(l,c)}function c(){$jq(j.enableStock).each(function(){var a=$jq(this),b=a.find(".bose-productTile2016__info__userPref").data("url"),c=b;$jq.ajax(c,{dataType:"json",method:"GET"}).done(function(b){null!==b&&("SOLDOUT"===b.atpData.stockAvailableMessage?(a.find(".bose-productTile2016__infoNewCTABadge").html("").append(d("black_friday_soldout")).addClass("-stockOut"),a.addClass("bose-productTile2016--extraHeight"),a.find(".bose-buttonLink--buy").remove(),a.find(".bose-productTile2016__wrapper").removeClass("bose-productTile2016__wrapper--hover")):"ENDINGSOON"===b.atpData.stockAvailableMessage&&(a.addClass("bose-productTile2016--extraHeight"),a.find(".bose-productTile2016__infoNewCTABadge").html("").append(e("black_friday_low_stock")).addClass("-endingSoon")))})})}function d(a){var b={message:Bose.Utils.getGraniteTranslation(a)},c=nano('<div class="bose-productTile2016__info__ctaFeatures__tileMessage"><div class="bose-productTile2016__info__ctaFeatures__messageLabel"><span>{message}</span></div></div>',b);return $jq(c)}function e(a){var b={message:Bose.Utils.getGraniteTranslation(a)},c=nano('<div class="bose-productTile2016__info__ctaFeatures__tileMessage bose-productTile2016__info__ctaFeatures__tileMessage--graybackground"><div class="bose-productTile2016__info__ctaFeatures__messageLabel"><span>{message}</span></div></div>',b);return $jq(c)}function f(a,b){a.attr("src",b)}function g(a,b){var c=a.attr("href"),d=Bose.Utils.updatedHashParam(c,"v",b);a.attr("href",d)}function h(){var a=$jq(this),b=a.closest("form"),c=a.closest(j.parentProduct).data(k.productCode);if(c){var d=b.find('[name=":parentProductCode"]');d.length?d.val(c):b.prepend($jq("<input/>",{type:"hidden",name:":parentProductCode",value:c}))}var e={event:"product-addtocart",info:a.data("tracking-info"),commerce:a.data("tracking-commerce")};return void 0!==i&&i.trackEvent(e),Bose.Forms.submitForm(this)}var i,j={parentProduct:".js-parentProduct",productTile:".js-productTile2016",productImage:".js-productTile2016__image",productLink:".js-productTitle__link",variantLineButton:".js-variantLineButton",enableStock:".js-productTile2016-enableStock"},k={productCode:"productcode"};return{init:a,addProductParentToFormAndSubmit:h,_selectors:j,_dataKeys:k}}();var Bose=Bose||{};Bose.ProductTile2020=function(){function a(){var a=$jq(g.productList);if(a&&a.length&&a.find(g.default2020).length){var c=a.find(g.productReference);c&&c.length&&c.css("border","0")}Gridle.isActive("large")&&($jq(document).on("mouseover",g.selectedColorVariant,b),$jq(document).on("focus",g.selectedColorVariant,b))}function b(a){a.stopPropagation();var b=$jq(this),i=b.closest(g.default2020),j=i.data("commerce").mainproduct,k=b.data("variant-code"),l=b.closest(g.colorIndicators2020).find(g.colorVariants),m=b.data("image-url"),n=b.attr("href");i.find(g.productTile2020Info).attr("href",n),i.find(g.imageWrapperLink).attr("href",n),e(i,m),d(i,k),l.removeClass(h.defaultColorVariant),l.filter('[data-variant-code="'+k+'"]').addClass(h.defaultColorVariant),c(i,j,k),f(j,k)}function c(a,b,c){var d=a.find(g.productStatus2020),e=d.find(g.productContainer),f=d.find(".bose-screenReaderText>span"),i=d.data("status-productcodemapping"),j=$jq(h.productVariantStatus),k="";i&&i!=={}&&(k=i[c],k?(d.show(),e.html(k),f.html(k).show(),j.val(k),d.removeClass(h.productStatusHide)):(e.html(""),j.val(""),f.html("").hide(),d.hide()))}function d(a,b){a.find(g.priceSummary).addClass("hide"),a.find("."+b+g.priceSummary).removeClass("hide")}function e(a,b){b&&a.find(g.productImage).attr({src:b,"data-src":b})}function f(a,b){var c=$jq(g.newCTABadgeLarge).filter('[data-product-code="'+a+'"]');c.length>0&&(c.filter(g.showStockMessage).addClass(h.hidden).removeClass(h.show),c.filter('[data-variant-code="'+b+'"]').removeClass(h.hidden).addClass(h.show))}var g={selectedColorVariant:".bose-dynamicProductTile2020__colorIndicator .bose-productTile2020__colorIndicator2020",default2020:".bose-productTile2020--default",newCTABadgeLarge:".bose-productTile2020__infoNewCTABadgeLarge",newCTABadgeSmall:".bose-productTile2020__infoNewCTABadgeSmall",showStockMessage:".bose-productStockMessage--show",colorIndicators2020:".bose-productTile2020__colorIndicator",colorVariants:".bose-colorIndicator__color--variant",productDrawerContainer:".bose-productDrawer__container",productDrawerNumRes:".bose-productDrawer__numRes",productDrawerFilters:".bose-productDrawer__filters",productDrawerClear:".bose-productDrawer__clearButton",drawerLeftContainerLink:".bose-productDrawer__extraLeftContainer .bose-link",productImage:".bose-productTile2020__imageWrapper__image",defaultColorVariant:".bose-productTile2020__colorIndicator2020.bose-colorIndicator__color--default",productTile2020Info:".bose-productTile2020__info__wrapper-link",titleLink:".js-productTitle__link",imageWrapper:".bose-productTile2020__imageWrapper",priceSummary:".bose-productPriceSummary",imageWrapperLink:".js-imageWrapperLink",productStatus2020:".bose-productTile2020__info__productStatus",productContainer:".js-productStatusContainer",productList:".bose-productList",productReference:".bose-productReference"},h={hidden:"bose-productStockMessage--hide",show:"bose-productStockMessage--show",defaultColorVariant:"bose-colorIndicator__color--default",productStatusHide:"bose-productStatus--hide",productVariantStatus:'input[name="productStatus-variantCode"]'};return{init:a,selectors:g,classes:h}}(),$jq(document).ready(function(){Bose.ProductTile2016.init(),Bose.ProductTile2020.init()});var Bose=Bose||{};Bose.ProductDownloadForm=function(){function a(){l=$jq(p.product),m=$jq(p.category),Bose.Select.init(),n=$jq(p.form).data("products"),o=$jq(p.form).data("productDocuments"),b()}function b(){m.on("selectmenuchange",function(){c()}),l.on("selectmenuchange",function(){d()}),$jq(document).on("click",p.btn,i)}function c(){f(),g();var a=m.val();a&&e(a)&&h(a)}function d(){$jq(p.btn).addClass("-disabled"),g();var a=l.val();a&&e(a)&&$jq(p.btn).removeClass("-disabled")}function e(a){return"-1"!==a}function f(){l.empty(),l.append($jq("<option></option>").attr("value","-1").text("")),l.attr("disabled","disabled"),l.selectmenu("refresh"),$jq(p.btn).addClass("-disabled")}function g(){$jq(p.errorMessage).addClass(q.hidden),$jq(p.result).addClass(q.hidden),$jq(p.result).empty()}function h(a){for(var b=0;b<n.length;b++)if(a===n[b].categoryCode)for(var c=0;c<n[b].products.length;c++)l.append($jq("<option></option>").attr("value",n[b].products[c].value).text(n[b].products[c].label));l.prop("disabled",!1),l.selectmenu("refresh")}function i(){for(var a=0;a<o.length;a++)if(l.val()===o[a].value){var b=o[a].label;b&&""!==b?$jq.get(b,j):$jq(p.errorMessage).removeClass(q.hidden);break}}function j(a){$jq(p.result).html(a),k()}function k(){$jq(p.result).removeClass(q.hidden)}var l,m,n,o,p={form:".bose-productDownloadForm--form",category:'select[name="categorySelector"]',product:'select[name="productSelector"]',btn:".bose-productDownloadForm--button",result:".bose-productDownloadForm--result",errorMessage:".bose-productDownloadForm--errorMessage"},q={hidden:"bose-productDownloadForm--hidden"};return{init:a,_selectors:p,_classes:q}}(),$jq(document).ready(function(){Bose.ProductDownloadForm.init()}),$jq(document).ready(function(){Bose.ProductIssueList.init()});var Bose=Bose||{};Bose.ProductIssueList=function(){function a(){$jq(h.variantIssueSubmitButton).addClass(k.disabled).attr("disabled","disabled"),$jq(h.variantIssueRadioButton).prop("checked",!1),$jq(h.variantIssueMessage).val(""),$jq(h.produtIssueList).on("click",b),d(),$jq(h.variantIssueSubmitButton).on("click",e).on("mousedown",c)}function b(){j=!0,g()}function c(a){a.preventDefault()}function d(){$jq(h.variantIssueMessage).on("keyup blur",function(){var a=$jq(h.textArea),b=$jq(h.variantIssueMessage);void 0!==b.val()&&b.val().trim().length>0?(a.removeClass("bose-textArea--error js-errorValidate").addClass("bose-textArea--active"),i=!0,g()):(a.addClass("bose-textArea--error js-errorValidate").removeClass("bose-textArea--active"),i=!1,g())})}function e(){var a,b,c=$jq(h.variantButtonContainer),d=c.data("productName"),e=c.data("productCode"),g=c.data("serviceType"),k=c.data("upgradeService"),l=c.data("servicePayload"),m=c.data("warrantyStatus"),n=c.data("variantColour"),o=c.data("refProductCode"),p=$jq(h.variantIssueMessage).val(),q=Bose.WebStorage.getData("productVariantInfo","sessionStorage");$jq(h.variantIssueRadioButton).each(function(){var c=$jq(this);!0===c.prop("checked")&&(a=c.val(),b=c.parent().text().trim())}),f(e,h.variantIssueProductCode),f(d,h.variantIssueProductName),f(g,h.variantIssueServiceType),f(k,h.variantUpgradeSericeType),f(l,h.variantPricePromotionEngine),f(m,h.variantIssueWarrantyStatus),f(a,h.variantIssue),f(b,h.variantIssueDescription),f(p,h.variantProblemDescription),f(n,h.variantColourField),f(o,h.referenceProductCode),Bose.Forms.submitForm(this),i=!1,j=!1,Bose.DataLayer.setVariable("Product","inboundproductCode",e),Bose.DataLayer.setVariable("Product","issueCategory",b),Bose.DataLayer.setVariable("Product","serviceType",g),Bose.DataLayer.setVariable("Product","upgradeService",k),Bose.DataLayer.setVariable("Product","servicePayload",l),Bose.DataLayer.setVariable("Product","warrantyStatus",m),$jq(document).trigger("trackProductIssueList"),q&&(q=JSON.parse(q),q.serviceType=g,q.warrantyStatus=m,q.issueCategory=b,Bose.WebStorage.storeData("productVariantInfo",JSON.stringify(q),"sessionStorage"))}function f(a,b){a&&$jq(b).val(a)}function g(){j&&i?$jq(h.variantIssueSubmitButton).removeClass(k.disabled).removeAttr("disabled","disabled"):$jq(h.variantIssueSubmitButton).addClass(k.disabled).attr("disabled","disabled")}var h={variantIssueProductCode:".js-productCodeHiddenField",variantIssueProductName:".js-productNameHiddenField",variantColourField:".js-variantColourHiddenField",variantIssueServiceType:".js-serviceTypeHiddenField",variantUpgradeSericeType:".js-upgradeServiceTypeHiddenField",variantServicePayload:".js-servicePayloadHiddenField",variantIssueWarrantyStatus:".js-warrantyStatusHiddenField",variantIssue:".js-issueIdHiddenField",variantIssueDescription:".js-issueDescriptionHiddenField",variantProblemDescription:".js-problemDescriptionHiddenField",variantIssueSubmitButton:".bose-productIssueList__buttonLink",variantButtonContainer:".bose-productIssueList__buttonContainer",variantIssueRadioButton:".bose-productIssueList__radioButton",variantIssueMessage:"textarea[name=problemDescription]",textArea:".bose-textArea",issueDescriptionErrorMessage:".js-productIssueDescriptionError",produtIssueList:".bose-productIssueList__radioButton",referenceProductCode:".js-referenceProductCodeHiddenField"},i=!1,j=!1,k={disabled:"-disabled"};return{init:a,selectors:h,changeButtonStatus:g,inputDirtyVal:i,handleMouseDownEvent:c,issueSelectedVal:j,issueSelection:b,variantIssueData:e}}(),$jq(document).ready(function(){Bose.TroubleShooting.init()});var Bose=Bose||{};Bose.TroubleShooting=function(){function a(){c(),$jq(e.troubleShootSubmitButton).on("click",b),$jq(e.overlayLink).on("click",d)}function b(){Bose.Forms.submitForm($jq(e.troubleShootSubmitButton))}function c(){$jq(e.articleOpeningMandatory).data("articleMandate")&&$jq(e.troubleShootSubmitButton).addClass(f.disabled).attr("disabled","disabled")}function d(){$jq(e.troubleShootSubmitButton).removeClass(f.disabled).removeAttr("disabled","disabled")}var e={troubleShootSubmitButton:".js-troubleShootSubmitButton",articleOpeningMandatory:".js-articleOpeningMandatory",overlayLink:".troubleShooting .bose-link"},f={disabled:"-disabled"};return{init:a,handleRedirection:b,selectors:e,enableButton:d,disableButton:c}}(),$jq(document).ready(function(){$jq(".bose-serviceOrderConfirmation").length>0&&Bose.ServiceOrderConfirmation.init()});var Bose=Bose||{};Bose.ServiceOrderConfirmation=Bose.ServiceOrderConfirmation||{},Bose.ServiceOrderConfirmation=function(){function a(){var a=$jq(e.loader),f=$jq(e.fancyBoxOverlay);$jq.fancybox.open(a,{closeBtn:!1,minWidth:150,minHeight:120,wrapCSS:"checkoutFancybox",scrolling:"no",keys:{close:null},afterClose:function a(){f.hide()}}),f.show(),setTimeout(function(){$jq.fancybox.close(a)},6e3),d=$jq(e.accWidContainer).attr("href"),d&&$jq(e.registerBtn).on("click",c),window.onload=b}function b(){var a=Bose.CookieStore.get("isLoggedIn");void 0===Bose.UserData||a||(d=$jq(e.accWidContainer).attr("href"))&&$jq(e.newCreateAccBanner).removeClass("hide")}function c(){window.location.href=$jq(e.accWidContainer).attr("href")}var d,e={loader:"#serviceLoaderOverlay",fancyBoxOverlay:"#serviceCheckoutFancyboxOverlay",registerBtn:".js-registerButton",signUp:".js-show_signUp",accWidContainer:".js-data-registrationPageUrl",newCreateAccBanner:".bose-orderConfirmationMessage__signUpActionNew"};return{selectors:e,init:a}}();var Bose=Bose||{};Bose.ShippingMethod=function(){function a(){0!==$jq(e.shippingMethod).length&&$jq(document).on("click",e.shipping.changeStore,b)}function b(){d($jq(this).closest(e.shipping.option),!1,$jq(this).data("productPage"))}function c(){$jq("#storeId-hidden").val("")}function d(a,b,c){var d=Bose.DataLayer.Data.Product.selectedVariantCode;$jq(e.pickupShippingMethod).prop("checked",!0),Bose.StoreSelector.displayPopup(d,1,c,!1,!1)}var e={shippingMethod:".bose-shippingMethod",shipping:{container:".js-shippingMethodShipping",changeStore:".js-shippingMethodShipping-changeStore"},pickupShippingMethod:".js-shippingMethod-pickup",shipShippingMethod:".js-shippingMethod-shipping"};return $jq(document).on("click",e.shipShippingMethod,c),{init:a,_selectors:e}}(),$jq(document).ready(function(){Bose.ShippingMethod.init()});var Bose=Bose||{};Bose.productPreConfiguredOptions=function(){function a(){var a=$jq(e.preProductImageGallery),f=a.children(e.imageOptionsContainer),g=b(f);g.slidesToShow>0&&(f.slick(g),f.show(),f.on("breakpoint",function(){d(a,f)})),d(a,f),c()}function b(a){return{slidesToShow:1,slidesToScroll:1,lazyLoad:"ondemand",infinite:!0,touchThreshold:9,swipe:!0,arrows:!0,fade:!0,dots:!0,adaptiveHeight:!0,appendDots:a,nextArrow:'<button type="button" class="slick-next"></button>',prevArrow:'<button type="button" class="slick-prev"></button>',responsive:[{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,lazyLoad:"ondemand",infinite:!0,touchThreshold:9,swipe:!0,arrows:!1,fade:!0,dots:!0}}]}}function c(){Gridle.on("update",function(){Gridle.isActive("large")&&lazySizes.autoSizer.checkElems()})}function d(a,b){a.hasClass(f.caption)||b.children(e.slickDots).addClass(g.noCaptionClass)}var e={preProductImageGallery:".js-bose-productPreConfiguredOptions-slick",imageOptionsContainer:".bose-productPreConfiguredOptions__galleryItems",slickDots:".slick-dots"},f={caption:"js-imageGallery__hasCaption"},g={noCaptionClass:"-noCaption"};return{init:a,getSliderOptions:b,_selectors:e,_modifiers:g}}(),
$jq(document).ready(function(){Bose.productPreConfiguredOptions.init()});var Bose=Bose||{};Bose.colorSelectorSlider=Bose.colorSelectorSlider||{},Bose.colorSelectorSlider.slickNextElement=".slick-next",Bose.colorSelectorSlider.jqSelectorHiddenFieldCSD=".bose-cta input[name=customSelection]",Bose.colorSelectorSlider.slider=".bose-customColorSelectorSlider",Bose.colorSelectorSlider.selectors={slider:".bose-customColorSelectorSlider",dotListItem:".bose-customColorSelectorSliderDots li",dotListItemActive:".bose-customColorSelectorSliderDots li.slick-active",colorButton:".bose-customComponentColorGroup__colorButton",finishRadio:".radioForFinish",componentSlide:".bose-customComponent.slick-slide",componentSlideName:".bose-customComponent__name",slickActive:".slick-active",slickClone:".slick-cloned"},Bose.colorSelectorSlider.init=function(){Bose.colorSelectorSlider.setDefaultColorSelections(),$jq(this.selectors.finishRadio).click(Bose.colorSelectorSlider.selectFinish).enter(Bose.colorSelectorSlider.selectFinish),$jq(this.selectors.colorButton).click(Bose.colorSelectorSlider.selectColor).space(Bose.colorSelectorSlider.selectColor).enter(Bose.colorSelectorSlider.selectColor)},Bose.colorSelectorSlider.colorSelectionSlick=function(){$jq(Bose.colorSelectorSlider.slider).slick({dots:!0,respondTo:"slider",appendDots:".bose-customColorSelectorSliderDots",appendArrows:".bose-customColorSelectorSliderNav",slidesToShow:1,customPaging:Bose.colorSelectorSlider.setCustomSliderDots,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="'+Bose.Utils.getGraniteTranslation("Previous")+'" tabindex="0" role="button">'+Bose.Utils.getGraniteTranslation("Previous")+"</button>",nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="'+Bose.Utils.getGraniteTranslation("Next")+'" tabindex="0" role="button">'+Bose.Utils.getGraniteTranslation("Next")+"</button>",cssEase:"linear",infinite:!0,draggable:!1}),Bose.colorSelectorSlider.slick=$jq(this.selectors.slider).slick("getSlick"),$jq(this.selectors.slider).on("afterChange",function(){Bose.colorSelectorSlider._updateAriaAttributes(),Bose.colorSelectorSlider._updateColorButtonTabIndex()}),$jq("a.fancybox-close").focus(),Bose.colorSelectorSlider.resizeHandler(),Bose.colorSelectorSlider._updateColorButtonTabIndex(),Bose.colorSelectorSlider._updateAriaAttributes()},Bose.colorSelectorSlider._updateColorButtonTabIndex=function(){var a=this.slick.slickCurrentSlide(),b=this.slick.$slides.eq(a);this.slick.$slider.find(this.selectors.colorButton).attr("tabindex","-1"),b.find(this.selectors.colorButton).attr("tabindex","0")},Bose.colorSelectorSlider._updateAriaAttributes=function(){var a=this.slick.slickCurrentSlide(),b=this.slick.$slides.eq(a),c=$jq(this.selectors.dotListItem);b.attr("aria-expanded",!0),this.slick.$slides.not(this.selectors.slickActive).attr("aria-expanded",!1),c.not(this.selectors.slickActive).find("button").attr("aria-expanded","false"),$jq(this.selectors.dotListItemActive).find("button").attr("aria-expanded","true"),c.attr("aria-hidden","false")},Bose.colorSelectorSlider.setCustomSliderDots=function(a,b){var c=$jq(Bose.colorSelectorSlider.selectors.componentSlide).not(Bose.colorSelectorSlider.selectors.slickClone).eq(b),d=c.children(Bose.colorSelectorSlider.selectors.componentSlideName).text(),e="selections_"+c.attr("id");return'<button aria-controls="'+e+'" aria-describedby="'+e+'" aria-label="'+d+'" type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(b+1)+"</button>"},Bose.colorSelectorSlider.setDefaultColorSelections=function(){var a=$jq(Bose.colorSelectorSlider.jqSelectorHiddenFieldCSD).val();if(void 0!==a&&$jq(Bose.colorSelectorSlider.slider).length)for(var b=a.split("|"),c=2;c<b.length-1;c++){var d=b[c].split(";");if(d.length>3){var e={};e.selectedFinish=d[3].toUpperCase(),e.selectedComponent=d[1];var f="input[name="+e.selectedComponent+"][value="+e.selectedFinish+"]";$jq(f).prop("checked",!0),Bose.colorSelectorSlider.selectColorChip(e.selectedComponent,d[2]);var g=$jq("#"+e.selectedComponent+"_"+d[2]);$jq("#selectedColorLabelFor_"+e.selectedComponent).html(g.attr("title")),$jq("#selectedColorFor_"+e.selectedComponent).css("background-color",g.css("background-color"));var h=g.attr("colorfinish"),i="#radioButtonsFor_"+e.selectedComponent,j="#finishLabel_"+e.selectedComponent;void 0!==h&&-1===h.indexOf("|")?($jq(i).hide(),$jq(j).html(Bose.Utils.getGraniteTranslation(h))):($jq(j).html(""),$jq(i).show()),Bose.colorSelectorSlider.refreshChipsForFinish(e)}}},Bose.colorSelectorSlider.selectColorChip=function(a,b){$jq("div.colorsFor_"+a+" div").removeClass("showSelection"),$jq("div.colorsFor_"+a+" .bose-customComponentColorGroup__colorButton").attr("aria-checked","false"),$jq("#selDiv_"+a+"_"+b).addClass("showSelection").parent().attr("aria-checked","true")},Bose.colorSelectorSlider.validateComponents=function(a){var b=!0,c=void 0===a?$jq(Bose.customizableProduct.jqSelectorHiddenFieldCSD).val():a,d=$jq("#color_selection_data").data("value"),e=c.split("|");if(!c.match(/^(\d+\|\w+\|)(\d+;[a-zA-Z]{2};[a-zA-Z0-9]{3,4};([gG][lL]|[mM][tT])\|)+$/g))return!1;if(parseInt(e[0],10)===d.version&&e[1]===d.productVariantCode)for(var f,g=function a(c,d){if(b&&d.layer===parseInt(f[0],10)&&d.component===f[1]){var e="#"+f[1]+"_"+f[2],g=$jq(e);if(0===g.length)b=!1;else{-1===g.attr("colorfinish").indexOf(f[3])&&(b=!1)}}},h=2;h<e.length-1&&(f=e[h].split(";"),$jq.each(d.selection,g),b);h++);else b=!1;return b},Bose.colorSelectorSlider.selectColor=function(){var a=$jq(this),b=a.attr("title"),c=a.attr("id"),d=c.split("_"),e=d[0].toLowerCase(),f=d[1].toLowerCase(),g={};g.selectedComponent=e,g.selectedColor=f,g.selectedColorDesc=b,Bose.colorSelectorSlider.selectColorChip(e,f),$jq("#selectedColorLabelFor_"+e).html(b),$jq("#selectedColorFor_"+e).css("background-color",a.css("background-color"));var h=a.attr("colorfinish"),i=h.indexOf("|"),j="#radioButtonsFor_"+e,k="#finishLabel_"+e;if(-1===i){var l="input[name="+e+"][value="+h+"]";$jq(j).hide(),$jq(k).html(Bose.Utils.getGraniteTranslation(h)),g.selectedFinish=h.toUpperCase(),$jq(l).length>0&&$jq(l).click()}else $jq(k).html(""),$jq(j).show();Bose.colorSelectorSlider.refreshImageForFinish(g)},Bose.colorSelectorSlider.selectFinish=function(){var a=$jq(this),b={},c=a.attr("name").toLowerCase();b.selectedFinish=a.val().toUpperCase(),b.selectedComponent=c,Bose.colorSelectorSlider.refreshChipsForFinish(b),Bose.colorSelectorSlider.refreshImageForFinish(b)},Bose.colorSelectorSlider.refreshImageForFinish=function(a){for(var b=$jq("#color_selection_data").data("value"),c=$jq("#color_selection_data").data("component-part-grouping"),d=$jq(Bose.colorSelectorSlider.jqSelectorHiddenFieldCSD).val(),e=!1,f="",g=d.split("|"),h=2;h<g.length-1;h++){var i=g[h].split(";"),j=c[i[1]];if(i[1]===a.selectedComponent&&(a.selectedFinish&&i[3]!==a.selectedFinish&&(i[3]=a.selectedFinish,e=!0),a.selectedColor&&i[2]!==a.selectedColor&&(i[2]=a.selectedColor,e=!0)),-1===JSON.stringify(c).indexOf(i[1])&&(f=f+i[0]+";"+i[1]+";"+i[2]+";"+i[3]+"|"),void 0!==j){f=f+i[0]+";"+i[1]+";"+i[2]+";"+i[3]+"|";for(var k=j.split("|"),l=0;l<k.length;l++){var m=k[l],n=m.split("-");f=f+n[1]+";"+n[0]+";"+i[2]+";"+i[3]+"|"}}}e&&(f=b.version+"|"+b.productVariantCode+"|"+f,$jq(Bose.colorSelectorSlider.jqSelectorHiddenFieldCSD).val(f),Bose.colorSelectorSlider.validateComponents(f)&&(Bose.customizableProduct.setScene7Image(f),Bose.SocialMedia.setOptions({refreshShortURL:!0}),Bose.colorSelectorSlider.setOgImage()))},Bose.colorSelectorSlider.refreshChipsForFinish=function(a){var b="#selectedColorFor_"+a.selectedComponent,c=a.selectedFinish,d="-finish"+a.selectedFinish,e=$jq(".colorsFor_"+a.selectedComponent),f=e.find(".bose-customComponentColorGroup:not('.bose-customComponentColorGroup__anodized')").find(".bose-customComponentColorGroup__colorButton"),g=e.find(".bose-customComponentColorGroup.bose-customComponentColorGroup__anodized").find(".bose-customComponentColorGroup__colorButton");$jq(b).removeClass(function(a,b){return(b.match(/(^|\s)-finish\S+/g)||[]).join(" ")}).addClass(d),f.each(function(){-1!==$jq(this).attr("colorfinish").indexOf(c)&&$jq(this).removeClass(function(a,b){return(b.match(/(^|\s)-finish\S+/g)||[]).join(" ")}).addClass(d)}),g.addClass("-finishAD")},Bose.colorSelectorSlider.resizeHandler=function(){$jq(Bose.colorSelectorSlider.slider).hasClass("slick-initialized")&&$jq("li.slick-active Button").click(),$jq(".fancybox-outer").css("overflow-y","auto")},Bose.colorSelectorSlider.setOgImage=function(){if($jq(".bose-customizableProduct__image").length){var a=$jq(".bose-customizableProduct__image").attr("src");$jq('meta[property="og:image"]').attr("content",a)}},$jq(document).ready(function(){Bose.colorSelectorSlider.init()}),$jq(window).resize(function(){Bose.colorSelectorSlider.resizeHandler()});var Bose=Bose||{};Bose.ProductOverview=function(){function a(){$jq(c.categoryTile).length<=d&&$jq(c.loadMore).hide(),$jq(c.categoryTile).slice(0,d).show(),$jq(c.loadMore).on("click",b)}function b(a){a.preventDefault();var b=$jq(c.categoryTileHidden),e=$jq(c.buttonContainer);b.slice(0,d).show(),0===$jq(c.categoryTileHidden).length&&($jq(this).hide(),e.show())}var c={loadMore:".js-buttonLink__loadMoreProducts",categoryTile:".bose-categoryTile",categoryTileHidden:".bose-categoryTile:hidden",buttonContainer:".bose-productOverview__buttonContainer"},d=12;return{init:a,_selector:c}}(),$jq(document).ready(function(){Bose.ProductOverview.init()});var Bose=Bose||{};Bose.ShoppingCart=function(){function a(){Gridle.isActive("small")&&(e=$jq(g.footer),f=$jq(g.orderSummary),f.addClass(h.fixed+" "+h.fixedToBottom),$jq(document).on("click",g.toggleIcon,d),e.waypoint({handler:b,offset:"90%"}),$jq(g.reviewStep).waypoint({handler:c,offset:"bottom-in-view"}))}function b(a){"down"===a&&$jq(g.orderSummary).removeClass(h.fixed+" "+h.fixedToBottom)}function c(){$jq(g.orderSummary).addClass(h.fixed+" "+h.fixedToBottom)}function d(a){a.stopImmediatePropagation();var b=$jq(this),c=b.find(g.boseIcon),d=b.closest(g.orderSummary);d.hasClass(h.fixedToBottom)?(c.removeClass(h.iconUpWhite).addClass(h.iconDownWhite),d.removeClass(h.fixedToBottom+" "+h.animateDown).addClass(h.moveToTop)):(d.addClass(h.animateDown+" "+h.fixed+" "+h.fixedToBottom).removeClass(h.moveToTop),c.removeClass(h.iconDownWhite).addClass(h.iconUpWhite))}var e,f,g={orderSummary:".bose-shoppingCart",toggleIcon:".js-bose-toggleSummary",footer:".bose-footer",totalPriceSection:".js-bose-paymentTotalPrice",boseIcon:".bose-icon",reviewStep:"#step_review"},h={fixed:"-fixed",fixedToBottom:"-fixedToBottom",moveToTop:"-expandToTop",animateDown:"-animateDown",iconUpWhite:"bose-icon--carretUp -white",iconDownWhite:"bose-icon--carretDown -white"};return{init:a,_selectors:g,_classes:h}}(),$jq(document).ready(function(){Bose.ShoppingCart.init()});
var Bose=Bose||{};Bose.ArticleAppliesTo=Bose.ArticleAppliesTo||{},Bose.ArticleAppliesTo.init=function(){Bose.ArticleAppliesTo.showMoreButton=$jq(".bose-list__showmore"),Bose.ArticleAppliesTo.showMoreButton.on("click",Bose.ArticleAppliesTo.showItems)},Bose.ArticleAppliesTo.showItems=function(a){a.preventDefault();var b=$jq(this);b.hide(),b.parents(".bose-list--appliesToList").find(".bose-list__listitem--hidden").removeClass("bose-list__listitem--hidden")},$jq(document).ready(function(){Bose.ArticleAppliesTo.init()});
