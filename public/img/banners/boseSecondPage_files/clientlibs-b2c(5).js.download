var Bose=Bose||{};Bose.HotSpot=function(){function a(){0!==$jq(A.hotSpotContainer).length&&($jq(A.hotSpotContainer).each(function(){var a=$jq(this);b(a),c(a),a.find(A.dotButton).on("click",function(){Gridle.isActive("small")&&s($jq(this))}),a.find(A.pulseButton).on("click",function(){Gridle.isActive("small")||q($jq(this).closest(A.hotSpot),C)}),a.find(A.pulseButton).on("keypress",function(a){var b=a.which;Gridle.isActive("small")||13!==b&&32!==b||q($jq(this).closest(A.hotSpot),C)}),a.find(A.imageContainer).length>1?g(a,a.find(A.imageContainer)):m(a)}),Gridle.on("update",function(){$jq(A.hotSpotContainer).each(function(){f($jq(this))})}),$jq(window).resize(function(){clearTimeout(z),z=setTimeout(function(){$jq(A.hotSpotContainer).each(function(){e($jq(this))})},H)}))}function b(a){a.hammer().off("swipeleft swiperight"),Gridle.isActive("small")&&a.hammer().on("swipeleft swiperight",d)}function c(a){if(!Gridle.isActive("small"))return a.find(A.pulseButton).attr("tabindex",0),void a.find(A.dotButton).removeAttr("tabindex");a.find(A.dotButton).attr("tabindex",0),a.find(A.pulseButton).removeAttr("tabindex")}function d(a){var b=$jq(this),c=b.find(A.activeDot+" "+A.dotButton).data("tabindex"),d=c;"swipeleft"===a.type?d++:d--,b.find(".bose-hotSpotContainer__slider__dotButton[data-tabindex="+d+"]").trigger("click")}function e(a){if(!Gridle.isActive("small")){var b=a.find(A.activeHotSpot);r(a,b,b.data("tabindex"),0),a.find(A.pulseButton).each(function(){o($jq(this).closest(A.hotSpot))})}}function f(a){a.find(A.pulseButton).show(),a.find(A.slidingText).removeClass(B.active),b(a),c(a),Gridle.isActive("small")?(a.find(A.buttonContainer).show(),a.find(A.textBox).css("width","auto"),a.find(A.dotButton).first().trigger("click")):(a.find(A.buttonContainer).hide(),a.find(A.activeDot).removeClass(B.active),e(a))}function g(a,b){a.waypoint({handler:function c(){h(a,b)},triggerOnce:!0,offset:"120%"})}function h(a,b){var c=0;i(a),b.each(function(){var d=k(this);""!==d&&$jq(this).attr("src",d),n(this,function(){++c===b.length-1&&(j(a),appear({elements:function b(){return a},appear:function c(){l(a,b.filter(A.animationImage))},reappear:!1}))})})}function i(a){a.find(A.loadingIcon).show()}function j(a){a.find(A.loadingIcon).hide()}function k(a){var b=$jq(a);if(void 0===a||void 0===b.data("srcset"))return"";for(var c,d,e,f=b.data("srcset").split(", ").reverse(),g=0;g<f.length;g++){if(c=f[g].split(" ")[0],d=f[g].split(" ")[1],0===g&&(e=c),b.width()>=parseInt(d.substring(0,d.length-1),10))return e;e=c}return c}function l(a,b){var c,d=b.length-1,e=0;$jq(b[d]).removeClass(B.activeImage),0===d?($jq(b[e]).addClass(B.activeImage),m(a)):c=setInterval(function(){if(e===d)return clearInterval(c),void m(a);$jq(b[e]).removeClass(B.activeImage),e++,$jq(b[e]).addClass(B.activeImage)},G)}function m(a){a.find(A.hotSpotsContainer).show(),Gridle.isActive("small")&&(a.find(A.buttonContainer).show(),a.find(A.dotButton).first().trigger("click"))}function n(a,b){var c,d=$jq(a);if(a.complete)return void b(a);c=function e(){d.off("load error",c),b(a)},d.on("load error",c)}function o(a){var b,c=a.closest(A.hotSpot).data("tabindex"),d=a.closest(A.hotSpotContainer),e=d.find(".bose-hotSpotContainer__textContainer__hotSpot[data-tabindex="+c+"]"),f=e.find(A.slidingText),g=f.find(A.textBox),h=g.data("width");g.css("width",h),b=p(a,e),f.css("top",b.top),f.css("left",b.left)}function p(a,b){var c,d,e=b.find(A.slidingText),f=e.data("position"),g=a.find(A.pulseButton),h=g.position(),i=h.top,j=h.left,k=e.find(A.textBox),l=k.height(),m=k.width();switch(f){case"upLeft":c=i-l-E+F,d=j-m+E+F;break;case"upRight":c=i-l-E+F,d=j+E;break;case"downLeft":c=i+D+F,d=j-m+E+F;break;case"downRight":c=i+D+F,d=j+E;break;case"leftUp":c=i-l+E+F,d=j-m-E+F;break;case"leftDown":c=i+E,d=j-m-E+F;break;case"rightUp":c=i-l+E,d=j+D+F;break;case"rightDown":default:c=i+E,d=j+D+F}return{top:c,left:d}}function q(a,b){var c=a.closest(A.hotSpotContainer),d=c.find(A.activeHotSpot),e=a.find(A.icons),f=a.closest(A.hotSpot).data("tabindex"),g=d.data("tabindex"),h=a.closest(A.hotSpotContainer).find(".bose-hotSpotContainer__textContainer__hotSpot[data-tabindex="+f+"]"),i=h.find(A.slidingText),j=c.find(".js-hotSpot-highlightedImage[data-tabindex="+f+"]");h.hasClass(B.slidingTextInitialized)||(o(a),h.addClass(B.slidingTextInitialized)),r(c,d,g,b),a.is(d)||(a.addClass(B.activeHotSpot),v(j),y(a),t(i,f,b),e.addClass(B.active),a.find(A.pulseButton).attr("aria-expanded",!0),$jq(document).trigger("analyticsHotspot",["open",f,a.closest(A.hotSpot)])),a.is(d)&&$jq(document).trigger("analyticsHotspot",["close",f,d.closest(A.hotSpot)])}function r(a,b,c,d){var e=b.closest(A.hotSpotContainer).find(".bose-hotSpotContainer__textContainer__hotSpot[data-tabindex="+c+"]"),f=e.find(A.slidingText),g=a.find(A.highlightedImage+A.activeImage),h=b.find(A.icons);b.length>0&&(b.removeClass(B.activeHotSpot),x(b),u(f,c,d),h.removeClass(B.active),b.find(A.pulseButton).attr("aria-expanded",!1)),w(g)}function s(a){var b=a.data("tabindex"),c=a.closest(A.hotSpotContainer),d=c.find(".bose-hotSpotContainer__textContainer__hotSpot[data-tabindex="+b+"]"),e=c.find(".bose-hotSpotContainer__hotSpotContainer__hotSpot[data-tabindex="+b+"]"),f=c.find(".js-hotSpot-highlightedImage[data-tabindex="+b+"]");w(c.find(A.highlightedImage+A.activeImage)),c.find(A.slidingText).removeClass(B.active),c.find(A.pulseButton).hide(),a.closest(A.buttonContainer).find(A.activeDot).removeClass(B.active),a.closest(A.dot).addClass(B.active),d.find(A.slidingText).addClass(B.active),e.find(A.pulseButton).show(),void 0!==f.attr("src")&&v(f)}function t(a,b,c){var d=a.data("position"),e=a.find(A.offsetBox),f=a.closest(A.hotSpotContainer).width()*e.data("offset")/100,g=a.closest(A.hotSpotContainer).find(".bose-hotSpotContainer__hotSpotContainer__hotSpot[data-tabindex="+b+"]"),h=a.closest(A.hotSpotContainer).find(".bose-hotSpotContainer__textContainer__hotSpot[data-tabindex="+b+"]"),i=p(g,h);switch(a.stop(),e.stop(),a.addClass(B.active),d){case"upLeft":case"upRight":a.animate({top:i.top-f},c),e.animate({height:f},c);break;case"downLeft":case"downRight":e.animate({height:f},c);break;case"leftUp":case"leftDown":a.animate({left:i.left-f},c),e.animate({width:f},c);break;case"rightUp":case"rightDown":default:e.animate({width:f},c)}}function u(a,b,c){var d=a.data("position"),e=a.find(A.offsetBox),f=a.closest(A.hotSpotContainer).find(".bose-hotSpotContainer__hotSpotContainer__hotSpot[data-tabindex="+b+"]"),g=a.closest(A.hotSpotContainer).find(".bose-hotSpotContainer__textContainer__hotSpot[data-tabindex="+b+"]"),h=p(f,g);switch(a.stop(),e.stop(),d){case"upLeft":case"upRight":a.animate({top:h.top},c),e.animate({height:0},c,function(){a.removeClass(B.active)});break;case"downLeft":case"downRight":e.animate({height:0},c,function(){a.removeClass(B.active)});break;case"leftUp":case"leftDown":a.animate({left:h.left},c),e.animate({width:0},c,function(){a.removeClass(B.active)});break;case"rightUp":case"rightDown":default:e.animate({width:0},c,function(){a.removeClass(B.active)})}}function v(a){a.addClass(B.activeImage)}function w(a){a.removeClass(B.activeImage)}function x(a){var b=a.find(A.hotSpotPulse);b.first().addClass(B.pulse1),b.last().addClass(B.pulse2)}function y(a){var b=a.find(A.hotSpotPulse);b.first().removeClass(B.pulse1),b.last().removeClass(B.pulse2)}var z,A={hotSpotContainer:".bose-hotSpotContainer",hotSpotsContainer:".bose-hotSpotContainer__hotSpotContainer",buttonContainer:".bose-hotSpotContainer__buttonContainer",loadingIcon:".bose-hotSpotContainer__imageContainer__loadingIcon",pulseButton:".bose-hotSpot__pulseButton",imageContainer:".bose-hotSpotContainer__imageContainer img",animationImage:".js-hotSpot-animationImage",hotSpotPulse:".bose-hotSpot__pulseButton__pulse",slidingTextContainer:".bose-hotSpotContainer__textContainer",slidingText:".bose-hotSpot__slidingText",offsetBox:".bose-hotSpot__slidingText__offsetBox",activeHotSpot:".js-hotSpot-active",activeImage:".js-hotSpot-activeImage",hotSpot:".bose-hotSpot",textBox:".bose-hotSpot__slidingText__textBox",icons:".bose-hotSpot__pulseButton__icon",dot:".bose-hotSpotContainer__slider__dots",activeDot:".bose-hotSpotContainer__slider__dots.-active",dotButton:".bose-hotSpotContainer__slider__dotButton",highlightedImage:".js-hotSpot-highlightedImage"},B={activeImage:"js-hotSpot-activeImage -active",pulse1:"-pulse1",pulse2:"-pulse2",activeHotSpot:"js-hotSpot-active",active:"-active",slidingTextInitialized:"js-hotSpot-slidingTextInitialized"},C=800,D=30,E=D/2,F=2,G=100,H=250;return{init:a,_selectors:A,_classes:B}}();
$jq(document).ready(function(){Bose.HotSpot.init()});
